import{_ as i}from"./updocker-a84c76ab.js";import{_ as o,M as r,X as l,P as e,$ as a,a5 as t,ai as s,G as p}from"./framework-1f2fdbd0.js";const c={},d=s(`<h1 id="use-docker" tabindex="-1"><a class="header-anchor" href="#use-docker" aria-hidden="true">#</a> Use Docker</h1><p>See the log output for the admin&#39;s info:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> alist ./alist admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="release-version" tabindex="-1"><a class="header-anchor" href="#release-version" aria-hidden="true">#</a> Release version</h3><h4 id="docker-cli" tabindex="-1"><a class="header-anchor" href="#docker-cli" aria-hidden="true">#</a> docker-cli</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> /etc/alist:/opt/alist/data <span class="token parameter variable">-p</span> <span class="token number">5244</span>:5244 <span class="token parameter variable">-e</span> <span class="token assign-left variable">PUID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">PGID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">UMASK</span><span class="token operator">=</span>022 <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;alist&quot;</span> xhofe/alist:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a> docker-compose</h4><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">alist</span><span class="token punctuation">:</span>
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
        <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;/etc/alist:/opt/alist/data&#39;</span>
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;5244:5244&#39;</span>
        <span class="token key atrule">environment</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> PUID=0
            <span class="token punctuation">-</span> PGID=0
            <span class="token punctuation">-</span> UMASK=022
        <span class="token key atrule">container_name</span><span class="token punctuation">:</span> alist
        <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&#39;xhofe/alist:latest&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="offline-download-with-aria2" tabindex="-1"><a class="header-anchor" href="#offline-download-with-aria2" aria-hidden="true">#</a> Offline download with aria2</h3>`,9),u={href:"https://hub.docker.com/r/xhofe/alist-aria2",target:"_blank",rel:"noopener noreferrer"},k=s(`<h3 id="dev-version" tabindex="-1"><a class="header-anchor" href="#dev-version" aria-hidden="true">#</a> Dev version</h3><p>Just for amd64/arm64. Not recommended, this may can&#39;t work properly.</p><h4 id="docker-cli-1" tabindex="-1"><a class="header-anchor" href="#docker-cli-1" aria-hidden="true">#</a> docker-cli</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> /etc/alist:/opt/alist/data <span class="token parameter variable">-p</span> <span class="token number">5244</span>:5244 <span class="token parameter variable">-e</span> <span class="token assign-left variable">PUID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">PGID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">UMASK</span><span class="token operator">=</span>022 <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;alist&quot;</span> xhofe/alist:main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="docker-compose-1" tabindex="-1"><a class="header-anchor" href="#docker-compose-1" aria-hidden="true">#</a> docker-compose</h4><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">alist</span><span class="token punctuation">:</span>
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
        <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;/etc/alist:/opt/alist/data&#39;</span>
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;5244:5244&#39;</span>
        <span class="token key atrule">environment</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> PUID=0
            <span class="token punctuation">-</span> PGID=0
            <span class="token punctuation">-</span> UMASK=022
        <span class="token key atrule">container_name</span><span class="token punctuation">:</span> alist
        <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&#39;xhofe/alist:main&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="specify-version" tabindex="-1"><a class="header-anchor" href="#specify-version" aria-hidden="true">#</a> Specify version</h3>`,7),h={href:"https://hub.docker.com/r/xhofe/alist",target:"_blank",rel:"noopener noreferrer"},m=s(`<h3 id="user-group-identifiers" tabindex="-1"><a class="header-anchor" href="#user-group-identifiers" aria-hidden="true">#</a> User / Group Identifiers</h3><p>When using volumes (<code>-v</code> flags) permissions issues can arise between the host OS and the container, we avoid this issue by allowing you to specify the user <code>PUID</code> and group <code>PGID</code>.</p><p>Ensure any volume directories on the host are owned by the same user you specify and any permissions issues will vanish like magic.</p><p>In this instance <code>PUID=1000</code> and <code>PGID=1000</code>, to find yours use <code>id user</code> as below:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  $ <span class="token function">id</span> username
    <span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>dockeruser<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>dockergroup<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>dockergroup<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="additional-notes-about-the-offline-download-feature" tabindex="-1"><a class="header-anchor" href="#additional-notes-about-the-offline-download-feature" aria-hidden="true">#</a> Additional notes about the offline download feature</h3><p>If the image is not pulled using the &#39;&#39;&#39;docker pull --platform&#39;&#39;&#39; parameter, docker may pull the 32-bit image on the 64-bit operating system, which may cause the offline download function to be unavailable even under normal configuration.</p><p>When an error occurs, you will see a similar error log in Alist&#39;s log file.</p><p><code>ERRO[2022-11-20 12:05:19] error [unaligned 64-bit atomic operation] while run task [download http://pic.rmb.bdstatic.com/bjh/34ee946f7a74435a167ca4351d723374.png to [/ftp](/)]</code></p><p>Solution, if the CPU architecture is 64-bit, try to manually pull the 64-bit docker image, rebuild the container, and try again.</p><p>If the CPU architecture is 32-bit, there is currently no solution available.</p><h3 id="how-to-update-docker-installation" tabindex="-1"><a class="header-anchor" href="#how-to-update-docker-installation" aria-hidden="true">#</a> How to update Docker installation?</h3><details class="hint-container details"><summary>docker-cli</summary><ol><li>docker ps -a #View the container (find the ID of the Alist container)</li><li>docker stop ID #Stop Alist running, otherwise it cannot be deleted (this time the ID of the Alist container is d429749a6e69, it is different for each installation)</li><li>docker rm ID #Delete the Alist container (the data is still there as long as you don&#39;t delete it manually)</li><li>docker pull xhofe/alist:latest</li><li><a href="#docker-cli">Enter the installation command and click to view</a></li><li>The update is complete, go and have a look.. It&#39;s that simple</li></ol><p><strong>There is a missing step in the picture, it is step 4 in the tutorial....remember to execute</strong><img src="`+i+'" alt="docker"></p></details><details class="hint-container details"><summary>docker-compose</summary><ol><li>docker-compose pull</li><li>docker-compose up -d</li></ol></details><p>Q: My version is v3.x.x and I cannot upgrade to the latest version. docker pull xhofe/alist:latest does not work to pull the latest version. After changing to docker-compose, it is still version 3.x.x</p><p>A: The reason is that your docker has set up a mirror, and the latest version cannot be updated from the mirror, so modify /etc/docker/daemon.json and delete &quot;registry-mirrors&quot;: [&quot;mirror accelerator address&quot;]</p>',16);function v(b,f){const n=p("ExternalLinkIcon");return r(),l("div",null,[d,e("p",null,[a("If you want to use aria2 to offline download, we recommend you to use this "),e("a",u,[a("image"),t(n)]),a(", which carries a pre-installed aria2.")]),k,e("p",null,[a("See "),e("a",h,[a("https://hub.docker.com/r/xhofe/alist"),t(n)]),a(" for details")]),m])}const x=o(c,[["render",v],["__file","docker.html.vue"]]);export{x as default};
