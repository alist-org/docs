import{a as Wo}from"./commonjsHelpers-87174ba5.js";function Xo(Hr,ji){for(var Ee=0;Ee<ji.length;Ee++){const At=ji[Ee];if(typeof At!="string"&&!Array.isArray(At)){for(const x in At)if(x!=="default"&&!(x in Hr)){const w=Object.getOwnPropertyDescriptor(At,x);w&&Object.defineProperty(Hr,x,w.get?w:{enumerable:!0,get:()=>At[x]})}}}return Object.freeze(Object.defineProperty(Hr,Symbol.toStringTag,{value:"Module"}))}var Bi={},Qo={get exports(){return Bi},set exports(Hr){Bi=Hr}};(function(Hr,ji){(function(Ee,At){Hr.exports=At()})(window,function(){return function(Ee){var At={};function x(w){if(At[w])return At[w].exports;var b=At[w]={i:w,l:!1,exports:{}};return Ee[w].call(b.exports,b,b.exports,x),b.l=!0,b.exports}return x.m=Ee,x.c=At,x.d=function(w,b,h){x.o(w,b)||Object.defineProperty(w,b,{enumerable:!0,get:h})},x.r=function(w){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},x.t=function(w,b){if(1&b&&(w=x(w)),8&b||4&b&&typeof w=="object"&&w&&w.__esModule)return w;var h=Object.create(null);if(x.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:w}),2&b&&typeof w!="string")for(var c in w)x.d(h,c,function(n){return w[n]}.bind(null,c));return h},x.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return x.d(b,"a",b),b},x.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},x.p="/dist/",x(x.s=127)}([function(Ee,At,x){function w(c){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(c)}function b(c,n){for(var d=0;d<n.length;d++){var t=n[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,(r=t.key,f=void 0,f=function(o,g){if(w(o)!=="object"||o===null)return o;var v=o[Symbol.toPrimitive];if(v!==void 0){var P=v.call(o,g||"default");if(w(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(o)}(r,"string"),w(f)==="symbol"?f:String(f)),t)}var r,f}var h=new(function(){function c(){(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")})(this,c),this.init()}var n,d;return n=c,(d=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.PROXY_SERVER_URL="proxyServerURL",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",SERVICE_LOCATION_PRIORITY:"SERVICE-LOCATION-PRIORITY"}}}])&&b(n.prototype,d),Object.defineProperty(n,"prototype",{writable:!1}),c}());At.a=h},function(Ee,At,x){function w(c){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(c)}function b(c,n){for(var d=0;d<n.length;d++){var t=n[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,(r=t.key,f=void 0,f=function(o,g){if(w(o)!=="object"||o===null)return o;var v=o[Symbol.toPrimitive];if(v!==void 0){var P=v.call(o,g||"default");if(w(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(o)}(r,"string"),w(f)==="symbol"?f:String(f)),t)}var r,f}var h=new(function(){function c(){(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")})(this,c),this.init()}var n,d;return n=c,(d=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&b(n.prototype,d),Object.defineProperty(n,"prototype",{writable:!1}),c}());At.a=h},function(Ee,At,x){function w(P){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(P)}function b(P,B){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,D){return H.__proto__=D,H})(P,B)}function h(P){var B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var H,D=n(P);if(B){var y=n(this).constructor;H=Reflect.construct(D,arguments,y)}else H=D.apply(this,arguments);return c(this,H)}}function c(P,B){if(B&&(w(B)==="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}(P)}function n(P){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)})(P)}function d(P){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(P)}function t(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")}function r(P,B){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,D){return H.__proto__=D,H})(P,B)}function f(P){var B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var H,D=g(P);if(B){var y=g(this).constructor;H=Reflect.construct(D,arguments,y)}else H=D.apply(this,arguments);return o(this,H)}}function o(P,B){if(B&&(d(B)==="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}(P)}function g(P){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)})(P)}var v=new(function(P){(function(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),S&&r(y,S)})(D,P);var B,H=f(D);function D(){return t(this,D),H.apply(this,arguments)}return B=D,Object.defineProperty(B,"prototype",{writable:!1}),B}(function(P){(function(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),S&&b(y,S)})(D,P);var B,H=h(D);function D(){var y;return function(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}(this,D),(y=H.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",y.BUFFERING_COMPLETED="bufferingCompleted",y.BUFFER_CLEARED="bufferCleared",y.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",y.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",y.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",y.CURRENT_TRACK_CHANGED="currentTrackChanged",y.DATA_UPDATE_COMPLETED="dataUpdateCompleted",y.INBAND_EVENTS="inbandEvents",y.INITIAL_STREAM_SWITCH="initialStreamSwitch",y.INIT_FRAGMENT_LOADED="initFragmentLoaded",y.INIT_FRAGMENT_NEEDED="initFragmentNeeded",y.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",y.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",y.LOADING_COMPLETED="loadingCompleted",y.LOADING_PROGRESS="loadingProgress",y.LOADING_DATA_PROGRESS="loadingDataProgress",y.LOADING_ABANDONED="loadingAborted",y.MANIFEST_UPDATED="manifestUpdated",y.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",y.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",y.QUOTA_EXCEEDED="quotaExceeded",y.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",y.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",y.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",y.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",y.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",y.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",y.SOURCE_BUFFER_ERROR="sourceBufferError",y.STREAMS_COMPOSED="streamsComposed",y.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",y.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",y.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",y.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",y.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",y.URL_RESOLUTION_FAILED="urlResolutionFailed",y.VIDEO_CHUNK_RECEIVED="videoChunkReceived",y.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",y.XLINK_ELEMENT_LOADED="xlinkElementLoaded",y.XLINK_READY="xlinkReady",y.SEEK_TARGET="seekTarget",y.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",y.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",y.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",y.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",y.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",y}return B=D,Object.defineProperty(B,"prototype",{writable:!1}),B}(x(18).a)));At.a=v},function(Ee,At,x){var w=function(){var b,h=[],c={},n={};function d(o,g){for(var v in h){var P=h[v];if(P.context===o&&P.name===g)return P.instance}return null}function t(o,g){return g[o]}function r(o,g,v){o in v&&(v[o]=g)}function f(o,g,v){var P,B=o.__dashjs_factory_name,H=g[B];if(H){var D=H.instance;if(!H.override)return D.apply({context:g,factory:b},v);for(var y in P=o.apply({context:g},v),D=D.apply({context:g,factory:b,parent:P},v))P.hasOwnProperty(y)&&(P[y]=D[y])}else P=o.apply({context:g},v);return P.getClassName=function(){return B},P}return b={extend:function(o,g,v,P){!P[o]&&g&&(P[o]={instance:g,override:v})},getSingletonInstance:d,setSingletonInstance:function(o,g,v){for(var P in h){var B=h[P];if(B.context===o&&B.name===g)return void(h[P].instance=v)}h.push({name:g,context:o,instance:v})},deleteSingletonInstances:function(o){h=h.filter(function(g){return g.context!==o})},getSingletonFactory:function(o){var g=t(o.__dashjs_factory_name,c);return g||(g=function(v){var P;return v===void 0&&(v={}),{getInstance:function(){return P||(P=d(v,o.__dashjs_factory_name)),P||(P=f(o,v,arguments),h.push({name:o.__dashjs_factory_name,context:v,instance:P})),P}}},c[o.__dashjs_factory_name]=g),g},getSingletonFactoryByName:function(o){return t(o,c)},updateSingletonFactory:function(o,g){r(o,g,c)},getClassFactory:function(o){var g=t(o.__dashjs_factory_name,n);return g||(g=function(v){return v===void 0&&(v={}),{create:function(){return f(o,v,arguments)}}},n[o.__dashjs_factory_name]=g),g},getClassFactoryByName:function(o){return t(o,n)},updateClassFactory:function(o,g){r(o,g,n)}}}();At.a=w},function(Ee,At,x){function w(t){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function b(t,r){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,o){return f.__proto__=o,f})(t,r)}function h(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,o=n(t);if(r){var g=n(this).constructor;f=Reflect.construct(o,arguments,g)}else f=o.apply(this,arguments);return c(this,f)}}function c(t,r){if(r&&(w(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(t)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var d=new(function(t){(function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),v&&b(g,v)})(o,t);var r,f=h(o);function o(){var g;return function(v,P){if(!(v instanceof P))throw new TypeError("Cannot call a class as a function")}(this,o),(g=f.call(this)).AST_IN_FUTURE="astInFuture",g.BUFFER_EMPTY="bufferStalled",g.BUFFER_LOADED="bufferLoaded",g.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",g.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",g.DYNAMIC_TO_STATIC="dynamicToStatic",g.ERROR="error",g.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",g.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",g.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",g.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",g.LOG="log",g.MANIFEST_LOADED="manifestLoaded",g.METRICS_CHANGED="metricsChanged",g.METRIC_CHANGED="metricChanged",g.METRIC_ADDED="metricAdded",g.METRIC_UPDATED="metricUpdated",g.PERIOD_SWITCH_STARTED="periodSwitchStarted",g.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",g.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",g.QUALITY_CHANGE_RENDERED="qualityChangeRendered",g.TRACK_CHANGE_RENDERED="trackChangeRendered",g.STREAM_INITIALIZING="streamInitializing",g.STREAM_UPDATED="streamUpdated",g.STREAM_ACTIVATED="streamActivated",g.STREAM_DEACTIVATED="streamDeactivated",g.STREAM_INITIALIZED="streamInitialized",g.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",g.TEXT_TRACKS_ADDED="allTextTracksAdded",g.TEXT_TRACK_ADDED="textTrackAdded",g.TTML_PARSED="ttmlParsed",g.TTML_TO_PARSE="ttmlToParse",g.CAPTION_RENDERED="captionRendered",g.CAPTION_CONTAINER_RESIZE="captionContainerResize",g.CAN_PLAY="canPlay",g.CAN_PLAY_THROUGH="canPlayThrough",g.PLAYBACK_ENDED="playbackEnded",g.PLAYBACK_ERROR="playbackError",g.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",g.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",g.PLAYBACK_LOADED_DATA="playbackLoadedData",g.PLAYBACK_PAUSED="playbackPaused",g.PLAYBACK_PLAYING="playbackPlaying",g.PLAYBACK_PROGRESS="playbackProgress",g.PLAYBACK_RATE_CHANGED="playbackRateChanged",g.PLAYBACK_SEEKED="playbackSeeked",g.PLAYBACK_SEEKING="playbackSeeking",g.PLAYBACK_STALLED="playbackStalled",g.PLAYBACK_STARTED="playbackStarted",g.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",g.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",g.PLAYBACK_WAITING="playbackWaiting",g.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",g.EVENT_MODE_ON_START="eventModeOnStart",g.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",g.CONFORMANCE_VIOLATION="conformanceViolation",g.REPRESENTATION_SWITCH="representationSwitch",g.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",g.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",g}return r=o,Object.defineProperty(r,"prototype",{writable:!1}),r}(x(18).a));At.a=d},function(Ee,At,x){function w(t){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function b(t,r){for(var f=0;f<r.length;f++){var o=r[f];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(g=o.key,v=void 0,v=function(P,B){if(w(P)!=="object"||P===null)return P;var H=P[Symbol.toPrimitive];if(H!==void 0){var D=H.call(P,B||"default");if(w(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(P)}(g,"string"),w(v)==="symbol"?v:String(v)),o)}var g,v}function h(t,r,f){return r&&b(t.prototype,r),f&&b(t,f),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}x.d(At,"a",function(){return n}),x.d(At,"b",function(){return d});var n=h(function t(){c(this,t),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null}),d=h(function t(){c(this,t),this.s=null,this.d=null,this.b=[]});n.GET="GET",n.HEAD="HEAD",n.MPD_TYPE="MPD",n.XLINK_EXPANSION_TYPE="XLinkExpansion",n.INIT_SEGMENT_TYPE="InitializationSegment",n.INDEX_SEGMENT_TYPE="IndexSegment",n.MEDIA_SEGMENT_TYPE="MediaSegment",n.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",n.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",n.DVB_REPORTING_TYPE="DVBReporting",n.LICENSE="license",n.CONTENT_STEERING_TYPE="ContentSteering",n.OTHER_TYPE="other"},function(Ee,At,x){var w=x(7),b=x(2),h=x(3),c=1,n=2,d=3,t=4,r=5;function f(g){g=g||{};var v,P,B,H,D=this.context,y=Object(w.a)(D).getInstance(),S=g.settings,T=[];function I(X){return X&&X.bind?X.bind(window.console):window.console.log.bind(window.console)}function L(){for(var X=arguments.length,z=new Array(X),vt=0;vt<X;vt++)z[vt]=arguments[vt];at.apply(void 0,[c,this].concat(z))}function J(){for(var X=arguments.length,z=new Array(X),vt=0;vt<X;vt++)z[vt]=arguments[vt];at.apply(void 0,[n,this].concat(z))}function nt(){for(var X=arguments.length,z=new Array(X),vt=0;vt<X;vt++)z[vt]=arguments[vt];at.apply(void 0,[d,this].concat(z))}function j(){for(var X=arguments.length,z=new Array(X),vt=0;vt<X;vt++)z[vt]=arguments[vt];at.apply(void 0,[t,this].concat(z))}function O(){for(var X=arguments.length,z=new Array(X),vt=0;vt<X;vt++)z[vt]=arguments[vt];at.apply(void 0,[r,this].concat(z))}function at(X,z){var vt="",Mt=null;P&&(Mt=new Date().getTime(),vt+="["+(Mt-H)+"]"),B&&z&&z.getClassName&&(vt+="["+z.getClassName()+"]",z.getType&&(vt+="["+z.getType()+"]")),vt.length>0&&(vt+=" ");for(var Pt=arguments.length,ge=new Array(Pt>2?Pt-2:0),Q=2;Q<Pt;Q++)ge[Q-2]=arguments[Q];Array.apply(null,ge).forEach(function(ft){vt+=ft+" "}),T[X]&&S.get().debug.logLevel>=X&&T[X](vt),S&&S.get().debug.dispatchEvent&&y.trigger(b.a.LOG,{message:vt,level:X})}return v={getLogger:function(X){return{fatal:L.bind(X),error:J.bind(X),warn:nt.bind(X),info:j.bind(X),debug:O.bind(X)}},setLogTimestampVisible:function(X){P=X},setCalleeNameVisible:function(X){B=X}},P=!0,B=!0,H=new Date().getTime(),typeof window<"u"&&window.console&&(T[c]=I(window.console.error),T[n]=I(window.console.error),T[d]=I(window.console.warn),T[t]=I(window.console.info),T[r]=I(window.console.debug)),v}f.__dashjs_factory_name="Debug";var o=h.a.getSingletonFactory(f);o.LOG_LEVEL_NONE=0,o.LOG_LEVEL_FATAL=c,o.LOG_LEVEL_ERROR=n,o.LOG_LEVEL_WARNING=d,o.LOG_LEVEL_INFO=t,o.LOG_LEVEL_DEBUG=r,h.a.updateSingletonFactory(f.__dashjs_factory_name,o),At.a=o},function(Ee,At,x){var w=x(3),b=x(4);function h(){var n={};function d(t,r,f){var o=-1;return n[t]&&n[t].some(function(g,v){if(g&&g.callback===r&&(!f||f===g.scope))return o=v,!0}),o}return{on:function(t,r,f){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!t)throw new Error("event type cannot be null or undefined");if(!r||typeof r!="function")throw new Error("listener must be a function: "+r);var g=o.priority||0;if(!(d(t,r,f)>=0)){n[t]=n[t]||[];var v={callback:r,scope:f,priority:g};f&&f.getStreamId&&(v.streamId=f.getStreamId()),f&&f.getType&&(v.mediaType=f.getType()),o&&o.mode&&(v.mode=o.mode);var P=n[t].some(function(B,H){if(B&&g>B.priority)return n[t].splice(H,0,v),!0});P||n[t].push(v)}},off:function(t,r,f){if(t&&r&&n[t]){var o=d(t,r,f);o<0||(n[t][o]=null)}},trigger:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t&&n[t]){if((r=r||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");r.type=t,f.streamId&&(r.streamId=f.streamId),f.mediaType&&(r.mediaType=f.mediaType),n[t].filter(function(o){return!!o&&(!f.streamId||!o.streamId||o.streamId===f.streamId)&&(!f.mediaType||!o.mediaType||o.mediaType===f.mediaType)&&!(f.mode&&o.mode&&o.mode!==f.mode||!o.mode&&f.mode&&f.mode===b.a.EVENT_MODE_ON_RECEIVE)}).forEach(function(o){return o&&o.callback.call(o.scope,r)})}},reset:function(){n={}}}}h.__dashjs_factory_name="EventBus";var c=w.a.getSingletonFactory(h);c.EVENT_PRIORITY_LOW=0,c.EVENT_PRIORITY_HIGH=5e3,w.a.updateSingletonFactory(h.__dashjs_factory_name,c),At.a=c},function(Ee,At,x){var w=x(3),b={DEFAULT:.5,STRONG:1,WEAK:0};function h(n,d,t){return{quality:n===void 0?-1:n,reason:d===void 0?null:d,priority:function(r){var f=b.DEFAULT;return r!==b.DEFAULT&&r!==b.STRONG&&r!==b.WEAK||(f=r),f}(t)}}h.__dashjs_factory_name="SwitchRequest";var c=w.a.getClassFactory(h);c.NO_CHANGE=-1,c.PRIORITY=b,w.a.updateClassFactory(h.__dashjs_factory_name,c),At.a=c},function(Ee,At,x){function w(c){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(c)}function b(c,n){for(var d=0;d<n.length;d++){var t=n[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,(r=t.key,f=void 0,f=function(o,g){if(w(o)!=="object"||o===null)return o;var v=o[Symbol.toPrimitive];if(v!==void 0){var P=v.call(o,g||"default");if(w(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(o)}(r,"string"),w(f)==="symbol"?f:String(f)),t)}var r,f}var h=new(function(){function c(){(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")})(this,c),this.init()}var n,d;return n=c,(d=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&b(n.prototype,d),Object.defineProperty(n,"prototype",{writable:!1}),c}());At.a=h},function(Ee,At,x){function w(n){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function b(n,d){for(var t=0;t<d.length;t++){var r=d[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(f=r.key,o=void 0,o=function(g,v){if(w(g)!=="object"||g===null)return g;var P=g[Symbol.toPrimitive];if(P!==void 0){var B=P.call(g,v||"default");if(w(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}(f,"string"),w(o)==="symbol"?o:String(o)),r)}var f,o}function h(n,d,t){return d&&b(n.prototype,d),t&&b(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var c=h(function n(d,t,r){(function(f,o){if(!(f instanceof o))throw new TypeError("Cannot call a class as a function")})(this,n),this.code=d||null,this.message=t||null,this.data=r||null});At.a=c},function(Ee,At,x){function w(t){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function b(t,r){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,o){return f.__proto__=o,f})(t,r)}function h(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,o=n(t);if(r){var g=n(this).constructor;f=Reflect.construct(o,arguments,g)}else f=o.apply(this,arguments);return c(this,f)}}function c(t,r){if(r&&(w(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(t)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var d=new(function(t){(function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),v&&b(g,v)})(o,t);var r,f=h(o);function o(){var g;return function(v,P){if(!(v instanceof P))throw new TypeError("Cannot call a class as a function")}(this,o),(g=f.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,g.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,g.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,g.SEGMENT_BASE_LOADER_ERROR_CODE=15,g.TIME_SYNC_FAILED_ERROR_CODE=16,g.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,g.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,g.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,g.APPEND_ERROR_CODE=20,g.REMOVE_ERROR_CODE=21,g.DATA_UPDATE_FAILED_ERROR_CODE=22,g.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,g.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,g.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,g.DOWNLOAD_ERROR_ID_SIDX_CODE=26,g.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,g.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,g.DOWNLOAD_ERROR_ID_XLINK_CODE=29,g.MANIFEST_ERROR_ID_PARSE_CODE=31,g.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,g.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,g.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,g.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,g.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",g.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",g.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",g.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",g.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",g.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",g.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",g.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",g.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",g.APPEND_ERROR_MESSAGE="chunk is not defined",g.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",g.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",g.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",g.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",g.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",g.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",g}return r=o,Object.defineProperty(r,"prototype",{writable:!1}),r}(x(28).a));At.a=d},function(Ee,At,x){x.d(At,"e",function(){return h}),x.d(At,"c",function(){return c}),x.d(At,"d",function(){return n}),x.d(At,"a",function(){return r}),x.d(At,"b",function(){return f});var w=x(33);function b(o,g){for(;o.length<g;)o="0"+o;return o}function h(o){return o&&o.split("$$").join("$")}function c(o,g){if(!g||!o||o.indexOf("$RepresentationID$")===-1)return o;var v=g.toString();return o.split("$RepresentationID$").join(v)}function n(o,g,v){var P,B,H,D,y,S,T=g.length,I=2;if(!o)return o;for(;;){if((P=o.indexOf("$"+g))<0||(B=o.indexOf("$",P+T))<0)return o;if((H=o.indexOf("%0",P+T))>P&&H<B)switch(D=o.charAt(B-1),y=parseInt(o.substring(H+I,B-1),10),D){case"d":case"i":case"u":S=b(v.toString(),y);break;case"x":S=b(v.toString(16),y);break;case"X":S=b(v.toString(16),y).toUpperCase();break;case"o":S=b(v.toString(8),y);break;default:return o}else S=v;o=o.substring(0,P)+S+o.substring(B+1)}}function d(o,g,v,P,B,H,D,y){var S,T=new w.a;return T.representation=o,T.duration=g,T.presentationStartTime=v,T.mediaStartTime=P,T.availabilityStartTime=B.calcAvailabilityStartTimeFromPresentationTime(H,o,D),T.availabilityEndTime=B.calcAvailabilityEndTimeFromPresentationTime(H+g,o,D),T.wallStartTime=B.calcWallTimeForSegment(T,D),T.replacementNumber=(S=y,T.representation.startNumber+S),T.index=y,T}function t(o,g,v,P){var B=g.adaptation.period;if(isFinite(B.duration)&&B.start+B.duration<=v.presentationStartTime)return!1;if(P){if(g.availabilityTimeOffset==="INF")return!0;var H=o.getClientReferenceTime();return v.availabilityStartTime.getTime()<=H&&(!isFinite(v.availabilityEndTime)||v.availabilityEndTime.getTime()>=H)}return!0}function r(o,g,v,P){var B,H,D;B=v.segmentDuration,isNaN(B)&&(B=v.adaptation.period.duration),H=parseFloat((v.adaptation.period.start+P*B).toFixed(5)),D=parseFloat((H+B).toFixed(5));var y=d(v,B,H,o.calcMediaTimeFromPresentationTime(H,v),o,D,g,P);return t(o,v,y,g)?y:null}function f(o,g,v,P,B,H,D,y,S,T){var I,L,J=P/H,nt=B/H;return I=o.calcPresentationTimeFromMediaTime(J,v),t(o,v,L=d(v,nt,I,J,o,I+nt,g,S),g)?(L.replacementTime=T||P,D=n(D,"Number",L.replacementNumber),D=n(D,"Time",L.replacementTime),L.media=D,L.mediaRange=y,L):null}},function(Ee,At,x){var w=x(3);function b(){var d,t=/^[a-z][a-z0-9+\-_.]*:/i,r=/^https?:\/\//i,f=/^https:\/\//i,o=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,g=function(T,I){try{return new window.URL(T,I).toString()}catch{return T}},v=function(T,I){var L=P;if(!I||!D(T))return T;y(T)&&(L=B),S(T)&&(L=H);var J=L(I),nt=J.charAt(J.length-1)!=="/"&&T.charAt(0)!=="/"?"/":"";return[J,T].join(nt)};function P(T){var I=T.indexOf("/"),L=T.lastIndexOf("/");return I!==-1?L===I+1?T:(T.indexOf("?")!==-1&&(T=T.substring(0,T.indexOf("?"))),T.substring(0,L+1)):""}function B(T){var I=T.match(o);return I?I[1]:""}function H(T){var I=T.match(t);return I?I[0]:""}function D(T){return!t.test(T)}function y(T){return D(T)&&T.charAt(0)==="/"}function S(T){return T.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),d=g}catch{}finally{d=d||v}}(),{parseBaseUrl:P,parseOrigin:B,parseScheme:H,isRelative:D,isPathAbsolute:y,isSchemeRelative:S,isHTTPURL:function(T){return r.test(T)},isHTTPS:function(T){return f.test(T)},removeHostname:function(T){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(T)[2].substring(1)},resolve:function(T,I){return d(T,I)}}}b.__dashjs_factory_name="DefaultURLUtils";var h=w.a.getSingletonFactory(b);function c(){var d,t=[],r=this.context;function f(o,g,v){var P=function(B){var H;for(H=0;H<t.length;H++)if(t[H].regex.test(B))return t[H].utils;return d}(v||g);return P&&typeof P[o]=="function"?P[o](g,v):d[o](g,v)}return d=h(r).getInstance(),{registerUrlRegex:function(o,g){t.push({regex:o,utils:g})},parseBaseUrl:function(o){return f("parseBaseUrl",o)},parseOrigin:function(o){return f("parseOrigin",o)},parseScheme:function(o){return f("parseScheme",o)},isRelative:function(o){return f("isRelative",o)},isPathAbsolute:function(o){return f("isPathAbsolute",o)},isSchemeRelative:function(o){return f("isSchemeRelative",o)},isHTTPURL:function(o){return f("isHTTPURL",o)},isHTTPS:function(o){return f("isHTTPS",o)},removeHostname:function(o){return f("removeHostname",o)},resolve:function(o,g){return f("resolve",o,g)}}}c.__dashjs_factory_name="URLUtils";var n=w.a.getSingletonFactory(c);At.a=n},function(Ee,At,x){var w=x(37),b=x.n(w),h=x(38);function c(t){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function n(t,r){for(var f=0;f<r.length;f++){var o=r[f];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(g=o.key,v=void 0,v=function(P,B){if(c(P)!=="object"||P===null)return P;var H=P[Symbol.toPrimitive];if(H!==void 0){var D=H.call(P,B||"default");if(c(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(P)}(g,"string"),c(v)==="symbol"?v:String(v)),o)}var g,v}var d=function(){function t(){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,t)}var r,f,o;return r=t,o=[{key:"mixin",value:function(g,v,P){var B,H={};if(g)for(var D in v)v.hasOwnProperty(D)&&(B=v[D],D in g&&(g[D]===B||D in H&&H[D]===B)||(c(g[D])==="object"&&g[D]!==null?g[D]=t.mixin(g[D],B,P):g[D]=P(B)));return g}},{key:"clone",value:function(g){if(!g||c(g)!=="object")return g;var v;if(g instanceof Array){v=[];for(var P=0,B=g.length;P<B;++P)P in g&&v.push(t.clone(g[P]))}else v={};return t.mixin(v,g,t.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(g,v){try{if(!v||v.length===0)return g;var P=new URL(g);return v.forEach(function(B){B.key&&B.value&&P.searchParams.set(B.key,B.value)}),P.href}catch{return g}}},{key:"parseHttpHeaders",value:function(g){var v={};if(!g)return v;for(var P=g.trim().split(`\r
`),B=0,H=P.length;B<H;B++){var D=P[B],y=D.indexOf(": ");y>0&&(v[D.substring(0,y)]=D.substring(y+2))}return v}},{key:"generateUuid",value:function(){var g=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(v){var P=(g+16*Math.random())%16|0;return g=Math.floor(g/16),(v=="x"?P:3&P|8).toString(16)})}},{key:"generateHashCode",value:function(g){var v=0;if(g.length===0)return v;for(var P=0;P<g.length;P++)v=(v<<5)-v+g.charCodeAt(P),v|=0;return v}},{key:"getRelativeUrl",value:function(g,v){try{var P=new URL(g),B=new URL(v);if(P.protocol=B.protocol,P.origin!==B.origin)return v;var H=b.a.relative(P.pathname.substr(0,P.pathname.lastIndexOf("/")),B.pathname.substr(0,B.pathname.lastIndexOf("/"))),D=H.length===0?1:0;return H+=B.pathname.substr(B.pathname.lastIndexOf("/")+D,B.pathname.length-1),B.pathname.length<H.length?B.pathname:H}catch{return v}}},{key:"parseUserAgent",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var v=g===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return Object(h.UAParser)(v)}catch{return{}}}}],(f=null)&&n(r.prototype,f),o&&n(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();At.a=d},function(Ee,At,x){x.d(At,"b",function(){return h}),x.d(At,"a",function(){return c});var w=x(1);function b(n){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function h(n,d){if(b(n)!==d)throw w.a.BAD_ARGUMENT_ERROR}function c(n){if(!(n!==null&&!isNaN(n)&&n%1==0))throw w.a.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},function(Ee,At,x){var w=x(3),b=x(14),h=x(6),c=x(1),n=x(5),d=x(7),t=x(2);function r(v){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(v)}function f(v,P,B){return(P=function(H){var D=function(y,S){if(r(y)!=="object"||y===null)return y;var T=y[Symbol.toPrimitive];if(T!==void 0){var I=T.call(y,S||"default");if(r(I)!=="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(y)}(H,"string");return r(D)==="symbol"?D:String(D)}(P))in v?Object.defineProperty(v,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):v[P]=B,v}function o(){var v,P,B=this.context,H=Object(d.a)(B).getInstance(),D={"streaming.delay.liveDelay":t.a.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":t.a.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":t.a.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":t.a.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":t.a.SETTING_UPDATED_PLAYBACK_RATE_MAX},y={debug:{logLevel:h.a.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:c.a.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:c.a.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:c.a.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:c.a.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,manifestRequestTimeout:1e4,retryIntervals:(v={},f(v,n.a.MPD_TYPE,500),f(v,n.a.XLINK_EXPANSION_TYPE,500),f(v,n.a.MEDIA_SEGMENT_TYPE,1e3),f(v,n.a.INIT_SEGMENT_TYPE,1e3),f(v,n.a.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),f(v,n.a.INDEX_SEGMENT_TYPE,1e3),f(v,n.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),f(v,n.a.LICENSE,1e3),f(v,n.a.OTHER_TYPE,1e3),f(v,"lowLatencyReductionFactor",10),v),retryAttempts:(P={},f(P,n.a.MPD_TYPE,3),f(P,n.a.XLINK_EXPANSION_TYPE,1),f(P,n.a.MEDIA_SEGMENT_TYPE,3),f(P,n.a.INIT_SEGMENT_TYPE,3),f(P,n.a.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),f(P,n.a.INDEX_SEGMENT_TYPE,3),f(P,n.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),f(P,n.a.LICENSE,3),f(P,n.a.OTHER_TYPE,3),f(P,"lowLatencyMultiplyFactor",5),P),abr:{movingAverageMethod:c.a.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:c.a.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:c.a.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:c.a.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},S=b.a.clone(y);return{get:function(){return S},update:function(T){r(T)==="object"&&function I(L,J,nt){for(var j in L)L.hasOwnProperty(j)&&(J.hasOwnProperty(j)?r(L[j])!=="object"||L[j]instanceof Array||L[j]===null?(J[j]=b.a.clone(L[j]),D[nt+j]&&H.trigger(D[nt+j])):I(L[j],J[j],nt.slice()+j+"."):console.error("Settings parameter "+nt+j+" is not supported"))}(T,S,"")},reset:function(){S=b.a.clone(y)}}}o.__dashjs_factory_name="Settings";var g=w.a.getSingletonFactory(o);At.a=g},function(Ee,At,x){var w=x(5);function b(n){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function h(n,d){for(var t=0;t<d.length;t++){var r=d[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(f=r.key,o=void 0,o=function(g,v){if(b(g)!=="object"||g===null)return g;var P=g[Symbol.toPrimitive];if(P!==void 0){var B=P.call(g,v||"default");if(b(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}(f,"string"),b(o)==="symbol"?o:String(o)),r)}var f,o}var c=function(){function n(r){(function(f,o){if(!(f instanceof o))throw new TypeError("Cannot call a class as a function")})(this,n),this.action=n.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=r||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var d,t;return d=n,(t=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===w.a.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(r){this.type=r&&r.init?w.a.INIT_SEGMENT_TYPE:w.a.MEDIA_SEGMENT_TYPE,this.url=r&&r.url?r.url:null,this.range=r&&r.range?r.range.start+"-"+r.range.end:null,this.mediaType=r&&r.mediaType?r.mediaType:null}}])&&h(d.prototype,t),Object.defineProperty(d,"prototype",{writable:!1}),n}();c.ACTION_DOWNLOAD="download",c.ACTION_COMPLETE="complete",At.a=c},function(Ee,At,x){function w(c){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(c)}function b(c,n){for(var d=0;d<n.length;d++){var t=n[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,(r=t.key,f=void 0,f=function(o,g){if(w(o)!=="object"||o===null)return o;var v=o[Symbol.toPrimitive];if(v!==void 0){var P=v.call(o,g||"default");if(w(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(o)}(r,"string"),w(f)==="symbol"?f:String(f)),t)}var r,f}var h=function(){function c(){(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")})(this,c)}var n,d;return n=c,(d=[{key:"extend",value:function(t,r){if(t){var f=!!r&&r.override,o=!!r&&r.publicOnly;for(var g in t)!t.hasOwnProperty(g)||this[g]&&!f||o&&t[g].indexOf("public_")===-1||(this[g]=t[g])}}}])&&b(n.prototype,d),Object.defineProperty(n,"prototype",{writable:!1}),c}();At.a=h},function(Ee,At,x){function w(t){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function b(t,r){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,o){return f.__proto__=o,f})(t,r)}function h(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,o=n(t);if(r){var g=n(this).constructor;f=Reflect.construct(o,arguments,g)}else f=o.apply(this,arguments);return c(this,f)}}function c(t,r){if(r&&(w(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(t)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}var d=new(function(t){(function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),v&&b(g,v)})(o,t);var r,f=h(o);function o(){var g;return function(v,P){if(!(v instanceof P))throw new TypeError("Cannot call a class as a function")}(this,o),(g=f.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",g.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",g.CMCD_DATA_GENERATED="cmcdDataGenerated",g}return r=o,Object.defineProperty(r,"prototype",{writable:!1}),r}(x(18).a));At.a=d},function(Ee,At,x){x.d(At,"b",function(){return b});var w=x(3);function b(c,n){var d={url:c.url,method:c.method,headers:Object.assign({},c.headers),credentials:c.withCredentials?"include":void 0};return Promise.resolve(n.modifyRequest(d)).then(function(){return Object.assign(c,d,{withCredentials:d.credentials==="include"})})}function h(){return{modifyRequest:null,modifyRequestURL:function(c){return c},modifyRequestHeader:function(c,n){return n.url,c}}}h.__dashjs_factory_name="RequestModifier",At.a=w.a.getSingletonFactory(h)},function(Ee,At,x){var w=x(3),b=x(17);function h(n){var d,t,r,f,o=(n=n||{}).eventBus,g=n.events,v=n.dashMetrics,P=n.fragmentLoader,B=n.debug,H=n.streamInfo,D=n.type;function y(X){var z;return!!X&&(z=!1,r.some(function(vt){if(Mt=X,Pt=vt,!isNaN(Mt.index)&&Mt.startTime===Pt.startTime&&Mt.adaptationIndex===Pt.adaptationIndex&&Mt.type===Pt.type||function(ge,Q){return isNaN(ge.index)&&isNaN(Q.index)&&ge.quality===Q.quality}(X,vt)||function(ge,Q){return ge.action===b.a.ACTION_COMPLETE&&ge.action===Q.action}(X,vt))return z=!0;var Mt,Pt}),z)}function S(X){return isNaN(X.duration)?.25:Math.min(X.duration/8,.5)}function T(X){r=r.filter(function(z){var vt=S(z);return isNaN(z.startTime)||X!==void 0&&z.startTime>=X-vt})}function I(X,z){z<=X+.5||(r=r.filter(function(vt){var Mt=S(vt);return isNaN(vt.startTime)||vt.startTime>=z-Mt||isNaN(vt.duration)||vt.startTime+vt.duration<=X+Mt}))}function L(X,z,vt){for(var Mt=X.length-1;Mt>=0;Mt--){var Pt=X[Mt],ge=Pt.startTime,Q=ge+Pt.duration;if(vt=isNaN(vt)?S(Pt):vt,!isNaN(ge)&&!isNaN(Q)&&z+vt>=ge&&z-vt<Q||isNaN(ge)&&isNaN(z))return Pt}return null}function J(X,z){v.addSchedulingInfo(X,z),v.addRequestsQueue(X.mediaType,f,r)}function nt(X){X.sender===P&&(f.splice(f.indexOf(X.request),1),X.response&&!X.error&&r.push(X.request),J(X.request,X.error?"failed":"executed"),o.trigger(g.FRAGMENT_LOADING_COMPLETED,{request:X.request,response:X.response,error:X.error,sender:this},{streamId:H.id,mediaType:D}))}function j(X){X.sender===P&&o.trigger(g.FRAGMENT_LOADING_PROGRESS,{request:X.request,response:X.response,error:X.error,sender:this},{streamId:H.id,mediaType:D})}function O(X){X.sender===P&&o.trigger(g.FRAGMENT_LOADING_ABANDONED,{request:X.request},{streamId:H.id,mediaType:D})}function at(){r=[],f=[]}return d={getStreamId:function(){return H.id},getType:function(){return D},getRequests:function(X){var z=X?X.state instanceof Array?X.state:[X.state]:[],vt=[];return z.forEach(function(Mt){var Pt=function(ge){var Q;switch(ge){case"loading":Q=f;break;case"executed":Q=r;break;default:Q=[]}return Q}(Mt);vt=vt.concat(function(ge,Q){return Q.hasOwnProperty("time")?[L(ge,Q.time,Q.threshold)]:ge.filter(function(ft){for(var Ht in Q)if(Ht!=="state"&&Q.hasOwnProperty(Ht)&&ft[Ht]!=Q[Ht])return!1;return!0})}(Pt,X))}),vt},isFragmentLoaded:y,isFragmentLoadedOrPending:function(X){var z,vt=!1,Mt=0;if(!(vt=y(X)))for(Mt=0;Mt<f.length;Mt++)z=f[Mt],X.url===z.url&&X.startTime===z.startTime&&(vt=!0);return vt},removeExecutedRequestsBeforeTime:T,removeExecutedRequestsAfterTime:function(X){r=r.filter(function(z){return isNaN(z.startTime)||X!==void 0&&z.startTime<X})},syncExecutedRequestsWithBufferedRange:function(X,z){if(X&&X.length!==0){for(var vt=0,Mt=0,Pt=X.length;Mt<Pt;Mt++)I(vt,X.start(Mt)),vt=X.end(Mt);z>0&&I(vt,z)}else T()},abortRequests:function(){t.debug("abort requests"),P.abort(),f=[]},executeRequest:function(X){switch(X.action){case b.a.ACTION_DOWNLOAD:J(X,"loading"),f.push(X),function(z){o.trigger(g.FRAGMENT_LOADING_STARTED,{request:z},{streamId:H.id,mediaType:D}),P.load(z)}(X);break;default:t.warn("Unknown request action.")}},reset:function(){o.off(g.LOADING_COMPLETED,nt,this),o.off(g.LOADING_DATA_PROGRESS,j,this),o.off(g.LOADING_ABANDONED,O,this),P&&P.reset(),at()},resetInitialSettings:at,addExecutedRequest:function(X){r.push(X)}},t=B.getLogger(d),at(),o.on(g.LOADING_COMPLETED,nt,d),o.on(g.LOADING_DATA_PROGRESS,j,d),o.on(g.LOADING_ABANDONED,O,d),d}h.__dashjs_factory_name="FragmentModel";var c=w.a.getClassFactory(h);c.FRAGMENT_MODEL_LOADING="loading",c.FRAGMENT_MODEL_EXECUTED="executed",c.FRAGMENT_MODEL_CANCELED="canceled",c.FRAGMENT_MODEL_FAILED="failed",w.a.updateClassFactory(h.__dashjs_factory_name,c),At.a=c},function(Ee,At,x){var w=x(3),b=x(48);function h(n){n=n||{};var d,t,r=this.context;return d=Object(b.a)(r).getInstance(),{load:function(f){if(!t){var o=d.getLoader(f&&f.request?f.request.url:null);t=o(r).create({errHandler:n.errHandler,mediaPlayerModel:n.mediaPlayerModel,requestModifier:n.requestModifier,dashMetrics:n.dashMetrics,boxParser:n.boxParser?n.boxParser:null,constants:n.constants?n.constants:null,dashConstants:n.dashConstants?n.dashConstants:null,urlUtils:n.urlUtils?n.urlUtils:null,requestTimeout:isNaN(n.requestTimeout)?0:n.requestTimeout,errors:n.errors})}t.load(f)},abort:function(){t&&t.abort()}}}h.__dashjs_factory_name="URLLoader";var c=w.a.getClassFactory(h);At.a=c},function(Ee,At,x){var w=x(6);function b(H){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(H)}function h(H,D){for(var y=0;y<D.length;y++){var S=D[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(H,(T=S.key,I=void 0,I=function(L,J){if(b(L)!=="object"||L===null)return L;var nt=L[Symbol.toPrimitive];if(nt!==void 0){var j=nt.call(L,J||"default");if(b(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(L)}(T,"string"),b(I)==="symbol"?I:String(I)),S)}var T,I}var c=function(){function H(S){if(function(O,at){if(!(O instanceof at))throw new TypeError("Cannot call a class as a function")}(this,H),this.offset=S._offset,this.type=S.type,this.size=S.size,this.boxes=[],S.boxes)for(var T=0;T<S.boxes.length;T++)this.boxes.push(new H(S.boxes[T]));switch(this.isComplete=!0,S.type){case"sidx":if(this.timescale=S.timescale,this.earliest_presentation_time=S.earliest_presentation_time,this.first_offset=S.first_offset,this.references=S.references,S.references){this.references=[];for(var I=0;I<S.references.length;I++){var L={reference_type:S.references[I].reference_type,referenced_size:S.references[I].referenced_size,subsegment_duration:S.references[I].subsegment_duration};this.references.push(L)}}break;case"emsg":this.id=S.id,this.version=S.version===1?1:0,this.value=S.value,this.timescale=S.timescale,this.scheme_id_uri=S.scheme_id_uri,this.presentation_time_delta=S.version===1?S.presentation_time:S.presentation_time_delta,this.event_duration=S.event_duration,this.message_data=S.message_data;break;case"mdhd":this.timescale=S.timescale;break;case"mfhd":this.sequence_number=S.sequence_number;break;case"subs":this.entry_count=S.entry_count,this.entries=S.entries;break;case"tfhd":this.base_data_offset=S.base_data_offset,this.sample_description_index=S.sample_description_index,this.default_sample_duration=S.default_sample_duration,this.default_sample_size=S.default_sample_size,this.default_sample_flags=S.default_sample_flags,this.flags=S.flags;break;case"tfdt":this.version=S.version,this.baseMediaDecodeTime=S.baseMediaDecodeTime,this.flags=S.flags;break;case"trun":if(this.sample_count=S.sample_count,this.first_sample_flags=S.first_sample_flags,this.data_offset=S.data_offset,this.flags=S.flags,this.samples=S.samples,S.samples){this.samples=[];for(var J=0,nt=S.samples.length;J<nt;J++){var j={sample_size:S.samples[J].sample_size,sample_duration:S.samples[J].sample_duration,sample_composition_time_offset:S.samples[J].sample_composition_time_offset};this.samples.push(j)}}}}var D,y;return D=H,(y=[{key:"getChildBox",value:function(S){for(var T=0;T<this.boxes.length;T++)if(this.boxes[T].type===S)return this.boxes[T]}},{key:"getChildBoxes",value:function(S){for(var T=[],I=0;I<this.boxes.length;I++)this.boxes[I].type===S&&T.push(this.boxes[I]);return T}}])&&h(D.prototype,y),Object.defineProperty(D,"prototype",{writable:!1}),H}(),n=x(3);function d(){var H;function D(S){var T=[];if(!S||!H||typeof H.fetchAll!="function")return T;for(var I,L=H.fetchAll(S),J=0,nt=L.length;J<nt;J++)(I=y(L[J]))&&T.push(I);return T}function y(S){if(!S)return null;var T=new c(S);return S.hasOwnProperty("_incomplete")&&(T.isComplete=!S._incomplete),T}return{getBox:function(S){return S&&H&&H.boxes&&H.boxes.length!==0&&typeof H.fetch=="function"?y(H.fetch(S)):null},getBoxes:D,setData:function(S){H=S},getLastBox:function(){if(!H||!H.boxes||!H.boxes.length)return null;var S=D(H.boxes[H.boxes.length-1].type);return S.length>0?S[S.length-1]:null}}}d.__dashjs_factory_name="IsoFile";var t=n.a.getClassFactory(d),r=x(25),f=x.n(r);function o(H){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(H)}function g(H,D){for(var y=0;y<D.length;y++){var S=D[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(H,(T=S.key,I=void 0,I=function(L,J){if(o(L)!=="object"||L===null)return L;var nt=L[Symbol.toPrimitive];if(nt!==void 0){var j=nt.call(L,J||"default");if(o(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(L)}(T,"string"),o(I)==="symbol"?I:String(I)),S)}var T,I}function v(H,D,y){return D&&g(H.prototype,D),y&&g(H,y),Object.defineProperty(H,"prototype",{writable:!1}),H}var P=v(function H(D,y,S){(function(T,I){if(!(T instanceof I))throw new TypeError("Cannot call a class as a function")})(this,H),this.lastCompletedOffset=D,this.found=y,this.size=S});function B(){var H,D,y=this.context;function S(L){if(!L)return null;L.fileStart===void 0&&(L.fileStart=0);var J=f.a.parseBuffer(L),nt=t(y).create();return nt.setData(J),nt}function T(L,J){return L[J+3]>>>0|L[J+2]<<8>>>0|L[J+1]<<16>>>0|L[J]<<24>>>0}function I(L,J){return String.fromCharCode(L[J++])+String.fromCharCode(L[J++])+String.fromCharCode(L[J++])+String.fromCharCode(L[J])}return D={parse:S,findLastTopIsoBoxCompleted:function(L,J,nt){if(nt===void 0&&(nt=0),!J||nt+8>=J.byteLength)return new P(0,!1);for(var j,O=J instanceof ArrayBuffer?new Uint8Array(J):J,at=0;nt<O.byteLength;){var X=T(O,nt),z=I(O,nt+4);if(X===0)break;nt+X<=O.byteLength&&(L.indexOf(z)>=0?j=new P(nt,!0,X):at=nt+X),nt+=X}return j||new P(at,!1)},getMediaTimescaleFromMoov:function(L){var J=S(L),nt=J?J.getBox("mdhd"):void 0;return nt?nt.timescale:NaN},getSamplesInfo:function(L){if(!L||L.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var J,nt,j,O,at,X,z,vt,Mt,Pt,ge,Q,ft,Ht,_e,Jt,Te=S(L),It=Te.getBoxes("moof"),Wt=Te.getBoxes("mfhd");_e=Te.getBoxes("moof").length,Ht=Wt[Wt.length-1].sequence_number,nt=0,at=[];var Yt=-1,e=-1;for(Pt=0;Pt<It.length;Pt++){var u=It[Pt],l=u.getChildBoxes("traf");for(vt=0;vt<l.length;vt++){var G=l[vt],A=G.getChildBox("tfhd"),F=G.getChildBox("tfdt");O=F.baseMediaDecodeTime;var K=G.getChildBoxes("trun"),Z=G.getChildBoxes("subs");for(Mt=0;Mt<K.length;Mt++){var bt=K[Mt];for(nt=bt.sample_count,ft=(A.base_data_offset||0)+(bt.data_offset||0),z=0;z<nt;z++){J=(X=bt.samples[z]).sample_duration!==void 0?X.sample_duration:A.default_sample_duration,j=X.sample_size!==void 0?X.sample_size:A.default_sample_size;var it={dts:O,cts:O+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:J,offset:u.offset+ft,size:j,subSizes:[j]};if(Z)for(ge=0;ge<Z.length;ge++){var ct=Z[ge];if(Yt<ct.entry_count-1&&z>e&&(Yt++,e+=ct.entries[Yt].sample_delta),z==e){it.subSizes=[];var jt=ct.entries[Yt];for(Q=0;Q<jt.subsample_count;Q++)it.subSizes.push(jt.subsamples[Q].subsample_size)}}at.push(it),ft+=j,O+=J}}Jt=O-F.baseMediaDecodeTime}}return{sampleList:at,lastSequenceNumber:Ht,totalDuration:Jt,numSequences:_e}},findInitRange:function(L){var J=null,nt=S(L);if(!nt)return J;var j=nt.getBox("ftyp"),O=nt.getBox("moov");return H.debug("Searching for initialization."),O&&O.isComplete&&(J=(j?j.offset:O.offset)+"-"+(O.offset+O.size-1),H.debug("Found the initialization.  Range: "+J)),J},parsePayload:function(L,J,nt){if(nt===void 0&&(nt=0),!J||nt+8>=J.byteLength)return new P(0,!1);for(var j,O=J instanceof ArrayBuffer?new Uint8Array(J):J,at=0;nt<O.byteLength;){var X=T(O,nt),z=I(O,nt+4);if(X===0)break;nt+X<=O.byteLength&&(L.indexOf(z)>=0?j=new P(nt,!0,X,z):at=nt+X),nt+=X}return j||new P(at,!1)}},H=Object(w.a)(y).getInstance().getLogger(D),D}B.__dashjs_factory_name="BoxParser",At.a=n.a.getSingletonFactory(B)},function(Ee,At){var x;x=function(){return this}();try{x=x||new Function("return this")()}catch{typeof window=="object"&&(x=window)}Ee.exports=x},function(Ee,At,x){/*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */var w={parseBuffer:function(c){return new b(c).parse()},addBoxProcessor:function(c,n){typeof c=="string"&&typeof n=="function"&&(h.prototype._boxProcessors[c]=n)},createFile:function(){return new b},createBox:function(c,n,d){var t=h.create(c);return n&&n.append(t,d),t},createFullBox:function(c,n,d){var t=w.createBox(c,n,d);return t.version=0,t.flags=0,t},Utils:{}};w.Utils.dataViewToString=function(c,n){var d=n||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(d).decode(c);var t=[],r=0;if(d==="utf-8")for(;r<c.byteLength;){var f=c.getUint8(r++);f<128||(f<224?(f=(31&f)<<6,f|=63&c.getUint8(r++)):f<240?(f=(15&f)<<12,f|=(63&c.getUint8(r++))<<6,f|=63&c.getUint8(r++)):(f=(7&f)<<18,f|=(63&c.getUint8(r++))<<12,f|=(63&c.getUint8(r++))<<6,f|=63&c.getUint8(r++))),t.push(String.fromCharCode(f))}else for(;r<c.byteLength;)t.push(String.fromCharCode(c.getUint8(r++)));return t.join("")},w.Utils.utf8ToByteArray=function(c){var n,d;if(typeof TextEncoder<"u")n=new TextEncoder().encode(c);else for(n=[],d=0;d<c.length;++d){var t=c.charCodeAt(d);t<128?n.push(t):t<2048?(n.push(192|t>>6),n.push(128|63&t)):t<65536?(n.push(224|t>>12),n.push(128|63&t>>6),n.push(128|63&t)):(n.push(240|t>>18),n.push(128|63&t>>12),n.push(128|63&t>>6),n.push(128|63&t))}return n},w.Utils.appendBox=function(c,n,d){if(n._offset=c._cursor.offset,n._root=c._root?c._root:c,n._raw=c._raw,n._parent=c,d!==-1)if(d!=null){var t,r=-1;if(typeof d=="number")r=d;else{if(typeof d=="string")t=d;else{if(typeof d!="object"||!d.type)return void c.boxes.push(n);t=d.type}for(var f=0;f<c.boxes.length;f++)if(t===c.boxes[f].type){r=f+1;break}}c.boxes.splice(r,0,n)}else c.boxes.push(n)},At.parseBuffer=w.parseBuffer,At.addBoxProcessor=w.addBoxProcessor,At.createFile=w.createFile,At.createBox=w.createBox,At.createFullBox=w.createFullBox,At.Utils=w.Utils,w.Cursor=function(c){this.offset=c===void 0?0:c};var b=function(c){this._cursor=new w.Cursor,this.boxes=[],c&&(this._raw=new DataView(c))};b.prototype.fetch=function(c){var n=this.fetchAll(c,!0);return n.length?n[0]:null},b.prototype.fetchAll=function(c,n){var d=[];return b._sweep.call(this,c,d,n),d},b.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var c=h.parse(this);if(c.type===void 0)break;this.boxes.push(c)}return this},b._sweep=function(c,n,d){for(var t in this.type&&this.type==c&&n.push(this),this.boxes){if(n.length&&d)return;b._sweep.call(this.boxes[t],c,n,d)}},b.prototype.write=function(){var c,n=0;for(c=0;c<this.boxes.length;c++)n+=this.boxes[c].getLength(!1);var d=new Uint8Array(n);for(this._rawo=new DataView(d.buffer),this.bytes=d,this._cursor.offset=0,c=0;c<this.boxes.length;c++)this.boxes[c].write();return d.buffer},b.prototype.append=function(c,n){w.Utils.appendBox(this,c,n)};var h=function(){this._cursor=new w.Cursor};h.parse=function(c){var n=new h;return n._offset=c._cursor.offset,n._root=c._root?c._root:c,n._raw=c._raw,n._parent=c,n._parseBox(),c._cursor.offset=n._raw.byteOffset+n._raw.byteLength,n},h.create=function(c){var n=new h;return n.type=c,n.boxes=[],n},h.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],h.prototype._boxProcessors={},h.prototype._procField=function(c,n,d){this._parsing?this[c]=this._readField(n,d):this._writeField(n,d,this[c])},h.prototype._procFieldArray=function(c,n,d,t){var r;if(this._parsing)for(this[c]=[],r=0;r<n;r++)this[c][r]=this._readField(d,t);else for(r=0;r<this[c].length;r++)this._writeField(d,t,this[c][r])},h.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},h.prototype._procEntries=function(c,n,d){var t;if(this._parsing)for(this[c]=[],t=0;t<n;t++)this[c].push({}),d.call(this,this[c][t]);else for(t=0;t<n;t++)d.call(this,this[c][t])},h.prototype._procSubEntries=function(c,n,d,t){var r;if(this._parsing)for(c[n]=[],r=0;r<d;r++)c[n].push({}),t.call(this,c[n][r]);else for(r=0;r<d;r++)t.call(this,c[n][r])},h.prototype._procEntryField=function(c,n,d,t){this._parsing?c[n]=this._readField(d,t):this._writeField(d,t,c[n])},h.prototype._procSubBoxes=function(c,n){var d;if(this._parsing)for(this[c]=[],d=0;d<n;d++)this[c].push(h.parse(this));else for(d=0;d<n;d++)this._rawo?this[c][d].write():this.size+=this[c][d].getLength()},h.prototype._readField=function(c,n){switch(c){case"uint":return this._readUint(n);case"int":return this._readInt(n);case"template":return this._readTemplate(n);case"string":return n===-1?this._readTerminatedString():this._readString(n);case"data":return this._readData(n);case"utf8":return this._readUTF8String();default:return-1}},h.prototype._readInt=function(c){var n=null,d=this._cursor.offset-this._raw.byteOffset;switch(c){case 8:n=this._raw.getInt8(d);break;case 16:n=this._raw.getInt16(d);break;case 32:n=this._raw.getInt32(d);break;case 64:var t=this._raw.getInt32(d),r=this._raw.getInt32(d+4);n=t*Math.pow(2,32)+r}return this._cursor.offset+=c>>3,n},h.prototype._readUint=function(c){var n,d,t=null,r=this._cursor.offset-this._raw.byteOffset;switch(c){case 8:t=this._raw.getUint8(r);break;case 16:t=this._raw.getUint16(r);break;case 24:t=((n=this._raw.getUint16(r))<<8)+(d=this._raw.getUint8(r+2));break;case 32:t=this._raw.getUint32(r);break;case 64:n=this._raw.getUint32(r),d=this._raw.getUint32(r+4),t=n*Math.pow(2,32)+d}return this._cursor.offset+=c>>3,t},h.prototype._readString=function(c){for(var n="",d=0;d<c;d++){var t=this._readUint(8);n+=String.fromCharCode(t)}return n},h.prototype._readTemplate=function(c){return this._readUint(c/2)+this._readUint(c/2)/Math.pow(2,c/2)},h.prototype._readTerminatedString=function(){for(var c="";this._cursor.offset-this._offset<this._raw.byteLength;){var n=this._readUint(8);if(n===0)break;c+=String.fromCharCode(n)}return c},h.prototype._readData=function(c){var n=c>0?c:this._raw.byteLength-(this._cursor.offset-this._offset);if(n>0){var d=new Uint8Array(this._raw.buffer,this._cursor.offset,n);return this._cursor.offset+=n,d}return null},h.prototype._readUTF8String=function(){var c=this._raw.byteLength-(this._cursor.offset-this._offset),n=null;return c>0&&(n=new DataView(this._raw.buffer,this._cursor.offset,c),this._cursor.offset+=c),n&&w.Utils.dataViewToString(n)},h.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},h.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},h.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(h.parse(this))},h.prototype.append=function(c,n){w.Utils.appendBox(this,c,n)},h.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var c=0;c<this.boxes.length;c++)this.size+=this.boxes[c].getLength();return this._data&&this._writeData(this._data),this.size},h.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var c=0;c<this.boxes.length;c++)this.boxes[c].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},h.prototype._writeInt=function(c,n){if(this._rawo){var d=this._cursor.offset-this._rawo.byteOffset;switch(c){case 8:this._rawo.setInt8(d,n);break;case 16:this._rawo.setInt16(d,n);break;case 32:this._rawo.setInt32(d,n);break;case 64:var t=Math.floor(n/Math.pow(2,32)),r=n-t*Math.pow(2,32);this._rawo.setUint32(d,t),this._rawo.setUint32(d+4,r)}this._cursor.offset+=c>>3}else this.size+=c>>3},h.prototype._writeUint=function(c,n){if(this._rawo){var d,t,r=this._cursor.offset-this._rawo.byteOffset;switch(c){case 8:this._rawo.setUint8(r,n);break;case 16:this._rawo.setUint16(r,n);break;case 24:d=(16776960&n)>>8,t=255&n,this._rawo.setUint16(r,d),this._rawo.setUint8(r+2,t);break;case 32:this._rawo.setUint32(r,n);break;case 64:t=n-(d=Math.floor(n/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,d),this._rawo.setUint32(r+4,t)}this._cursor.offset+=c>>3}else this.size+=c>>3},h.prototype._writeString=function(c,n){for(var d=0;d<c;d++)this._writeUint(8,n.charCodeAt(d))},h.prototype._writeTerminatedString=function(c){if(c.length!==0){for(var n=0;n<c.length;n++)this._writeUint(8,c.charCodeAt(n));this._writeUint(8,0)}},h.prototype._writeTemplate=function(c,n){var d=Math.floor(n),t=(n-d)*Math.pow(2,c/2);this._writeUint(c/2,d),this._writeUint(c/2,t)},h.prototype._writeData=function(c){if(c)if(this._rawo){if(c instanceof Array){for(var n=this._cursor.offset-this._rawo.byteOffset,d=0;d<c.length;d++)this._rawo.setInt8(n+d,c[d]);this._cursor.offset+=c.length}c instanceof Uint8Array&&(this._root.bytes.set(c,this._cursor.offset),this._cursor.offset+=c.length)}else this.size+=c.length},h.prototype._writeUTF8String=function(c){var n=w.Utils.utf8ToByteArray(c);if(this._rawo)for(var d=new DataView(this._rawo.buffer,this._cursor.offset,n.length),t=0;t<n.length;t++)d.setUint8(t,n[t]);else this.size+=n.length},h.prototype._writeField=function(c,n,d){switch(c){case"uint":this._writeUint(n,d);break;case"int":this._writeInt(n,d);break;case"template":this._writeTemplate(n,d);break;case"string":n==-1?this._writeTerminatedString(d):this._writeString(n,d);break;case"data":this._writeData(d);break;case"utf8":this._writeUTF8String(d)}},h.prototype._boxProcessors.avc1=h.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},h.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},h.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(c){this._procEntryField(c,"segment_duration","uint",this.version===1?64:32),this._procEntryField(c,"media_time","int",this.version===1?64:32),this._procEntryField(c,"media_rate_integer","int",16),this._procEntryField(c,"media_rate_fraction","int",16)})},h.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},h.prototype._boxProcessors.free=h.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},h.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},h.prototype._boxProcessors.ftyp=h.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var c=-1;this._parsing&&(c=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",c,"string",4)},h.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},h.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},h.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},h.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},h.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},h.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},h.prototype._boxProcessors.mp4a=h.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},h.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},h.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},h.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},h.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},h.prototype._boxProcessors.sdtp=function(){this._procFullBox();var c=-1;this._parsing&&(c=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",c,"uint",8)},h.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(c){this._parsing||(c.reference=(1&c.reference_type)<<31,c.reference|=2147483647&c.referenced_size,c.sap=(1&c.starts_with_SAP)<<31,c.sap|=(3&c.SAP_type)<<28,c.sap|=268435455&c.SAP_delta_time),this._procEntryField(c,"reference","uint",32),this._procEntryField(c,"subsegment_duration","uint",32),this._procEntryField(c,"sap","uint",32),this._parsing&&(c.reference_type=c.reference>>31&1,c.referenced_size=2147483647&c.reference,c.starts_with_SAP=c.sap>>31&1,c.SAP_type=c.sap>>28&7,c.SAP_delta_time=268435455&c.sap)})},h.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},h.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(c){this._procEntryField(c,"ranges_count","uint",32),this._procSubEntries(c,"ranges",c.ranges_count,function(n){this._procEntryField(n,"level","uint",8),this._procEntryField(n,"range_size","uint",24)})})},h.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},h.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(c){this._procEntryField(c,"sample_delta","uint",32),this._procEntryField(c,"subsample_count","uint",16),this._procSubEntries(c,"subsamples",c.subsample_count,function(n){this._procEntryField(n,"subsample_size","uint",this.version===1?32:16),this._procEntryField(n,"subsample_priority","uint",8),this._procEntryField(n,"discardable","uint",8),this._procEntryField(n,"codec_specific_parameters","uint",32)})})},h.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},h.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},h.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},h.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(c){this._procEntryField(c,"time","uint",this.version===1?64:32),this._procEntryField(c,"moof_offset","uint",this.version===1?64:32),this._procEntryField(c,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(c,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(c,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},h.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},h.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},h.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(c){256&this.flags&&this._procEntryField(c,"sample_duration","uint",32),512&this.flags&&this._procEntryField(c,"sample_size","uint",32),1024&this.flags&&this._procEntryField(c,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(c,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},h.prototype._boxProcessors["url "]=h.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},h.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},h.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},h.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},h.prototype._boxProcessors.vtte=function(){}},function(Ee,At){var x,w,b=Ee.exports={};function h(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function n(B){if(x===setTimeout)return setTimeout(B,0);if((x===h||!x)&&setTimeout)return x=setTimeout,setTimeout(B,0);try{return x(B,0)}catch{try{return x.call(null,B,0)}catch{return x.call(this,B,0)}}}(function(){try{x=typeof setTimeout=="function"?setTimeout:h}catch{x=h}try{w=typeof clearTimeout=="function"?clearTimeout:c}catch{w=c}})();var d,t=[],r=!1,f=-1;function o(){r&&d&&(r=!1,d.length?t=d.concat(t):f=-1,t.length&&g())}function g(){if(!r){var B=n(o);r=!0;for(var H=t.length;H;){for(d=t,t=[];++f<H;)d&&d[f].run();f=-1,H=t.length}d=null,r=!1,function(D){if(w===clearTimeout)return clearTimeout(D);if((w===c||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(D);try{w(D)}catch{try{return w.call(null,D)}catch{return w.call(this,D)}}}(B)}}function v(B,H){this.fun=B,this.array=H}function P(){}b.nextTick=function(B){var H=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)H[D-1]=arguments[D];t.push(new v(B,H)),t.length!==1||r||n(g)},v.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=P,b.addListener=P,b.once=P,b.off=P,b.removeListener=P,b.removeAllListeners=P,b.emit=P,b.prependListener=P,b.prependOnceListener=P,b.listeners=function(B){return[]},b.binding=function(B){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(B){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},function(Ee,At,x){var w=x(3),b=x(8),h=x(1),c=x(9);function n(Yt){Yt=Yt||{};var e=this.context,u=Yt.dashMetrics;return{getMaxIndex:function(l){var G=Object(b.a)(e).create();if(!(l&&l.hasOwnProperty("getMediaInfo")&&l.hasOwnProperty("getMediaType")&&l.hasOwnProperty("useBufferOccupancyABR")&&l.hasOwnProperty("getAbrController")&&l.hasOwnProperty("getScheduleController")))return G;(function(){if(!u||!u.hasOwnProperty("getCurrentBufferState"))throw new Error(h.a.MISSING_CONFIG_ERROR)})();var A=l.getMediaInfo(),F=l.getMediaType(),K=u.getCurrentBufferState(F),Z=l.getScheduleController(),bt=l.getAbrController(),it=l.getStreamInfo(),ct=it?it.id:null,jt=it&&it.manifestInfo?it.manifestInfo.isDynamic:null,me=bt.getThroughputHistory(),ue=me.getSafeAverageThroughput(F,jt),Ct=me.getAverageLatency(F),Nt=l.useBufferOccupancyABR();return isNaN(ue)||!K||Nt||bt.getAbandonmentStateFor(ct,F)!==c.a.ABANDON_LOAD&&(K.state===c.a.BUFFER_LOADED||jt)&&(G.quality=bt.getQualityForBitrate(A,ue,ct,Ct),Z.setTimeToLoadDelay(0),G.reason={throughput:ue,latency:Ct}),G},reset:function(){}}}n.__dashjs_factory_name="ThroughputRule";var d=w.a.getClassFactory(n),t=x(7),r=x(2),f=x(6),o=x(4);function g(Yt){Yt=Yt||{};var e,u,l,G=this.context,A=Object(t.a)(G).getInstance(),F=Yt.dashMetrics;function K(){(l={})[h.a.VIDEO]={ignoreCount:2},l[h.a.AUDIO]={ignoreCount:2}}function Z(){K()}function bt(it){isNaN(it.startTime)||it.mediaType!==h.a.AUDIO&&it.mediaType!==h.a.VIDEO||l[it.mediaType].ignoreCount>0&&l[it.mediaType].ignoreCount--}return e={getMaxIndex:function(it){var ct=Object(b.a)(G).create();if(!it||!it.hasOwnProperty("getMediaType"))return ct;(function(){if(!F||!F.hasOwnProperty("getCurrentBufferLevel")||!F.hasOwnProperty("getCurrentBufferState"))throw new Error(h.a.MISSING_CONFIG_ERROR)})();var jt=it.getMediaType(),me=F.getCurrentBufferState(jt),ue=it.getRepresentationInfo().fragmentDuration,Ct=it.getStreamInfo(),Nt=Ct?Ct.id:null,Ot=it.getScheduleController(),Gt=Ct&&Ct.manifestInfo&&Ct.manifestInfo.isDynamic;if(function(We,Ve){return!We&&l[Ve].ignoreCount>0}(Ot.getPlaybackController().getLowLatencyModeEnabled(),jt)||!ue)return ct;if(me&&me.state===c.a.BUFFER_EMPTY)u.debug("["+jt+"] Switch to index 0; buffer is empty."),ct.quality=0,ct.reason="InsufficientBufferRule: Buffer is empty";else{var ve=it.getMediaInfo(),Ae=it.getAbrController(),ie=Ae.getThroughputHistory(),Zt=F.getCurrentBufferLevel(jt),ee=ie.getAverageThroughput(jt,Gt),we=ie.getAverageLatency(jt),Fe=ee*(Zt/ue)*.5;ct.quality=Ae.getQualityForBitrate(ve,Fe,Nt,we),ct.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return ct},reset:function(){K(),A.off(o.a.PLAYBACK_SEEKING,Z,e),A.off(r.a.BYTES_APPENDED_END_FRAGMENT,bt,e)}},u=Object(f.a)(G).getInstance().getLogger(e),K(),A.on(o.a.PLAYBACK_SEEKING,Z,e),A.on(r.a.BYTES_APPENDED_END_FRAGMENT,bt,e),e}g.__dashjs_factory_name="InsufficientBufferRule";var v=w.a.getClassFactory(g);function P(Yt){Yt=Yt||{};var e,u,l,G,A,F=this.context,K=Yt.mediaPlayerModel,Z=Yt.dashMetrics,bt=Yt.settings;function it(){l={},G={},A=[]}return e={shouldAbandon:function(ct){var jt=Object(b.a)(F).create(b.a.NO_CHANGE,{name:P.__dashjs_factory_name});if(!(ct&&ct.hasOwnProperty("getMediaInfo")&&ct.hasOwnProperty("getMediaType")&&ct.hasOwnProperty("getCurrentRequest")&&ct.hasOwnProperty("getRepresentationInfo")&&ct.hasOwnProperty("getAbrController")))return jt;var me,ue,Ct=ct.getMediaInfo(),Nt=ct.getMediaType(),Ot=ct.getStreamInfo(),Gt=Ot?Ot.id:null,ve=ct.getCurrentRequest();if(!isNaN(ve.index)){me=Nt,ue=ve.index,l[me]=l[me]||{},l[me][ue]=l[me][ue]||{};var Ae=K.getStableBufferTime();if(Z.getCurrentBufferLevel(Nt)>Ae)return jt;var ie=l[Nt][ve.index];if(ie===null||ve.firstByteDate===null||G.hasOwnProperty(ie.id))return jt;if(ie.firstByteTime===void 0&&(A[Nt]=[],ie.firstByteTime=ve.firstByteDate.getTime(),ie.segmentDuration=ve.duration,ie.bytesTotal=ve.bytesTotal,ie.id=ve.index),ie.bytesLoaded=ve.bytesLoaded,ie.elapsedTime=new Date().getTime()-ie.firstByteTime,ie.bytesLoaded>0&&ie.elapsedTime>0&&function(C,dt){A[C]=A[C]||[],A[C].push(dt)}(Nt,Math.round(8*ie.bytesLoaded/ie.elapsedTime)),A[Nt].length>=5&&ie.elapsedTime>500&&ie.bytesLoaded<ie.bytesTotal){var Zt=A[Nt].reduce(function(C,dt){return C+dt},0);if(ie.measuredBandwidthInKbps=Math.round(Zt/A[Nt].length),ie.estimatedTimeOfDownload=+(8*ie.bytesTotal/ie.measuredBandwidthInKbps/1e3).toFixed(2),ie.estimatedTimeOfDownload<1.8*ie.segmentDuration||ct.getRepresentationInfo().quality===0)return jt;if(!G.hasOwnProperty(ie.id)){var ee=ct.getAbrController(),we=ie.bytesTotal-ie.bytesLoaded,Fe=ee.getBitrateList(Ct),We=ee.getQualityForBitrate(Ct,ie.measuredBandwidthInKbps*bt.get().streaming.abr.bandwidthSafetyFactor,Gt),Ve=ee.getMinAllowedIndexFor(Nt,Gt),N=Ve!==void 0?Math.max(Ve,We):We;we>ie.bytesTotal*Fe[N].bitrate/Fe[ee.getQualityFor(Nt,Gt)].bitrate&&(jt.quality=N,jt.reason.throughput=ie.measuredBandwidthInKbps,jt.reason.fragmentID=ie.id,G[ie.id]=ie,u.debug("["+Nt+"] frag id",ie.id," is asking to abandon and switch to quality to ",N," measured bandwidth was",ie.measuredBandwidthInKbps),delete l[Nt][ie.id])}}else ie.bytesLoaded===ie.bytesTotal&&delete l[Nt][ie.id]}return jt},reset:it},u=Object(f.a)(F).getInstance().getLogger(e),it(),e}P.__dashjs_factory_name="AbandonRequestsRule";var B=w.a.getClassFactory(P);function H(){var Yt,e,u=this.context;return Yt={getMaxIndex:function(l){var G=Object(b.a)(u).create();if(!l||!l.hasOwnProperty("getDroppedFramesHistory"))return G;var A=l.getDroppedFramesHistory(),F=l.getStreamInfo().id;if(A){var K=A.getFrameHistory(F);if(!K||K.length===0)return G;for(var Z=0,bt=0,it=b.a.NO_CHANGE,ct=1;ct<K.length;ct++)if(K[ct]&&(Z=K[ct].droppedVideoFrames,(bt=K[ct].totalVideoFrames)>375&&Z/bt>.15)){it=ct-1,e.debug("index: "+it+" Dropped Frames: "+Z+" Total Frames: "+bt);break}return Object(b.a)(u).create(it,{droppedFrames:Z})}return G}},e=Object(f.a)(u).getInstance().getLogger(Yt),Yt}H.__dashjs_factory_name="DroppedFramesRule";var D=w.a.getClassFactory(H);function y(){var Yt,e,u=this.context;return Yt={getMaxIndex:function(l){for(var G=l?l.getSwitchHistory():null,A=G?G.getSwitchRequests():[],F=0,K=0,Z=0,bt=Object(b.a)(u).create(),it=0;it<A.length;it++)if(A[it]!==void 0&&(F+=A[it].drops,K+=A[it].noDrops,Z+=A[it].dropSize,F+K>=6&&F/K>.075)){bt.quality=it>0&&A[it].drops>0?it-1:it,bt.reason={index:bt.quality,drops:F,noDrops:K,dropSize:Z},e.debug("Switch history rule index: "+bt.quality+" samples: "+(F+K)+" drops: "+F);break}return bt}},e=Object(f.a)(u).getInstance().getLogger(Yt),Yt}y.__dashjs_factory_name="SwitchHistoryRule";var S=w.a.getClassFactory(y),T=x(5);function I(Yt){Yt=Yt||{};var e,u,l,G=this.context,A=Yt.dashMetrics,F=Yt.mediaPlayerModel,K=Object(t.a)(G).getInstance();function Z(Zt,ee,we){var Fe=we.reduce(function(N,C,dt){return C>we[N]?dt:N},0);if(Fe===0)return null;var We=Math.max(Zt,10+2*ee.length),Ve=(we[Fe]-1)/(We/10-1);return{gp:Ve,Vp:10/Ve}}function bt(Zt){var ee={},we=Zt.getMediaInfo().bitrateList.map(function(N){return N.bandwidth}),Fe=function(N){return N.map(function(C){return Math.log(C)})}(we);Fe=Fe.map(function(N){return N-Fe[0]+1});var We=F.getStableBufferTime(),Ve=Z(We,we,Fe);return Ve?(ee.state=1,ee.bitrates=we,ee.utilities=Fe,ee.stableBufferTime=We,ee.Vp=Ve.Vp,ee.gp=Ve.gp,ee.lastQuality=0,it(ee)):ee.state=0,ee}function it(Zt){Zt.placeholderBuffer=0,Zt.mostAdvancedSegmentStart=NaN,Zt.lastSegmentWasReplacement=!1,Zt.lastSegmentStart=NaN,Zt.lastSegmentDurationS=NaN,Zt.lastSegmentRequestTimeMs=NaN,Zt.lastSegmentFinishTimeMs=NaN}function ct(Zt,ee){var we=F.getStableBufferTime();if(Zt.stableBufferTime!==we){var Fe=Z(we,Zt.bitrates,Zt.utilities);if(Fe.Vp!==Zt.Vp||Fe.gp!==Zt.gp){var We=A.getCurrentBufferLevel(ee),Ve=We+Zt.placeholderBuffer;Ve-=10,Ve*=Fe.Vp/Zt.Vp,Ve+=10,Zt.stableBufferTime=we,Zt.Vp=Fe.Vp,Zt.gp=Fe.gp,Zt.placeholderBuffer=Math.max(0,Ve-We)}}}function jt(Zt,ee){return Zt.Vp*(Zt.utilities[ee]+Zt.gp)}function me(Zt,ee){for(var we=Zt.bitrates[ee],Fe=Zt.utilities[ee],We=0,Ve=ee-1;Ve>=0;--Ve)if(Zt.utilities[Ve]<Zt.utilities[ee]){var N=Zt.bitrates[Ve],C=Zt.utilities[Ve],dt=Zt.Vp*(Zt.gp+(we*C-N*Fe)/(we-N));We=Math.max(We,dt)}return We}function ue(Zt){var ee=Zt.mediaType===h.a.AUDIO?[h.a.AUDIO]:l;for(var we in ee)l.hasOwnProperty(we)&&l[we].state===2&&(l[we].placeholderBuffer=0)}function Ct(){for(var Zt in l)if(l.hasOwnProperty(Zt)){var ee=l[Zt];ee.state!==0&&(ee.state=1,it(ee))}}function Nt(Zt){if(Zt&&Zt.chunk&&Zt.chunk.mediaInfo){var ee=l[Zt.chunk.mediaInfo.type];if(ee&&ee.state!==0){var we=Zt.chunk.start;isNaN(ee.mostAdvancedSegmentStart)||we>ee.mostAdvancedSegmentStart?(ee.mostAdvancedSegmentStart=we,ee.lastSegmentWasReplacement=!1):ee.lastSegmentWasReplacement=!0,ee.lastSegmentStart=we,ee.lastSegmentDurationS=Zt.chunk.duration,ee.lastQuality=Zt.chunk.quality,Gt(ee,Zt.chunk.mediaInfo.type)}}}function Ot(Zt){if(Zt&&Zt.metric===c.a.HTTP_REQUEST&&Zt.value&&Zt.value.type===T.a.MEDIA_SEGMENT_TYPE&&Zt.value.trace&&Zt.value.trace.length){var ee=l[Zt.mediaType];ee&&ee.state!==0&&(ee.lastSegmentRequestTimeMs=Zt.value.trequest.getTime(),ee.lastSegmentFinishTimeMs=Zt.value._tfinish.getTime(),Gt(ee,Zt.mediaType))}}function Gt(Zt,ee){if(!isNaN(Zt.lastSegmentStart)&&!isNaN(Zt.lastSegmentRequestTimeMs)&&!isNaN(Zt.placeholderBuffer)){if(Zt.placeholderBuffer*=.99,!isNaN(Zt.lastSegmentFinishTimeMs)){var we=A.getCurrentBufferLevel(ee)+.001*(Zt.lastSegmentFinishTimeMs-Zt.lastSegmentRequestTimeMs),Fe=jt(Zt,Zt.lastQuality),We=Math.max(0,Fe-we);Zt.placeholderBuffer=Math.min(We,Zt.placeholderBuffer)}Zt.lastSegmentWasReplacement&&!isNaN(Zt.lastSegmentDurationS)&&(Zt.placeholderBuffer+=Zt.lastSegmentDurationS),Zt.lastSegmentStart=NaN,Zt.lastSegmentRequestTimeMs=NaN}}function ve(Zt){if(Zt){var ee=l[Zt.mediaType];ee&&ee.state!==0&&(ee.abrQuality=Zt.newQuality)}}function Ae(Zt){if(Zt){var ee=l[Zt.mediaType];if(ee&&ee.state!==0){var we,Fe=A.getCurrentBufferLevel(Zt.mediaType);we=ee.abrQuality>0?me(ee,ee.abrQuality):10;var We=Math.max(0,we-Fe);ee.placeholderBuffer=Math.min(ee.placeholderBuffer,We)}}}function ie(){l={}}return e={getMaxIndex:function(Zt){var ee=Object(b.a)(G).create();if(!(Zt&&Zt.hasOwnProperty("getMediaInfo")&&Zt.hasOwnProperty("getMediaType")&&Zt.hasOwnProperty("getScheduleController")&&Zt.hasOwnProperty("getStreamInfo")&&Zt.hasOwnProperty("getAbrController")&&Zt.hasOwnProperty("useBufferOccupancyABR")))return ee;var we=Zt.getMediaInfo(),Fe=Zt.getMediaType(),We=Zt.getScheduleController(),Ve=Zt.getStreamInfo(),N=Zt.getAbrController(),C=N.getThroughputHistory(),dt=Ve?Ve.id:null,Bt=Ve&&Ve.manifestInfo&&Ve.manifestInfo.isDynamic,Ut=Zt.useBufferOccupancyABR();if(ee.reason=ee.reason||{},!Ut)return ee;We.setTimeToLoadDelay(0);var xt=function(yn){var zn=yn.getMediaType(),Fn=l[zn];return Fn?Fn.state!==0&&ct(Fn,zn):(Fn=bt(yn),l[zn]=Fn),Fn}(Zt);if(xt.state===0)return ee;var de,Ge=A.getCurrentBufferLevel(Fe),Je=C.getAverageThroughput(Fe,Bt),Ue=C.getSafeAverageThroughput(Fe,Bt),$e=C.getAverageLatency(Fe);if(ee.reason.state=xt.state,ee.reason.throughput=Je,ee.reason.latency=$e,isNaN(Je))return ee;switch(xt.state){case 1:de=N.getQualityForBitrate(we,Ue,dt,$e),ee.quality=de,ee.reason.throughput=Ue,xt.placeholderBuffer=Math.max(0,me(xt,de)-Ge),xt.lastQuality=de,!isNaN(xt.lastSegmentDurationS)&&Ge>=xt.lastSegmentDurationS&&(xt.state=2);break;case 2:(function(yn,zn){var Fn=Date.now();if(isNaN(yn.lastSegmentFinishTimeMs)){if(!isNaN(yn.lastCallTimeMs)){var Pn=.001*(Fn-yn.lastCallTimeMs);yn.placeholderBuffer+=Math.max(0,Pn)}}else{var Gn=.001*(Fn-yn.lastSegmentFinishTimeMs);yn.placeholderBuffer+=Math.max(0,Gn)}yn.lastCallTimeMs=Fn,yn.lastSegmentStart=NaN,yn.lastSegmentRequestTimeMs=NaN,yn.lastSegmentFinishTimeMs=NaN,ct(yn,zn)})(xt,Fe),de=function(yn,zn){for(var Fn=yn.bitrates.length,Pn=NaN,Gn=NaN,qn=0;qn<Fn;++qn){var Bn=(yn.Vp*(yn.utilities[qn]+yn.gp)-zn)/yn.bitrates[qn];(isNaN(Gn)||Bn>=Gn)&&(Gn=Bn,Pn=qn)}return Pn}(xt,Ge+xt.placeholderBuffer);var Xe=N.getQualityForBitrate(we,Ue,dt,$e);de>xt.lastQuality&&de>Xe&&(de=Math.max(Xe,xt.lastQuality));var Tn=Math.max(0,Ge+xt.placeholderBuffer-jt(xt,de));Tn<=xt.placeholderBuffer?(xt.placeholderBuffer-=Tn,Tn=0):(Tn-=xt.placeholderBuffer,xt.placeholderBuffer=0,de<N.getMaxAllowedIndexFor(Fe,dt)?We.setTimeToLoadDelay(1e3*Tn):Tn=0),ee.quality=de,ee.reason.throughput=Je,ee.reason.latency=$e,ee.reason.bufferLevel=Ge,ee.reason.placeholderBuffer=xt.placeholderBuffer,ee.reason.delay=Tn,xt.lastQuality=de;break;default:u.debug("BOLA ABR rule invoked in bad state."),ee.quality=N.getQualityForBitrate(we,Ue,dt,$e),ee.reason.state=xt.state,ee.reason.throughput=Ue,ee.reason.latency=$e,xt.state=1,it(xt)}return ee},reset:function(){ie(),K.off(o.a.BUFFER_EMPTY,ue,e),K.off(o.a.PLAYBACK_SEEKING,Ct,e),K.off(o.a.METRIC_ADDED,Ot,e),K.off(o.a.QUALITY_CHANGE_REQUESTED,ve,e),K.off(o.a.FRAGMENT_LOADING_ABANDONED,Ae,e),K.off(r.a.MEDIA_FRAGMENT_LOADED,Nt,e)}},u=Object(f.a)(G).getInstance().getLogger(e),ie(),K.on(o.a.BUFFER_EMPTY,ue,e),K.on(o.a.PLAYBACK_SEEKING,Ct,e),K.on(o.a.METRIC_ADDED,Ot,e),K.on(o.a.QUALITY_CHANGE_REQUESTED,ve,e),K.on(o.a.FRAGMENT_LOADING_ABANDONED,Ae,e),K.on(r.a.MEDIA_FRAGMENT_LOADED,Nt,e),e}I.__dashjs_factory_name="BolaRule";var L=w.a.getClassFactory(I);function J(Yt){Yt=Yt||{};var e,u,l,G,A=this.context,F=Yt.dashMetrics,K=Object(t.a)(A).getInstance();function Z(Ot){var Gt={},ve=Ot.getMediaInfo(),Ae=ve.bitrateList.map(function(ie){return ie.bandwidth/1e3});return Gt.state=1,Gt.bitrates=Ae,Gt.lastQuality=0,function(ie){!ie||!ie.type||(l[ie.type]={},l[ie.type].w=[],l[ie.type].prev_w=[],l[ie.type].Q=0,l[ie.type].segment_request_start_s=0,l[ie.type].segment_download_finish_s=0,l[ie.type].B_target=1.5)}(ve),bt(Gt),Gt}function bt(Ot){Ot.placeholderBuffer=0,Ot.mostAdvancedSegmentStart=NaN,Ot.lastSegmentWasReplacement=!1,Ot.lastSegmentStart=NaN,Ot.lastSegmentDurationS=NaN,Ot.lastSegmentRequestTimeMs=NaN,Ot.lastSegmentFinishTimeMs=NaN}function it(){for(var Ot in u)if(u.hasOwnProperty(Ot)){var Gt=u[Ot];Gt.state!==0&&(Gt.state=1,bt(Gt))}}function ct(Ot){if(Ot&&Ot.chunk&&Ot.chunk.mediaInfo){var Gt=u[Ot.chunk.mediaInfo.type],ve=l[Ot.chunk.mediaInfo.type];if(Gt&&Gt.state!==0){var Ae=Ot.chunk.start;isNaN(Gt.mostAdvancedSegmentStart)||Ae>Gt.mostAdvancedSegmentStart?(Gt.mostAdvancedSegmentStart=Ae,Gt.lastSegmentWasReplacement=!1):Gt.lastSegmentWasReplacement=!0,Gt.lastSegmentStart=Ae,Gt.lastSegmentDurationS=Ot.chunk.duration,Gt.lastQuality=Ot.chunk.quality,me(Gt,ve)}}}function jt(Ot){if(Ot&&Ot.metric===c.a.HTTP_REQUEST&&Ot.value&&Ot.value.type===T.a.MEDIA_SEGMENT_TYPE&&Ot.value.trace&&Ot.value.trace.length){var Gt=u[Ot.mediaType],ve=l[Ot.mediaType];Gt&&Gt.state!==0&&(Gt.lastSegmentRequestTimeMs=Ot.value.trequest.getTime(),Gt.lastSegmentFinishTimeMs=Ot.value._tfinish.getTime(),me(Gt,ve))}}function me(Ot,Gt){isNaN(Ot.lastSegmentStart)||isNaN(Ot.lastSegmentRequestTimeMs)||(Gt.segment_request_start_s=.001*Ot.lastSegmentRequestTimeMs,Gt.segment_download_finish_s=.001*Ot.lastSegmentFinishTimeMs,Ot.lastSegmentStart=NaN,Ot.lastSegmentRequestTimeMs=NaN)}function ue(Ot){if(Ot&&Ot.mediaType){var Gt=u[Ot.mediaType];Gt&&Gt.state!==0&&(Gt.abrQuality=Ot.newQuality)}}function Ct(Ot,Gt){if(Ot.length!==Gt.length)return-1;for(var ve=0,Ae=0;Ae<Ot.length;Ae++)ve+=Ot[Ae]*Gt[Ae];return ve}function Nt(){u={},l={}}return e={getMaxIndex:function(Ot){var Gt,ve=Object(b.a)(A).create(),Ae=Math.pow(4,.99),ie=Math.max(Math.pow(4,1),Ae*Math.sqrt(4)),Zt=Ot.getMediaInfo(),ee=Ot.getMediaType(),we=Zt.bitrateList.map(function(kn){return kn.bandwidth}),Fe=we.length,We=Ot.getScheduleController(),Ve=Ot.getStreamInfo(),N=Ot.getAbrController(),C=N.getThroughputHistory(),dt=Ve&&Ve.manifestInfo&&Ve.manifestInfo.isDynamic,Bt=Ot.useL2AABR(),Ut=F.getCurrentBufferLevel(ee,!0),xt=C.getSafeAverageThroughput(ee,dt),de=C.getAverageThroughput(ee,dt),Ge=C.getAverageLatency(ee),Je=Ot.getVideoModel().getPlaybackRate();if(!(Ot&&Ot.hasOwnProperty("getMediaInfo")&&Ot.hasOwnProperty("getMediaType")&&Ot.hasOwnProperty("getScheduleController")&&Ot.hasOwnProperty("getStreamInfo")&&Ot.hasOwnProperty("getAbrController")&&Ot.hasOwnProperty("useL2AABR"))||(ve.reason=ve.reason||{},!Bt||ee===h.a.AUDIO))return ve;We.setTimeToLoadDelay(0);var Ue=function(kn){var Cn=kn.getMediaType(),ur=u[Cn];return ur||(ur=Z(kn),u[Cn]=ur),ur}(Ot);if(Ue.state===0)return ve;var $e=l[ee];if(!$e||(ve.reason.state=Ue.state,ve.reason.throughput=de,ve.reason.latency=Ge,isNaN(de)))return ve;switch(Ue.state){case 1:if(Gt=N.getQualityForBitrate(Zt,xt,Ve.id,Ge),ve.quality=Gt,ve.reason.throughput=xt,Ue.lastQuality=Gt,!isNaN(Ue.lastSegmentDurationS)&&Ut>=$e.B_target){Ue.state=2,$e.Q=Ae;for(var Xe=0;Xe<Fe;++Xe)Xe===Ue.lastQuality?$e.prev_w[Xe]=1:$e.prev_w[Xe]=0}break;case 2:var Tn=[],yn=F.getCurrentHttpRequest(ee).trace.reduce(function(kn,Cn){return kn+Cn.d},0),zn=F.getCurrentHttpRequest(ee).trace.reduce(function(kn,Cn){return kn+Cn.b[0]},0),Fn=Math.round(8*zn/yn);Fn<1&&(Fn=1);for(var Pn=Ue.lastSegmentDurationS,Gn=1,qn=0;qn<Fe;++qn)we[qn]=we[qn]/1e3,Je*we[qn]>Fn&&(Gn=-1),$e.w[qn]=$e.prev_w[qn]+Gn*(Pn/(2*ie))*(($e.Q+Ae)*(Je*we[qn]/Fn));$e.w=function(kn){for(var Cn=kn.length,ur=!1,wr=[],br=0;br<Cn;++br)wr[br]=kn[br];for(var dr=kn.sort(function(Xt,re){return re-Xt}),te=0,Rt=0,ae=[],Lt=0;Lt<Cn-1;++Lt)if((Rt=((te+=dr[Lt])-1)/(Lt+1))>=dr[Lt+1]){ur=!0;break}ur||(Rt=(te+dr[Cn-1]-1)/Cn);for(var qt=0;qt<Cn;++qt)ae[qt]=Math.max(wr[qt]-Rt,0);return ae}($e.w);for(var Bn=0;Bn<Fe;++Bn)Tn[Bn]=$e.w[Bn]-$e.prev_w[Bn],$e.prev_w[Bn]=$e.w[Bn];$e.Q=Math.max(0,$e.Q-Pn+Pn*Je*((Ct(we,$e.prev_w)+Ct(we,Tn))/Fn));for(var $n=[],er=0;er<Fe;++er)$n[er]=Math.abs(we[er]-Ct($e.w,we));(Gt=$n.indexOf(Math.min.apply(Math,$n)))>Ue.lastQuality&&we[Ue.lastQuality+1]<=Fn&&(Gt=Ue.lastQuality+1),we[Gt]>=Fn&&($e.Q=2*Math.max(Ae,$e.Q)),ve.quality=Gt,ve.reason.throughput=de,ve.reason.latency=Ge,ve.reason.bufferLevel=Ut,Ue.lastQuality=ve.quality;break;default:G.debug("L2A ABR rule invoked in bad state."),ve.quality=N.getQualityForBitrate(Zt,xt,Ve.id,Ge),ve.reason.state=Ue.state,ve.reason.throughput=xt,ve.reason.latency=Ge,Ue.state=1,bt(Ue)}return ve},reset:function(){Nt(),K.off(r.a.PLAYBACK_SEEKING,it,e),K.off(r.a.MEDIA_FRAGMENT_LOADED,ct,e),K.off(r.a.METRIC_ADDED,jt,e),K.off(r.a.QUALITY_CHANGE_REQUESTED,ue,e)}},G=Object(f.a)(A).getInstance().getLogger(e),Nt(),K.on(r.a.PLAYBACK_SEEKING,it,e),K.on(r.a.MEDIA_FRAGMENT_LOADED,ct,e),K.on(r.a.METRIC_ADDED,jt,e),K.on(r.a.QUALITY_CHANGE_REQUESTED,ue,e),e}J.__dashjs_factory_name="L2ARule";var nt=w.a.getClassFactory(J),j="manual_weight_selection",O="random_weight_selection",at="dynamic_weight_selection";function X(){var Yt,e,u,l,G,A,F,K,Z,bt=this.context;function it(){u=null,l=1,G=100,A=0,F=null,K=null,Z=at}function ct(){var Ot=0;if(u)for(var Gt=0;Gt<u.length;Gt++){var ve=u[Gt];ve.state.throughput>Ot&&(Ot=ve.state.throughput)}return Ot}function jt(Ot,Gt,ve){var Ae=Ot.map(function(ie,Zt){return ve[Zt]*Math.pow(ie-Gt[Zt],2)}).reduce(function(ie,Zt){return ie+Zt});return(Ae<0?-1:1)*Math.sqrt(Math.abs(Ae))}function me(Ot,Gt){return jt([Ot.state.throughput,Ot.state.latency,Ot.state.rebuffer,Ot.state.switch],[Gt.state.throughput,Gt.state.latency,Gt.state.rebuffer,Gt.state.switch],[1,1,1,1])}function ue(Ot,Gt,ve){for(var Ae=0;Ae<Gt.length;Ae++){var ie=Gt[Ae],Zt=me(ie,Ot);Ct(ie,ve,Math.exp(-1*Math.pow(Zt,2)/(2*Math.pow(.1,2))))}}function Ct(Ot,Gt,ve){var Ae=Ot.state,ie=[.01,.01,.01,.01];Ae.throughput=Ae.throughput+(Gt[0]-Ae.throughput)*ie[0]*ve,Ae.latency=Ae.latency+(Gt[1]-Ae.latency)*ie[1]*ve,Ae.rebuffer=Ae.rebuffer+(Gt[2]-Ae.rebuffer)*ie[2]*ve,Ae.switch=Ae.switch+(Gt[3]-Ae.switch)*ie[3]*ve}function Nt(Ot,Gt,ve,Ae,ie,Zt,ee){F||(F=K[K.length-1]);var we=Ot.findWeightVector(Gt,ve,Ae,ie,Zt,ee);we!==null&&we!==-1&&(F=we)}return Yt={getNextQuality:function(Ot,Gt,ve,Ae,ie,Zt,ee){var we=ve,Fe=Ae,We=Gt,Ve=function(Pn){if(!u){u=[];var Gn=Pn.bitrateList,qn=[];A=Gn[0].bandwidth,Gn.forEach(function(kn){qn.push(kn.bandwidth),kn.bandwidth<A&&(A=kn.bandwidth)}),er=qn.map(function(kn){return Math.pow(kn,2)}).reduce(function(kn,Cn){return kn+Cn}),l=Math.sqrt(er);for(var Bn=0;Bn<Gn.length;Bn++){var $n={qualityIndex:Bn,bitrate:Gn[Bn].bandwidth,state:{throughput:Gn[Bn].bandwidth/l,latency:0,rebuffer:0,switch:0}};u.push($n)}K=function(kn){var Cn=[],ur=function(wn){for(var He=[],ke=0;ke<wn;ke++){var on=[Math.random()*ct(),Math.random(),Math.random(),Math.random()];He.push(on)}return He}(Math.pow(kn.length,2));Cn.push(ur[0]);for(var wr=[1,1,1,1],br=1;br<kn.length;br++){for(var dr=null,te=null,Rt=0;Rt<ur.length;Rt++){for(var ae=ur[Rt],Lt=null,qt=0;qt<Cn.length;qt++){var Xt=jt(ae,Cn[qt],wr);(Lt===null||Xt<Lt)&&(Lt=Xt)}(te===null||Lt>te)&&(dr=ae,te=Lt)}Cn.push(dr)}for(var re=null,be=null,Ne=0;Ne<Cn.length;Ne++){for(var Be=0,an=0;an<Cn.length;an++)Ne!==an&&(Be+=jt(Cn[Ne],Cn[an],wr));(re===null||Be>re)&&(re=Be,be=Ne)}var rn=[];for(rn.push(Cn[be]),Cn.splice(be,1);Cn.length>0;){for(var Ce=null,Ke=null,Qe=0;Qe<Cn.length;Qe++){var cn=jt(rn[0],Cn[Qe],wr);(Ce===null||cn<Ce)&&(Ce=cn,Ke=Qe)}rn.push(Cn[Ke]),Cn.splice(Ke,1)}return rn}(u)}var er;return u}(Ot),N=Gt/l;N>1&&(N=ct()),ve/=G,e.debug("getNextQuality called throughput:".concat(N," latency:").concat(ve," bufferSize:").concat(Ae," currentQualityIndex:").concat(Zt," playbackRate:").concat(ie));var C=Ve[Zt],dt=C.bitrate*ee.getSegmentDuration()/We,Bt=Math.max(0,dt-Fe);if(Fe-dt<ee.getMinBuffer())return e.debug("Buffer is low for bitrate= ".concat(C.bitrate," downloadTime=").concat(dt," currentBuffer=").concat(Fe," rebuffer=").concat(Bt)),function(Pn,Gn){var qn=0,Bn=Pn;if(u)for(var $n=0;$n<u.length;$n++){var er=u[$n];er.bitrate<Pn.bitrate&&er.bitrate>qn&&Gn>er.bitrate&&(qn=er.bitrate,Bn=er)}return Bn}(C,We).qualityIndex;switch(Z){case j:F=[.4,.4,.4,.4];break;case O:(function(Pn){F=function(Gn,qn){for(var Bn=[],$n=Math.sqrt(2/Gn),er=0;er<qn;er++)Bn.push(Math.random()*$n);return F=Bn}(Pn.length,4)})(Ve);break;case at:Nt(ee,Ve,we,Fe,Bt,We,ie);break;default:Nt(ee,Ve,we,Fe,Bt,We,ie)}for(var Ut=null,xt=null,de=null,Ge=0;Ge<Ve.length;Ge++){var Je=Ve[Ge],Ue=Je.state,$e=[Ue.throughput,Ue.latency,Ue.rebuffer,Ue.switch],Xe=F.slice(),Tn=ee.getNextBufferWithBitrate(Je.bitrate,Fe,We),yn=Tn<ee.getMinBuffer();yn&&e.debug("Buffer is low for bitrate=".concat(Je.bitrate," downloadTime=").concat(dt," currentBuffer=").concat(Fe," nextBuffer=").concat(Tn)),(Je.bitrate>Gt-1e4||yn)&&Je.bitrate!==A&&(Xe[0]=100);var zn=jt($e,[N,0,0,0],Xe);(Ut===null||zn<Ut)&&(Ut=zn,xt=Je.qualityIndex,de=Je)}var Fn=Math.abs(C.bitrate-de.bitrate)/l;return ue(C,Ve,[N,ve,Bt,Fn]),ue(de,Ve,[N,0,0,Fn]),xt},reset:function(){it()}},e=Object(f.a)(bt).getInstance().getLogger(Yt),it(),Yt}X.__dashjs_factory_name="LearningAbrController";var z=w.a.getClassFactory(X);function vt(Yt){return(vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(Yt)}function Mt(Yt,e){for(var u=0;u<e.length;u++){var l=e[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(Yt,(G=l.key,A=void 0,A=function(F,K){if(vt(F)!=="object"||F===null)return F;var Z=F[Symbol.toPrimitive];if(Z!==void 0){var bt=Z.call(F,K||"default");if(vt(bt)!=="object")return bt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(F)}(G,"string"),vt(A)==="symbol"?A:String(A)),l)}var G,A}function Pt(Yt,e,u){return e&&Mt(Yt.prototype,e),u&&Mt(Yt,u),Object.defineProperty(Yt,"prototype",{writable:!1}),Yt}var ge=Pt(function Yt(){(function(e,u){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")})(this,Yt),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0});function Q(){var Yt,e,u,l,G;function A(){e=null,u=null,l=null,G=null}function F(Z,bt,it,ct){var jt=new ge;return jt.type=Z,jt.weights.bitrateReward=bt||1,jt.weights.bitrateSwitchPenalty=1,jt.weights.rebufferPenalty=it||1e3,jt.weights.latencyPenalty=[],jt.weights.latencyPenalty.push({threshold:1.1,penalty:.05*ct}),jt.weights.latencyPenalty.push({threshold:1e8,penalty:.1*it}),jt.weights.playbackSpeedPenalty=ct||200,jt}function K(Z,bt,it,ct,jt){jt.bitrateWSum+=jt.weights.bitrateReward*Z,jt.lastBitrate&&(jt.bitrateSwitchWSum+=jt.weights.bitrateSwitchPenalty*Math.abs(Z-jt.lastBitrate)),jt.lastBitrate=Z,jt.rebufferWSum+=jt.weights.rebufferPenalty*bt;for(var me=0;me<jt.weights.latencyPenalty.length;me++){var ue=jt.weights.latencyPenalty[me];if(it<=ue.threshold){jt.latencyWSum+=ue.penalty*it;break}}jt.playbackSpeedWSum+=jt.weights.playbackSpeedPenalty*Math.abs(1-ct),jt.totalQoe=jt.bitrateWSum-jt.bitrateSwitchWSum-jt.rebufferWSum-jt.latencyWSum-jt.playbackSpeedWSum}return Yt={setupPerSegmentQoe:function(Z,bt,it){e=F("segment",Z,bt,it),u=Z,l=bt,G=it},logSegmentMetrics:function(Z,bt,it,ct){e&&K(Z,bt,it,ct,e)},getPerSegmentQoe:function(){return e},calculateSingleUseQoe:function(Z,bt,it,ct){var jt=null;return u&&l&&G&&(jt=F("segment",u,l,G)),jt?(K(Z,bt,it,ct,jt),jt.totalQoe):0},reset:function(){A()}},A(),Yt}Q.__dashjs_factory_name="LoLpQoeEvaluator";var ft=w.a.getClassFactory(Q);function Ht(Yt){var e,u,l,G,A,F=Yt.targetLatency,K=Yt.bufferMin,Z=Yt.segmentDuration,bt=Yt.qoeEvaluator;function it(){return Z}function ct(jt,me){var ue=it();return me>ue?jt-ue:jt+ue-me}return e={getMinBuffer:function(){return K},getSegmentDuration:it,getNextBufferWithBitrate:function(jt,me,ue){return ct(me,jt*Z/ue)},getNextBuffer:ct,findWeightVector:function(jt,me,ue,Ct,Nt,Ot){var Gt=null,ve=null,Ae=null,ie=Math.abs(me-l);return jt.forEach(function(Zt){u.forEach(function(ee){ee[0];var we=ee[1],Fe=ee[2],We=(ee[3],Zt.bitrate*Z/Nt),Ve=ct(ue,We),N=(Fe===0?10:1/Fe)*Math.max(1e-5,We-Ve),C=(we===0?10:1/we)*Zt.state.latency,dt=bt.calculateSingleUseQoe(Zt.bitrate,N,C,Ot);(Gt===null||dt>Gt)&&function(Bt,Ut,xt){return Bt>F+xt?!1:Ut>=K}(me,Ve,ie)&&(Gt=dt,ve=ee,Ae=Zt.bitrate)})}),ve===null&&Ae===null&&(ve=-1),l=me,ve}},G=[.2,.4,.6,.8,1],A=4,u=function jt(me,ue,Ct){if(Ct===ue)return me;for(var Nt=me.length,Ot=0;Ot<Nt;Ot++)for(var Gt=me.shift(),ve=0;ve<G.length;ve++)me.push(Gt.concat(G[ve]));return jt(me,ue,Ct+1)}(G.map(function(jt){return[jt]}),A,1),l=0,e}Ht.__dashjs_factory_name="LoLpWeightSelector";var _e=w.a.getClassFactory(Ht);function Jt(Yt){var e,u,l,G,A=(Yt=Yt||{}).dashMetrics,F=this.context;return u={getMaxIndex:function(K){try{var Z=Object(b.a)(F).create(),bt=K.getMediaInfo().type,it=K.getAbrController(),ct=K.getStreamInfo(),jt=it.getQualityFor(bt,ct.id),me=K.getMediaInfo(),ue=A.getCurrentBufferState(bt),Ct=K.getScheduleController(),Nt=A.getCurrentBufferLevel(bt,!0),Ot=ct&&ct.manifestInfo?ct.manifestInfo.isDynamic:null,Gt=Ct.getPlaybackController(),ve=Gt.getCurrentLiveLatency();if(!K.useLoLPABR()||bt===h.a.AUDIO)return Z;ve||(ve=0);var Ae=Gt.getPlaybackRate(),ie=it.getThroughputHistory().getSafeAverageThroughput(bt,Ot);if(e.debug("Throughput ".concat(Math.round(ie)," kbps")),isNaN(ie)||!ue||it.getAbandonmentStateFor(ct.id,bt)===c.a.ABANDON_LOAD)return Z;for(var Zt=me.bitrateList,ee=K.getRepresentationInfo().fragmentDuration,we=Zt[0].bandwidth/1e3,Fe=Zt[Zt.length-1].bandwidth/1e3,We=0;We<Zt.length;We++){var Ve=Zt[We].bandwidth/1e3;Ve>Fe?Fe=Ve:Ve<we&&(we=Ve)}var N=Zt[jt].bandwidth/1e3,C=A.getCurrentHttpRequest(bt,!0),dt=(C.tresponse.getTime()-C.trequest.getTime())/1e3,Bt=dt>ee?dt-ee:0;G.setupPerSegmentQoe(ee,Fe,we),G.logSegmentMetrics(N,Bt,ve,Ae);var Ut=_e(F).create({targetLatency:1.5,bufferMin:.3,segmentDuration:ee,qoeEvaluator:G});return Z.quality=l.getNextQuality(me,1e3*ie,ve,Nt,Ae,jt,Ut),Z.reason={throughput:ie,latency:ve},Z.priority=b.a.PRIORITY.STRONG,Ct.setTimeToLoadDelay(0),Z.quality!==jt&&console.log("[TgcLearningRule]["+bt+"] requesting switch to index: ",Z.quality,"Average throughput",Math.round(ie),"kbps"),Z}catch(xt){throw xt}},reset:function(){l.reset(),G.reset()}},e=Object(f.a)(F).getInstance().getLogger(u),l=z(F).create(),G=ft(F).create(),u}Jt.__dashjs_factory_name="LoLPRule";var Te=w.a.getClassFactory(Jt);function It(Yt){Yt=Yt||{};var e,u,l=this.context,G=Yt.mediaPlayerModel,A=Yt.customParametersModel,F=Yt.dashMetrics,K=Yt.settings;function Z(it){return it.filter(function(ct){return ct.quality>b.a.NO_CHANGE})}function bt(it){var ct,jt,me,ue,Ct,Nt={},Ot=null;if(it.length!==0){for(Nt[b.a.PRIORITY.STRONG]={quality:b.a.NO_CHANGE,reason:null},Nt[b.a.PRIORITY.WEAK]={quality:b.a.NO_CHANGE,reason:null},Nt[b.a.PRIORITY.DEFAULT]={quality:b.a.NO_CHANGE,reason:null},ct=0,jt=it.length;ct<jt;ct+=1)(me=it[ct]).quality!==b.a.NO_CHANGE&&(Nt[me.priority].quality===b.a.NO_CHANGE||Nt[me.priority].quality>me.quality)&&(Nt[me.priority].quality=me.quality,Nt[me.priority].reason=me.reason||null);return Nt[b.a.PRIORITY.WEAK].quality!==b.a.NO_CHANGE&&(Ot=Nt[b.a.PRIORITY.WEAK]),Nt[b.a.PRIORITY.DEFAULT].quality!==b.a.NO_CHANGE&&(Ot=Nt[b.a.PRIORITY.DEFAULT]),Nt[b.a.PRIORITY.STRONG].quality!==b.a.NO_CHANGE&&(Ot=Nt[b.a.PRIORITY.STRONG]),Ot&&(ue=Ot.quality,Ct=Ot.reason),Object(b.a)(l).create(ue,Ct)}}return{initialize:function(){e=[],u=[],K.get().streaming.abr.useDefaultABRRules&&(K.get().streaming.abr.ABRStrategy===h.a.ABR_STRATEGY_L2A?e.push(nt(l).create({dashMetrics:F,settings:K})):K.get().streaming.abr.ABRStrategy===h.a.ABR_STRATEGY_LoLP?e.push(Te(l).create({dashMetrics:F})):(e.push(L(l).create({dashMetrics:F,mediaPlayerModel:G,settings:K})),e.push(d(l).create({dashMetrics:F})),K.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&e.push(v(l).create({dashMetrics:F,settings:K})),K.get().streaming.abr.additionalAbrRules.switchHistoryRule&&e.push(S(l).create()),K.get().streaming.abr.additionalAbrRules.droppedFramesRule&&e.push(D(l).create()),K.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&u.push(B(l).create({dashMetrics:F,mediaPlayerModel:G,settings:K})))),A.getAbrCustomRules().forEach(function(it){it.type==="qualitySwitchRules"&&e.push(it.rule(l).create()),it.type==="abandonFragmentRules"&&u.push(it.rule(l).create())})},reset:function(){[e,u].forEach(function(it){it&&it.length&&it.forEach(function(ct){return ct.reset&&ct.reset()})}),e=[],u=[]},getMaxQuality:function(it){return bt(Z(e.map(function(ct){return ct.getMaxIndex(it)})))||Object(b.a)(l).create()},getMinSwitchRequest:bt,shouldAbandonFragment:function(it,ct){return bt(Z(u.map(function(jt){return jt.shouldAbandon(it,ct)})))||Object(b.a)(l).create()},getQualitySwitchRules:function(){return e}}}It.__dashjs_factory_name="ABRRulesCollection";var Wt=w.a.getClassFactory(It);Wt.QUALITY_SWITCH_RULES="qualitySwitchRules",Wt.ABANDON_FRAGMENT_RULES="abandonFragmentRules",w.a.updateSingletonFactory(It.__dashjs_factory_name,Wt),At.a=Wt},function(Ee,At,x){function w(c){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(c)}function b(c,n){for(var d=0;d<n.length;d++){var t=n[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,(r=t.key,f=void 0,f=function(o,g){if(w(o)!=="object"||o===null)return o;var v=o[Symbol.toPrimitive];if(v!==void 0){var P=v.call(o,g||"default");if(w(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(o)}(r,"string"),w(f)==="symbol"?f:String(f)),t)}var r,f}var h=function(){function c(){(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")})(this,c)}var n,d;return n=c,(d=[{key:"extend",value:function(t,r){if(t){var f=!!r&&r.override,o=!!r&&r.publicOnly;for(var g in t)!t.hasOwnProperty(g)||this[g]&&!f||o&&t[g].indexOf("public_")===-1||(this[g]=t[g])}}}])&&b(n.prototype,d),Object.defineProperty(n,"prototype",{writable:!1}),c}();At.a=h},function(Ee,At,x){var w=x(3),b=x(20);function h(n){var d=(n=n||{}).requestModifier;function t(r){var f=new Date,o=r.request,g=new XMLHttpRequest;if(g.open(r.method,r.url,!0),o.responseType&&(g.responseType=o.responseType),o.range&&g.setRequestHeader("Range","bytes="+o.range),o.requestStartDate||(o.requestStartDate=f),d&&d.modifyRequestHeader&&(g=d.modifyRequestHeader(g,{url:r.url})),r.headers)for(var v in r.headers){var P=r.headers[v];P&&g.setRequestHeader(v,P)}g.withCredentials=r.withCredentials,g.onload=r.onload,g.onloadend=r.onend,g.onerror=r.onerror,g.onprogress=r.progress,g.onabort=r.onabort,g.ontimeout=r.ontimeout,g.timeout=r.timeout,g.send(),r.response=g}return{load:function(r){d&&d.modifyRequest?Object(b.b)(r,d).then(function(){return t(r)}):t(r)},abort:function(r){var f=r.response;f.onloadend=f.onerror=f.onprogress=void 0,f.abort()}}}h.__dashjs_factory_name="XHRLoader";var c=w.a.getClassFactory(h);At.a=c},function(Ee,At,x){Ee.exports=x(76)},function(Ee,At,x){function w(n){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function b(n,d){for(var t=0;t<d.length;t++){var r=d[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(f=r.key,o=void 0,o=function(g,v){if(w(g)!=="object"||g===null)return g;var P=g[Symbol.toPrimitive];if(P!==void 0){var B=P.call(g,v||"default");if(w(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}(f,"string"),w(o)==="symbol"?o:String(o)),r)}var f,o}function h(n,d,t){return d&&b(n.prototype,d),t&&b(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var c=h(function n(){(function(d,t){if(!(d instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.schemeIdUri="",this.value=""});At.a=c},function(Ee,At,x){var w=x(31),b=x(3),h=x(16),c=x(15),n=x(27),d=x(1);function t(){var r,f,o,g,v,P,B,H,D=this.context,y=Object(h.a)(D).getInstance();function S(){g=[],v=[],P=[],H=[],B=null,f=[]}function T(nt,j){var O=-1;nt.some(function(at,X){if(at===j)return O=X,!0}),O<0||nt.splice(O,1)}function I(nt){var j;for(j=0;j<H.length;j++)if(H[j].rulename===nt)return j;return-1}function L(nt,j){J(nt,j);var O=new w.a;O.schemeIdUri=nt,O.value=j,f.push(O)}function J(nt,j){Object(c.b)(nt,"string"),Object(c.b)(j,"string"),f.forEach(function(O,at){O.schemeIdUri===nt&&O.value===j&&f.splice(at,1)})}return r={getCustomInitialTrackSelectionFunction:function(){return B},setCustomInitialTrackSelectionFunction:function(nt){B=nt},resetCustomInitialTrackSelectionFunction:function(){B=null},getLicenseResponseFilters:function(){return v},getLicenseRequestFilters:function(){return g},getCustomCapabilitiesFilters:function(){return P},registerCustomCapabilitiesFilter:function(nt){P.push(nt)},registerLicenseResponseFilter:function(nt){v.push(nt)},registerLicenseRequestFilter:function(nt){g.push(nt)},unregisterCustomCapabilitiesFilter:function(nt){T(P,nt)},unregisterLicenseResponseFilter:function(nt){T(v,nt)},unregisterLicenseRequestFilter:function(nt){T(g,nt)},addAbrCustomRule:function(nt,j,O){if(typeof nt!="string"||nt!==n.a.ABANDON_FRAGMENT_RULES&&nt!==n.a.QUALITY_SWITCH_RULES||typeof j!="string")throw d.a.BAD_ARGUMENT_ERROR;var at=I(j);at===-1?H.push({type:nt,rulename:j,rule:O}):(H[at].type=nt,H[at].rule=O)},removeAllAbrCustomRule:function(){H=[]},removeAbrCustomRule:function(nt){if(nt){var j=I(nt);j!==-1&&H.splice(j,1)}else H=[]},getAbrCustomRules:function(){return H},addUTCTimingSource:L,removeUTCTimingSource:J,getUTCTimingSources:function(){return f},clearDefaultUTCTimingSources:function(){f=[]},restoreDefaultUTCTimingSources:function(){var nt=y.get().streaming.utcSynchronization.defaultTimingSource;L(nt.scheme,nt.value)},setXHRWithCredentialsForType:function nt(j,O){j?o[j]=!!O:Object.keys(o).forEach(function(at){nt(at,O)})},getXHRWithCredentialsForType:function(nt){var j=o[nt];return j===void 0?o.default:j},setConfig:function(){},reset:function(){S()}},o={default:!1},S(),r}t.__dashjs_factory_name="CustomParametersModel",At.a=b.a.getSingletonFactory(t)},function(Ee,At,x){function w(n){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function b(n,d){for(var t=0;t<d.length;t++){var r=d[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(f=r.key,o=void 0,o=function(g,v){if(w(g)!=="object"||g===null)return g;var P=g[Symbol.toPrimitive];if(P!==void 0){var B=P.call(g,v||"default");if(w(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}(f,"string"),w(o)==="symbol"?o:String(o)),r)}var f,o}function h(n,d,t){return d&&b(n.prototype,d),t&&b(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var c=h(function n(){(function(d,t){if(!(d instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null});At.a=c},function(Ee,At,x){var w=x(1),b=x(0);function h(A){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function c(A,F){for(var K=0;K<F.length;K++){var Z=F[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(A,(bt=Z.key,it=void 0,it=function(ct,jt){if(h(ct)!=="object"||ct===null)return ct;var me=ct[Symbol.toPrimitive];if(me!==void 0){var ue=me.call(ct,jt||"default");if(h(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(jt==="string"?String:Number)(ct)}(bt,"string"),h(it)==="symbol"?it:String(it)),Z)}var bt,it}var n=function(){function A(){(function(Z,bt){if(!(Z instanceof bt))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}var F,K;return F=A,(K=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==b.a.BASE_URL&&this.segmentInfoType!==b.a.SEGMENT_BASE&&!this.indexRange}}])&&c(F.prototype,K),Object.defineProperty(F,"prototype",{writable:!1}),A}();function d(A){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function t(A,F){for(var K=0;K<F.length;K++){var Z=F[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(A,(bt=Z.key,it=void 0,it=function(ct,jt){if(d(ct)!=="object"||ct===null)return ct;var me=ct[Symbol.toPrimitive];if(me!==void 0){var ue=me.call(ct,jt||"default");if(d(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(jt==="string"?String:Number)(ct)}(bt,"string"),d(it)==="symbol"?it:String(it)),Z)}var bt,it}function r(A,F,K){return F&&t(A.prototype,F),K&&t(A,K),Object.defineProperty(A,"prototype",{writable:!1}),A}var f=r(function A(){(function(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")})(this,A),this.period=null,this.index=-1,this.type=null});function o(A){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function g(A,F){for(var K=0;K<F.length;K++){var Z=F[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(A,(bt=Z.key,it=void 0,it=function(ct,jt){if(o(ct)!=="object"||ct===null)return ct;var me=ct[Symbol.toPrimitive];if(me!==void 0){var ue=me.call(ct,jt||"default");if(o(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(jt==="string"?String:Number)(ct)}(bt,"string"),o(it)==="symbol"?it:String(it)),Z)}var bt,it}function v(A,F,K){return F&&g(A.prototype,F),K&&g(A,K),Object.defineProperty(A,"prototype",{writable:!1}),A}var P=v(function A(){(function(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null});P.DEFAULT_ID="defaultId";var B=P;function H(A){return(H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function D(A,F){for(var K=0;K<F.length;K++){var Z=F[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(A,(bt=Z.key,it=void 0,it=function(ct,jt){if(H(ct)!=="object"||ct===null)return ct;var me=ct[Symbol.toPrimitive];if(me!==void 0){var ue=me.call(ct,jt||"default");if(H(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(jt==="string"?String:Number)(ct)}(bt,"string"),H(it)==="symbol"?it:String(it)),Z)}var bt,it}function y(A,F,K){return F&&D(A.prototype,F),K&&D(A,K),Object.defineProperty(A,"prototype",{writable:!1}),A}var S=y(function A(){(function(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")})(this,A),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}),T=x(31),I=x(45),L=x(41);function J(A){return(J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function nt(A,F){for(var K=0;K<F.length;K++){var Z=F[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(A,(bt=Z.key,it=void 0,it=function(ct,jt){if(J(ct)!=="object"||ct===null)return ct;var me=ct[Symbol.toPrimitive];if(me!==void 0){var ue=me.call(ct,jt||"default");if(J(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(jt==="string"?String:Number)(ct)}(bt,"string"),J(it)==="symbol"?it:String(it)),Z)}var bt,it}function j(A,F,K){return F&&nt(A.prototype,F),K&&nt(A,K),Object.defineProperty(A,"prototype",{writable:!1}),A}var O=j(function A(){(function(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")})(this,A),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0});function at(A){return(at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function X(A,F){for(var K=0;K<F.length;K++){var Z=F[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(A,(bt=Z.key,it=void 0,it=function(ct,jt){if(at(ct)!=="object"||ct===null)return ct;var me=ct[Symbol.toPrimitive];if(me!==void 0){var ue=me.call(ct,jt||"default");if(at(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(jt==="string"?String:Number)(ct)}(bt,"string"),at(it)==="symbol"?it:String(it)),Z)}var bt,it}function z(A,F,K){return F&&X(A.prototype,F),K&&X(A,K),Object.defineProperty(A,"prototype",{writable:!1}),A}var vt=z(function A(){(function(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null});function Mt(A){return(Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function Pt(A,F){for(var K=0;K<F.length;K++){var Z=F[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(A,(bt=Z.key,it=void 0,it=function(ct,jt){if(Mt(ct)!=="object"||ct===null)return ct;var me=ct[Symbol.toPrimitive];if(me!==void 0){var ue=me.call(ct,jt||"default");if(Mt(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(jt==="string"?String:Number)(ct)}(bt,"string"),Mt(it)==="symbol"?it:String(it)),Z)}var bt,it}function ge(A,F,K){return F&&Pt(A.prototype,F),K&&Pt(A,K),Object.defineProperty(A,"prototype",{writable:!1}),A}var Q=ge(function A(){(function(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")})(this,A),this.defaultServiceLocation=null,this.queryBeforeStart=!1,this.proxyServerUrl=null,this.serverUrl=null}),ft=x(46),Ht=x(13),_e=x(3),Jt=x(6),Te=x(10),It=x(11),Wt=x(35);function Yt(A,F){var K=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(!K){if(Array.isArray(A)||(K=u(A))||F&&A&&typeof A.length=="number"){K&&(A=K);var Z=0,bt=function(){};return{s:bt,n:function(){return Z>=A.length?{done:!0}:{done:!1,value:A[Z++]}},e:function(me){throw me},f:bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var it,ct=!0,jt=!1;return{s:function(){K=K.call(A)},n:function(){var me=K.next();return ct=me.done,me},e:function(me){jt=!0,it=me},f:function(){try{ct||K.return==null||K.return()}finally{if(jt)throw it}}}}function e(A){return function(F){if(Array.isArray(F))return l(F)}(A)||function(F){if(typeof Symbol<"u"&&F[Symbol.iterator]!=null||F["@@iterator"]!=null)return Array.from(F)}(A)||u(A)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(A,F){if(A){if(typeof A=="string")return l(A,F);var K=Object.prototype.toString.call(A).slice(8,-1);return K==="Object"&&A.constructor&&(K=A.constructor.name),K==="Map"||K==="Set"?Array.from(A):K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K)?l(A,F):void 0}}function l(A,F){(F==null||F>A.length)&&(F=A.length);for(var K=0,Z=new Array(F);K<F;K++)Z[K]=A[K];return Z}function G(){var A,F,K,Z,bt=this.context,it=Object(Ht.a)(bt).getInstance(),ct=Number.isInteger||function(N){return typeof N=="number"&&isFinite(N)&&Math.floor(N)===N};function jt(N,C){if(!N)throw new Error("adaptation is not defined");if(!C)throw new Error("type is not defined");if(N.Representation_asArray&&N.Representation_asArray.length){var dt=ee(N.Representation_asArray[0]);if(dt&&dt.length>0&&Wt.a.indexOf(dt[0].schemeIdUri)>=0)return C===w.a.IMAGE}if(N.ContentComponent_asArray&&N.ContentComponent_asArray.length>0){if(N.ContentComponent_asArray.length>1)return C===w.a.MUXED;if(N.ContentComponent_asArray[0].contentType===C)return!0}var Bt=C===w.a.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(C);if(N.Representation_asArray&&N.Representation_asArray.length){var Ut=N.Representation_asArray[0].codecs;if(Bt.test(Ut))return!0}if(N.hasOwnProperty(b.a.MIME_TYPE))return Bt.test(N.mimeType);if(N.Representation_asArray){for(var xt,de=0;de<N.Representation_asArray.length;de++)if((xt=N.Representation_asArray[de]).hasOwnProperty(b.a.MIME_TYPE))return Bt.test(xt.mimeType)}return!1}function me(N){if(!N)throw new Error("adaptation is not defined");if(N.hasOwnProperty(b.a.SEGMENT_TEMPLATE)||N.hasOwnProperty(b.a.SEGMENT_TIMELINE)||N.hasOwnProperty(b.a.SEGMENT_LIST)||N.hasOwnProperty(b.a.SEGMENT_BASE))return!0;if(N.Representation_asArray&&N.Representation_asArray.length>0){var C=N.Representation_asArray[0];if(C.hasOwnProperty(b.a.SEGMENT_TEMPLATE)||C.hasOwnProperty(b.a.SEGMENT_TIMELINE)||C.hasOwnProperty(b.a.SEGMENT_LIST)||C.hasOwnProperty(b.a.SEGMENT_BASE))return!0}return!1}function ue(N){return jt(N,w.a.AUDIO)}function Ct(N){return jt(N,w.a.VIDEO)}function Nt(N){return jt(N,w.a.TEXT)}function Ot(N){return jt(N,w.a.IMAGE)}function Gt(){return function(N,C){return N.bandwidth-C.bandwidth}}function ve(N){return N&&Array.isArray(N.Representation_asArray)&&N.Representation_asArray.sort(function(C,dt){return C.bandwidth-dt.bandwidth}),N}function Ae(N,C){return N&&N.Period_asArray&&ct(C)&&N.Period_asArray[C]?N.Period_asArray[C].AdaptationSet_asArray:[]}function ie(N){return N&&N.Period_asArray?N.Period_asArray:[]}function Zt(N){var C=!1;return N&&N.hasOwnProperty("type")&&(C=N.type===b.a.DYNAMIC),C}function ee(N){return N&&N.EssentialProperty_asArray&&N.EssentialProperty_asArray.length?N.EssentialProperty_asArray.map(function(C){return{schemeIdUri:C.schemeIdUri,value:C.value}}):null}function we(N){if(!N||!N.S_asArray)return NaN;var C=N.S_asArray[0],dt=N.S_asArray[1];return C.hasOwnProperty("d")?C.d:dt.t-C.t}function Fe(N,C){if(!N)throw new Error("Period cannot be null or undefined");var dt=B.DEFAULT_ID+"_"+C;return N.hasOwnProperty(b.a.ID)&&N.id.length>0&&N.id!=="__proto__"&&(dt=N.id),dt}function We(N,C,dt){var Bt,Ut=[];if(!N)return Ut;for(Bt=0;Bt<N.length;Bt++){var xt=new O;if(xt.timescale=1,xt.representation=C,!N[Bt].hasOwnProperty(w.a.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");xt.schemeIdUri=N[Bt].schemeIdUri,N[Bt].hasOwnProperty(b.a.TIMESCALE)&&(xt.timescale=N[Bt].timescale),N[Bt].hasOwnProperty(b.a.VALUE)&&(xt.value=N[Bt].value),Ut.push(xt),xt.period=dt}return Ut}function Ve(N){var C=[],dt=N.BaseURL_asArray||[N.baseUri],Bt=!1;return dt.some(function(Ut){if(Ut){var xt=new L.a,de=Ut.__text||Ut;return it.isRelative(de)&&(Bt=!0,N.baseUri&&(de=it.resolve(de,N.baseUri))),xt.url=de,Ut.hasOwnProperty(b.a.SERVICE_LOCATION)&&Ut.serviceLocation.length?xt.serviceLocation=Ut.serviceLocation:xt.serviceLocation=de,Ut.hasOwnProperty(b.a.DVB_PRIORITY)&&(xt.dvb_priority=Ut[b.a.DVB_PRIORITY]),Ut.hasOwnProperty(b.a.DVB_WEIGHT)&&(xt.dvb_weight=Ut[b.a.DVB_WEIGHT]),Ut.hasOwnProperty(b.a.AVAILABILITY_TIME_OFFSET)&&(xt.availabilityTimeOffset=Ut[b.a.AVAILABILITY_TIME_OFFSET]),Ut.hasOwnProperty(b.a.AVAILABILITY_TIME_COMPLETE)&&(xt.availabilityTimeComplete=Ut[b.a.AVAILABILITY_TIME_COMPLETE]!=="false"),C.push(xt),Bt}}),C}return A={getIsTypeOf:jt,getIsText:Nt,getIsFragmented:me,getProducerReferenceTimesForAdaptation:function(N){var C=N&&N.hasOwnProperty(b.a.PRODUCERREFERENCETIME_ASARRAY)?N[b.a.PRODUCERREFERENCETIME_ASARRAY]:[];(N&&N.hasOwnProperty(b.a.REPRESENTATION_ASARRAY)?N[b.a.REPRESENTATION_ASARRAY]:[]).forEach(function(Bt){Bt.hasOwnProperty(b.a.PRODUCERREFERENCETIME_ASARRAY)&&C.push.apply(C,e(Bt[b.a.PRODUCERREFERENCETIME_ASARRAY]))});var dt=[];return C.forEach(function(Bt){var Ut=new vt;Bt.hasOwnProperty(b.a.ID)&&(Ut[b.a.ID]=Bt[b.a.ID],Bt.hasOwnProperty(b.a.WALL_CLOCK_TIME)&&(Ut[b.a.WALL_CLOCK_TIME]=Bt[b.a.WALL_CLOCK_TIME],Bt.hasOwnProperty(b.a.PRESENTATION_TIME)&&(Ut[b.a.PRESENTATION_TIME]=Bt[b.a.PRESENTATION_TIME],dt.push(Ut))))}),dt},getLanguageForAdaptation:function(N){var C="";return N&&N.hasOwnProperty(b.a.LANG)&&(C=N.lang),C},getViewpointForAdaptation:function(N){return N&&N.hasOwnProperty(b.a.VIEWPOINT)?N.Viewpoint:null},getRolesForAdaptation:function(N){return N&&N.hasOwnProperty(b.a.ROLE_ASARRAY)?N.Role_asArray:[]},getAccessibilityForAdaptation:function(N){return N&&N.hasOwnProperty(b.a.ACCESSIBILITY_ASARRAY)?N.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(N){return N&&N.hasOwnProperty(b.a.AUDIOCHANNELCONFIGURATION_ASARRAY)?N.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(N){return N&&N.hasOwnProperty(b.a.AUDIOCHANNELCONFIGURATION_ASARRAY)?N.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(N,C,dt){var Bt=Ae(C,dt);return Bt.length>0&&ct(N)?Bt[N]:null},getIndexForAdaptation:function(N,C,dt){if(!N)return-1;for(var Bt=Ae(C,dt),Ut=0;Ut<Bt.length;Ut++)if(Object(ft.a)(bt).getInstance().areEqual(Bt[Ut],N))return Ut;return-1},getAdaptationForId:function(N,C,dt){var Bt,Ut,xt=Ae(C,dt);for(Bt=0,Ut=xt.length;Bt<Ut;Bt++)if(xt[Bt].hasOwnProperty(b.a.ID)&&xt[Bt].id===N)return xt[Bt];return null},getAdaptationsForType:function(N,C,dt){var Bt,Ut,xt=Ae(N,C),de=[];for(Bt=0,Ut=xt.length;Bt<Ut;Bt++)jt(xt[Bt],dt)&&de.push(ve(xt[Bt]));return de},getRealPeriods:ie,getRealPeriodForIndex:function(N,C){var dt=ie(C);return dt.length>0&&ct(N)?dt[N]:null},getCodec:function(N,C,dt){var Bt=null;if(N&&N.Representation_asArray&&N.Representation_asArray.length>0){var Ut=ct(C)&&C>=0&&C<N.Representation_asArray.length?N.Representation_asArray[C]:N.Representation_asArray[0];Ut&&(Bt=Ut.mimeType+';codecs="'+Ut.codecs+'"',dt&&Ut.width!==void 0&&(Bt+=';width="'+Ut.width+'";height="'+Ut.height+'"'))}return Bt&&(Bt=Bt.replace(/\sprofiles=[^;]*/g,"")),Bt},getSelectionPriority:function(N){try{var C=N&&N.selectionPriority!==void 0?parseInt(N.selectionPriority):1;return isNaN(C)?1:C}catch{return 1}},getMimeType:function(N){return N&&N.Representation_asArray&&N.Representation_asArray.length>0?N.Representation_asArray[0].mimeType:null},getKID:function(N){return N&&N.hasOwnProperty(b.a.CENC_DEFAULT_KID)?N[b.a.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(N){if(!N||!Array.isArray(N.Label_asArray))return[];for(var C=[],dt=0;dt<N.Label_asArray.length;dt++)C.push({lang:N.Label_asArray[dt].lang,text:N.Label_asArray[dt].__text||N.Label_asArray[dt]});return C},getContentProtectionData:function(N){return N&&N.hasOwnProperty(b.a.CONTENTPROTECTION_ASARRAY)&&N.ContentProtection_asArray.length!==0?N.ContentProtection_asArray:null},getIsDynamic:Zt,getId:function(N){return N&&N[b.a.ID]||null},hasProfile:function(N,C){var dt=!1;return N&&N.profiles&&N.profiles.length>0&&(dt=N.profiles.indexOf(C)!==-1),dt},getDuration:function(N){return N&&N.hasOwnProperty(b.a.MEDIA_PRESENTATION_DURATION)?N.mediaPresentationDuration:N&&N.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(N){return N&&N.bandwidth?N.bandwidth:NaN},getManifestUpdatePeriod:function(N){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,dt=NaN;return N&&N.hasOwnProperty(b.a.MINIMUM_UPDATE_PERIOD)&&(dt=N.minimumUpdatePeriod),isNaN(dt)?dt:Math.max(dt-C,1)},getPublishTime:function(N){return N&&N.hasOwnProperty(b.a.PUBLISH_TIME)?new Date(N[b.a.PUBLISH_TIME]):null},getRepresentationCount:function(N){return N&&Array.isArray(N.Representation_asArray)?N.Representation_asArray.length:0},getBitrateListForAdaptation:function(N){var C=ve(N);return(C&&Array.isArray(C.Representation_asArray)?C.Representation_asArray:[]).map(function(dt){return{bandwidth:dt.bandwidth,width:dt.width||0,height:dt.height||0,scanType:dt.scanType||null,id:dt.id||null}})},getRepresentationFor:function(N,C){return C&&C.Representation_asArray&&C.Representation_asArray.length>0&&ct(N)?C.Representation_asArray[N]:null},getRepresentationsForAdaptation:function(N){var C,dt,Bt,Ut,xt=[],de=function(yn){if(yn&&yn.period&&ct(yn.period.index)){var zn=yn.period.mpd.manifest.Period_asArray[yn.period.index];if(zn&&zn.AdaptationSet_asArray&&ct(yn.index))return ve(zn.AdaptationSet_asArray[yn.index])}}(N);if(de&&de.Representation_asArray){if(N&&N.period&&ct(N.period.index)){var Ge=Ve(N.period.mpd.manifest);Ge&&(dt=Ge[0])}for(var Je=0,Ue=de.Representation_asArray.length;Je<Ue;++Je){var $e=de.Representation_asArray[Je],Xe=new n;if(Xe.index=Je,Xe.adaptation=N,$e.hasOwnProperty(b.a.ID)&&(Xe.id=$e.id),$e.hasOwnProperty(b.a.CODECS)&&(Xe.codecs=$e.codecs),$e.hasOwnProperty(b.a.MIME_TYPE)&&(Xe.mimeType=$e[b.a.MIME_TYPE]),$e.hasOwnProperty(b.a.CODEC_PRIVATE_DATA)&&(Xe.codecPrivateData=$e.codecPrivateData),$e.hasOwnProperty(b.a.BANDWITH)&&(Xe.bandwidth=$e.bandwidth),$e.hasOwnProperty(b.a.WIDTH)&&(Xe.width=$e.width),$e.hasOwnProperty(b.a.HEIGHT)&&(Xe.height=$e.height),$e.hasOwnProperty(b.a.SCAN_TYPE)&&(Xe.scanType=$e.scanType),$e.hasOwnProperty(b.a.MAX_PLAYOUT_RATE)&&(Xe.maxPlayoutRate=$e.maxPlayoutRate),$e.hasOwnProperty(b.a.SEGMENT_BASE)?(C=$e.SegmentBase,Xe.segmentInfoType=b.a.SEGMENT_BASE):$e.hasOwnProperty(b.a.SEGMENT_LIST)?(C=$e.SegmentList).hasOwnProperty(b.a.SEGMENT_TIMELINE)?Xe.segmentInfoType=b.a.SEGMENT_TIMELINE:Xe.segmentInfoType=b.a.SEGMENT_LIST:$e.hasOwnProperty(b.a.SEGMENT_TEMPLATE)?((C=$e.SegmentTemplate).hasOwnProperty(b.a.SEGMENT_TIMELINE)?Xe.segmentInfoType=b.a.SEGMENT_TIMELINE:Xe.segmentInfoType=b.a.SEGMENT_TEMPLATE,C.hasOwnProperty(b.a.INITIALIZATION_MINUS)&&(Xe.initialization=C.initialization.split("$Bandwidth$").join($e.bandwidth).split("$RepresentationID$").join($e.id))):Xe.segmentInfoType=b.a.BASE_URL,Xe.essentialProperties=ee($e),C){if(C.hasOwnProperty(b.a.INITIALIZATION)){var Tn=C.Initialization;Tn.hasOwnProperty(b.a.SOURCE_URL)&&(Xe.initialization=Tn.sourceURL),Tn.hasOwnProperty(b.a.RANGE)&&(Xe.range=Tn.range)}else Nt(de)&&me(de)&&de.mimeType&&de.mimeType.indexOf("application/mp4")===-1&&(Xe.range=0);C.hasOwnProperty(b.a.TIMESCALE)&&(Xe.timescale=C.timescale),C.hasOwnProperty(b.a.DURATION)?Xe.segmentDuration=C.duration/Xe.timescale:$e.hasOwnProperty(b.a.SEGMENT_TEMPLATE)&&(C=$e.SegmentTemplate).hasOwnProperty(b.a.SEGMENT_TIMELINE)&&(Xe.segmentDuration=we(C.SegmentTimeline)/Xe.timescale),C.hasOwnProperty(b.a.MEDIA)&&(Xe.media=C.media),C.hasOwnProperty(b.a.START_NUMBER)&&(Xe.startNumber=C.startNumber),C.hasOwnProperty(b.a.INDEX_RANGE)&&(Xe.indexRange=C.indexRange),C.hasOwnProperty(b.a.PRESENTATION_TIME_OFFSET)&&(Xe.presentationTimeOffset=C.presentationTimeOffset/Xe.timescale),C.hasOwnProperty(b.a.AVAILABILITY_TIME_OFFSET)?Xe.availabilityTimeOffset=C.availabilityTimeOffset:dt&&dt.availabilityTimeOffset!==void 0&&(Xe.availabilityTimeOffset=dt.availabilityTimeOffset),C.hasOwnProperty(b.a.AVAILABILITY_TIME_COMPLETE)?Xe.availabilityTimeComplete=C.availabilityTimeComplete!=="false":dt&&dt.availabilityTimeComplete!==void 0&&(Xe.availabilityTimeComplete=dt.availabilityTimeComplete)}Xe.MSETimeOffset=(Ut=void 0,Ut=(Bt=Xe).presentationTimeOffset,Bt.adaptation.period.start-Ut),Xe.path=[N.period.index,N.index,Je],xt.push(Xe)}}return xt},getAdaptationsForPeriod:function(N){var C,dt,Bt,Ut=N&&ct(N.index)?N.mpd.manifest.Period_asArray[N.index]:null,xt=[];if(Ut&&Ut.AdaptationSet_asArray)for(Bt=0;Bt<Ut.AdaptationSet_asArray.length;Bt++)dt=Ut.AdaptationSet_asArray[Bt],C=new f,dt.hasOwnProperty(b.a.ID)&&(C.id=dt.id),C.index=Bt,C.period=N,jt(dt,w.a.MUXED)?C.type=w.a.MUXED:ue(dt)?C.type=w.a.AUDIO:Ct(dt)?C.type=w.a.VIDEO:Nt(dt)?C.type=w.a.TEXT:Ot(dt)?C.type=w.a.IMAGE:F.warn("Unknown Adaptation stream type"),xt.push(C);return xt},getRegularPeriods:function(N){var C,dt,Bt=!!N&&Zt(N.manifest),Ut=[],xt=null,de=null,Ge=null,Je=null;for(dt=0,C=N&&N.manifest&&N.manifest.Period_asArray?N.manifest.Period_asArray.length:0;dt<C;dt++)(de=N.manifest.Period_asArray[dt]).hasOwnProperty(b.a.START)?(Je=new B).start=de.start:xt!==null&&xt.hasOwnProperty(b.a.DURATION)&&Ge!==null?(Je=new B).start=parseFloat((Ge.start+Ge.duration).toFixed(5)):dt!==0||Bt||((Je=new B).start=0),Ge!==null&&isNaN(Ge.duration)&&(Je!==null?Ge.duration=parseFloat((Je.start-Ge.start).toFixed(5)):F.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Je!==null&&(Je.id=Fe(de,dt),Je.index=dt,Je.mpd=N,de.hasOwnProperty(b.a.DURATION)&&(Je.duration=de.duration),Ge&&(Ge.nextPeriodId=Je.id),Ut.push(Je),xt=de,Ge=Je),de=null,Je=null;return Ut.length===0||Ge!==null&&isNaN(Ge.duration)&&(Ge.duration=parseFloat((function(Ue){(function(){if(!K||!K.hasOwnProperty("error"))throw new Error(w.a.MISSING_CONFIG_ERROR)})();var $e,Xe=Zt(Ue.mpd.manifest);return Ue.mpd.manifest.mediaPresentationDuration?$e=Ue.mpd.manifest.mediaPresentationDuration:Ue.duration?$e=Ue.duration:Xe?$e=Number.POSITIVE_INFINITY:K.error(new Te.a(It.a.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",Ue)),$e}(Ge)-Ge.start).toFixed(5))),Ut},getMpd:function(N){var C=new S;return N&&(C.manifest=N,N.hasOwnProperty(b.a.AVAILABILITY_START_TIME)?C.availabilityStartTime=new Date(N.availabilityStartTime.getTime()):N.loadedTime&&(C.availabilityStartTime=new Date(N.loadedTime.getTime())),N.hasOwnProperty(b.a.AVAILABILITY_END_TIME)&&(C.availabilityEndTime=new Date(N.availabilityEndTime.getTime())),N.hasOwnProperty(b.a.MINIMUM_UPDATE_PERIOD)&&(C.minimumUpdatePeriod=N.minimumUpdatePeriod),N.hasOwnProperty(b.a.MEDIA_PRESENTATION_DURATION)&&(C.mediaPresentationDuration=N.mediaPresentationDuration),N.hasOwnProperty(b.a.SUGGESTED_PRESENTATION_DELAY)&&(C.suggestedPresentationDelay=N.suggestedPresentationDelay),N.hasOwnProperty(b.a.TIMESHIFT_BUFFER_DEPTH)&&(C.timeShiftBufferDepth=N.timeShiftBufferDepth),N.hasOwnProperty(b.a.MAX_SEGMENT_DURATION)&&(C.maxSegmentDuration=N.maxSegmentDuration),N.hasOwnProperty(b.a.PUBLISH_TIME)&&(C.publishTime=new Date(N.publishTime))),C},getEventsForPeriod:function(N){var C,dt,Bt=N&&N.mpd&&N.mpd.manifest?N.mpd.manifest:null,Ut=Bt?Bt.Period_asArray:null,xt=Ut&&N&&ct(N.index)?Ut[N.index].EventStream_asArray:null,de=[];if(xt)for(C=0;C<xt.length;C++){var Ge=new O;if(Ge.period=N,Ge.timescale=1,!xt[C].hasOwnProperty(w.a.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(Ge.schemeIdUri=xt[C][w.a.SCHEME_ID_URI],xt[C].hasOwnProperty(b.a.TIMESCALE)&&(Ge.timescale=xt[C][b.a.TIMESCALE]),xt[C].hasOwnProperty(b.a.VALUE)&&(Ge.value=xt[C][b.a.VALUE]),xt[C].hasOwnProperty(b.a.PRESENTATION_TIME_OFFSET)&&(Ge.presentationTimeOffset=xt[C][b.a.PRESENTATION_TIME_OFFSET]),dt=0;xt[C].Event_asArray&&dt<xt[C].Event_asArray.length;dt++){var Je=xt[C].Event_asArray[dt],Ue=new I.a;Ue.presentationTime=0,Ue.eventStream=Ge,Je.hasOwnProperty(b.a.PRESENTATION_TIME)&&(Ue.presentationTime=Je.presentationTime);var $e=Ge.presentationTimeOffset?Ge.presentationTimeOffset/Ge.timescale:0;Ue.calculatedPresentationTime=Ue.presentationTime/Ge.timescale+N.start-$e,Je.hasOwnProperty(b.a.DURATION)&&(Ue.duration=Je.duration/Ge.timescale),Je.hasOwnProperty(b.a.ID)?Ue.id=Je.id:Ue.id=null,Je.Signal&&Je.Signal.Binary?Ue.messageData=Z.decodeArray(Je.Signal.Binary.toString()):Ue.messageData=Je.messageData||Je.__cdata||Je.__text,de.push(Ue)}}return de},getEssentialPropertiesForRepresentation:ee,getEventStreamForAdaptationSet:function(N,C,dt){var Bt,Ut,xt;return N&&N.Period_asArray&&C&&C.period&&ct(C.period.index)&&(Ut=N.Period_asArray[C.period.index])&&Ut.AdaptationSet_asArray&&ct(C.index)&&(xt=Ut.AdaptationSet_asArray[C.index])&&(Bt=xt.InbandEventStream_asArray),We(Bt,null,dt)},getEventStreamForRepresentation:function(N,C,dt){var Bt,Ut,xt,de;return N&&N.Period_asArray&&C&&C.adaptation&&C.adaptation.period&&ct(C.adaptation.period.index)&&(Ut=N.Period_asArray[C.adaptation.period.index])&&Ut.AdaptationSet_asArray&&ct(C.adaptation.index)&&(xt=Ut.AdaptationSet_asArray[C.adaptation.index])&&xt.Representation_asArray&&ct(C.index)&&(de=xt.Representation_asArray[C.index])&&(Bt=de.InbandEventStream_asArray),We(Bt,C,dt)},getUTCTimingSources:function(N){var C=Zt(N),dt=!!N&&N.hasOwnProperty(b.a.AVAILABILITY_START_TIME),Bt=N?N.UTCTiming_asArray:null,Ut=[];return(C||dt)&&Bt&&Bt.forEach(function(xt){var de=new T.a;xt.hasOwnProperty(w.a.SCHEME_ID_URI)&&(de.schemeIdUri=xt.schemeIdUri,xt.hasOwnProperty(b.a.VALUE)&&(de.value=xt.value.toString(),Ut.push(de)))}),Ut},getBaseURLsFromElement:Ve,getRepresentationSortFunction:Gt,getContentSteering:function(N){if(N&&N.hasOwnProperty(b.a.CONTENT_STEERING_AS_ARRAY)){var C=N[b.a.CONTENT_STEERING_AS_ARRAY][0],dt=new Q;return dt.serverUrl=C.__text,C.hasOwnProperty(b.a.DEFAULT_SERVICE_LOCATION)&&(dt.defaultServiceLocation=C[b.a.DEFAULT_SERVICE_LOCATION]),C.hasOwnProperty(b.a.QUERY_BEFORE_START)&&(dt.queryBeforeStart=C[b.a.QUERY_BEFORE_START].toLowerCase()==="true"),C.hasOwnProperty(b.a.PROXY_SERVER_URL)&&(dt.proxyServerUrl=C[b.a.PROXY_SERVER_URL]),dt}},getLocation:function(N){if(N&&N.hasOwnProperty(w.a.LOCATION))return N.Location=N.Location_asArray[0],N.Location},getPatchLocation:function(N){if(N&&N.hasOwnProperty(b.a.PATCH_LOCATION))return N.PatchLocation=N.PatchLocation_asArray[0],N.PatchLocation},getSuggestedPresentationDelay:function(N){return N&&N.hasOwnProperty(b.a.SUGGESTED_PRESENTATION_DELAY)?N.suggestedPresentationDelay:null},getAvailabilityStartTime:function(N){return N&&N.hasOwnProperty(b.a.AVAILABILITY_START_TIME)&&N.availabilityStartTime!==null?N.availabilityStartTime.getTime():null},getServiceDescriptions:function(N){var C=[];if(N&&N.hasOwnProperty(b.a.SERVICE_DESCRIPTION)){var dt,Bt=Yt(N.ServiceDescription_asArray);try{for(Bt.s();!(dt=Bt.n()).done;){var Ut=dt.value,xt=null,de=null,Ge=null,Je=null,Ue=null,$e=null;for(var Xe in Ut)Ut.hasOwnProperty(Xe)&&(Xe===b.a.ID?xt=Ut[Xe]:Xe===b.a.SERVICE_DESCRIPTION_SCOPE?de=Ut[Xe].schemeIdUri:Xe===b.a.SERVICE_DESCRIPTION_LATENCY?Ge={target:parseInt(Ut[Xe].target),max:parseInt(Ut[Xe].max),min:parseInt(Ut[Xe].min),referenceId:parseInt(Ut[Xe].referenceId)}:Xe===b.a.SERVICE_DESCRIPTION_PLAYBACK_RATE?Je={max:parseFloat(Ut[Xe].max),min:parseFloat(Ut[Xe].min)}:Xe===b.a.SERVICE_DESCRIPTION_OPERATING_QUALITY?Ue={mediaType:Ut[Xe].mediaType,max:parseInt(Ut[Xe].max),min:parseInt(Ut[Xe].min),target:parseInt(Ut[Xe].target),type:Ut[Xe].type,maxQualityDifference:parseInt(Ut[Xe].maxQualityDifference)}:Xe===b.a.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&($e={mediaType:Ut[Xe].mediaType,max:parseInt(Ut[Xe].max),min:parseInt(Ut[Xe].min),target:parseInt(Ut[Xe].target)}));C.push({id:xt,schemeIdUri:de,latency:Ge,playbackRate:Je,operatingQuality:Ue,operatingBandwidth:$e})}}catch(Tn){Bt.e(Tn)}finally{Bt.f()}}return C},getSupplementalProperties:function(N){var C={};if(N&&N.hasOwnProperty(b.a.SUPPLEMENTAL_PROPERTY)){var dt,Bt=Yt(N.SupplementalProperty_asArray);try{for(Bt.s();!(dt=Bt.n()).done;){var Ut=dt.value;Ut.hasOwnProperty(w.a.SCHEME_ID_URI)&&Ut.hasOwnProperty(b.a.VALUE)&&(C[Ut[w.a.SCHEME_ID_URI]]=Ut[b.a.VALUE])}}catch(xt){Bt.e(xt)}finally{Bt.f()}}return C},setConfig:function(N){N&&(N.errHandler&&(K=N.errHandler),N.BASE64&&(Z=N.BASE64))}},F=Object(Jt.a)(bt).getInstance().getLogger(A),A}G.__dashjs_factory_name="DashManifestModel",At.a=_e.a.getSingletonFactory(G)},function(Ee,At,x){x.d(At,"a",function(){return B});var w=x(1),b=x(0),h=x(3);function c(D){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(D)}function n(D,y){for(var S=0;S<y.length;S++){var T=y[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,(I=T.key,L=void 0,L=function(J,nt){if(c(J)!=="object"||J===null)return J;var j=J[Symbol.toPrimitive];if(j!==void 0){var O=j.call(J,nt||"default");if(c(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(nt==="string"?String:Number)(J)}(I,"string"),c(L)==="symbol"?L:String(L)),T)}var I,L}function d(D,y,S){return y&&n(D.prototype,y),S&&n(D,S),Object.defineProperty(D,"prototype",{writable:!1}),D}var t=d(function D(){(function(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")})(this,D),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}),r=x(13),f=x(12),o=x(23),g=x(29),v=x(39),P=x(40),B=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function H(D){var y,S,T,I,L,J,nt,j,O=this.context,at=D.adapter,X=D.baseURLController,z=D.streamInfo,vt=D.timelineConverter,Mt=D.debug,Pt=D.eventBus,ge=D.events,Q=D.dashConstants,ft=Object(r.a)(O).getInstance();function Ht(Jt,Te){var It=new t;It.id=Jt.id,It.bitrate=Jt.bandwidth,It.width=Jt.width,It.height=Jt.height,It.tilesHor=1,It.tilesVert=1,Jt.essentialProperties&&Jt.essentialProperties.forEach(function(Wt){if(B.indexOf(Wt.schemeIdUri)>=0&&Wt.value){var Yt=Wt.value.split("x");Yt.length!==2||isNaN(Yt[0])||isNaN(Yt[1])||(It.tilesHor=parseInt(Yt[0],10),It.tilesVert=parseInt(Yt[1],10))}}),Te?J.updateSegmentData(Jt).then(function(Wt){(function(Yt,e,u){var l=[],G=function(A,F){var K,Z,bt,it,ct=[],jt=0;for(K=0,Z=A.segments.length;K<Z;K++)bt=A.segments[K],(it=Object(f.b)(vt,at.getIsDynamic(),F,bt.startTime,bt.duration,bt.timescale,bt.media,bt.mediaRange,jt))&&(ct.push(it),it=null,jt++);return ct}(u,e);e.segments=G,Yt.segmentDuration=e.segments[0].duration,Yt.readThumbnail=function(A,F){var K=null;l.some(function(Z){if(Z.start<=A&&Z.end>A)return K=Z.url,!0}),K?F(K):e.segments.some(function(Z){if(Z.mediaStartTime<=A&&Z.mediaStartTime+Z.duration>A){var bt=X.resolve(e.path);return nt.load({method:"get",url:bt.url,request:{range:Z.mediaRange,responseType:"arraybuffer"},onload:function(it){var ct=j.getSamplesInfo(it.target.response),jt=new Blob([it.target.response.slice(ct.sampleList[0].offset,ct.sampleList[0].offset+ct.sampleList[0].size)],{type:"image/jpeg"}),me=window.URL.createObjectURL(jt);l.push({start:Z.mediaStartTime,end:Z.mediaStartTime+Z.duration,url:me}),F&&F(me)}}),!0}})}})(It,Jt,Wt)}):(It.startNumber=Jt.startNumber,It.segmentDuration=Jt.segmentDuration,It.timescale=Jt.timescale,It.templateUrl=function(Wt){var Yt=ft.isRelative(Wt.media)?ft.resolve(Wt.media,X.resolve(Wt.path).url):Wt.media;return Yt?Object(f.c)(Yt,Wt.id):""}(Jt)),It.tilesHor>0&&It.tilesVert>0&&(It.widthPerTile=It.width/It.tilesHor,It.heightPerTile=It.height/It.tilesVert,S.push(It))}function _e(){S=[],I=-1,L=null}return y={getTracks:function(){return S},addTracks:function(){if(z&&at&&(L=at.getMediaInfoForType(z,w.a.IMAGE))){var Jt=at.getVoRepresentations(L);Jt&&Jt.length>0&&Jt.forEach(function(Te){(Te.segmentInfoType===b.a.SEGMENT_TEMPLATE&&Te.segmentDuration>0&&Te.media||Te.segmentInfoType===b.a.SEGMENT_TIMELINE)&&Ht(Te),Te.segmentInfoType===b.a.SEGMENT_BASE&&Ht(Te,!0)}),S.length>0&&S.sort(function(Te,It){return Te.bitrate-It.bitrate})}},reset:_e,setTrackByIndex:function(Jt){S&&S.length!==0&&(Jt>=S.length&&(Jt=S.length-1),I=Jt)},getCurrentTrack:function(){return I<0?null:S[I]},getCurrentTrackIndex:function(){return I},getThumbnailRequestForTime:function(Jt){for(var Te,It=at.getVoRepresentations(L),Wt=0;Wt<It.length;Wt++)if(S[I].id===It[Wt].id){Te=It[Wt];break}return T.getSegmentRequestForTime(L,Te,Jt)}},_e(),nt=Object(g.a)(O).create({}),j=Object(o.a)(O).getInstance(),J=Object(P.a)(O).create({events:ge,eventBus:Pt,streamInfo:z,timelineConverter:vt,dashConstants:Q,dashMetrics:D.dashMetrics,segmentBaseController:D.segmentBaseController,type:w.a.IMAGE}),(T=Object(v.a)(O).create({streamInfo:z,type:w.a.IMAGE,timelineConverter:vt,segmentsController:J,baseURLController:X,debug:Mt,eventBus:Pt,events:ge,dashConstants:Q,urlUtils:ft})).initialize(!!at&&at.getIsDynamic()),y}H.__dashjs_factory_name="ThumbnailTracks",At.b=h.a.getClassFactory(H)},function(Ee,At,x){var w=x(58),b=Object.keys||function(v){var P=[];for(var B in v)P.push(B);return P};Ee.exports=f;var h=Object.create(x(49));h.inherits=x(42);var c=x(88),n=x(74);h.inherits(f,c);for(var d=b(n.prototype),t=0;t<d.length;t++){var r=d[t];f.prototype[r]||(f.prototype[r]=n.prototype[r])}function f(v){if(!(this instanceof f))return new f(v);c.call(this,v),n.call(this,v),v&&v.readable===!1&&(this.readable=!1),v&&v.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,v&&v.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||w.nextTick(g,this)}function g(v){v.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}}),f.prototype._destroy=function(v,P){this.push(null),this.end(),w.nextTick(P,v)}},function(Ee,At,x){(function(w){function b(n,d){for(var t=0,r=n.length-1;r>=0;r--){var f=n[r];f==="."?n.splice(r,1):f===".."?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(d)for(;t--;t)n.unshift("..");return n}function h(n,d){if(n.filter)return n.filter(d);for(var t=[],r=0;r<n.length;r++)d(n[r],r,n)&&t.push(n[r]);return t}At.resolve=function(){for(var n="",d=!1,t=arguments.length-1;t>=-1&&!d;t--){var r=t>=0?arguments[t]:w.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");r&&(n=r+"/"+n,d=r.charAt(0)==="/")}return(d?"/":"")+(n=b(h(n.split("/"),function(f){return!!f}),!d).join("/"))||"."},At.normalize=function(n){var d=At.isAbsolute(n),t=c(n,-1)==="/";return(n=b(h(n.split("/"),function(r){return!!r}),!d).join("/"))||d||(n="."),n&&t&&(n+="/"),(d?"/":"")+n},At.isAbsolute=function(n){return n.charAt(0)==="/"},At.join=function(){var n=Array.prototype.slice.call(arguments,0);return At.normalize(h(n,function(d,t){if(typeof d!="string")throw new TypeError("Arguments to path.join must be strings");return d}).join("/"))},At.relative=function(n,d){function t(B){for(var H=0;H<B.length&&B[H]==="";H++);for(var D=B.length-1;D>=0&&B[D]==="";D--);return H>D?[]:B.slice(H,D-H+1)}n=At.resolve(n).substr(1),d=At.resolve(d).substr(1);for(var r=t(n.split("/")),f=t(d.split("/")),o=Math.min(r.length,f.length),g=o,v=0;v<o;v++)if(r[v]!==f[v]){g=v;break}var P=[];for(v=g;v<r.length;v++)P.push("..");return(P=P.concat(f.slice(g))).join("/")},At.sep="/",At.delimiter=":",At.dirname=function(n){if(typeof n!="string"&&(n+=""),n.length===0)return".";for(var d=n.charCodeAt(0),t=d===47,r=-1,f=!0,o=n.length-1;o>=1;--o)if((d=n.charCodeAt(o))===47){if(!f){r=o;break}}else f=!1;return r===-1?t?"/":".":t&&r===1?"/":n.slice(0,r)},At.basename=function(n,d){var t=function(r){typeof r!="string"&&(r+="");var f,o=0,g=-1,v=!0;for(f=r.length-1;f>=0;--f)if(r.charCodeAt(f)===47){if(!v){o=f+1;break}}else g===-1&&(v=!1,g=f+1);return g===-1?"":r.slice(o,g)}(n);return d&&t.substr(-1*d.length)===d&&(t=t.substr(0,t.length-d.length)),t},At.extname=function(n){typeof n!="string"&&(n+="");for(var d=-1,t=0,r=-1,f=!0,o=0,g=n.length-1;g>=0;--g){var v=n.charCodeAt(g);if(v!==47)r===-1&&(f=!1,r=g+1),v===46?d===-1?d=g:o!==1&&(o=1):d!==-1&&(o=-1);else if(!f){t=g+1;break}}return d===-1||r===-1||o===0||o===1&&d===r-1&&d===t+1?"":n.slice(d,r)};var c="ab".substr(-1)==="b"?function(n,d,t){return n.substr(d,t)}:function(n,d,t){return d<0&&(d=n.length+d),n.substr(d,t)}}).call(this,x(26))},function(Ee,At,x){var w;(function(b,h){var c="model",n="name",d="type",t="vendor",r="version",f="mobile",o="tablet",g="smarttv",v=function(nt){for(var j={},O=0;O<nt.length;O++)j[nt[O].toUpperCase()]=nt[O];return j},P=function(nt,j){return typeof nt=="string"&&B(j).indexOf(B(nt))!==-1},B=function(nt){return nt.toLowerCase()},H=function(nt,j){if(typeof nt=="string")return nt=nt.replace(/^\s\s*/,"").replace(/\s\s*$/,""),j===void 0?nt:nt.substring(0,350)},D=function(nt,j){for(var O,at,X,z,vt,Mt,Pt=0;Pt<j.length&&!vt;){var ge=j[Pt],Q=j[Pt+1];for(O=at=0;O<ge.length&&!vt;)if(vt=ge[O++].exec(nt))for(X=0;X<Q.length;X++)Mt=vt[++at],typeof(z=Q[X])=="object"&&z.length>0?z.length===2?typeof z[1]=="function"?this[z[0]]=z[1].call(this,Mt):this[z[0]]=z[1]:z.length===3?typeof z[1]!="function"||z[1].exec&&z[1].test?this[z[0]]=Mt?Mt.replace(z[1],z[2]):void 0:this[z[0]]=Mt?z[1].call(this,Mt,z[2]):void 0:z.length===4&&(this[z[0]]=Mt?z[3].call(this,Mt.replace(z[1],z[2])):void 0):this[z]=Mt||void 0;Pt+=2}},y=function(nt,j){for(var O in j)if(typeof j[O]=="object"&&j[O].length>0){for(var at=0;at<j[O].length;at++)if(P(j[O][at],nt))return O==="?"?void 0:O}else if(P(j[O],nt))return O==="?"?void 0:O;return nt},S={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},T={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[r,[n,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[r,[n,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[n,r],[/opios[\/ ]+([\w\.]+)/i],[r,[n,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[r,[n,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[n,r],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[r,[n,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[r,[n,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[r,[n,"WeChat"]],[/konqueror\/([\w\.]+)/i],[r,[n,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[r,[n,"IE"]],[/yabrowser\/([\w\.]+)/i],[r,[n,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[n,/(.+)/,"$1 Secure Browser"],r],[/\bfocus\/([\w\.]+)/i],[r,[n,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[r,[n,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[r,[n,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[r,[n,"Dolphin"]],[/coast\/([\w\.]+)/i],[r,[n,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[r,[n,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[r,[n,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[n,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[n,/(.+)/,"$1 Browser"],r],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],r],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[n,r],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[n],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[n,"Facebook"],r],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[n,r],[/\bgsa\/([\w\.]+) .*safari\//i],[r,[n,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[r,[n,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[n,"Chrome WebView"],r],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[r,[n,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[n,r],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[r,[n,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[r,n],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[n,[r,y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[n,r],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[n,"Netscape"],r],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[r,[n,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[n,r]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",B]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",B]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",B]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[t,"Samsung"],[d,o]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[t,"Samsung"],[d,f]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[t,"Apple"],[d,f]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[t,"Apple"],[d,o]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[t,"Huawei"],[d,o]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[t,"Huawei"],[d,f]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[t,"Xiaomi"],[d,f]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[t,"Xiaomi"],[d,o]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[t,"OPPO"],[d,f]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[t,"Vivo"],[d,f]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[t,"Realme"],[d,f]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[t,"Motorola"],[d,f]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[t,"Motorola"],[d,o]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[t,"LG"],[d,o]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[t,"LG"],[d,f]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[t,"Lenovo"],[d,o]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[t,"Nokia"],[d,f]],[/(pixel c)\b/i],[c,[t,"Google"],[d,o]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[t,"Google"],[d,f]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[t,"Sony"],[d,f]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[t,"Sony"],[d,o]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[t,"OnePlus"],[d,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[t,"Amazon"],[d,o]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[t,"Amazon"],[d,f]],[/(playbook);[-\w\),; ]+(rim)/i],[c,t,[d,o]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[t,"BlackBerry"],[d,f]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[t,"ASUS"],[d,o]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[t,"ASUS"],[d,f]],[/(nexus 9)/i],[c,[t,"HTC"],[d,o]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[t,[c,/_/g," "],[d,f]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[t,"Acer"],[d,o]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[t,"Meizu"],[d,f]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[t,"Sharp"],[d,f]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[t,c,[d,f]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[t,c,[d,o]],[/(surface duo)/i],[c,[t,"Microsoft"],[d,o]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[t,"Fairphone"],[d,f]],[/(u304aa)/i],[c,[t,"AT&T"],[d,f]],[/\bsie-(\w*)/i],[c,[t,"Siemens"],[d,f]],[/\b(rct\w+) b/i],[c,[t,"RCA"],[d,o]],[/\b(venue[\d ]{2,7}) b/i],[c,[t,"Dell"],[d,o]],[/\b(q(?:mv|ta)\w+) b/i],[c,[t,"Verizon"],[d,o]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[t,"Barnes & Noble"],[d,o]],[/\b(tm\d{3}\w+) b/i],[c,[t,"NuVision"],[d,o]],[/\b(k88) b/i],[c,[t,"ZTE"],[d,o]],[/\b(nx\d{3}j) b/i],[c,[t,"ZTE"],[d,f]],[/\b(gen\d{3}) b.+49h/i],[c,[t,"Swiss"],[d,f]],[/\b(zur\d{3}) b/i],[c,[t,"Swiss"],[d,o]],[/\b((zeki)?tb.*\b) b/i],[c,[t,"Zeki"],[d,o]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[t,"Dragon Touch"],c,[d,o]],[/\b(ns-?\w{0,9}) b/i],[c,[t,"Insignia"],[d,o]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[t,"NextBook"],[d,o]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[t,"Voice"],c,[d,f]],[/\b(lvtel\-)?(v1[12]) b/i],[[t,"LvTel"],c,[d,f]],[/\b(ph-1) /i],[c,[t,"Essential"],[d,f]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[t,"Envizen"],[d,o]],[/\b(trio[-\w\. ]+) b/i],[c,[t,"MachSpeed"],[d,o]],[/\btu_(1491) b/i],[c,[t,"Rotor"],[d,o]],[/(shield[\w ]+) b/i],[c,[t,"Nvidia"],[d,o]],[/(sprint) (\w+)/i],[t,c,[d,f]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[t,"Microsoft"],[d,f]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[t,"Zebra"],[d,o]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[t,"Zebra"],[d,f]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[t,c,[d,"console"]],[/droid.+; (shield) bui/i],[c,[t,"Nvidia"],[d,"console"]],[/(playstation [345portablevi]+)/i],[c,[t,"Sony"],[d,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[t,"Microsoft"],[d,"console"]],[/smart-tv.+(samsung)/i],[t,[d,g]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[t,"Samsung"],[d,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[t,"LG"],[d,g]],[/(apple) ?tv/i],[t,[c,"Apple TV"],[d,g]],[/crkey/i],[[c,"Chromecast"],[t,"Google"],[d,g]],[/droid.+aft(\w)( bui|\))/i],[c,[t,"Amazon"],[d,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[t,"Sharp"],[d,g]],[/(bravia[\w ]+)( bui|\))/i],[c,[t,"Sony"],[d,g]],[/(mitv-\w{5}) bui/i],[c,[t,"Xiaomi"],[d,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[t,H],[c,H],[d,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,g]],[/((pebble))app/i],[t,c,[d,"wearable"]],[/droid.+; (glass) \d/i],[c,[t,"Google"],[d,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[c,[t,"Zebra"],[d,"wearable"]],[/(quest( 2)?)/i],[c,[t,"Facebook"],[d,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[t,[d,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[d,f]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[d,o]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,o]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,f]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[t,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[r,[n,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[r,[n,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[n,r],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[r,n]],os:[[/microsoft (windows) (vista|xp)/i],[n,r],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[n,[r,y,S]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[n,"Windows"],[r,y,S]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[r,/_/g,"."],[n,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[n,"Mac OS"],[r,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[r,n],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[n,r],[/\(bb(10);/i],[r,[n,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[r,[n,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[r,[n,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[r,[n,"webOS"]],[/crkey\/([\d\.]+)/i],[r,[n,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[n,"Chromium OS"],r],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[n,r],[/(sunos) ?([\w\.\d]*)/i],[[n,"Solaris"],r],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[n,r]]},I=function(nt,j){if(typeof nt=="object"&&(j=nt,nt=void 0),!(this instanceof I))return new I(nt,j).getResult();var O=nt||(b!==void 0&&b.navigator&&b.navigator.userAgent?b.navigator.userAgent:""),at=j?function(X,z){var vt={};for(var Mt in X)z[Mt]&&z[Mt].length%2==0?vt[Mt]=z[Mt].concat(X[Mt]):vt[Mt]=X[Mt];return vt}(T,j):T;return this.getBrowser=function(){var X,z={};return z[n]=void 0,z[r]=void 0,D.call(z,O,at.browser),z.major=typeof(X=z.version)=="string"?X.replace(/[^\d\.]/g,"").split(".")[0]:void 0,z},this.getCPU=function(){var X={architecture:void 0};return D.call(X,O,at.cpu),X},this.getDevice=function(){var X={vendor:void 0,model:void 0,type:void 0};return D.call(X,O,at.device),X},this.getEngine=function(){var X={name:void 0,version:void 0};return D.call(X,O,at.engine),X},this.getOS=function(){var X={name:void 0,version:void 0};return D.call(X,O,at.os),X},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return O},this.setUA=function(X){return O=typeof X=="string"&&X.length>350?H(X,350):X,this},this.setUA(O),this};I.VERSION="1.0.32",I.BROWSER=v([n,r,"major"]),I.CPU=v(["architecture"]),I.DEVICE=v([c,t,d,"console",f,g,o,"wearable","embedded"]),I.ENGINE=I.OS=v([n,r]),At!==void 0?(Ee!==void 0&&Ee.exports&&(At=Ee.exports=I),At.UAParser=I):x(54)?(w=function(){return I}.call(At,x,At,Ee))===void 0||(Ee.exports=w):b!==void 0&&(b.UAParser=I);var L=b!==void 0&&(b.jQuery||b.Zepto);if(L&&!L.ua){var J=new I;L.ua=J.getResult(),L.ua.get=function(){return J.getUA()},L.ua.set=function(nt){J.setUA(nt);var j=J.getResult();for(var O in j)L.ua[O]=j[O]}}})(typeof window=="object"?window:this)},function(Ee,At,x){var w=x(17),b=x(5),h=x(3),c=x(4),n=x(12),d=x(0);function t(r){var f,o,g,v,P,B=(r=r||{}).eventBus,H=r.debug,D=r.urlUtils,y=r.type,S=r.streamInfo,T=r.segmentsController,I=r.timelineConverter,L=r.baseURLController;function J(){return y}function nt(){g=null}function j(z,vt,Mt){var Pt,ge,Q=L.resolve(Mt.path);return Q&&vt!==Q.url&&D.isRelative(vt)?(Pt=Q.url,ge=Q.serviceLocation,vt&&(Pt=D.resolve(vt,Pt))):Pt=vt,!D.isRelative(Pt)&&(z.url=Pt,z.serviceLocation=ge,!0)}function O(z,vt){if(vt==null)return null;var Mt=new w.a,Pt=vt.representation,ge=Pt.adaptation.period.mpd.manifest.Period_asArray[Pt.adaptation.period.index].AdaptationSet_asArray[Pt.adaptation.index].Representation_asArray[Pt.index].bandwidth,Q=vt.media;return Q=Object(n.d)(Q,"Number",vt.replacementNumber),Q=Object(n.d)(Q,"Time",vt.replacementTime),Q=Object(n.d)(Q,"Bandwidth",ge),Q=Object(n.c)(Q,Pt.id),Q=Object(n.e)(Q),Mt.mediaType=J(),Mt.type=b.a.MEDIA_SEGMENT_TYPE,Mt.range=vt.mediaRange,Mt.startTime=vt.presentationStartTime,Mt.mediaStartTime=vt.mediaStartTime,Mt.duration=vt.duration,Mt.timescale=Pt.timescale,Mt.availabilityStartTime=vt.availabilityStartTime,Mt.availabilityEndTime=vt.availabilityEndTime,Mt.availabilityTimeComplete=Pt.availabilityTimeComplete,Mt.wallStartTime=vt.wallStartTime,Mt.quality=Pt.index,Mt.index=vt.index,Mt.mediaInfo=z,Mt.adaptationIndex=Pt.adaptation.index,Mt.representationId=Pt.id,j(Mt,Q,Pt)?Mt:void 0}function at(z,vt,Mt){var Pt=null;if(!vt||!vt.segmentInfoType)return Pt;var ge=T.getSegmentByTime(vt,Mt);return ge&&(g=ge,o.debug("Index for time "+Mt+" is "+ge.index),Pt=O(z,ge)),Pt}function X(){o.debug("Dynamic stream complete"),P=!0}return f={initialize:function(z){v=z,P=!1,T.initialize(z)},getStreamId:function(){return S.id},getType:J,getStreamInfo:function(){return S},getInitRequest:function(z,vt){return vt?function(Mt,Pt,ge){var Q=new w.a,ft=Pt.adaptation.period,Ht=ft.start;if(Q.mediaType=ge,Q.type=b.a.INIT_SEGMENT_TYPE,Q.range=Pt.range,Q.availabilityStartTime=I.calcAvailabilityStartTimeFromPresentationTime(Ht,Pt,v),Q.availabilityEndTime=I.calcAvailabilityEndTimeFromPresentationTime(Ht+ft.duration,Pt,v),Q.quality=Pt.index,Q.mediaInfo=Mt,Q.representationId=Pt.id,j(Q,Pt.initialization,Pt))return Q.url=Object(n.d)(Q.url,"Bandwidth",Pt.bandwidth),Q}(z,vt,J()):null},getSegmentRequestForTime:at,getCurrentIndex:function(){return g?g.index:-1},getNextSegmentRequest:function(z,vt){var Mt=null;if(!vt||!vt.segmentInfoType)return null;var Pt=g?g.index+1:0,ge=T.getSegmentByIndex(vt,Pt,g?g.mediaStartTime:-1);if(ge)Mt=O(z,ge),g=ge;else{if(v&&!P)return o.debug(J()+" No segment found at index: "+Pt+". Wait for next loop"),null;P=!0}return Mt},isLastSegmentRequested:function(z,vt){return!z||!g?!1:P?!0:!isFinite(z.adaptation.period.duration)||g.presentationStartTime+g.duration>vt?!1:z.mediaFinishedInformation&&!isNaN(z.mediaFinishedInformation.numberOfSegments)&&!isNaN(g.index)&&g.index>=z.mediaFinishedInformation.numberOfSegments-1&&(!v||z.segmentInfoType===d.a.SEGMENT_TEMPLATE||v&&z.segmentInfoType===d.a.SEGMENT_LIST&&z.adaptation.period.nextPeriodId)?!0:!!(v&&z.adaptation.period.nextPeriodId&&z.segmentInfoType===d.a.SEGMENT_TIMELINE&&z.mediaFinishedInformation&&!isNaN(z.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&g&&!isNaN(g.mediaStartTime)&&!isNaN(g.duration)&&g.mediaStartTime+g.duration>=z.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){nt(),B.off(c.a.DYNAMIC_TO_STATIC,X,f)},getNextSegmentRequestIdempotent:function(z,vt){var Mt=g?g.index+1:0,Pt=T.getSegmentByIndex(vt,Mt,g?g.mediaStartTime:-1);return Pt?O(z,Pt):null},getValidTimeAheadOfTargetTime:function(z,vt,Mt,Pt){try{if(isNaN(z)||!vt||!Mt)return NaN;if(z<0&&(z=0),isNaN(Pt)&&(Pt=.5),at(vt,Mt,z))return z;if(Mt.adaptation.period.start+Mt.adaptation.period.duration<z)return NaN;for(var ge=isFinite(Mt.adaptation.period.duration)?Mt.adaptation.period.start+Mt.adaptation.period.duration:z+30,Q=Math.min(z+Pt,ge),ft=NaN,Ht=null;Q<=ge;){var _e=null;if(Q<=ge&&(_e=at(vt,Mt,Q)),_e){ft=Q,Ht=_e;break}Q+=Pt}if(Ht){var Jt=Ht.startTime+Ht.duration;return z>Ht.startTime&&Jt-z>Pt?z:!isNaN(Ht.startTime)&&z<Ht.startTime&&ft>Ht.startTime?Ht.startTime+.001:Math.min(Jt-Pt,ft)}return ft}catch{return NaN}}},o=H.getLogger(f),nt(),B.on(c.a.DYNAMIC_TO_STATIC,X,f),f}t.__dashjs_factory_name="DashHandler",At.a=h.a.getClassFactory(t)},function(Ee,At,x){var w=x(3),b=x(1),h=x(12);function c(B,H){var D=(B=B||{}).timelineConverter,y=B.dashMetrics;function S(){if(!D)throw new Error(b.a.MISSING_CONFIG_ERROR)}function T(L,J){var nt,j,O,at,X,z,vt,Mt=L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index].Representation_asArray[L.index].SegmentTemplate||L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index].Representation_asArray[L.index].SegmentList,Pt=Mt.SegmentTimeline,ge=Mt.SegmentURL_asArray,Q=0,ft=-1;vt=L.timescale;var Ht=!1;for(O=0,at=(nt=Pt.S_asArray).length;O<at&&!Ht;O++)for(z=0,(j=nt[O]).hasOwnProperty("r")&&(z=j.r),j.hasOwnProperty("t")&&(Q=j.t),z<0&&(z=I(L,nt[O+1],j,vt,Q/vt)),X=0;X<=z&&!Ht;X++)(Ht=J(Q,Mt,ge,j,vt,++ft,O))&&(L.segmentDuration=j.d/vt),Q+=j.d}function I(L,J,nt,j,O){var at;if(J&&J.hasOwnProperty("t"))at=J.t/j;else try{var X=0;if(isNaN(L.adaptation.period.start)||isNaN(L.adaptation.period.duration)||!isFinite(L.adaptation.period.duration)){var z=y.getCurrentDVRInfo();X=isNaN(z.end)?0:z.end}else X=L.adaptation.period.start+L.adaptation.period.duration;at=D.calcMediaTimeFromPresentationTime(X,L),L.segmentDuration=nt.d/j}catch{at=0}return Math.max(Math.ceil((at-O)/(nt.d/j))-1,0)}return{getSegmentByIndex:function(L,J,nt){if(S(),!L)return null;var j=null,O=!1;return T(L,function(at,X,z,vt,Mt,Pt,ge){if(O||nt<0){var Q=X.media,ft=vt.mediaRange;return z&&(Q=z[ge].media||"",ft=z[ge].mediaRange),j=Object(h.b)(D,H,L,at,vt.d,Mt,Q,ft,Pt,vt.tManifest),!0}return at>=nt*Mt-.5*vt.d&&(O=!0),!1}),j},getSegmentByTime:function(L,J){if(S(),!L)return null;J===void 0&&(J=null);var nt=null,j=D.calcMediaTimeFromPresentationTime(J,L);return T(L,function(O,at,X,z,vt,Mt,Pt){var ge=parseFloat((j*vt).toPrecision(15));if(ge<O+z.d&&ge>=O){var Q=at.media,ft=z.mediaRange;return X&&(Q=X[Pt].media||"",ft=X[Pt].mediaRange),nt=Object(h.b)(D,H,L,O,z.d,vt,Q,ft,Mt,z.tManifest),!0}return!1}),nt},getMediaFinishedInformation:function(L){if(!L)return 0;var J,nt,j,O,at,X,z,vt=(L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index].Representation_asArray[L.index].SegmentTemplate||L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index].Representation_asArray[L.index].SegmentList).SegmentTimeline,Mt=0,Pt=0,ge=0;for(z=L.timescale,O=(J=vt.S_asArray).length,j=0;j<O;j++)for(X=0,(nt=J[j]).hasOwnProperty("r")&&(X=nt.r),nt.hasOwnProperty("t")&&(Pt=(Mt=nt.t)/z),X<0&&(X=I(L,J[j+1],nt,z,Pt)),at=0;at<=X;at++)ge++,Pt=(Mt+=nt.d)/z;return{numberOfSegments:ge,mediaTimeOfLastSignaledSegment:Pt}}}}c.__dashjs_factory_name="TimelineSegmentsGetter";var n=w.a.getClassFactory(c);function d(B,H){var D=(B=B||{}).timelineConverter;function y(){if(!D||!D.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.a.MISSING_CONFIG_ERROR)}function S(T,I){if(y(),!T)return null;var L=T.adaptation.period.mpd.manifest.Period_asArray[T.adaptation.period.index].AdaptationSet_asArray[T.adaptation.index].Representation_asArray[T.index].SegmentTemplate;I=Math.max(I,0);var J=Object(h.a)(D,H,T,I);if(J){J.replacementTime=Math.round((I-1)*T.segmentDuration*T.timescale,10);var nt=L.media;nt=Object(h.d)(nt,"Number",J.replacementNumber),nt=Object(h.d)(nt,"Time",J.replacementTime),J.media=nt}return J}return{getSegmentByIndex:S,getSegmentByTime:function(T,I){if(y(),!T)return null;var L=T.segmentDuration;if(isNaN(L))return null;var J=D.calcPeriodRelativeTimeFromMpdRelativeTime(T,I);return S(T,Math.floor(J/L))},getMediaFinishedInformation:function(T){var I={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!T)return I;var L=T.segmentDuration;return isNaN(L)?I.numberOfSegments=1:I.numberOfSegments=Math.ceil(T.adaptation.period.duration/L),I}}}d.__dashjs_factory_name="TemplateSegmentsGetter";var t=w.a.getClassFactory(d);function r(B,H){var D=(B=B||{}).timelineConverter;function y(){if(!D||!D.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.a.MISSING_CONFIG_ERROR)}function S(T,I){if(y(),!T)return null;var L=T.adaptation.period.mpd.manifest.Period_asArray[T.adaptation.period.index].AdaptationSet_asArray[T.adaptation.index].Representation_asArray[T.index].SegmentList,J=L.SegmentURL_asArray.length,nt=T&&!isNaN(T.startNumber)?T.startNumber:1,j=Math.max(nt-1,0),O=Math.max(I-j,0),at=null;if(O<J){var X=L.SegmentURL_asArray[O];(at=Object(h.a)(D,H,T,I))&&(at.replacementTime=(nt+I-1)*T.segmentDuration,at.media=X.media?X.media:"",at.mediaRange=X.mediaRange,at.indexRange=X.indexRange)}return at}return{getSegmentByIndex:S,getSegmentByTime:function(T,I){if(y(),!T)return null;var L=T.segmentDuration;if(isNaN(L))return null;var J=D.calcPeriodRelativeTimeFromMpdRelativeTime(T,I);return S(T,Math.floor(J/L))},getMediaFinishedInformation:function(T){var I={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!T)return I;var L=T.adaptation.period.mpd.manifest.Period_asArray[T.adaptation.period.index].AdaptationSet_asArray[T.adaptation.index].Representation_asArray[T.index].SegmentList,J=T&&!isNaN(T.startNumber)?T.startNumber:1,nt=Math.max(J-1,0);return I.numberOfSegments=nt+L.SegmentURL_asArray.length,I}}}r.__dashjs_factory_name="ListSegmentsGetter";var f=w.a.getClassFactory(r);function o(B){var H=(B=B||{}).timelineConverter;function D(){if(!H||!H.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.a.MISSING_CONFIG_ERROR)}function y(S,T){if(D(),!S)return null;var I,L=S.segments?S.segments.length:-1;if(T<L&&(I=S.segments[T])&&I.index===T)return I;for(var J=0;J<L;J++)if((I=S.segments[J])&&I.index===T)return I;return null}return{getSegmentByIndex:y,getSegmentByTime:function(S,T){return D(),y(S,function(I,L){if(!I)return-1;var J,nt,j,O,at,X=I.segments,z=X?X.length:null,vt=-1;if(X&&z>0){for(at=0;at<z;at++)if(nt=X[at],j=nt.presentationStartTime,O=nt.duration,L+(J=O/2)>=j&&L-J<j+O){vt=nt.index;break}}return vt}(S,T))},getMediaFinishedInformation:function(S){var T={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return S&&S.segments&&(T.numberOfSegments=S.segments.length),T}}}o.__dashjs_factory_name="SegmentBaseGetter";var g=w.a.getClassFactory(o);function v(B){B=B||{};var H,D,y=this.context,S=B.dashConstants,T=B.type,I=B.segmentBaseController;function L(J){return J?J.segments?D[S.SEGMENT_BASE]:D[J.segmentInfoType]:null}return H={initialize:function(J){D[S.SEGMENT_TIMELINE]=n(y).create(B,J),D[S.SEGMENT_TEMPLATE]=t(y).create(B,J),D[S.SEGMENT_LIST]=f(y).create(B,J),D[S.SEGMENT_BASE]=g(y).create(B,J)},updateInitData:function(J,nt){return nt?Promise.resolve():I.getSegmentBaseInitSegment({representation:J,mediaType:T})},updateSegmentData:function(J,nt){return nt?Promise.resolve():I.getSegmentList({mimeType:J.mimeType,representation:J,mediaType:T})},getSegmentByIndex:function(J,nt,j){var O=L(J);return O?O.getSegmentByIndex(J,nt,j):null},getSegmentByTime:function(J,nt){var j=L(J);return j?j.getSegmentByTime(J,nt):null},getMediaFinishedInformation:function(J){var nt=L(J);return nt?nt.getMediaFinishedInformation(J):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},D={},H}v.__dashjs_factory_name="SegmentsController";var P=w.a.getClassFactory(v);At.a=P},function(Ee,At,x){function w(n){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function b(n,d){for(var t=0;t<d.length;t++){var r=d[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(f=r.key,o=void 0,o=function(g,v){if(w(g)!=="object"||g===null)return g;var P=g[Symbol.toPrimitive];if(P!==void 0){var B=P.call(g,v||"default");if(w(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}(f,"string"),w(o)==="symbol"?o:String(o)),r)}var f,o}function h(n,d,t){return d&&b(n.prototype,d),t&&b(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var c=h(function n(d,t,r,f){(function(o,g){if(!(o instanceof g))throw new TypeError("Cannot call a class as a function")})(this,n),this.url=d||"",this.serviceLocation=t||d||"",this.dvb_priority=r||1,this.dvb_weight=f||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0});c.DEFAULT_DVB_PRIORITY=1,c.DEFAULT_DVB_WEIGHT=1,At.a=c},function(Ee,At){typeof Object.create=="function"?Ee.exports=function(x,w){w&&(x.super_=w,x.prototype=Object.create(w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}))}:Ee.exports=function(x,w){if(w){x.super_=w;var b=function(){};b.prototype=w.prototype,x.prototype=new b,x.prototype.constructor=x}}},function(Ee,At,x){(function(w){var b={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},h=function(y){var S=y;return b.hasOwnProperty(y)&&(S=b[y]),String.fromCharCode(S)},c={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},n={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},t={25:2,26:4,29:6,30:8,31:10,27:13,28:15},r=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(y){this.time=y},log:function(y,S){var T=this.verboseFilter[y];this.verboseLevel>=T&&console.log(this.time+" ["+y+"] "+S)}},o=function(y){for(var S=[],T=0;T<y.length;T++)S.push(y[T].toString(16));return S},g=function(y,S,T,I,L){this.foreground=y||"white",this.underline=S||!1,this.italics=T||!1,this.background=I||"black",this.flash=L||!1};g.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(y){for(var S=["foreground","underline","italics","background","flash"],T=0;T<S.length;T++){var I=S[T];y.hasOwnProperty(I)&&(this[I]=y[I])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(y){return this.foreground===y.foreground&&this.underline===y.underline&&this.italics===y.italics&&this.background===y.background&&this.flash===y.flash},copy:function(y){this.foreground=y.foreground,this.underline=y.underline,this.italics=y.italics,this.background=y.background,this.flash=y.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var v=function(y,S,T,I,L,J){this.uchar=y||" ",this.penState=new g(S,T,I,L,J)};v.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(y,S){this.uchar=y,this.penState.copy(S)},setPenState:function(y){this.penState.copy(y)},equals:function(y){return this.uchar===y.uchar&&this.penState.equals(y.penState)},copy:function(y){this.uchar=y.uchar,this.penState.copy(y.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var P=function(){this.chars=[];for(var y=0;y<32;y++)this.chars.push(new v);this.pos=0,this.currPenState=new g};P.prototype={equals:function(y){for(var S=!0,T=0;T<32;T++)if(!this.chars[T].equals(y.chars[T])){S=!1;break}return S},copy:function(y){for(var S=0;S<32;S++)this.chars[S].copy(y.chars[S])},isEmpty:function(){for(var y=!0,S=0;S<32;S++)if(!this.chars[S].isEmpty()){y=!1;break}return y},setCursor:function(y){this.pos!==y&&(this.pos=y),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(y){var S=this.pos+y;if(y>1)for(var T=this.pos+1;T<S+1;T++)this.chars[T].setPenState(this.currPenState);this.setCursor(S)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(y){y>=144&&this.backSpace();var S=h(y);this.pos>=32?f.log("ERROR","Cannot insert "+y.toString(16)+" ("+S+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(S,this.currPenState),this.moveCursor(1))},clearFromPos:function(y){var S;for(S=y;S<32;S++)this.chars[S].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var y=[],S=!0,T=0;T<32;T++){var I=this.chars[T].uchar;I!==" "&&(S=!1),y.push(I)}return S?"":y.join("")},setPenStyles:function(y){this.currPenState.setStyles(y),this.chars[this.pos].setPenState(this.currPenState)}};var B=function(){this.rows=[];for(var y=0;y<15;y++)this.rows.push(new P);this.currRow=14,this.nrRollUpRows=null,this.reset()};B.prototype={reset:function(){for(var y=0;y<15;y++)this.rows[y].clear();this.currRow=14},equals:function(y){for(var S=!0,T=0;T<15;T++)if(!this.rows[T].equals(y.rows[T])){S=!1;break}return S},copy:function(y){for(var S=0;S<15;S++)this.rows[S].copy(y.rows[S])},isEmpty:function(){for(var y=!0,S=0;S<15;S++)if(!this.rows[S].isEmpty()){y=!1;break}return y},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(y){this.rows[this.currRow].insertChar(y)},setPen:function(y){this.rows[this.currRow].setPenStyles(y)},moveCursor:function(y){this.rows[this.currRow].moveCursor(y)},setCursor:function(y){f.log("INFO","setCursor: "+y),this.rows[this.currRow].setCursor(y)},setPAC:function(y){f.log("INFO","pacData = "+JSON.stringify(y));var S=y.row-1;this.nrRollUpRows&&S<this.nrRollUpRows-1&&(S=this.nrRollUpRows-1),this.currRow=S;var T=this.rows[this.currRow];if(y.indent!==null){var I=y.indent,L=Math.max(I-1,0);T.setCursor(y.indent),y.color=T.chars[L].penState.foreground}var J={foreground:y.color,underline:y.underline,italics:y.italics,background:"black",flash:!1};this.setPen(J)},setBkgData:function(y){f.log("INFO","bkgData = "+JSON.stringify(y)),this.backSpace(),this.setPen(y),this.insertChar(32)},setRollUpRows:function(y){this.nrRollUpRows=y},rollUp:function(){if(this.nrRollUpRows!==null){f.log("TEXT",this.getDisplayText());var y=this.currRow+1-this.nrRollUpRows,S=this.rows.splice(y,1)[0];S.clear(),this.rows.splice(this.currRow,0,S),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(y){y=y||!1;for(var S=[],T="",I=-1,L=0;L<15;L++){var J=this.rows[L].getTextString();J&&(I=L+1,y?S.push("Row "+I+': "'+J+'"'):S.push(J.trim()))}return S.length>0&&(T=y?"["+S.join(" | ")+"]":S.join(`
`)),T},getTextAndFormat:function(){return this.rows}};var H=function(y,S){this.chNr=y,this.outputFilter=S,this.mode=null,this.verbose=0,this.displayedMemory=new B,this.nonDisplayedMemory=new B,this.lastOutputScreen=new B,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};H.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(y){this.outputFilter=y},setPAC:function(y){this.writeScreen.setPAC(y)},setBkgData:function(y){this.writeScreen.setBkgData(y)},setMode:function(y){y!==this.mode&&(this.mode=y,f.log("INFO","MODE="+y),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=y)},insertChars:function(y){for(var S=0;S<y.length;S++)this.writeScreen.insertChar(y[S]);var T=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",T+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){f.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(y){f.log("INFO","RU("+y+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(y)},cc_FON:function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(f.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var y=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=y,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(y){f.log("INFO","TO("+y+") - Tab Offset"),this.writeScreen.moveCursor(y)},cc_MIDROW:function(y){var S={flash:!1};if(S.underline=y%2==1,S.italics=y>=46,S.italics)S.foreground="white";else{var T=Math.floor(y/2)-16;S.foreground=["white","green","blue","cyan","red","yellow","magenta"][T]}f.log("INFO","MIDROW: "+JSON.stringify(S)),this.writeScreen.setPen(S)},outputDataUpdate:function(){var y=f.time;y!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(y,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,y,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:y):this.cueStartTime=y,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(y){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,y,this.displayedMemory),this.cueStartTime=y))}};var D=function(y,S,T){this.field=y||1,this.outputs=[S,T],this.channels=[new H(1,S),new H(2,T)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};D.prototype={getHandler:function(y){return this.channels[y].getHandler()},setHandler:function(y,S){this.channels[y].setHandler(S)},addData:function(y,S){var T,I,L,J=!1;this.lastTime=y,f.setTime(y);for(var nt=0;nt<S.length;nt+=2)I=127&S[nt],L=127&S[nt+1],I>=16&&I<=31&&I===this.lastCmdA&&L===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+o([I,L])+") is dropped")):I!==0||L!==0?(f.log("DATA","["+o([S[nt],S[nt+1]])+"] -> ("+o([I,L])+")"),(T=this.parseCmd(I,L))||(T=this.parseMidrow(I,L)),T||(T=this.parsePAC(I,L)),T||(T=this.parseBackgroundAttributes(I,L)),!T&&(J=this.parseChars(I,L))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(J):f.log("WARNING","No channel found yet. TEXT-MODE?")),T?this.dataCounters.cmd+=2:J?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+o([I,L])+" orig: "+o([S[nt],S[nt+1]])))):this.dataCounters.padding+=2},parseCmd:function(y,S){var T=null;if(!((y===20||y===21||y===28||y===29)&&32<=S&&S<=47)&&!((y===23||y===31)&&33<=S&&S<=35))return!1;T=y===20||y===21||y===23?1:2;var I=this.channels[T-1];return y===20||y===21||y===28||y===29?S===32?I.cc_RCL():S===33?I.cc_BS():S===34?I.cc_AOF():S===35?I.cc_AON():S===36?I.cc_DER():S===37?I.cc_RU(2):S===38?I.cc_RU(3):S===39?I.cc_RU(4):S===40?I.cc_FON():S===41?I.cc_RDC():S===42?I.cc_TR():S===43?I.cc_RTD():S===44?I.cc_EDM():S===45?I.cc_CR():S===46?I.cc_ENM():S===47&&I.cc_EOC():I.cc_TO(S-32),this.lastCmdA=y,this.lastCmdB=S,this.currChNr=T,!0},parseMidrow:function(y,S){var T=null;if((y===17||y===25)&&32<=S&&S<=47){if((T=y===17?1:2)!==this.currChNr)return f.log("ERROR","Mismatch channel in midrow parsing"),!1;var I=this.channels[T-1];return I.insertChars([32]),I.cc_MIDROW(S),f.log("DEBUG","MIDROW ("+o([y,S])+")"),this.lastCmdA=y,this.lastCmdB=S,!0}return!1},parsePAC:function(y,S){var T,I=null;if(!((17<=y&&y<=23||25<=y&&y<=31)&&64<=S&&S<=127)&&!((y===16||y===24)&&64<=S&&S<=95))return!1;T=y<=23?1:2,I=64<=S&&S<=95?T===1?c[y]:d[y]:T===1?n[y]:t[y];var L=this.interpretPAC(I,S);return this.channels[T-1].setPAC(L),this.lastCmdA=y,this.lastCmdB=S,this.currChNr=T,!0},interpretPAC:function(y,S){var T=S,I={color:null,italics:!1,indent:null,underline:!1,row:y};return T=S>95?S-96:S-64,I.underline=(1&T)==1,T<=13?I.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(T/2)]:T<=15?(I.italics=!0,I.color="white"):I.indent=4*Math.floor((T-16)/2),I},parseChars:function(y,S){var T=null,I=null,L=null;if(y>=25?(T=2,L=y-8):(T=1,L=y),17<=L&&L<=19){var J=S;J=L===17?S+80:L===18?S+112:S+144,f.log("INFO","Special char '"+h(J)+"' in channel "+T),I=[J],this.lastCmdA=y,this.lastCmdB=S}else 32<=y&&y<=127&&(I=S===0?[y]:[y,S],this.lastCmdA=null,this.lastCmdB=null);if(I){var nt=o(I);f.log("DEBUG","Char codes =  "+nt.join(","))}return I},parseBackgroundAttributes:function(y,S){var T,I,L;return((y===16||y===24)&&32<=S&&S<=47||(y===23||y===31)&&45<=S&&S<=47)&&(T={},y===16||y===24?(I=Math.floor((S-32)/2),T.background=r[I],S%2==1&&(T.background=T.background+"_semi")):S===45?T.background="transparent":(T.foreground="black",S===47&&(T.underline=!0)),L=y<24?1:2,this.channels[L-1].setBkgData(T),this.lastCmdA=y,this.lastCmdB=S,!0)},reset:function(){for(var y=0;y<this.channels.length;y++)this.channels[y]&&this.channels[y].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(y){for(var S=0;S<this.channels.length;S++)this.channels[S]&&this.channels[S].cueSplitAtTime(y)}},w.logger=f,w.PenState=g,w.CaptionScreen=B,w.Cea608Parser=D,w.findCea608Nalus=function(y,S,T){for(var I=0,L=S,J=[],nt=function(z,vt,Mt,Pt){if(z!==4||vt<8)return null;var ge=Mt.getUint8(Pt),Q=Mt.getUint16(Pt+1),ft=Mt.getUint32(Pt+3),Ht=Mt.getUint8(Pt+7);return ge==181&&Q==49&&ft==1195456820&&Ht==3};L<S+T;){if(I=y.getUint32(L),(31&y.getUint8(L+4))===6)for(var j=L+5,O=-1;j<L+4+I-1;){O=0;for(var at=255;at===255;)O+=at=y.getUint8(j),j++;var X=0;for(at=255;at===255;)X+=at=y.getUint8(j),j++;nt(O,X,y,j)&&J.push([j,X]),j+=X}L+=I+4}return J},w.extractCea608DataFromRange=function(y,S){var T=S[0],I=[[],[]];T+=8;var L=31&y.getUint8(T);T+=2;for(var J=0;J<L;J++){var nt=y.getUint8(T),j=4&nt,O=3&nt;T++;var at=y.getUint8(T);T++;var X=y.getUint8(T);T++,j&&(127&at)+(127&X)!=0&&(O===0?(I[0].push(at),I[0].push(X)):O===1&&(I[1].push(at),I[1].push(X)))}return I}})(At)},function(Ee,At,x){var w=x(7),b=x(4),h=x(19),c=x(3),n=x(16),d=x(1),t=x(5),r=x(34),f=x(14);function o(O,at){var X=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(!X){if(Array.isArray(O)||(X=function(Q,ft){if(Q){if(typeof Q=="string")return g(Q,ft);var Ht=Object.prototype.toString.call(Q).slice(8,-1);if(Ht==="Object"&&Q.constructor&&(Ht=Q.constructor.name),Ht==="Map"||Ht==="Set")return Array.from(Q);if(Ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ht))return g(Q,ft)}}(O))||at&&O&&typeof O.length=="number"){X&&(O=X);var z=0,vt=function(){};return{s:vt,n:function(){return z>=O.length?{done:!0}:{done:!1,value:O[z++]}},e:function(Q){throw Q},f:vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Mt,Pt=!0,ge=!1;return{s:function(){X=X.call(O)},n:function(){var Q=X.next();return Pt=Q.done,Q},e:function(Q){ge=!0,Mt=Q},f:function(){try{Pt||X.return==null||X.return()}finally{if(ge)throw Mt}}}}function g(O,at){(at==null||at>O.length)&&(at=O.length);for(var X=0,z=new Array(at);X<at;X++)z[X]=O[X];return z}var v="m",P="a",B="v",H="i",D="c",y="tt",S="k",T="o",I="d",L="s",J="v",nt="l";function j(){var O,at,X,z,vt,Mt,Pt,ge,Q,ft,Ht=this.context,_e=Object(w.a)(Ht).getInstance(),Jt=Object(n.a)(Ht).getInstance();function Te(){X={pr:1,nor:null,st:null,sf:null,sid:"".concat(f.a.generateUuid()),cid:null},Q={},ge={},ft={},Wt()}function It(){Wt()}function Wt(){if(Mt){var it=Mt.getStreamController();if(it&&typeof it.getActiveStream=="function"){var ct=it.getActiveStream();ct&&(Pt=ct.getProcessors())}}}function Yt(it,ct){var jt,me={},ue=o(ct);try{for(ue.s();!(jt=ue.n()).done;){var Ct=jt.value;it[Ct]&&(me[Ct]=it[Ct])}}catch(Nt){ue.e(Nt)}finally{ue.f()}return me}function e(it){var ct=Jt.get().streaming.cmcd.enabledKeys;return it.filter(function(jt){return ct.includes(jt)})}function u(it){try{return it.type===t.a.MPD_TYPE?((ct=l()).ot=v,ct):it.type===t.a.MEDIA_SEGMENT_TYPE?(function(jt){ft.hasOwnProperty(jt)||(ft[jt]=!1),ge.hasOwnProperty(jt)||(ge[jt]=!1),Q.hasOwnProperty(jt)||(Q[jt]=!1)}(it.mediaType),function(jt){var me,ue=l(),Ct=function(we){try{var Fe=we.quality,We=we.mediaInfo.bitrateList;return parseInt(We[Fe].bandwidth/1e3)}catch{return null}}(jt),Nt=function(we){try{return isNaN(we.duration)?null:Math.round(1e3*we.duration)}catch{return null}}(jt),Ot=function(we){try{return 100*parseInt(z.getThroughputHistory().getSafeAverageThroughput(we)/100)}catch{return null}}(jt.mediaType),Gt=function(we){try{var Fe=X.pr,We=vt.getCurrentBufferLevel(we);return isNaN(Fe)||isNaN(We)?null:100*parseInt(We/Fe*10)}catch{return null}}(jt.mediaType),ve=G(jt.mediaType),Ae=function(we){try{var Fe=z.getTopBitrateInfoFor(we);return Math.round(Fe.bitrate/1e3)}catch{return null}}(jt.mediaType),ie=X.pr,Zt=function(we){if(!(!Pt||Pt.length===0)){var Fe,We=o(Pt);try{for(We.s();!(Fe=We.n()).done;){var Ve=Fe.value;if(Ve.getType()===we)return Ve.probeNextRequest()}}catch(N){We.e(N)}finally{We.f()}}}(jt.mediaType);jt.mediaType===d.a.VIDEO&&(me=B),jt.mediaType===d.a.AUDIO&&(me=P),jt.mediaType===d.a.TEXT&&(me=jt.mediaInfo.mimeType==="application/mp4"?y:D);var ee=Jt.get().streaming.cmcd.rtp;return ee||(ee=function(we){var Fe=Mt.getPlaybackRate();Fe||(Fe=1);var We=we.quality,Ve=we.mediaType,N=we.mediaInfo,C=we.duration,dt=G(Ve);dt===0&&(dt=500);var Bt=N.bitrateList[We].bandwidth*C/1e3/(dt/Fe/1e3),Ut=Jt.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(Jt.get().streaming.cmcd.rtpSafetyFactor)?Jt.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Bt*Ut/100)+1)}(jt)),ue.rtp=ee,Zt&&(jt.url!==Zt.url?ue.nor=encodeURIComponent(f.a.getRelativeUrl(jt.url,Zt.url)):Zt.range&&(ue.nrr=Zt.range)),Ct&&(ue.br=Ct),me&&(ue.ot=me),isNaN(Nt)||(ue.d=Nt),isNaN(Ot)||(ue.mtp=Ot),isNaN(Gt)||(ue.dl=Gt),isNaN(ve)||(ue.bl=ve),isNaN(Ae)||(ue.tb=Ae),isNaN(ie)||ie===1||(ue.pr=ie),Q[jt.mediaType]&&(ue.bs=!0,Q[jt.mediaType]=!1),!ge[jt.mediaType]&&ft[jt.mediaType]||(ue.su=!0,ge[jt.mediaType]=!1,ft[jt.mediaType]=!0),ue}(it)):it.type===t.a.INIT_SEGMENT_TYPE?function(){var jt=l();return jt.ot=H,jt.su=!0,jt}():it.type===t.a.OTHER_TYPE||it.type===t.a.XLINK_EXPANSION_TYPE?function(){var jt=l();return jt.ot=T,jt}():it.type===t.a.LICENSE?function(jt){var me=l();return me.ot=S,me}():null}catch{return null}var ct}function l(){var it={},ct=Jt.get().streaming.cmcd.cid?Jt.get().streaming.cmcd.cid:X.cid;return it.v=1,it.sid=Jt.get().streaming.cmcd.sid?Jt.get().streaming.cmcd.sid:X.sid,it.sid="".concat(it.sid),ct&&(it.cid="".concat(ct)),isNaN(X.pr)||X.pr===1||X.pr===null||(it.pr=X.pr),X.st&&(it.st=X.st),X.sf&&(it.sf=X.sf),it}function G(it){try{var ct=vt.getCurrentBufferLevel(it);return isNaN(ct)?null:100*parseInt(10*ct)}catch{return null}}function A(it){try{X.pr=it.playbackRate}catch{}}function F(it){try{var ct=O.getIsDynamic(it.data)?nt:J,jt=it.protocol&&it.protocol==="MSS"?L:I;X.st="".concat(ct),X.sf="".concat(jt)}catch{}}function K(it){try{it.state&&it.mediaType&&it.state===b.a.BUFFER_EMPTY&&(Q[it.mediaType]||(Q[it.mediaType]=!0),ge[it.mediaType]||(ge[it.mediaType]=!0))}catch{}}function Z(){for(var it in Q)Q.hasOwnProperty(it)&&(Q[it]=!0);for(var ct in ge)ge.hasOwnProperty(ct)&&(ge[ct]=!0)}function bt(it){try{if(!it)return null;var ct=Object.keys(it).sort(function(ue,Ct){return ue.localeCompare(Ct)}),jt=ct.length,me=ct.reduce(function(ue,Ct,Nt){return Ct==="v"&&it[Ct]===1||(typeof it[Ct]=="string"&&Ct!=="ot"&&Ct!=="sf"&&Ct!=="st"?ue+="".concat(Ct,"=").concat(JSON.stringify(it[Ct])):ue+="".concat(Ct,"=").concat(it[Ct]),Nt<jt-1&&(ue+=",")),ue},"");return me=(me=me.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return at={getQueryParameter:function(it){try{if(Jt.get().streaming.cmcd&&Jt.get().streaming.cmcd.enabled){var ct=u(it),jt=bt(function(me){try{var ue=Jt.get().streaming.cmcd.enabledKeys;return Object.keys(me).filter(function(Ct){return ue.includes(Ct)}).reduce(function(Ct,Nt){return Ct[Nt]=me[Nt],Ct},{})}catch{return me}}(ct));return _e.trigger(h.a.CMCD_DATA_GENERATED,{url:it.url,mediaType:it.mediaType,cmcdData:ct,cmcdString:jt}),{key:"CMCD",value:jt}}return null}catch{return null}},getHeaderParameters:function(it){try{if(Jt.get().streaming.cmcd&&Jt.get().streaming.cmcd.enabled){var ct=u(it),jt=Yt(ct,e(["br","d","ot","tb"])),me=Yt(ct,e(["bl","dl","mtp","nor","nrr","su"])),ue=Yt(ct,e(["bs","rtp"])),Ct=Yt(ct,e(["cid","pr","sf","sid","st","v"])),Nt={"CMCD-Object":bt(jt),"CMCD-Request":bt(me),"CMCD-Status":bt(ue),"CMCD-Session":bt(Ct)};return _e.trigger(h.a.CMCD_DATA_GENERATED,{url:it.url,mediaType:it.mediaType,cmcdData:ct,headers:Nt}),Nt}return null}catch{return null}},setConfig:function(it){it&&(it.abrController&&(z=it.abrController),it.dashMetrics&&(vt=it.dashMetrics),it.playbackController&&(Mt=it.playbackController))},reset:function(){_e.off(b.a.PLAYBACK_RATE_CHANGED,A,this),_e.off(b.a.MANIFEST_LOADED,F,this),_e.off(b.a.BUFFER_LEVEL_STATE_CHANGED,K,at),_e.off(b.a.PLAYBACK_SEEKED,Z,at),Te()},initialize:function(){_e.on(b.a.PLAYBACK_RATE_CHANGED,A,at),_e.on(b.a.MANIFEST_LOADED,F,at),_e.on(b.a.BUFFER_LEVEL_STATE_CHANGED,K,at),_e.on(b.a.PLAYBACK_SEEKED,Z,at),_e.on(b.a.PERIOD_SWITCH_COMPLETED,It,at)}},O=Object(r.a)(Ht).getInstance(),Te(),at}j.__dashjs_factory_name="CmcdModel",At.a=c.a.getSingletonFactory(j)},function(Ee,At,x){function w(n){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function b(n,d){for(var t=0;t<d.length;t++){var r=d[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(f=r.key,o=void 0,o=function(g,v){if(w(g)!=="object"||g===null)return g;var P=g[Symbol.toPrimitive];if(P!==void 0){var B=P.call(g,v||"default");if(w(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}(f,"string"),w(o)==="symbol"?o:String(o)),r)}var f,o}function h(n,d,t){return d&&b(n.prototype,d),t&&b(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var c=h(function n(){(function(d,t){if(!(d instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN});At.a=c},function(Ee,At,x){var w=x(3),b=x(67),h=x.n(b);function c(){return{areEqual:function(n,d){return h()(n,d)}}}c.__dashjs_factory_name="ObjectUtils",At.a=w.a.getSingletonFactory(c)},function(Ee,At,x){At.a=function(w){w=w||{},function(){w.escapeMode===void 0&&(w.escapeMode=!0),w.attributePrefix===void 0&&(w.attributePrefix="_"),w.arrayAccessForm=w.arrayAccessForm||"none",w.emptyNodeForm=w.emptyNodeForm||"text",w.enableToStringFunc===void 0&&(w.enableToStringFunc=!0),w.arrayAccessFormPaths=w.arrayAccessFormPaths||[],w.skipEmptyTextNodesForObj===void 0&&(w.skipEmptyTextNodesForObj=!0),w.stripWhitespaces===void 0&&(w.stripWhitespaces=!0),w.datetimeAccessFormPaths=w.datetimeAccessFormPaths||[],w.useDoubleQuotes===void 0&&(w.useDoubleQuotes=!1),w.xmlElementsFilter=w.xmlElementsFilter||[],w.jsonPropertiesFilter=w.jsonPropertiesFilter||[],w.keepCData===void 0&&(w.keepCData=!1),w.ignoreRoot===void 0&&(w.ignoreRoot=!1)}();var b=1,h=3,c=4,n=8,d=9;function t(j){var O=j.localName;return O==null&&(O=j.baseName),O!=null&&O!=""||(O=j.nodeName),O}function r(j){return typeof j=="string"?j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):j}function f(j,O,at,X){for(var z=0;z<j.length;z++){var vt=j[z];if(typeof vt=="string"){if(vt==X)break}else if(vt instanceof RegExp){if(vt.test(X))break}else if(typeof vt=="function"&&vt(O,at,X))break}return z!=j.length}function o(j,O,at){switch(w.arrayAccessForm){case"property":j[O]instanceof Array?j[O+"_asArray"]=j[O]:j[O+"_asArray"]=[j[O]]}!(j[O]instanceof Array)&&w.arrayAccessFormPaths.length>0&&f(w.arrayAccessFormPaths,j,O,at)&&(j[O]=[j[O]])}function g(j){var O=j.split(/[-T:+Z]/g),at=new Date(O[0],O[1]-1,O[2]),X=O[5].split(".");if(at.setHours(O[3],O[4],X[0]),X.length>1&&at.setMilliseconds(X[1]),O[6]&&O[7]){var z=60*O[6]+Number(O[7]);z=0+((/\d\d-\d\d:\d\d$/.test(j)?"-":"+")=="-"?-1*z:z),at.setMinutes(at.getMinutes()-z-at.getTimezoneOffset())}else j.indexOf("Z",j.length-1)!==-1&&(at=new Date(Date.UTC(at.getFullYear(),at.getMonth(),at.getDate(),at.getHours(),at.getMinutes(),at.getSeconds(),at.getMilliseconds())));return at}function v(j,O,at,X){return!(O==b&&w.xmlElementsFilter.length>0)||f(w.xmlElementsFilter,j,at,X)}function P(j,O){if(j.nodeType==d){for(var at=new Object,X=j.childNodes,z=0;z<X.length;z++)(Mt=X[z]).nodeType==b&&(w.ignoreRoot?at=P(Mt):(at={})[Pt=t(Mt)]=P(Mt));return at}if(j.nodeType==b){(at=new Object).__cnt=0;var vt=[];for(X=j.childNodes,z=0;z<X.length;z++){var Mt,Pt=t(Mt=X[z]);if(Mt.nodeType!=n){var ge=O+"."+Pt;if(v(at,Mt.nodeType,Pt,ge))if(at.__cnt++,at[Pt]==null){var Q=P(Mt,ge);(Pt!="#text"||/[^\s]/.test(Q))&&((ft={})[Pt]=Q,vt.push(ft)),at[Pt]=Q,o(at,Pt,ge)}else{at[Pt]!=null&&(at[Pt]instanceof Array||(at[Pt]=[at[Pt]],o(at,Pt,ge)));var ft;Q=P(Mt,ge),(Pt!="#text"||/[^\s]/.test(Q))&&((ft={})[Pt]=Q,vt.push(ft)),at[Pt][at[Pt].length]=Q}}}at.__children=vt;for(var Ht=t(j),_e=0;_e<j.attributes.length;_e++){var Jt=j.attributes[_e];at.__cnt++;for(var Te=Jt.value,It=0,Wt=w.matchers.length;It<Wt;It++){var Yt=w.matchers[It];Yt.test(Jt,Ht)&&(Te=Yt.converter(Jt.value))}at[w.attributePrefix+Jt.name]=Te}var e=function(u){return u.prefix}(j);return e!=null&&e!=""&&(at.__cnt++,at.__prefix=e),at["#text"]!=null&&(at.__text=at["#text"],at.__text instanceof Array&&(at.__text=at.__text.join(`
`)),w.stripWhitespaces&&(at.__text=at.__text.trim()),delete at["#text"],w.arrayAccessForm=="property"&&delete at["#text_asArray"],at.__text=function(u,l,G){if(w.datetimeAccessFormPaths.length>0){var A=G.split(".#")[0];return f(w.datetimeAccessFormPaths,u,l,A)?g(u):u}return u}(at.__text,Pt,O+"."+Pt)),at["#cdata-section"]!=null&&(at.__cdata=at["#cdata-section"],delete at["#cdata-section"],w.arrayAccessForm=="property"&&delete at["#cdata-section_asArray"]),at.__cnt==0&&w.emptyNodeForm=="text"?at="":at.__cnt==1&&at.__text!=null?at=at.__text:at.__cnt!=1||at.__cdata==null||w.keepCData?at.__cnt>1&&at.__text!=null&&w.skipEmptyTextNodesForObj&&(w.stripWhitespaces&&at.__text==""||at.__text.trim()=="")&&delete at.__text:at=at.__cdata,delete at.__cnt,!w.enableToStringFunc||at.__text==null&&at.__cdata==null||(at.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),at}if(j.nodeType==h||j.nodeType==c)return j.nodeValue}function B(j,O,at,X){var z="<"+(j!=null&&j.__prefix!=null?j.__prefix+":":"")+O;if(at!=null)for(var vt=0;vt<at.length;vt++){var Mt=at[vt],Pt=j[Mt];w.escapeMode&&(Pt=r(Pt)),z+=" "+Mt.substr(w.attributePrefix.length)+"=",w.useDoubleQuotes?z+='"'+Pt+'"':z+="'"+Pt+"'"}return z+=X?"/>":">"}function H(j,O){return"</"+(j.__prefix!=null?j.__prefix+":":"")+O+">"}function D(j,O){return w.arrayAccessForm=="property"&&(at=O.toString(),X="_asArray",at.indexOf(X,at.length-X.length)!==-1)||O.toString().indexOf(w.attributePrefix)==0||O.toString().indexOf("__")==0||j[O]instanceof Function;var at,X}function y(j){var O=0;if(j instanceof Object)for(var at in j)D(j,at)||O++;return O}function S(j,O,at){return w.jsonPropertiesFilter.length==0||at==""||f(w.jsonPropertiesFilter,j,O,at)}function T(j){var O=[];if(j instanceof Object)for(var at in j)at.toString().indexOf("__")==-1&&at.toString().indexOf(w.attributePrefix)==0&&O.push(at);return O}function I(j){var O="";return j instanceof Object?O+=function(at){var X="";return at.__cdata!=null&&(X+="<![CDATA["+at.__cdata+"]]>"),at.__text!=null&&(w.escapeMode?X+=r(at.__text):X+=at.__text),X}(j):j!=null&&(w.escapeMode?O+=r(j):O+=j),O}function L(j,O){return j===""?O:j+"."+O}function J(j,O,at,X){var z="";if(j.length==0)z+=B(j,O,at,!0);else for(var vt=0;vt<j.length;vt++)z+=B(j[vt],O,T(j[vt]),!1),z+=nt(j[vt],L(X,O)),z+=H(j[vt],O);return z}function nt(j,O){var at="";if(y(j)>0){for(var X in j)if(!D(j,X)&&(O==""||S(j,X,L(O,X)))){var z=j[X],vt=T(z);z==null||z==null?at+=B(z,X,vt,!0):z instanceof Object?z instanceof Array?at+=J(z,X,vt,O):z instanceof Date?(at+=B(z,X,vt,!1),at+=z.toISOString(),at+=H(z,X)):y(z)>0||z.__text!=null||z.__cdata!=null?(at+=B(z,X,vt,!1),at+=nt(z,L(O,X)),at+=H(z,X)):at+=B(z,X,vt,!0):(at+=B(z,X,vt,!1),at+=I(z),at+=H(z,X))}}return at+=I(j)}this.parseXmlString=function(j){var O;if(j===void 0)return null;if(window.DOMParser){var at=new window.DOMParser;try{(O=at.parseFromString(j,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(O=null)}catch{O=null}}else j.indexOf("<?")==0&&(j=j.substr(j.indexOf("?>")+2)),(O=new ActiveXObject("Microsoft.XMLDOM")).async="false",O.loadXML(j);return O},this.asArray=function(j){return j===void 0||j==null?[]:j instanceof Array?j:[j]},this.toXmlDateTime=function(j){return j instanceof Date?j.toISOString():typeof j=="number"?new Date(j).toISOString():null},this.asDateTime=function(j){return typeof j=="string"?g(j):j},this.xml2json=function(j){return P(j)},this.xml_str2json=function(j){var O=this.parseXmlString(j);return O!=null?this.xml2json(O):null},this.json2xml_str=function(j){return nt(j,"")},this.json2xml=function(j){var O=this.json2xml_str(j);return this.parseXmlString(O)},this.getVersion=function(){return"1.2.0"}}},function(Ee,At,x){var w=x(3),b=x(29),h=x(16),c=x(1),n=x(20);function d(X,z){return function(vt){if(Array.isArray(vt))return vt}(X)||function(vt,Mt){var Pt=vt==null?null:typeof Symbol<"u"&&vt[Symbol.iterator]||vt["@@iterator"];if(Pt!=null){var ge,Q,ft,Ht,_e=[],Jt=!0,Te=!1;try{if(ft=(Pt=Pt.call(vt)).next,Mt===0){if(Object(Pt)!==Pt)return;Jt=!1}else for(;!(Jt=(ge=ft.call(Pt)).done)&&(_e.push(ge.value),_e.length!==Mt);Jt=!0);}catch(It){Te=!0,Q=It}finally{try{if(!Jt&&Pt.return!=null&&(Ht=Pt.return(),Object(Ht)!==Ht))return}finally{if(Te)throw Q}}return _e}}(X,z)||t(X,z)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function t(X,z){if(X){if(typeof X=="string")return r(X,z);var vt=Object.prototype.toString.call(X).slice(8,-1);return vt==="Object"&&X.constructor&&(vt=X.constructor.name),vt==="Map"||vt==="Set"?Array.from(X):vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt)?r(X,z):void 0}}function r(X,z){(z==null||z>X.length)&&(z=X.length);for(var vt=0,Mt=new Array(z);vt<z;vt++)Mt[vt]=X[vt];return Mt}function f(X){X=X||{};var z,vt=this.context,Mt=X.requestModifier,Pt=X.lowLatencyThroughputModel,ge=X.boxParser,Q=Object(h.a)(vt).getInstance();function ft(Jt){var Te,It=new Date,Wt=Jt.request,Yt=new Headers;if(Wt.range&&Yt.append("Range","bytes="+Wt.range),Jt.headers)for(var e in Jt.headers){var u=Jt.headers[e];u&&Yt.append(e,u)}Wt.requestStartDate||(Wt.requestStartDate=It),Mt&&Mt.modifyRequestHeader&&Mt.modifyRequestHeader({setRequestHeader:function(K,Z){Yt.append(K,Z)}},{url:Jt.url}),typeof window.AbortController=="function"&&(Te=new AbortController,Jt.abortController=Te,Te.signal.onabort=Jt.onabort);var l={method:Jt.method,headers:Yt,credentials:Jt.withCredentials?"include":void 0,signal:Te?Te.signal:void 0},G=Q.get().streaming.abr.fetchThroughputCalculationMode,A=Date.now(),F=0;new Promise(function(K){if(G===c.a.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&Pt&&(F=Pt.getThroughputCapacityDelayMS(Wt,1e3*z.getCurrentBufferLevel(Wt.mediaType))))return setTimeout(K,F);K()}).then(function(){var K=Date.now();fetch(Jt.url,l).then(function(Z){Jt.response||(Jt.response={}),Jt.response.status=Z.status,Jt.response.statusText=Z.statusText,Jt.response.responseURL=Z.url,Z.ok||Jt.onerror();var bt,it="",ct=function(C,dt){var Bt=typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(!Bt){if(Array.isArray(C)||(Bt=t(C))||dt&&C&&typeof C.length=="number"){Bt&&(C=Bt);var Ut=0,xt=function(){};return{s:xt,n:function(){return Ut>=C.length?{done:!0}:{done:!1,value:C[Ut++]}},e:function(Ue){throw Ue},f:xt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var de,Ge=!0,Je=!1;return{s:function(){Bt=Bt.call(C)},n:function(){var Ue=Bt.next();return Ge=Ue.done,Ue},e:function(Ue){Je=!0,de=Ue},f:function(){try{Ge||Bt.return==null||Bt.return()}finally{if(Je)throw de}}}}(Z.headers.keys());try{for(ct.s();!(bt=ct.n()).done;){var jt=bt.value;it+=jt+": "+Z.headers.get(jt)+`\r
`}}catch(C){ct.e(C)}finally{ct.f()}if(Jt.response.responseHeaders=it,!Z.body)return Z.arrayBuffer().then(function(C){Jt.response.response=C;var dt={loaded:C.byteLength,total:C.byteLength,stream:!1};Jt.progress(dt),Jt.onload(),Jt.onend()});var me,ue,Ct=parseInt(Z.headers.get("Content-Length"),10),Nt=0,Ot=!1,Gt=new Uint8Array,ve=0;if(G===c.a.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&Pt){var Ae=K,ie=0,Zt=d(Z.body.tee(),2),ee=Zt[0],we=Zt[1];me=ee.getReader(),ue=[],me.read().then(function C(dt){var Bt=dt.value,Ut=dt.done;if(ie=Date.now(),Bt&&Bt.length){var xt=ie-Ae,de=Bt.length;ue.push({chunkDownloadTimeRelativeMS:ie-K,chunkDownloadDurationMS:xt,chunkBytes:de,kbps:Math.round(8*de/(xt/1e3)),bufferLevel:z.getCurrentBufferLevel(Wt.mediaType)})}if(Ut){var Ge=ie-K,Je=ue.reduce(function(Ue,$e){return Ue+$e.chunkBytes},0);return Pt.addMeasurement(Wt,Ge,ue,A,F,it),void Jt.progress({loaded:Je,total:Je,lengthComputable:!0,time:Pt.getEstimatedDownloadDurationMS(Wt),stream:!0})}return Ae=Date.now(),me.read().then(C)}),Jt.reader=we.getReader()}else Jt.reader=Z.body.getReader();var Fe=[],We=[],Ve=[],N=!0;Ht(Jt,function C(dt){var Bt=dt.value;if(dt.done){if(Gt){if(G!==c.a.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Ut=null,xt=null;G===c.a.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Ut=function(Ue,$e){try{var Xe,Tn;Xe=Ue.filter(function(Bn,$n){return $n<Ue.length-1}),Tn=$e.filter(function(Bn,$n){return $n<$e.length-1});var yn=[];if(Xe.length>1){for(var zn=0,Fn=0,Pn=0;Pn<Xe.length;Pn++)if(Xe[Pn]&&Tn[Pn]){var Gn=Tn[Pn].ts-Xe[Pn].ts;if(Gn>1)yn.push(8*Tn[Pn].bytes/Gn);else{Fn===0&&(Fn=Xe[Pn].ts);var qn=Tn[Pn].ts-Fn;qn>1?(yn.push(8*zn/qn),zn=0,Fn=0):zn+=Tn[Pn].bytes}}if(yn.length>0)return yn.reduce(function(Bn,$n){return Bn+$n},0)/yn.length}return null}catch{return null}}(We,Ve))&&(xt=8*Nt/Ut):G===c.a.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(xt=_e(Fe,Nt)),Jt.progress({loaded:Nt,total:isNaN(Ct)?Nt:Ct,lengthComputable:!0,time:xt,stream:!0})}Jt.response.response=Gt.buffer}return Jt.onload(),void Jt.onend()}if(Bt&&Bt.length>0){Gt=function(Ue,$e){if(Ue.length===0)return $e;var Xe=new Uint8Array(Ue.length+$e.length);return Xe.set(Ue),Xe.set($e,Ue.length),Xe}(Gt,Bt),Nt+=Bt.length,Fe.push({ts:Date.now(),bytes:Bt.length}),G===c.a.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&N&&ge.findLastTopIsoBoxCompleted(["moof"],Gt,ve).found&&(N=!1,We.push({ts:performance.now(),bytes:Bt.length}));var de=ge.findLastTopIsoBoxCompleted(["moov","mdat"],Gt,ve);if(de.found){var Ge,Je=de.lastCompletedOffset+de.size;G!==c.a.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||N||(N=!0,Ve.push({ts:performance.now(),bytes:Gt.length})),Je===Gt.length?(Ge=Gt,Gt=new Uint8Array):(Ge=new Uint8Array(Gt.subarray(0,Je)),Gt=Gt.subarray(Je)),Jt.progress({data:Ge.buffer,lengthComputable:!1,noTrace:!0}),ve=0}else ve=de.lastCompletedOffset,Ot||(Jt.progress({lengthComputable:!1,noTrace:!0}),Ot=!0)}Ht(Jt,C)})}).catch(function(Z){Jt.onerror&&Jt.onerror(Z)})})}function Ht(Jt,Te){Jt.reader.read().then(Te).catch(function(It){Jt.onerror&&Jt.response.status===200&&Jt.onerror(It)})}function _e(Jt,Te){try{if((Jt=Jt.filter(function(Yt){return Yt.bytes>Te/4/Jt.length})).length>1){var It=0,Wt=(Jt[Jt.length-1].ts-Jt[0].ts)/Jt.length;return Jt.forEach(function(Yt,e){var u=Jt[e+1];if(u){var l=u.ts-Yt.ts;It+=l<Wt?l:0}}),It}return null}catch{return null}}return{load:function(Jt){Mt&&Mt.modifyRequest?Object(n.b)(Jt,Mt).then(function(){return ft(Jt)}):ft(Jt)},abort:function(Jt){if(Jt.abortController)Jt.abortController.abort();else if(Jt.reader)try{Jt.reader.cancel(),Jt.onabort()}catch{}},calculateDownloadedTime:_e,setup:function(Jt){z=Jt.dashMetrics}}}f.__dashjs_factory_name="FetchLoader";var o=w.a.getClassFactory(f),g=x(5),v=x(10),P=x(44),B=x(14),H=x(6),D=x(7),y=x(2);function S(){var X,z,vt=this.context,Mt={};function Pt(){z=Object(H.a)(vt).getInstance().getLogger(X)}function ge(ft){for(var Ht={},_e=0,Jt=0,Te=0,It=0,Wt=ft.length,Yt=0;Yt<Wt;++Yt)_e+=ft[Yt].chunkDownloadTimeRelativeMS,Jt+=ft[Yt].bufferLevel,Te+=ft[Yt].chunkDownloadTimeRelativeMS*ft[Yt].bufferLevel,It+=ft[Yt].chunkDownloadTimeRelativeMS*ft[Yt].chunkDownloadTimeRelativeMS;return Ht.m=(Te-_e*Jt/Wt)/(It-_e*_e/Wt),Ht.b=Jt/Wt-Ht.m*_e/Wt,function(e){return Ht.m*e+Ht.b}}function Q(ft){var Ht,_e=!0,Jt=ft.reduce(function(Te,It){return Te+It.bufferLevelAtSegmentEnd},0)/ft.length;return ft.forEach(function(Te){Math.abs(Te.bufferLevelAtSegmentEnd/Te.bufferLevelAtSegmentStart)<.95&&(_e=!1),Te.bufferLevelAtSegmentEnd/Jt<.8&&(_e=!1),Ht?Ht>Te.bitrate&&(_e=!1):Ht=Te.bitrate}),_e}return X={setup:Pt,addMeasurement:function(ft,Ht,_e,Jt,Te){ft&&ft.mediaType&&!Mt[ft.mediaType]&&(Mt[ft.mediaType]=[]);var It=ft.mediaInfo.bitrateList.find(function(Wt){return Wt.id===ft.representationId});Mt[ft.mediaType].push({index:ft.index,repId:ft.representationId,mediaType:ft.mediaType,requestTimeMS:Jt,adjustedAvailabilityStartTimeMS:ft.availabilityStartTime.getTime(),segDurationMS:1e3*ft.duration,chunksDurationMS:_e.reduce(function(Wt,Yt){return Wt+Yt.chunkDownloadDurationMS},0),segmentBytes:_e.reduce(function(Wt,Yt){return Wt+Yt.chunkBytes},0),bitrate:It&&It.bandwidth,bitrateList:ft.mediaInfo.bitrateList,chunkMeasurements:_e,fetchDownloadDurationMS:Ht,throughputCapacityDelayMS:Te,getEstimatedBufferLevel:ge(_e.slice(1))}),Mt[ft.mediaType].length>10&&Mt[ft.mediaType].shift()},getThroughputCapacityDelayMS:function(ft,Ht){var _e=Mt[ft.mediaType]&&Mt[ft.mediaType].slice(-3);return!_e||_e.length<3?0:Q(_e)?Ht/4>250?250:Ht/4:0},getEstimatedDownloadDurationMS:function(ft){var Ht=Mt[ft.mediaType].slice(-1).pop(),_e=Mt[ft.mediaType].slice(-3),Jt=Ht.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;Ht.bufferLevelAtSegmentStart=Ht.getEstimatedBufferLevel(Jt/2),Ht.bufferLevelAtSegmentEnd=Ht.getEstimatedBufferLevel(Jt);var Te=Q(_e),It=Te?.6:.8;if(Ht.isBufferStable&&1.05*Ht.segDurationMS<Ht.fetchDownloadDurationMS)return Ht.fetchDownloadDurationMS;if(!Te||Ht.segDurationMS<Ht.fetchDownloadDurationMS||Ht.adjustedAvailabilityStartTimeMS<=Ht.requestTimeMS+Ht.throughputCapacityDelayMS-Ht.segDurationMS)return .8*Ht.fetchDownloadDurationMS;for(var Wt=Ht.requestTimeMS+Ht.throughputCapacityDelayMS-Ht.adjustedAvailabilityStartTimeMS,Yt=0,e=0,u=0,l=0;l<Ht.chunkMeasurements.length;l++){var G=Ht.chunkMeasurements[l];if(Wt<e+G.chunkDownloadDurationMS)break;e+=G.chunkDownloadDurationMS,Yt+=G.chunkBytes,u++}if(Wt<0&&z.warn("request time was before adjusted availibitly start time"),Yt&&e&&u>.2*Ht.chunkMeasurements.length){var A=Yt/e,F=Ht.segmentBytes/A;return Ht.fetchDownloadDurationMS<F?Ht.fetchDownloadDurationMS*It:F*It}var K=Ht.bitrate;return Ht.bitrateList.some(function(Z){if(Z.bandwidth>Ht.bitrate)return K=Z.bandwidth,!0}),K===Ht.bitrate?Ht.fetchDownloadDurationMS*It:It*Ht.segmentBytes*8*1e3/K}},Pt(),X}S.__dashjs_factory_name="LowLatencyThroughputModel";var T=w.a.getSingletonFactory(S),I=x(32);function L(X){return(L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(X)}function J(X,z,vt){return(z=function(Mt){var Pt=function(ge,Q){if(L(ge)!=="object"||ge===null)return ge;var ft=ge[Symbol.toPrimitive];if(ft!==void 0){var Ht=ft.call(ge,Q||"default");if(L(Ht)!=="object")return Ht;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Q==="string"?String:Number)(ge)}(Mt,"string");return L(Pt)==="symbol"?Pt:String(Pt)}(z))in X?Object.defineProperty(X,z,{value:vt,enumerable:!0,configurable:!0,writable:!0}):X[z]=vt,X}function nt(X){X=X||{};var z,vt,Mt,Pt,ge,Q,ft,Ht,_e,Jt,Te=this.context,It=X.errHandler,Wt=X.dashMetrics,Yt=X.mediaPlayerModel,e=X.requestModifier,u=X.boxParser,l=X.errors,G=X.requestTimeout||0,A=Object(D.a)(Te).getInstance(),F=Object(h.a)(Te).getInstance();function K(Z,bt){var it,ct=Z.request,jt=[],me=!0,ue=!0,Ct=new Date,Nt=Ct,Ot=0,Gt=null;if(!e||!Wt||!It)throw new Error("config object is not correct or missing");var ve,Ae=function(dt){if(ue=!1,ct.requestStartDate=Ct,ct.requestEndDate=new Date,ct.firstByteDate=ct.firstByteDate||Ct,ct.fileLoaderType=Gt,!ct.checkExistenceOnly){var Bt=it.response?it.response.responseURL:null,Ut=it.response?it.response.status:null,xt=it.response&&it.response.getAllResponseHeaders?it.response.getAllResponseHeaders():it.response?it.response.responseHeaders:[];Wt.addHttpRequest(ct,Bt,Ut,xt,dt?jt:null),ct.type===g.a.MPD_TYPE&&Wt.addManifestUpdate(ct)}},ie=function(){if(vt.indexOf(it)!==-1&&(vt.splice(vt.indexOf(it),1),ue))if(Ae(!1),bt>0){try{F.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&ct.type===g.a.MEDIA_SEGMENT_TYPE&&Yt.getRetryAttemptsForType(g.a.MEDIA_SEGMENT_TYPE)===bt&&A.trigger(y.a.ATTEMPT_BACKGROUND_SYNC)}catch{}bt--;var dt={config:Z};Pt.push(dt),dt.timeout=setTimeout(function(){Pt.indexOf(dt)!==-1&&(Pt.splice(Pt.indexOf(dt),1),K(Z,bt))},Yt.getRetryIntervalsForType(ct.type))}else{if(ct.type===g.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;It.error(new v.a(ge[ct.type],ct.url+" is not available",{request:ct,response:it.response})),Z.error&&Z.error(ct,"error",it.response.statusText),Z.complete&&Z.complete(ct,it.response.statusText)}};ct.hasOwnProperty("availabilityTimeComplete")&&ct.availabilityTimeComplete===!1&&window.fetch&&ct.responseType==="arraybuffer"&&ct.type===g.a.MEDIA_SEGMENT_TYPE?((ve=o(Te).create({requestModifier:e,lowLatencyThroughputModel:Ht,boxParser:u})).setup({dashMetrics:Wt}),Gt=c.a.FILE_LOADER_TYPES.FETCH):(ve=Object(b.a)(Te).create({requestModifier:e}),Gt=c.a.FILE_LOADER_TYPES.XHR);var Zt=null,ee=e.modifyRequestURL?e.modifyRequestURL(ct.url):ct.url;if(F.get().streaming.cmcd&&F.get().streaming.cmcd.enabled){var we=F.get().streaming.cmcd.mode;if(we===c.a.CMCD_MODE_QUERY){var Fe=function(dt){try{var Bt=[],Ut=Q.getQueryParameter(dt);return Ut&&Bt.push(Ut),Bt}catch{return[]}}(ct);ee=B.a.addAditionalQueryParameterToUrl(ee,Fe)}else we===c.a.CMCD_MODE_HEADER&&(Zt=Q.getHeaderParameters(ct))}ct.url=ee;var We=ct.checkExistenceOnly?g.a.HEAD:g.a.GET,Ve=ft.getXHRWithCredentialsForType(ct.type);it={url:ee,method:We,withCredentials:Ve,request:ct,onload:function(){it.response.status>=200&&it.response.status<=299&&(Ae(!0),Z.success&&Z.success(it.response.response,it.response.statusText,it.response.responseURL),Z.complete&&Z.complete(ct,it.response.statusText))},onend:ie,onerror:ie,progress:function(dt){var Bt=new Date;me&&(me=!1,(!dt.lengthComputable||dt.lengthComputable&&dt.total!==dt.loaded)&&(ct.firstByteDate=Bt)),dt.lengthComputable&&(ct.bytesLoaded=dt.loaded,ct.bytesTotal=dt.total),dt.noTrace||(jt.push({s:Nt,d:dt.time?dt.time:Bt.getTime()-Nt.getTime(),b:[dt.loaded?dt.loaded-Ot:0]}),Nt=Bt,Ot=dt.loaded),Z.progress&&dt&&Z.progress(dt)},onabort:function(){Z.abort&&Z.abort(ct)},ontimeout:function(dt){var Bt;if(dt.lengthComputable){var Ut=dt.loaded/dt.total*100;Bt="Request timeout: loaded: "+dt.loaded+", out of: "+dt.total+" : "+Ut.toFixed(3)+"% Completed"}else Bt="Request timeout: non-computable download size";_e.warn(Bt)},loader:ve,timeout:G,headers:Zt};var N=new Date().getTime();if(isNaN(ct.delayLoadingTime)||N>=ct.delayLoadingTime)vt.push(it),ve.load(it);else{var C={httpRequest:it};Mt.push(C),C.delayTimeout=setTimeout(function(){if(Mt.indexOf(C)!==-1){Mt.splice(Mt.indexOf(C),1);try{Ct=new Date,Nt=Ct,vt.push(C.httpRequest),ve.load(C.httpRequest)}catch{C.httpRequest.onerror()}}},ct.delayLoadingTime-N)}}return z={load:function(Z){Z.request?K(Z,Yt.getRetryAttemptsForType(Z.request.type)):Z.error&&Z.error(Z.request,"error")},abort:function(){Pt.forEach(function(Z){clearTimeout(Z.timeout),Z.config.request&&Z.config.abort&&Z.config.abort(Z.config.request)}),Pt=[],Mt.forEach(function(Z){return clearTimeout(Z.delayTimeout)}),Mt=[],vt.forEach(function(Z){Z.request.type!==g.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(Z.onloadend=Z.onerror=Z.onprogress=void 0,Z.loader.abort(Z))}),vt=[]}},_e=Object(H.a)(Te).getInstance().getLogger(z),vt=[],Mt=[],Pt=[],Q=Object(P.a)(Te).getInstance(),Ht=T(Te).getInstance(),ft=Object(I.a)(Te).getInstance(),J(Jt={},g.a.MPD_TYPE,l.DOWNLOAD_ERROR_ID_MANIFEST_CODE),J(Jt,g.a.XLINK_EXPANSION_TYPE,l.DOWNLOAD_ERROR_ID_XLINK_CODE),J(Jt,g.a.INIT_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),J(Jt,g.a.MEDIA_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT_CODE),J(Jt,g.a.INDEX_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT_CODE),J(Jt,g.a.BITSTREAM_SWITCHING_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT_CODE),J(Jt,g.a.OTHER_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT_CODE),ge=Jt,z}nt.__dashjs_factory_name="HTTPLoader";var j=w.a.getClassFactory(nt);function O(){var X;function z(){X={}}function vt(){z()}return vt(),{getLoader:function(Mt){for(var Pt in X)if(X.hasOwnProperty(Pt)&&Mt.startsWith(Pt))return X[Pt];return j},registerLoader:function(Mt,Pt){X[Mt]=Pt},unregisterLoader:function(Mt){X[Mt]&&delete X[Mt]},unregisterAllLoader:z,reset:vt}}O.__dashjs_factory_name="SchemeLoaderFactory";var at=w.a.getSingletonFactory(O);At.a=at},function(Ee,At,x){function w(b){return Object.prototype.toString.call(b)}At.isArray=function(b){return Array.isArray?Array.isArray(b):w(b)==="[object Array]"},At.isBoolean=function(b){return typeof b=="boolean"},At.isNull=function(b){return b===null},At.isNullOrUndefined=function(b){return b==null},At.isNumber=function(b){return typeof b=="number"},At.isString=function(b){return typeof b=="string"},At.isSymbol=function(b){return typeof b=="symbol"},At.isUndefined=function(b){return b===void 0},At.isRegExp=function(b){return w(b)==="[object RegExp]"},At.isObject=function(b){return typeof b=="object"&&b!==null},At.isDate=function(b){return w(b)==="[object Date]"},At.isError=function(b){return w(b)==="[object Error]"||b instanceof Error},At.isFunction=function(b){return typeof b=="function"},At.isPrimitive=function(b){return b===null||typeof b=="boolean"||typeof b=="number"||typeof b=="string"||typeof b=="symbol"||b===void 0},At.isBuffer=x(57).Buffer.isBuffer},function(Ee,At,x){function w(h,c){return function(n,d){for(var t,r,f,o=b(n,"tag"),g=b(d??"*","range"),v=[],P=-1;++P<g.length;)if(t=g[P].toLowerCase(),c||t!=="*"){for(r=-1,f=[];++r<o.length;)if(h(o[r].toLowerCase(),t)){if(!c)return o[r];v.push(o[r])}else f.push(o[r]);o=f}return c?v:void 0}}function b(h,c){var n=h&&typeof h=="string"?[h]:h;if(!n||typeof n!="object"||!("length"in n))throw new Error("Invalid "+c+" `"+n+"`, expected non-empty string");return n}At.basicFilter=w(function(h,c){return c==="*"||h===c||h.indexOf(c+"-")>-1},!0),At.extendedFilter=w(function(h,c){var n=h.split("-"),d=c.split("-"),t=0,r=0;if(d[r]!=="*"&&n[t]!==d[r])return!1;for(t++,r++;r<d.length;)if(d[r]!=="*"){if(!n[t])return!1;if(n[t]!==d[r]){if(n[t].length===1)return!1;t++}else t++,r++}else r++;return!0},!0),At.lookup=w(function(h,c){for(var n,d=c;;){if(d==="*"||h===d)return!0;if((n=d.lastIndexOf("-"))<0)return!1;d.charAt(n-2)==="-"&&(n-=2),d=d.slice(0,n)}})},function(Ee,At,x){At.generateISD=x(95).generateISD,At.fromXML=x(96).fromXML,At.renderHTML=x(113).render},function(Ee,At,x){var w=x(3),b=x(15);function h(){return{customTimeRangeArray:[],length:0,add:function(c,n){var d=0;for(d=0;d<this.customTimeRangeArray.length&&c>this.customTimeRangeArray[d].start;d++);for(this.customTimeRangeArray.splice(d,0,{start:c,end:n}),d=0;d<this.customTimeRangeArray.length-1;d++)this.mergeRanges(d,d+1)&&d--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(c,n){for(var d=0;d<this.customTimeRangeArray.length;d++)if(c<=this.customTimeRangeArray[d].start&&n>=this.customTimeRangeArray[d].end)this.customTimeRangeArray.splice(d,1),d--;else{if(c>this.customTimeRangeArray[d].start&&n<this.customTimeRangeArray[d].end){this.customTimeRangeArray.splice(d+1,0,{start:n,end:this.customTimeRangeArray[d].end}),this.customTimeRangeArray[d].end=c;break}c>this.customTimeRangeArray[d].start&&c<this.customTimeRangeArray[d].end?this.customTimeRangeArray[d].end=c:n>this.customTimeRangeArray[d].start&&n<this.customTimeRangeArray[d].end&&(this.customTimeRangeArray[d].start=n)}this.length=this.customTimeRangeArray.length},mergeRanges:function(c,n){var d=this.customTimeRangeArray[c],t=this.customTimeRangeArray[n];return d.start<=t.start&&t.start<=d.end&&d.end<=t.end?(d.end=t.end,this.customTimeRangeArray.splice(n,1),!0):t.start<=d.start&&d.start<=t.end&&t.end<=d.end?(d.start=t.start,this.customTimeRangeArray.splice(n,1),!0):t.start<=d.start&&d.start<=t.end&&d.end<=t.end?(this.customTimeRangeArray.splice(c,1),!0):d.start<=t.start&&t.start<=d.end&&t.end<=d.end&&(this.customTimeRangeArray.splice(n,1),!0)},start:function(c){return Object(b.a)(c),c>=this.customTimeRangeArray.length||c<0?NaN:this.customTimeRangeArray[c].start},end:function(c){return Object(b.a)(c),c>=this.customTimeRangeArray.length||c<0?NaN:this.customTimeRangeArray[c].end}}}h.__dashjs_factory_name="CustomTimeRanges",At.a=w.a.getClassFactory(h)},function(Ee,At,x){x.d(At,"b",function(){return n});var w=x(3),b=x(35),h=x(1),c=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function n(){var t="WebKitMediaSource"in window,r="MediaSource"in window;return t||r}function d(){var t,r,f;return t={setConfig:function(o){o&&o.settings&&(r=o.settings)},supportsMediaSource:n,supportsEncryptedMedia:function(){return f},supportsCodec:function(o,g){return g!==h.a.AUDIO&&g!==h.a.VIDEO?Promise.resolve(!0):function(v,P){return r.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(v.codec&&P===h.a.AUDIO||P===h.a.VIDEO&&v.codec&&v.width&&v.height&&v.bitrate&&v.framerate)}(o,g)?function(v,P){return new Promise(function(B){if(v&&v.codec){var H={type:"media-source"};H[P]={},H[P].contentType=v.codec,H[P].width=v.width,H[P].height=v.height,H[P].bitrate=parseInt(v.bitrate),H[P].framerate=parseFloat(v.framerate),navigator.mediaCapabilities.decodingInfo(H).then(function(D){B(D.supported)}).catch(function(){B(!1)})}else B(!1)})}(o,g):function(v){return new Promise(function(P){if(v&&v.codec){var B=v.codec;v.width&&v.height&&(B+=';width="'+v.width+'";height="'+v.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(B)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(B)?P(!0):P(!1)}else P(!1)})}(o)},setEncryptedMediaSupported:function(o){f=o},supportsEssentialProperty:function(o){try{return b.a.indexOf(o.schemeIdUri)!==-1}catch{return!0}},codecRootCompatibleWithCodec:function(o,g){for(var v,P=o.split(".")[0],B=g.indexOf(P)===0,H=0;H<c.length;H++)if(c[H].codec===P){v=c[H];break}return v?B||v.compatibleCodecs.some(function(D){return g.indexOf(D)===0}):B}},f=!1,t}d.__dashjs_factory_name="Capabilities",At.a=w.a.getSingletonFactory(d)},function(Ee,At){(function(x){Ee.exports=x}).call(this,{})},function(Ee,At,x){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(At)},function(Ee,At,x){(function(w){var b=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,h=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,c=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(t){var r,f=null,o=n[t.toLowerCase()];return o!==void 0?f=o:(r=b.exec(t))!==null?f=[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16),r[4]!==void 0?parseInt(r[4],16):255]:(r=h.exec(t))!==null?f=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),255]:(r=c.exec(t))!==null&&(f=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),parseInt(r[4])]),f};var d=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(t){var r,f=null;return(r=d.exec(t))!==null&&(f={value:parseFloat(r[1]),unit:r[2]}),f},w.parseTextShadow=function(t){for(var r=t.match(/([^\(,\)]|\([^\)]+\))+/g),f=[],o=0;o<r.length;o++){var g=r[o].split(" ");if(g.length===1&&g[0]==="none")return"none";if(g.length>1&&g.length<5){var v=[null,null,null,null],P=w.parseLength(g.shift());if(P===null||(v[0]=P,(P=w.parseLength(g.shift()))===null))return null;if(v[1]=P,g.length===0){f.push(v);continue}if((P=w.parseLength(g[0]))!==null&&(v[2]=P,g.shift()),g.length===0){f.push(v);continue}var B=w.parseColor(g[0]);if(B===null)return null;v[3]=B,f.push(v)}}return f},w.parsePosition=function(t){var r=t.split(" "),f=function(D){return D==="center"||D==="left"||D==="top"||D==="bottom"||D==="right"};if(r.length>4)return null;for(var o=0;o<r.length;o++)if(!f(r[o])){var g=w.parseLength(r[o]);if(g===null)return null;r[o]=g}for(var v={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},P=0;P<r.length;){var B=r[P++];if(f(B)){var H={value:0,unit:"%"};r.length!==2&&P<r.length&&!f(r[P])&&(H=r[P++]),B==="right"?(v.h.edge=B,v.h.offset=H):B==="bottom"?(v.v.edge=B,v.v.offset=H):B==="left"?v.h.offset=H:B==="top"&&(v.v.offset=H)}else{if(r.length!==1&&r.length!==2)return null;P===1?v.h.offset=B:v.v.offset=B}}return v},w.ComputedLength=function(t,r){this.rw=t,this.rh=r},w.ComputedLength.prototype.toUsedLength=function(t,r){return t*this.rw+r*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(t,r,f,o,g,v){return r==="%"&&o?new w.ComputedLength(o.rw*t/100,o.rh*t/100):r==="em"&&f?new w.ComputedLength(f.rw*t,f.rh*t):r==="c"&&g?new w.ComputedLength(t*g.rw,t*g.rh):r==="px"&&v?new w.ComputedLength(t*v.rw,t*v.rh):r==="rh"?new w.ComputedLength(0,t/100):r==="rw"?new w.ComputedLength(t/100,0):null}})(At)},function(Ee,At,x){(function(w){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var b=x(98),h=x(99),c=x(87);function n(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(e,u){if(n()<u)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(u)).__proto__=t.prototype:(e===null&&(e=new t(u)),e.length=u),e}function t(e,u,l){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,u,l);if(typeof e=="number"){if(typeof u=="string")throw new Error("If encoding is specified then the first argument must be a string");return o(this,e)}return r(this,e,u,l)}function r(e,u,l,G){if(typeof u=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&u instanceof ArrayBuffer?function(A,F,K,Z){if(F.byteLength,K<0||F.byteLength<K)throw new RangeError("'offset' is out of bounds");if(F.byteLength<K+(Z||0))throw new RangeError("'length' is out of bounds");return F=K===void 0&&Z===void 0?new Uint8Array(F):Z===void 0?new Uint8Array(F,K):new Uint8Array(F,K,Z),t.TYPED_ARRAY_SUPPORT?(A=F).__proto__=t.prototype:A=g(A,F),A}(e,u,l,G):typeof u=="string"?function(A,F,K){if(typeof K=="string"&&K!==""||(K="utf8"),!t.isEncoding(K))throw new TypeError('"encoding" must be a valid string encoding');var Z=0|P(F,K),bt=(A=d(A,Z)).write(F,K);return bt!==Z&&(A=A.slice(0,bt)),A}(e,u,l):function(A,F){if(t.isBuffer(F)){var K=0|v(F.length);return(A=d(A,K)).length===0||F.copy(A,0,0,K),A}if(F){if(typeof ArrayBuffer<"u"&&F.buffer instanceof ArrayBuffer||"length"in F)return typeof F.length!="number"||(Z=F.length)!=Z?d(A,0):g(A,F);if(F.type==="Buffer"&&c(F.data))return g(A,F.data)}var Z;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,u)}function f(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function o(e,u){if(f(u),e=d(e,u<0?0:0|v(u)),!t.TYPED_ARRAY_SUPPORT)for(var l=0;l<u;++l)e[l]=0;return e}function g(e,u){var l=u.length<0?0:0|v(u.length);e=d(e,l);for(var G=0;G<l;G+=1)e[G]=255&u[G];return e}function v(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function P(e,u){if(t.isBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var l=e.length;if(l===0)return 0;for(var G=!1;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":case void 0:return It(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*l;case"hex":return l>>>1;case"base64":return Wt(e).length;default:if(G)return It(e).length;u=(""+u).toLowerCase(),G=!0}}function B(e,u,l){var G=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0)<=(u>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return z(this,u,l);case"utf8":case"utf-8":return O(this,u,l);case"ascii":return at(this,u,l);case"latin1":case"binary":return X(this,u,l);case"base64":return j(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,u,l);default:if(G)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),G=!0}}function H(e,u,l){var G=e[u];e[u]=e[l],e[l]=G}function D(e,u,l,G,A){if(e.length===0)return-1;if(typeof l=="string"?(G=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,isNaN(l)&&(l=A?0:e.length-1),l<0&&(l=e.length+l),l>=e.length){if(A)return-1;l=e.length-1}else if(l<0){if(!A)return-1;l=0}if(typeof u=="string"&&(u=t.from(u,G)),t.isBuffer(u))return u.length===0?-1:y(e,u,l,G,A);if(typeof u=="number")return u&=255,t.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(e,u,l):Uint8Array.prototype.lastIndexOf.call(e,u,l):y(e,[u],l,G,A);throw new TypeError("val must be string, number or Buffer")}function y(e,u,l,G,A){var F,K=1,Z=e.length,bt=u.length;if(G!==void 0&&((G=String(G).toLowerCase())==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(e.length<2||u.length<2)return-1;K=2,Z/=2,bt/=2,l/=2}function it(ue,Ct){return K===1?ue[Ct]:ue.readUInt16BE(Ct*K)}if(A){var ct=-1;for(F=l;F<Z;F++)if(it(e,F)===it(u,ct===-1?0:F-ct)){if(ct===-1&&(ct=F),F-ct+1===bt)return ct*K}else ct!==-1&&(F-=F-ct),ct=-1}else for(l+bt>Z&&(l=Z-bt),F=l;F>=0;F--){for(var jt=!0,me=0;me<bt;me++)if(it(e,F+me)!==it(u,me)){jt=!1;break}if(jt)return F}return-1}function S(e,u,l,G){l=Number(l)||0;var A=e.length-l;G?(G=Number(G))>A&&(G=A):G=A;var F=u.length;if(F%2!=0)throw new TypeError("Invalid hex string");G>F/2&&(G=F/2);for(var K=0;K<G;++K){var Z=parseInt(u.substr(2*K,2),16);if(isNaN(Z))return K;e[l+K]=Z}return K}function T(e,u,l,G){return Yt(It(u,e.length-l),e,l,G)}function I(e,u,l,G){return Yt(function(A){for(var F=[],K=0;K<A.length;++K)F.push(255&A.charCodeAt(K));return F}(u),e,l,G)}function L(e,u,l,G){return I(e,u,l,G)}function J(e,u,l,G){return Yt(Wt(u),e,l,G)}function nt(e,u,l,G){return Yt(function(A,F){for(var K,Z,bt,it=[],ct=0;ct<A.length&&!((F-=2)<0);++ct)K=A.charCodeAt(ct),Z=K>>8,bt=K%256,it.push(bt),it.push(Z);return it}(u,e.length-l),e,l,G)}function j(e,u,l){return u===0&&l===e.length?b.fromByteArray(e):b.fromByteArray(e.slice(u,l))}function O(e,u,l){l=Math.min(e.length,l);for(var G=[],A=u;A<l;){var F,K,Z,bt,it=e[A],ct=null,jt=it>239?4:it>223?3:it>191?2:1;if(A+jt<=l)switch(jt){case 1:it<128&&(ct=it);break;case 2:(192&(F=e[A+1]))==128&&(bt=(31&it)<<6|63&F)>127&&(ct=bt);break;case 3:F=e[A+1],K=e[A+2],(192&F)==128&&(192&K)==128&&(bt=(15&it)<<12|(63&F)<<6|63&K)>2047&&(bt<55296||bt>57343)&&(ct=bt);break;case 4:F=e[A+1],K=e[A+2],Z=e[A+3],(192&F)==128&&(192&K)==128&&(192&Z)==128&&(bt=(15&it)<<18|(63&F)<<12|(63&K)<<6|63&Z)>65535&&bt<1114112&&(ct=bt)}ct===null?(ct=65533,jt=1):ct>65535&&(ct-=65536,G.push(ct>>>10&1023|55296),ct=56320|1023&ct),G.push(ct),A+=jt}return function(me){var ue=me.length;if(ue<=4096)return String.fromCharCode.apply(String,me);for(var Ct="",Nt=0;Nt<ue;)Ct+=String.fromCharCode.apply(String,me.slice(Nt,Nt+=4096));return Ct}(G)}At.Buffer=t,At.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},At.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=w.TYPED_ARRAY_SUPPORT!==void 0?w.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},e.foo()===42&&typeof e.subarray=="function"&&e.subarray(1,1).byteLength===0}catch{return!1}}(),At.kMaxLength=n(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(e,u,l){return r(null,e,u,l)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(e,u,l){return function(G,A,F,K){return f(A),A<=0?d(G,A):F!==void 0?typeof K=="string"?d(G,A).fill(F,K):d(G,A).fill(F):d(G,A)}(null,e,u,l)},t.allocUnsafe=function(e){return o(null,e)},t.allocUnsafeSlow=function(e){return o(null,e)},t.isBuffer=function(e){return!(e==null||!e._isBuffer)},t.compare=function(e,u){if(!t.isBuffer(e)||!t.isBuffer(u))throw new TypeError("Arguments must be Buffers");if(e===u)return 0;for(var l=e.length,G=u.length,A=0,F=Math.min(l,G);A<F;++A)if(e[A]!==u[A]){l=e[A],G=u[A];break}return l<G?-1:G<l?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,u){if(!c(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return t.alloc(0);var l;if(u===void 0)for(u=0,l=0;l<e.length;++l)u+=e[l].length;var G=t.allocUnsafe(u),A=0;for(l=0;l<e.length;++l){var F=e[l];if(!t.isBuffer(F))throw new TypeError('"list" argument must be an Array of Buffers');F.copy(G,A),A+=F.length}return G},t.byteLength=P,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<e;u+=2)H(this,u,u+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<e;u+=4)H(this,u,u+3),H(this,u+1,u+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<e;u+=8)H(this,u,u+7),H(this,u+1,u+6),H(this,u+2,u+5),H(this,u+3,u+4);return this},t.prototype.toString=function(){var e=0|this.length;return e===0?"":arguments.length===0?O(this,0,e):B.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||t.compare(this,e)===0},t.prototype.inspect=function(){var e="",u=At.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,u).match(/.{2}/g).join(" "),this.length>u&&(e+=" ... ")),"<Buffer "+e+">"},t.prototype.compare=function(e,u,l,G,A){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(u===void 0&&(u=0),l===void 0&&(l=e?e.length:0),G===void 0&&(G=0),A===void 0&&(A=this.length),u<0||l>e.length||G<0||A>this.length)throw new RangeError("out of range index");if(G>=A&&u>=l)return 0;if(G>=A)return-1;if(u>=l)return 1;if(this===e)return 0;for(var F=(A>>>=0)-(G>>>=0),K=(l>>>=0)-(u>>>=0),Z=Math.min(F,K),bt=this.slice(G,A),it=e.slice(u,l),ct=0;ct<Z;++ct)if(bt[ct]!==it[ct]){F=bt[ct],K=it[ct];break}return F<K?-1:K<F?1:0},t.prototype.includes=function(e,u,l){return this.indexOf(e,u,l)!==-1},t.prototype.indexOf=function(e,u,l){return D(this,e,u,l,!0)},t.prototype.lastIndexOf=function(e,u,l){return D(this,e,u,l,!1)},t.prototype.write=function(e,u,l,G){if(u===void 0)G="utf8",l=this.length,u=0;else if(l===void 0&&typeof u=="string")G=u,l=this.length,u=0;else{if(!isFinite(u))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");u|=0,isFinite(l)?(l|=0,G===void 0&&(G="utf8")):(G=l,l=void 0)}var A=this.length-u;if((l===void 0||l>A)&&(l=A),e.length>0&&(l<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var F=!1;;)switch(G){case"hex":return S(this,e,u,l);case"utf8":case"utf-8":return T(this,e,u,l);case"ascii":return I(this,e,u,l);case"latin1":case"binary":return L(this,e,u,l);case"base64":return J(this,e,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nt(this,e,u,l);default:if(F)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),F=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function at(e,u,l){var G="";l=Math.min(e.length,l);for(var A=u;A<l;++A)G+=String.fromCharCode(127&e[A]);return G}function X(e,u,l){var G="";l=Math.min(e.length,l);for(var A=u;A<l;++A)G+=String.fromCharCode(e[A]);return G}function z(e,u,l){var G=e.length;(!u||u<0)&&(u=0),(!l||l<0||l>G)&&(l=G);for(var A="",F=u;F<l;++F)A+=Te(e[F]);return A}function vt(e,u,l){for(var G=e.slice(u,l),A="",F=0;F<G.length;F+=2)A+=String.fromCharCode(G[F]+256*G[F+1]);return A}function Mt(e,u,l){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+u>l)throw new RangeError("Trying to access beyond buffer length")}function Pt(e,u,l,G,A,F){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>A||u<F)throw new RangeError('"value" argument is out of bounds');if(l+G>e.length)throw new RangeError("Index out of range")}function ge(e,u,l,G){u<0&&(u=65535+u+1);for(var A=0,F=Math.min(e.length-l,2);A<F;++A)e[l+A]=(u&255<<8*(G?A:1-A))>>>8*(G?A:1-A)}function Q(e,u,l,G){u<0&&(u=4294967295+u+1);for(var A=0,F=Math.min(e.length-l,4);A<F;++A)e[l+A]=u>>>8*(G?A:3-A)&255}function ft(e,u,l,G,A,F){if(l+G>e.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Ht(e,u,l,G,A){return A||ft(e,0,l,4),h.write(e,u,l,G,23,4),l+4}function _e(e,u,l,G,A){return A||ft(e,0,l,8),h.write(e,u,l,G,52,8),l+8}t.prototype.slice=function(e,u){var l,G=this.length;if((e=~~e)<0?(e+=G)<0&&(e=0):e>G&&(e=G),(u=u===void 0?G:~~u)<0?(u+=G)<0&&(u=0):u>G&&(u=G),u<e&&(u=e),t.TYPED_ARRAY_SUPPORT)(l=this.subarray(e,u)).__proto__=t.prototype;else{var A=u-e;l=new t(A,void 0);for(var F=0;F<A;++F)l[F]=this[F+e]}return l},t.prototype.readUIntLE=function(e,u,l){e|=0,u|=0,l||Mt(e,u,this.length);for(var G=this[e],A=1,F=0;++F<u&&(A*=256);)G+=this[e+F]*A;return G},t.prototype.readUIntBE=function(e,u,l){e|=0,u|=0,l||Mt(e,u,this.length);for(var G=this[e+--u],A=1;u>0&&(A*=256);)G+=this[e+--u]*A;return G},t.prototype.readUInt8=function(e,u){return u||Mt(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,u){return u||Mt(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,u){return u||Mt(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,u){return u||Mt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,u){return u||Mt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,u,l){e|=0,u|=0,l||Mt(e,u,this.length);for(var G=this[e],A=1,F=0;++F<u&&(A*=256);)G+=this[e+F]*A;return G>=(A*=128)&&(G-=Math.pow(2,8*u)),G},t.prototype.readIntBE=function(e,u,l){e|=0,u|=0,l||Mt(e,u,this.length);for(var G=u,A=1,F=this[e+--G];G>0&&(A*=256);)F+=this[e+--G]*A;return F>=(A*=128)&&(F-=Math.pow(2,8*u)),F},t.prototype.readInt8=function(e,u){return u||Mt(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,u){u||Mt(e,2,this.length);var l=this[e]|this[e+1]<<8;return 32768&l?4294901760|l:l},t.prototype.readInt16BE=function(e,u){u||Mt(e,2,this.length);var l=this[e+1]|this[e]<<8;return 32768&l?4294901760|l:l},t.prototype.readInt32LE=function(e,u){return u||Mt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,u){return u||Mt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,u){return u||Mt(e,4,this.length),h.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,u){return u||Mt(e,4,this.length),h.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,u){return u||Mt(e,8,this.length),h.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,u){return u||Mt(e,8,this.length),h.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,u,l,G){e=+e,u|=0,l|=0,G||Pt(this,e,u,l,Math.pow(2,8*l)-1,0);var A=1,F=0;for(this[u]=255&e;++F<l&&(A*=256);)this[u+F]=e/A&255;return u+l},t.prototype.writeUIntBE=function(e,u,l,G){e=+e,u|=0,l|=0,G||Pt(this,e,u,l,Math.pow(2,8*l)-1,0);var A=l-1,F=1;for(this[u+A]=255&e;--A>=0&&(F*=256);)this[u+A]=e/F&255;return u+l},t.prototype.writeUInt8=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[u]=255&e,u+1},t.prototype.writeUInt16LE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[u]=255&e,this[u+1]=e>>>8):ge(this,e,u,!0),u+2},t.prototype.writeUInt16BE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[u]=e>>>8,this[u+1]=255&e):ge(this,e,u,!1),u+2},t.prototype.writeUInt32LE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[u+3]=e>>>24,this[u+2]=e>>>16,this[u+1]=e>>>8,this[u]=255&e):Q(this,e,u,!0),u+4},t.prototype.writeUInt32BE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[u]=e>>>24,this[u+1]=e>>>16,this[u+2]=e>>>8,this[u+3]=255&e):Q(this,e,u,!1),u+4},t.prototype.writeIntLE=function(e,u,l,G){if(e=+e,u|=0,!G){var A=Math.pow(2,8*l-1);Pt(this,e,u,l,A-1,-A)}var F=0,K=1,Z=0;for(this[u]=255&e;++F<l&&(K*=256);)e<0&&Z===0&&this[u+F-1]!==0&&(Z=1),this[u+F]=(e/K>>0)-Z&255;return u+l},t.prototype.writeIntBE=function(e,u,l,G){if(e=+e,u|=0,!G){var A=Math.pow(2,8*l-1);Pt(this,e,u,l,A-1,-A)}var F=l-1,K=1,Z=0;for(this[u+F]=255&e;--F>=0&&(K*=256);)e<0&&Z===0&&this[u+F+1]!==0&&(Z=1),this[u+F]=(e/K>>0)-Z&255;return u+l},t.prototype.writeInt8=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[u]=255&e,u+1},t.prototype.writeInt16LE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[u]=255&e,this[u+1]=e>>>8):ge(this,e,u,!0),u+2},t.prototype.writeInt16BE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[u]=e>>>8,this[u+1]=255&e):ge(this,e,u,!1),u+2},t.prototype.writeInt32LE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[u]=255&e,this[u+1]=e>>>8,this[u+2]=e>>>16,this[u+3]=e>>>24):Q(this,e,u,!0),u+4},t.prototype.writeInt32BE=function(e,u,l){return e=+e,u|=0,l||Pt(this,e,u,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[u]=e>>>24,this[u+1]=e>>>16,this[u+2]=e>>>8,this[u+3]=255&e):Q(this,e,u,!1),u+4},t.prototype.writeFloatLE=function(e,u,l){return Ht(this,e,u,!0,l)},t.prototype.writeFloatBE=function(e,u,l){return Ht(this,e,u,!1,l)},t.prototype.writeDoubleLE=function(e,u,l){return _e(this,e,u,!0,l)},t.prototype.writeDoubleBE=function(e,u,l){return _e(this,e,u,!1,l)},t.prototype.copy=function(e,u,l,G){if(l||(l=0),G||G===0||(G=this.length),u>=e.length&&(u=e.length),u||(u=0),G>0&&G<l&&(G=l),G===l||e.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("sourceStart out of bounds");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),e.length-u<G-l&&(G=e.length-u+l);var A,F=G-l;if(this===e&&l<u&&u<G)for(A=F-1;A>=0;--A)e[A+u]=this[A+l];else if(F<1e3||!t.TYPED_ARRAY_SUPPORT)for(A=0;A<F;++A)e[A+u]=this[A+l];else Uint8Array.prototype.set.call(e,this.subarray(l,l+F),u);return F},t.prototype.fill=function(e,u,l,G){if(typeof e=="string"){if(typeof u=="string"?(G=u,u=0,l=this.length):typeof l=="string"&&(G=l,l=this.length),e.length===1){var A=e.charCodeAt(0);A<256&&(e=A)}if(G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!t.isEncoding(G))throw new TypeError("Unknown encoding: "+G)}else typeof e=="number"&&(e&=255);if(u<0||this.length<u||this.length<l)throw new RangeError("Out of range index");if(l<=u)return this;var F;if(u>>>=0,l=l===void 0?this.length:l>>>0,e||(e=0),typeof e=="number")for(F=u;F<l;++F)this[F]=e;else{var K=t.isBuffer(e)?e:It(new t(e,G).toString()),Z=K.length;for(F=0;F<l-u;++F)this[F+u]=K[F%Z]}return this};var Jt=/[^+\/0-9A-Za-z-_]/g;function Te(e){return e<16?"0"+e.toString(16):e.toString(16)}function It(e,u){var l;u=u||1/0;for(var G=e.length,A=null,F=[],K=0;K<G;++K){if((l=e.charCodeAt(K))>55295&&l<57344){if(!A){if(l>56319){(u-=3)>-1&&F.push(239,191,189);continue}if(K+1===G){(u-=3)>-1&&F.push(239,191,189);continue}A=l;continue}if(l<56320){(u-=3)>-1&&F.push(239,191,189),A=l;continue}l=65536+(A-55296<<10|l-56320)}else A&&(u-=3)>-1&&F.push(239,191,189);if(A=null,l<128){if((u-=1)<0)break;F.push(l)}else if(l<2048){if((u-=2)<0)break;F.push(l>>6|192,63&l|128)}else if(l<65536){if((u-=3)<0)break;F.push(l>>12|224,l>>6&63|128,63&l|128)}else{if(!(l<1114112))throw new Error("Invalid code point");if((u-=4)<0)break;F.push(l>>18|240,l>>12&63|128,l>>6&63|128,63&l|128)}}return F}function Wt(e){return b.toByteArray(function(u){if((u=function(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}(u).replace(Jt,"")).length<2)return"";for(;u.length%4!=0;)u+="=";return u}(e))}function Yt(e,u,l,G){for(var A=0;A<G&&!(A+l>=u.length||A>=e.length);++A)u[A+l]=e[A];return A}}).call(this,x(24))},function(Ee,At,x){(function(w){w===void 0||!w.version||w.version.indexOf("v0.")===0||w.version.indexOf("v1.")===0&&w.version.indexOf("v1.8.")!==0?Ee.exports={nextTick:function(b,h,c,n){if(typeof b!="function")throw new TypeError('"callback" argument must be a function');var d,t,r=arguments.length;switch(r){case 0:case 1:return w.nextTick(b);case 2:return w.nextTick(function(){b.call(null,h)});case 3:return w.nextTick(function(){b.call(null,h,c)});case 4:return w.nextTick(function(){b.call(null,h,c,n)});default:for(d=new Array(r-1),t=0;t<d.length;)d[t++]=arguments[t];return w.nextTick(function(){b.apply(null,d)})}}}:Ee.exports=w}).call(this,x(26))},function(Ee,At,x){var w=x(43),b=x.n(w),h=x(1),c=x(0),n=x(9),d=x(7),t=x(2),r=x(3),f=x(6),o=x(4);function g(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt,ot,Vt,Tt,pt,zt,Dt,W=this.context,$=Object(d.a)(W).getInstance();function tt(){et(),U=!1,Y=0,rt=0,ht=0,pt=!1,gt=!0,yt=!1,zt=!1,ot=NaN,E&&($.off(t.a.DATA_UPDATE_COMPLETED,Oe,p),$.off(t.a.LOADING_PROGRESS,kt,p),$.off(t.a.MANIFEST_UPDATED,ye,p),$.off(t.a.STREAMS_COMPOSED,De,p),$.off(o.a.PLAYBACK_ENDED,Me,p),$.off(o.a.STREAM_INITIALIZING,Ie,p),$.off(o.a.REPRESENTATION_SWITCH,_t,p),$.off(o.a.BUFFER_LEVEL_STATE_CHANGED,tn,p),ne(),E.removeEventListener("canplay",xe),E.removeEventListener("canplaythrough",Le),E.removeEventListener("play",sn),E.removeEventListener("waiting",Ye),E.removeEventListener("playing",un),E.removeEventListener("pause",mn),E.removeEventListener("error",se),E.removeEventListener("seeking",bn),E.removeEventListener("seeked",vn),E.removeEventListener("timeupdate",dn),E.removeEventListener("progress",hn),E.removeEventListener("ratechange",Mn),E.removeEventListener("loadedmetadata",On),E.removeEventListener("loadeddata",Nn),E.removeEventListener("stalled",ce),E.removeEventListener("ended",Dn),E.removeEventListener("volumechange",Ln)),k=null,E=null,V=null,st=null}function Et(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ut(le)-$t()).toFixed(5))}function ut(le){var qe=le||V;return qe.start+qe.duration}function St(){var le=arguments.length>0&&arguments[0]!==void 0&&arguments[0];V&&E&&E.getElement()?(le&&st&&fe($t()),E.play()):U=!0}function et(){V&&E&&E.pause()}function mt(le){var qe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(V&&E){var En=isNaN(ot)?E.getTime():ot;le!==En&&((Vt=fn===!0)||(ot=le),i.info("Requesting seek to time: "+le+(Vt?" (internal)":"")),st&&pn&&fe(le),E.setCurrentTime(le,qe))}}function Kt(){if(V&&E&&st){var le=m&&m.hasVideoTrack()?h.a.VIDEO:h.a.AUDIO,qe=R.getCurrentDVRInfo(le);return qe&&qe.range?qe.range.end:0}}function fe(le){var qe=new Date(q.getClientReferenceTime()),fn=M.getRegularPeriods()[0],pn=q.calcPresentationTimeFromWallTime(qe,fn);Y=pn-le}function $t(){return V&&E?E.getTime():null}function Se(){return V&&E?E.isPaused():null}function oe(){return V&&E?E.isSeeking():null}function he(){return V&&E?E.isStalled():null}function ze(){return V&&E?E.getPlaybackRate():null}function Pe(){return V&&E?E.getEnded():null}function Re(){return st}function lt(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Se()&&st&&E.getReadyState()!==0&&!oe()&&!pt){le||(le=m.hasVideoTrack()?h.a.VIDEO:h.a.AUDIO);var qe=$t(),fn=Ft(qe,le),pn=!isNaN(fn)&&fn!==qe;pn&&!oe()&&(he()||Tt||E.getReadyState()===1)&&(i.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(qe)),mt(fn,!1,!1))}}function Ft(le,qe){var fn=R.getCurrentDVRInfo(qe),pn=fn?fn.range:null;return pn?le>pn.end?Math.max(pn.end-Y,pn.start):le>0&&le+.25<pn.start&&Math.abs(le-pn.start)<31536e4?yt?Math.max(pn.end-Y,pn.start):pn.start:le:NaN}function Qt(){k===null&&(k=setInterval(function(){var le;$.trigger(t.a.WALLCLOCK_TIME_UPDATED,{isDynamic:st,time:new Date}),Re()&&(m.addDVRMetric(),Se()?(le=Date.now(),(!wt||le>wt+500)&&(wt=le,dn())):lt())},Dt.get().streaming.wallclockTimeUpdateInterval))}function ne(){clearInterval(k),k=null}function Oe(le){var qe=M.convertRepresentationToRepresentationInfo(le.currentRepresentation),fn=qe?qe.mediaInfo.streamInfo:null;fn!==null&&V.id===fn.id&&(V=fn)}function xe(){$.trigger(t.a.CAN_PLAY)}function Le(){$.trigger(t.a.CAN_PLAY_THROUGH)}function tn(le){le.streamId===m.getActiveStreamInfo().id&&(Tt=le.state===n.a.BUFFER_EMPTY,Dt.get().streaming.buffer.setStallState&&E.setStallState(le.mediaType,le.state===n.a.BUFFER_EMPTY))}function sn(){i.info("Native video element event: play"),lt(),Qt(),$.trigger(t.a.PLAYBACK_STARTED,{startTime:$t()})}function Ye(){i.info("Native video element event: waiting"),$.trigger(t.a.PLAYBACK_WAITING,{playingTime:$t()})}function un(){i.info("Native video element event: playing"),Vt=!1,$.trigger(t.a.PLAYBACK_PLAYING,{playingTime:$t()})}function mn(){i.info("Native video element event: pause"),$.trigger(t.a.PLAYBACK_PAUSED,{ended:Pe()})}function bn(){if(!Vt){var le=$t();isNaN(ot)||ot===le||(le=ot),ot=NaN,i.info("Seeking to: "+le),Qt(),$.trigger(t.a.PLAYBACK_SEEKING,{seekTime:le,streamId:V.id})}}function vn(){i.info("Native video element event: seeked"),Vt=!1,$.trigger(t.a.PLAYBACK_SEEKED)}function dn(){V&&$.trigger(t.a.PLAYBACK_TIME_UPDATED,{timeToEnd:Et(),time:$t(),streamId:V.id})}function hn(){$.trigger(t.a.PLAYBACK_PROGRESS,{streamId:V.id})}function Mn(){var le=ze();i.info("Native video element event: ratechange: ",le),$.trigger(t.a.PLAYBACK_RATE_CHANGED,{playbackRate:le})}function On(){i.info("Native video element event: loadedmetadata"),$.trigger(t.a.PLAYBACK_METADATA_LOADED),Qt()}function Nn(){i.info("Native video element event: loadeddata"),$.trigger(t.a.PLAYBACK_LOADED_DATA)}function Dn(){i.info("Native video element event: ended"),et(),ne();var le=m?m.getActiveStreamInfo():null;le&&$.trigger(t.a.PLAYBACK_ENDED,{isLast:le.isLast})}function Ln(){$.trigger(t.a.PLAYBACK_VOLUME_CHANGED)}function Me(le){if(k&&le.isLast){i.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var qe=le.seekTime?le.seekTime:ut();E.setCurrentTime(qe),et(),ne()}}function se(le){var qe=le.target||le.srcElement;$.trigger(t.a.PLAYBACK_ERROR,{error:qe.error})}function kt(le){if(le.stream===!1&&yt&&!isNaN(le.request.duration)){var qe=1.2*le.request.duration;qe>Y&&(i.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",qe.toFixed(2)),Y=qe,rt=qe)}}function ce(le){$.trigger(t.a.PLAYBACK_STALLED,{e:le})}function Ie(le){var qe;(qe=le.mediaInfo)&&qe.supplementalProperties&&qe.supplementalProperties[h.a.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]==="true"&&(i.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),yt=!0)}function _t(le){var qe=m.getActiveStreamInfo();le&&qe&&le.currentRepresentation&&le.streamId&&le.streamId===qe.id&&le.mediaType&&(le.mediaType===h.a.VIDEO||le.mediaType===h.a.AUDIO)&&(gt=le.currentRepresentation.availabilityTimeComplete,(yt=!gt)&&!zt&&(zt=!0))}function ye(){pt=!0}function De(){pt=!1}return p={initialize:function(le,qe){V=le,qe!==!0&&(E.addEventListener("canplay",xe),E.addEventListener("canplaythrough",Le),E.addEventListener("play",sn),E.addEventListener("waiting",Ye),E.addEventListener("playing",un),E.addEventListener("pause",mn),E.addEventListener("error",se),E.addEventListener("seeking",bn),E.addEventListener("seeked",vn),E.addEventListener("timeupdate",dn),E.addEventListener("progress",hn),E.addEventListener("ratechange",Mn),E.addEventListener("loadedmetadata",On),E.addEventListener("loadeddata",Nn),E.addEventListener("stalled",ce),E.addEventListener("ended",Dn),E.addEventListener("volumechange",Ln),st=V.manifestInfo.isDynamic,Tt=!1,Vt=!1,$.on(t.a.DATA_UPDATE_COMPLETED,Oe,p),$.on(t.a.LOADING_PROGRESS,kt,p),$.on(t.a.MANIFEST_UPDATED,ye,p),$.on(t.a.STREAMS_COMPOSED,De,p),$.on(o.a.PLAYBACK_ENDED,Me,p,{priority:d.a.EVENT_PRIORITY_HIGH}),$.on(o.a.STREAM_INITIALIZING,Ie,p),$.on(o.a.REPRESENTATION_SWITCH,_t,p),$.on(o.a.BUFFER_LEVEL_STATE_CHANGED,tn,p),U&&(U=!1,St()))},setConfig:function(le){le&&(le.streamController&&(m=le.streamController),le.serviceDescriptionController&&(_=le.serviceDescriptionController),le.dashMetrics&&(R=le.dashMetrics),le.adapter&&(M=le.adapter),le.videoModel&&(E=le.videoModel),le.timelineConverter&&(q=le.timelineConverter),le.settings&&(Dt=le.settings))},getTimeToStreamEnd:Et,getBufferLevel:function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,qe=null;return m.getActiveStreamProcessors().forEach(function(fn){if(!le||le.length===0||le.indexOf(fn.getType())===-1){var pn=fn.getBufferLevel();qe=qe===null?pn:Math.min(qe,pn)}}),qe},getPlaybackStalled:function(){return Tt},getTime:$t,getLowLatencyModeEnabled:function(){return yt},getInitialCatchupModeActivated:function(){return zt},getIsManifestUpdateInProgress:function(){return pt},getPlaybackRate:ze,getPlayedRanges:function(){return V&&E?E.getPlayedRanges():null},getEnded:Pe,getIsDynamic:Re,getStreamController:function(){return m},computeAndSetLiveDelay:function(le,qe){var fn,pn,En,or=!isNaN(le)&&isFinite(le)?le:NaN,Xn=M.getSuggestedPresentationDelay(),hr=_.getServiceDescriptionSettings();return fn=isNaN(Dt.get().streaming.delay.liveDelay)?Dt.get().streaming.delay.liveDelayFragmentCount===null||isNaN(Dt.get().streaming.delay.liveDelayFragmentCount)||isNaN(or)?hr&&!isNaN(hr.liveDelay)&&hr.liveDelay>0?hr.liveDelay:Dt.get().streaming.delay.useSuggestedPresentationDelay===!0&&Xn!==null&&!isNaN(Xn)&&Xn>0?Xn:isNaN(or)?qe&&!isNaN(qe.minBufferTime)?4*qe.minBufferTime:4*V.manifestInfo.minBufferTime:4*or:or*Dt.get().streaming.delay.liveDelayFragmentCount:Dt.get().streaming.delay.liveDelay,(En=M.getAvailabilityStartTime())!==null&&(ht=En),pn=qe&&qe.dvrWindowSize>0?Math.min(fn,qe.dvrWindowSize):fn,Y=pn,rt=pn,pn},getLiveDelay:function(){return Y},getOriginalLiveDelay:function(){return rt},getCurrentLiveLatency:function(){if(!st||isNaN(ht))return NaN;var le=$t();if(isNaN(le)||le===0)return 0;var qe=new Date().getTime()+1e3*q.getClientTimeOffset();return Math.max(((qe-ht-1e3*le)/1e3).toFixed(3),0)},play:St,isPaused:Se,isStalled:he,pause:et,isSeeking:oe,getStreamEndTime:ut,seek:mt,seekToOriginalLive:function(){var le=arguments.length>0&&arguments[0]!==void 0&&arguments[0],qe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pn=Kt();if(pn!==0){var En=pn-(Y=rt);mt(En,le,qe,fn)}},seekToCurrentLive:function(){var le=arguments.length>0&&arguments[0]!==void 0&&arguments[0],qe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pn=Kt();if(pn!==0){var En=pn-Y;mt(En,le,qe,fn)}},reset:tt,updateCurrentTime:lt,getAvailabilityStartTime:function(){return ht}},i=Object(f.a)(W).getInstance().getLogger(p),tt(),p}g.__dashjs_factory_name="PlaybackController";var v=r.a.getSingletonFactory(g),P=x(21),B=x(10),H=x(11),D=x(16),y=x(5);function S(p){var i,m,_,R,M,E,q=this.context,k=Object(D.a)(q).getInstance(),Y=p.textController,rt=p.eventBus,V=[],st=[],U=!1,wt=p.mediaSource,ht=null;function gt(tt){return new Promise(function(Et){$(function(){R.changeType&&R.changeType(tt),Et()})})}function yt(tt){return R=Y.getTextSourceBuffer(tt),Promise.resolve()}function ot(){if(typeof R.addEventListener=="function")try{R.addEventListener("updateend",Dt,!1),R.addEventListener("error",W,!1),R.addEventListener("abort",W,!1)}catch{E=setInterval(Dt,50)}else E=setInterval(Dt,50)}function Vt(tt){return new Promise(function(Et){R&&k.get().streaming.buffer.useAppendWindow?$(function(){try{if(!R)return void Et();var ut=wt.duration,St=0;tt&&!isNaN(tt.start)&&!isNaN(tt.duration)&&isFinite(tt.duration)&&(ut=tt.start+tt.duration),tt&&!isNaN(tt.start)&&(St=tt.start),R.appendWindowEnd===ut&&R.appendWindowStart===St||(R.appendWindowStart=0,R.appendWindowEnd=ut+.01,R.appendWindowStart=Math.max(St-.1,0),_.debug("Updated append window for ".concat(M.type,". Set start to ").concat(R.appendWindowStart," and end to ").concat(R.appendWindowEnd))),Et()}catch{_.warn("Failed to set append window"),Et()}}):Et()})}function Tt(tt){return new Promise(function(Et){R?$(function(){try{R.timestampOffset===tt||isNaN(tt)||(R.timestampOffset=tt,_.debug("Set MSE timestamp offset to ".concat(tt))),Et()}catch{Et()}}):Et()})}function pt(){if(!U&&st.length>0){U=!0;var tt=st[0];st.splice(0,1);var Et=function(){U=!1,st.length>0&&pt.call(this),tt&&tt.data&&tt.data.segmentType&&tt.data.segmentType!==y.a.INIT_SEGMENT_TYPE&&delete tt.data.bytes,tt.promise.resolve({chunk:tt.data})};try{ht=tt.request,tt.data.bytes.byteLength===0?Et.call(this):(R.appendBuffer?R.appendBuffer(tt.data.bytes):R.append(tt.data.bytes,tt.data),$(Et.bind(this)))}catch(ut){_.fatal('SourceBuffer append failed "'+ut+'"'),st.length>0?pt():U=!1,delete tt.data.bytes,tt.promise.reject({chunk:tt.data,error:new B.a(ut.code,ut.message)})}}}function zt(){V.length>0&&(R.updating||(V.shift()(),zt()))}function Dt(){R.updating||zt()}function W(tt){var Et,ut,St=tt.target||{};Et=t.a.SOURCE_BUFFER_ERROR,ut={error:St,lastRequestAppended:ht},rt.trigger(Et,ut,{streamId:M.streamInfo.id,mediaType:m})}function $(tt){V.push(tt),R.updating||zt()}return i={getType:function(){return m},getAllBufferRanges:function(){try{return R.buffered}catch(tt){return _.error("getAllBufferRanges exception: "+tt.message),null}},getBuffer:function(){return R},append:function(tt){var Et=this,ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(St,et){tt?(st.push({data:tt,promise:{resolve:St,reject:et},request:ut}),$(pt.bind(Et))):et({chunk:tt,error:new B.a(H.a.APPEND_ERROR_CODE,H.a.APPEND_ERROR_MESSAGE)})})},remove:function(tt){return new Promise(function(Et,ut){var St=tt.start,et=tt.end;St>=0&&et>St?$(function(){try{R.remove(St,et),$(function(){Et({from:St,to:et,unintended:!1}),tt.resolve&&tt.resolve()})}catch(mt){ut({from:St,to:et,unintended:!1,error:new B.a(H.a.REMOVE_ERROR_CODE,H.a.REMOVE_ERROR_MESSAGE)}),tt.reject&&tt.reject(mt)}}):Et()})},abort:function(){return new Promise(function(tt){try{st=[],wt.readyState==="open"?$(function(){try{R&&R.abort(),tt()}catch{tt()}}):(R&&R.setTextTrack&&wt.readyState==="ended"&&R.abort(),tt())}catch{tt()}})},reset:function(){if(R){try{V=[],function(){try{typeof R.removeEventListener=="function"&&(R.removeEventListener("updateend",Dt,!1),R.removeEventListener("error",W,!1),R.removeEventListener("abort",W,!1)),clearInterval(E)}catch(tt){_.error(tt)}}(),U=!1,st=[],R.getClassName&&R.getClassName()==="TextSourceBuffer"||(_.debug("Removing sourcebuffer from media source"),wt.removeSourceBuffer(R))}catch{}R=null}ht=null},updateTimestampOffset:Tt,initializeForStreamSwitch:function(tt,Et,ut){m=(M=tt).type;var St=M.codec;(function(mt){R=mt.getBuffer()})(ut),ot();var et=[];return et.push(new Promise(function(mt){$(function(){var Kt=R.appendWindowStart,fe=R.appendWindowEnd;R&&(R.abort(),R.appendWindowStart=Kt,R.appendWindowEnd=fe),mt()})})),et.push(Vt(M.streamInfo)),et.push(gt(St)),Et&&Et.MSETimeOffset!==void 0&&et.push(Tt(Et.MSETimeOffset)),Promise.all(et)},initializeForFirstUse:function(tt,Et,ut){m=(M=Et).type;var St=M.codec;try{if(St.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return yt(tt);R=wt.addSourceBuffer(St),ot();var et=[];return et.push(Vt(M.streamInfo)),ut&&ut.MSETimeOffset!==void 0&&et.push(Tt(ut.MSETimeOffset)),Promise.all(et)}catch(mt){return M.type==h.a.TEXT&&!M.isFragmented||St.indexOf('codecs="stpp')!==-1||St.indexOf('codecs="vtt')!==-1?yt(tt):Promise.reject(mt)}},updateAppendWindow:Vt,changeType:gt},_=Object(f.a)(q).getInstance().getLogger(i),i}S.__dashjs_factory_name="SourceBufferSink";var T=r.a.getClassFactory(S);function I(){var p={};return{save:function(i){var m=i.streamId,_=i.representationId;p[m]=p[m]||{},p[m][_]=i},extract:function(i,m){return p&&p[i]&&p[i][m]?p[i][m]:null},reset:function(){p={}}}}I.__dashjs_factory_name="InitCache";var L=r.a.getSingletonFactory(I);function J(p){p=p||{};var i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt,ot,Vt=this.context,Tt=Object(d.a)(Vt).getInstance(),pt=p.errHandler,zt=p.fragmentModel,Dt=p.representationController,W=p.adapter,$=p.textController,tt=p.abrController,Et=p.playbackController,ut=p.streamInfo,St=p.type,et=p.settings;function mt(kt){E=kt}function Kt(kt){return W.convertRepresentationToRepresentationInfo(Dt.getRepresentationForQuality(kt))}function fe(kt,ce,Ie){var _t=Kt(Ie);return ce&&ce[St]&&(St===h.a.VIDEO||St===h.a.AUDIO)?Y.initializeForStreamSwitch(kt,_t,ce[St]):Y.initializeForFirstUse(ut,kt,_t)}function $t(kt){et.get().streaming.cacheInitSegments&&(m.info("Init fragment finished loading saving to",St+"'s init cache"),ht.save(kt.chunk)),m.debug("Append Init fragment",St," with representationId:",kt.chunk.representationId," and quality:",kt.chunk.quality,", data size:",kt.chunk.bytes.byteLength),oe(kt.chunk)}function Se(kt){oe(kt.chunk,kt.request)}function oe(kt){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Y.append(kt,ce).then(function(Ie){ze(Ie)}).catch(function(Ie){ze(Ie)}),kt.mediaInfo.type===h.a.VIDEO&&Me(t.a.VIDEO_CHUNK_RECEIVED,{chunk:kt})}function he(kt){if(kt&&kt.length>0)for(var ce=0,Ie=kt.length;ce<Ie;ce++)m.debug("Buffered range: "+kt.start(ce)+" - "+kt.end(ce)+", currentTime = ",Et.getTime())}function ze(kt){if(kt.error)return kt.error.code===22&&function(){if(wt=!0,M=.8*Nn(),m.warn("Quota exceeded, Critical Buffer: "+M),M>0){var Ie=Math.max(.2*M,1),_t=M-Ie,ye=Math.min(et.get().streaming.buffer.bufferTimeAtTopQuality,.9*_t),De=Math.min(et.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*_t),le={streaming:{buffer:{bufferToKeep:parseFloat(Ie.toFixed(5)),bufferTimeAtTopQuality:parseFloat(ye.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(De.toFixed(5))}}};et.update(le)}}(),void(kt.error.code!==22&&Ln()||(m.warn("Clearing playback buffer to overcome quota exceed situation"),Me(t.a.QUOTA_EXCEEDED,{criticalBufferLevel:M,quotaExceededTime:kt.chunk.start}),un(Ye())));if(Y&&(Oe(),wt=!1,(V=kt.chunk)&&V.endFragment)){V&&!isNaN(V.index)&&(q=Math.max(V.index,q),xe());var ce=Y.getAllBufferRanges();V.segmentType===y.a.MEDIA_SEGMENT_TYPE&&(he(ce),lt(),function(){if(!isNaN(ot)){if(St!==h.a.AUDIO&&St!==h.a.VIDEO)return void(ot=NaN);var Ie=Et.getTime(),_t=ne(Ie,0),ye=ne(ot,0);if(_t&&ye&&_t.start===ye.start)return void(ot=NaN);var De=Dt.getCurrentRepresentation().segmentDuration,le=ne(ot,De);le&&(et.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ie-ot)>De?ot<=le.end&&Et.seek(Math.max(ot,le.start),!1,!0):Ie<le.start&&Et.seek(le.start,!1,!0))}}()),V&&Me(t.a.BYTES_APPENDED_END_FRAGMENT,{quality:V.quality,startTime:V.start,index:V.index,bufferedRanges:ce,segmentType:V.segmentType,mediaType:St})}}function Pe(){return new Promise(function(kt,ce){var Ie=Re();if(!Ie||Ie.length===0)return lt(),void kt();un(Ie).then(function(){kt()}).catch(function(_t){ce(_t)})})}function Re(kt){var ce=[],Ie=Y.getAllBufferRanges();if(!Ie||Ie.length===0)return ce;if(!kt&&kt!==0||isNaN(kt))ce.push({start:Ie.start(0),end:Ie.end(Ie.length-1)+.5});else{var _t=function(De,le){var qe=et.get().streaming.buffer.bufferToKeep,fn=le.start(0);if(De-fn>qe){var pn=Math.max(0,De-qe),En=zt.getRequests({state:P.a.FRAGMENT_MODEL_EXECUTED,time:De,threshold:.01})[0];if(En&&(pn=Math.min(En.startTime,pn)),pn>0)return{start:fn,end:pn}}return null}(kt,Ie),ye=function(De,le){var qe=le.end(le.length-1)+.5,fn=Dn(De),pn=ut.manifestInfo.duration>=et.get().streaming.buffer.longFormContentDurationThreshold?et.get().streaming.buffer.bufferTimeAtTopQualityLongForm:et.get().streaming.buffer.bufferTimeAtTopQuality,En=isNaN(fn)?De:Math.min(fn,De+pn);if(En>=le.end(le.length-1))return null;var or=zt.getRequests({state:P.a.FRAGMENT_MODEL_EXECUTED,time:De,threshold:.01})[0];if(or&&(En=Math.max(or.startTime+or.duration,En)),et.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Xn=0;Xn<le.length;Xn++)if(le.start(Xn)<=De&&De<=le.end(Xn)&&le.start(Xn)<=En&&En<=le.end(Xn)){var hr=En;En=Xn+1<le.length?le.start(Xn+1):le.end(Xn)+1,m.debug("Buffered range ["+le.start(Xn)+", "+le.end(Xn)+"] overlaps with targetTime "+De+" and range to be pruned ["+hr+", "+qe+"], using ["+En+", "+qe+"] instead"+(En<qe?"":" (no actual pruning)"));break}}return En<le.end(le.length-1)?{start:En,end:qe}:null}(kt,Ie);_t&&ce.push(_t),ye&&ce.push(ye)}return ce}function lt(){(!yt||St===h.a.TEXT&&$.isTextEnabled())&&Oe()}function Ft(){Le()}function Qt(){Le(),ot=NaN}function ne(kt,ce){var Ie,_t,ye=Y.getAllBufferRanges(),De=0,le=0,qe=null,fn=null,pn=0,En=isNaN(ce)?.15:ce;if(ye!=null){for(_t=0,Ie=ye.length;_t<Ie;_t++)if(De=ye.start(_t),le=ye.end(_t),qe===null)pn=Math.abs(De-kt),(kt>=De&&kt<le||pn<=En)&&(qe=De,fn=le);else{if(!((pn=De-fn)<=En))break;fn=le}if(qe!==null)return{start:qe,end:fn}}return null}function Oe(){if(Et){var kt=et.get().streaming.gaps.jumpGaps&&!isNaN(et.get().streaming.gaps.smallGapLimit)?et.get().streaming.gaps.smallGapLimit:NaN;R=Math.max(function(ce,Ie){var _t;return et.get().streaming.gaps.jumpGaps&&(Ie=et.get().streaming.gaps.smallGapLimit),(_t=ne(ce,Ie))===null?0:_t.end-ce}(Et.getTime()||0,kt),0),Me(t.a.BUFFER_LEVEL_UPDATED,{mediaType:St,bufferLevel:R}),Le()}}function xe(){var kt=q>=k-1,ce=Et.getTimeToStreamEnd(ut)-R<1e-5;!kt&&!ce||_||(On(!0),m.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(ut.id," and type ").concat(St)))}function Le(){St!==h.a.AUDIO&&St!==h.a.VIDEO||((!Et.getLowLatencyModeEnabled()&&R<et.get().streaming.buffer.stallThreshold||R===0)&&!_?tn(n.a.BUFFER_EMPTY):(_||R>=et.get().streaming.buffer.stallThreshold||Et.getLowLatencyModeEnabled()&&R>0)&&tn(n.a.BUFFER_LOADED))}function tn(kt){rt===kt||kt===n.a.BUFFER_EMPTY&&Et.getTime()===0||St===h.a.TEXT&&!$.isTextEnabled()||(rt=kt,Me(t.a.BUFFER_LEVEL_STATE_CHANGED,{state:kt}),Me(kt===n.a.BUFFER_LOADED?t.a.BUFFER_LOADED:t.a.BUFFER_EMPTY),m.debug(kt===n.a.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function sn(){Y&&St!==h.a.TEXT&&(_||un(Ye()))}function Ye(){var kt=[],ce=Y.getAllBufferRanges();if(!ce||ce.length===0)return kt;var Ie=Et.getTime(),_t=Math.max(0,Ie-et.get().streaming.buffer.bufferToKeep),ye=zt.getRequests({state:P.a.FRAGMENT_MODEL_EXECUTED,time:Ie,threshold:.01})[0];if(ye)_t=Math.min(ye.startTime,_t);else if(Ie===0&&Et.getIsDynamic())return[];if(ce.start(0)<=_t){for(var De={start:0,end:_t},le=0;le<ce.length&&ce.end(le)<=_t;le++)De.end=ce.end(le);De.start<De.end&&kt.push(De)}return kt}function un(kt){return new Promise(function(ce,Ie){if(kt&&Y&&kt.length!==0){var _t=[];kt.forEach(function(ye){_t.push(function(De){return new Promise(function(le,qe){De.resolve=le,De.reject=qe,gt.push(De)})}(ye))}),U||mn(),Promise.all(_t).then(function(){ce()}).catch(function(ye){Ie(ye)})}else ce()})}function mn(){try{if(gt.length===0||!Y)return m.debug("Nothing to prune, halt pruning"),gt=[],void(U=!1);var kt=Y.getBuffer();if(!kt||!kt.buffered||kt.buffered.length===0)return m.debug("SourceBuffer is empty (or does not exist), halt pruning"),gt=[],void(U=!1);var ce=gt.shift();m.debug("".concat(St,": Removing buffer from: ").concat(ce.start," to ").concat(ce.end)),U=!0,Et.getTime()<ce.end&&On(!1),Y.remove(ce).then(function(Ie){bn(Ie)}).catch(function(Ie){bn(Ie)})}catch{U=!1}}function bn(kt){m.debug("onRemoved buffer from:",kt.from,"to",kt.to),he(Y.getAllBufferRanges()),gt.length===0&&(U=!1,Oe()),kt.unintended&&(m.warn("Detected unintended removal from:",kt.from,"to",kt.to,"setting streamprocessor time to",kt.from),Me(t.a.SEEK_TARGET,{time:kt.from})),U?mn():(yt?yt=!1:Oe(),Me(t.a.BUFFER_CLEARED,{from:kt.from,to:kt.to,unintended:kt.unintended,hasEnoughSpaceToAppend:Ln(),quotaExceeded:wt}))}function vn(kt){return new Promise(function(ce){kt&&kt.MSETimeOffset!==void 0&&Y&&Y.updateTimestampOffset?Y.updateTimestampOffset(kt.MSETimeOffset).then(function(){ce()}).catch(function(){ce()}):ce()})}function dn(){return Y&&!_?Y.updateAppendWindow(ut):Promise.resolve()}function hn(){++st*(et.get().streaming.wallclockTimeUpdateInterval/1e3)>=et.get().streaming.buffer.bufferPruningInterval&&(st=0,sn())}function Mn(){Le()}function On(kt){_!==kt&&((_=kt)?Me(t.a.BUFFERING_COMPLETED):k=Number.POSITIVE_INFINITY)}function Nn(){try{var kt,ce,Ie=Y.getAllBufferRanges(),_t=0;if(!Ie)return _t;for(ce=0,kt=Ie.length;ce<kt;ce++)_t+=Ie.end(ce)-Ie.start(ce);return _t}catch{return 0}}function Dn(kt){try{var ce=kt,Ie=Y.getAllBufferRanges();if(!Ie||Ie.length===0)return NaN;for(var _t=0;ce===kt&&_t<Ie.length;){var ye=Ie.start(_t),De=Ie.end(_t);ce>=ye&&ce<=De&&(ce=De),_t+=1}return ce===kt?NaN:ce}catch{}}function Ln(){var kt=Nn();return isNaN(kt)||kt<M}function Me(kt,ce){var Ie=ce||{};Tt.trigger(kt,Ie,{streamId:ut.id,mediaType:St})}function se(kt,ce){if(M=Number.POSITIVE_INFINITY,rt=void 0,k=Number.POSITIVE_INFINITY,q=0,V=null,_=!1,U=!1,wt=!1,R=0,st=0,gt=[],ot=NaN,Y){var Ie=Y;Y=null,kt||ce||Ie.abort().then(function(){Ie.reset(ce),Ie=null})}yt=!1}return i={initialize:function(kt){mt(kt),Tt.on(t.a.INIT_FRAGMENT_LOADED,$t,i),Tt.on(t.a.MEDIA_FRAGMENT_LOADED,Se,i),Tt.on(t.a.WALLCLOCK_TIME_UPDATED,hn,i),Tt.on(o.a.PLAYBACK_PLAYING,Qt,i),Tt.on(o.a.PLAYBACK_PROGRESS,lt,i),Tt.on(o.a.PLAYBACK_TIME_UPDATED,lt,i),Tt.on(o.a.PLAYBACK_RATE_CHANGED,Mn,i),Tt.on(o.a.PLAYBACK_STALLED,Ft,i)},getStreamId:function(){return ut.id},getType:function(){return St},getBufferControllerType:function(){return"BufferController"},createBufferSink:function(kt){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ie,_t){if(ht&&kt&&E){var ye=tt.getQualityFor(St,ut.id);Y=T(Vt).create({mediaSource:E,textController:$,eventBus:Tt}),fe(kt,ce,ye).then(function(){return vn(Kt(ye))}).then(function(){Ie(Y)}).catch(function(De){m.fatal("Caught error on create SourceBuffer: "+De),pt.error(new B.a(H.a.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,H.a.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+St)),_t(De)})}else Ie(null)})},getBuffer:function(){return Y},getBufferLevel:function(){return R},getRangeAt:ne,hasBufferAtTime:function(kt){try{var ce=Y.getAllBufferRanges();if(!ce||ce.length===0)return!1;for(var Ie=0;Ie<ce.length;){var _t=ce.start(Ie),ye=ce.end(Ie);if(kt>=_t&&kt<=ye)return!0;Ie+=1}return!1}catch(De){return m.error(De),!1}},pruneBuffer:sn,setMediaSource:mt,getMediaSource:function(){return E},appendInitSegmentFromCache:function(kt){var ce=ht.extract(ut.id,kt);return!!ce&&(m.info("Append Init fragment",St," with representationId:",ce.representationId," and quality:",ce.quality,", data size:",ce.bytes.byteLength),oe(ce),!0)},getIsBufferingCompleted:function(){return _},setIsBufferingCompleted:On,getIsPruningInProgress:function(){return U},reset:function(kt,ce){Tt.off(t.a.INIT_FRAGMENT_LOADED,$t,this),Tt.off(t.a.MEDIA_FRAGMENT_LOADED,Se,this),Tt.off(t.a.WALLCLOCK_TIME_UPDATED,hn,this),Tt.off(o.a.PLAYBACK_PLAYING,Qt,this),Tt.off(o.a.PLAYBACK_PROGRESS,lt,this),Tt.off(o.a.PLAYBACK_TIME_UPDATED,lt,this),Tt.off(o.a.PLAYBACK_RATE_CHANGED,Mn,this),Tt.off(o.a.PLAYBACK_STALLED,Ft,this),se(kt,ce)},prepareForPlaybackSeek:function(){return _&&On(!1),Y.abort()},prepareForReplacementTrackSwitch:function(kt){return new Promise(function(ce,Ie){Y.abort().then(function(){return dn()}).then(function(){return et.get().streaming.buffer.useChangeTypeForTrackSwitch?Y.changeType(kt):Promise.resolve()}).then(function(){return Pe()}).then(function(){On(!1),ce()}).catch(function(_t){Ie(_t)})})},prepareForNonReplacementTrackSwitch:function(kt){return new Promise(function(ce,Ie){dn().then(function(){return et.get().streaming.buffer.useChangeTypeForTrackSwitch?Y.changeType(kt):Promise.resolve()}).then(function(){ce()}).catch(function(_t){Ie(_t)})})},prepareForReplacementQualitySwitch:function(){return new Promise(function(kt,ce){Y.abort().then(function(){return dn()}).then(function(){return Pe()}).then(function(){On(!1),kt()}).catch(function(Ie){ce(Ie)})})},updateAppendWindow:dn,getAllRangesWithSafetyFactor:Re,getContinuousBufferTimeForTargetTime:Dn,clearBuffers:un,pruneAllSafely:Pe,updateBufferTimestampOffset:vn,setSeekTarget:function(kt){ot=kt},segmentRequestingCompleted:function(kt){isNaN(kt)||(k=kt,xe())}},m=Object(f.a)(Vt).getInstance().getLogger(i),ht=L(Vt).getInstance(),se(),i}J.__dashjs_factory_name="BufferController";var nt=r.a.getClassFactory(J);function j(p){p=p||{};var i,m,_,R,M,E,q=this.context,k=Object(d.a)(q).getInstance(),Y=p.textController,rt=p.errHandler,V=p.streamInfo,st=p.type;function U(gt){R=gt}function wt(gt){var yt,ot;m!==gt&&(m=gt)&&(yt=t.a.BUFFERING_COMPLETED,ot={},k.trigger(yt,ot,{streamId:V.id,mediaType:st}))}function ht(gt){gt.chunk.bytes&&!m&&(E.save(gt.chunk),M.append(gt.chunk),wt(!0))}return i={initialize:function(gt){U(gt)},getStreamId:function(){return V.id},getType:function(){return st},getBufferControllerType:function(){return"NotFragmentedTextBufferController"},createBufferSink:function(gt){return new Promise(function(yt,ot){try{(M=T(q).create({mediaSource:R,textController:Y,eventBus:k})).initializeForFirstUse(V,gt),_||(M.getBuffer()&&typeof M.getBuffer().initialize=="function"&&M.getBuffer().initialize(),_=!0),yt(M)}catch(Vt){rt.error(new B.a(H.a.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,H.a.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+st)),ot(Vt)}})},getBuffer:function(){return M},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:U,getMediaSource:function(){return R},appendInitSegmentFromCache:function(gt){return E.extract(V.id,gt)!==null},getIsBufferingCompleted:function(){return m},setIsBufferingCompleted:wt,getIsPruningInProgress:function(){return!1},reset:function(gt){k.off(t.a.INIT_FRAGMENT_LOADED,ht,i),!gt&&M&&(M.abort(),M.reset(),M=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return m=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},_=!1,R=null,m=!1,E=L(q).getInstance(),k.on(t.a.INIT_FRAGMENT_LOADED,ht,i),i}j.__dashjs_factory_name="NotFragmentedTextBufferController";var O=r.a.getClassFactory(j);function at(p){p=p||{};var i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt=this.context,ht=Object(d.a)(wt).getInstance(),gt=p.dashMetrics,yt=p.mediaPlayerModel,ot=p.fragmentModel,Vt=p.abrController,Tt=p.playbackController,pt=p.textController,zt=p.type,Dt=p.bufferController,W=p.settings;function $(oe){if(!Dt.getIsBufferingCompleted()){tt();var he=isNaN(oe)?0:oe;E=setTimeout(Et,he)}}function tt(){E&&(clearTimeout(E),E=null)}function Et(){try{if(function(){try{return zt===h.a.TEXT&&!pt.isTextEnabled()||Tt.isPaused()&&(!Tt.getStreamController().getInitialPlayback()||!Tt.getStreamController().getAutoPlay())&&!W.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void tt();if(function(){try{return R&&(isNaN(rt)||V||(he=m.id,ze=Vt.getMaxAllowedIndexFor(zt,he),!(!isNaN(Y)&&Y==ze||(_.info("Top quality "+zt+" index has changed from "+Y+" to "+ze),Y=ze,0)))||function(){return!zt||!R?!0:gt.getCurrentBufferLevel(zt)<ut()}())}catch{return!1}var he,ze}()){var oe=!1;U&&(oe=Vt.checkPlaybackQuality(zt,m.id)),oe||(st||R.quality!==rt||V?(V?(_.debug("Switch track for "+zt+", representation id = "+R.id),V=!1):_.debug("Quality has changed, get init request for representationid = "+R.id),ht.trigger(t.a.INIT_FRAGMENT_NEEDED,{representationId:R.id,sender:i},{streamId:m.id,mediaType:zt}),U=!1,st=!1):(_.debug("Media segment needed for ".concat(zt," and stream id ").concat(m.id)),ht.trigger(t.a.MEDIA_FRAGMENT_NEEDED,{},{streamId:m.id,mediaType:zt}),U=!0))}else $(Tt.getLowLatencyModeEnabled()?W.get().streaming.scheduling.lowLatencyTimeout:W.get().streaming.scheduling.defaultTimeout)}catch{$(Tt.getLowLatencyModeEnabled()?W.get().streaming.scheduling.lowLatencyTimeout:W.get().streaming.scheduling.defaultTimeout)}}function ut(){var oe=NaN;return zt&&R?oe=zt===h.a.TEXT?function(){try{if(pt.isTextEnabled()){if(isNaN(R.fragmentDuration)){var he=gt.getCurrentSchedulingInfo(n.a.SCHEDULING_INFO);return he?he.duration:0}return R.fragmentDuration}return 0}catch{return 0}}():zt===h.a.AUDIO&&q?function(){try{var he=gt.getCurrentBufferLevel(h.a.VIDEO);return isNaN(R.fragmentDuration)?he+1:Math.max(he+1,R.fragmentDuration)}catch{return 0}}():function(){try{var he=R.mediaInfo.streamInfo;return Vt.isPlayingAtTopQuality(he)?he.manifestInfo.duration>=W.get().streaming.buffer.longFormContentDurationThreshold?W.get().streaming.buffer.bufferTimeAtTopQualityLongForm:W.get().streaming.buffer.bufferTimeAtTopQuality:yt.getStableBufferTime()}catch{return yt.getStableBufferTime()}}():oe}function St(){et(!0)}function et(oe){if(Tt&&ot){var he=ot.getRequests({state:P.a.FRAGMENT_MODEL_EXECUTED,time:Tt.getTime(),threshold:0})[0];he&&Tt.getTime()>=he.startTime&&((!k.mediaInfo||he.mediaInfo.type===k.mediaInfo.type&&he.mediaInfo.id!==k.mediaInfo.id)&&oe&&ht.trigger(t.a.TRACK_CHANGE_RENDERED,{mediaType:zt,oldMediaInfo:k.mediaInfo,newMediaInfo:he.mediaInfo,streamId:m.id}),he.quality===k.quality&&he.adaptationIndex===k.adaptationIndex||!oe||(_.debug("Quality change rendered for streamId ".concat(m.id," and type ").concat(zt)),ht.trigger(t.a.QUALITY_CHANGE_RENDERED,{mediaType:zt,oldQuality:k.quality,newQuality:he.quality,streamId:m.id})),k={mediaInfo:he.mediaInfo,quality:he.quality,adaptationIndex:he.adaptationIndex})}}function mt(oe){_.debug("Appended bytes for ".concat(oe.mediaType," and stream id ").concat(m.id)),(isNaN(oe.index)||isNaN(rt))&&(rt=oe.quality,_.info("["+zt+"] lastInitializedRepresentationInfo changed to "+oe.quality)),$(0)}function Kt(){ot.abortRequests(),tt()}function fe(){W.get().streaming.scheduling.scheduleWhilePaused||$()}function $t(oe){gt.updatePlayListTraceMetrics({playbackspeed:oe.playbackRate.toString()})}function Se(){U=!0,M=0,rt=NaN,k={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},Y=NaN,V=!1,st=!1}return i={initialize:function(oe){q=oe,ht.on(t.a.BYTES_APPENDED_END_FRAGMENT,mt,i),ht.on(t.a.URL_RESOLUTION_FAILED,Kt,i),ht.on(o.a.PLAYBACK_STARTED,fe,i),ht.on(o.a.PLAYBACK_RATE_CHANGED,$t,i),ht.on(o.a.PLAYBACK_TIME_UPDATED,St,i)},getType:function(){return zt},getStreamId:function(){return m.id},setCurrentRepresentation:function(oe){R=oe},setTimeToLoadDelay:function(oe){M=oe},getTimeToLoadDelay:function(){return M},setSwitchTrack:function(oe){V=oe},getSwitchStrack:function(){return V},startScheduleTimer:$,clearScheduleTimer:tt,reset:function(){ht.off(t.a.BYTES_APPENDED_END_FRAGMENT,mt,i),ht.off(t.a.URL_RESOLUTION_FAILED,Kt,i),ht.off(o.a.PLAYBACK_STARTED,fe,i),ht.off(o.a.PLAYBACK_RATE_CHANGED,$t,i),ht.off(o.a.PLAYBACK_TIME_UPDATED,St,i),tt(),et(!1),Se(),m=null},getBufferTarget:ut,getPlaybackController:function(){return Tt},setCheckPlaybackQuality:function(oe){U=oe},setInitSegmentRequired:function(oe){st=oe}},_=Object(f.a)(wt).getInstance().getLogger(i),Se(),m=p.streamInfo,i}at.__dashjs_factory_name="ScheduleController";var X=r.a.getClassFactory(at),z=x(65),vt=x(15),Mt=x(39),Pt=x(20),ge=x(13),Q=x(23);function ft(p){return(ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Ht(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(ft(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(ft(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),ft(M)==="symbol"?M:String(M)),_)}var R,M}function _e(p,i,m){return i&&Ht(p.prototype,i),m&&Ht(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}function Jt(p,i){if(!(p instanceof i))throw new TypeError("Cannot call a class as a function")}var Te=_e(function p(){Jt(this,p),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]});Te.INITIAL_PLAYOUT_START_REASON="initial_playout",Te.SEEK_START_REASON="seek",Te.RESUME_FROM_PAUSE_START_REASON="resume",Te.METRICS_COLLECTION_START_REASON="metrics_collection_start";var It=_e(function p(){Jt(this,p),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null});It.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",It.REBUFFERING_REASON="rebuffering",It.USER_REQUEST_STOP_REASON="user_request",It.END_OF_PERIOD_STOP_REASON="end_of_period",It.END_OF_CONTENT_STOP_REASON="end_of_content",It.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",It.FAILURE_STOP_REASON="failure";var Wt=x(40);function Yt(p){p=p||{};var i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt=this.context,ht=Object(d.a)(wt).getInstance(),gt=p.streamInfo,yt=p.type,ot=p.errHandler,Vt=p.mimeType,Tt=p.timelineConverter,pt=p.adapter,zt=p.manifestModel,Dt=p.mediaPlayerModel,W=p.fragmentModel,$=p.abrController,tt=p.playbackController,Et=p.mediaController,ut=p.textController,St=p.dashMetrics,et=p.settings,mt=p.boxParser,Kt=p.segmentBlacklistController;function fe(){return gt.id}function $t(){return yt}function Se(){return pt.getIsTextTrack(k.getData())}function oe(){M=[],R=null,U=0,Y=!1,rt=!1}function he(se){var kt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(se.sender){if(tt.getIsManifestUpdateInProgress())Ft();else if((!Se()||ut.isTextEnabled())&&E&&se.representationId&&!E.appendInitSegmentFromCache(se.representationId)){var ce=k.getCurrentRepresentation();if(ce.range===0)return void ze();var Ie=V?V.getInitRequest(R,ce):null;Ie?W.executeRequest(Ie):kt&&(q.setInitSegmentRequired(!0),Ft())}}}function ze(se){var kt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(tt.getIsManifestUpdateInProgress()||E.getIsPruningInProgress())Ft();else{var ce=lt();ce?(Y=!1,Pe(ce)):Re(kt)}}function Pe(se){isNaN(se.startTime+se.duration)||(U=se.startTime+se.duration),se.delayLoadingTime=new Date().getTime()+q.getTimeToLoadDelay(),q.setTimeToLoadDelay(0),function(kt){var ce=kt.url;return kt.range&&(ce=ce.concat("_",kt.range)),Kt.contains(ce)}(se)?(m.warn("Fragment request url ".concat(se.url," for stream id ").concat(gt.id," and media type ").concat(yt," is on the ignore list and will be skipped")),Ft()):(m.debug("Next fragment request url for stream id ".concat(gt.id," and media type ").concat(yt," is ").concat(se.url)),W.executeRequest(se))}function Re(se){var kt,ce=k.getCurrentRepresentation();if(et.get().streaming.gaps.enableSeekFix&&(Y||tt.getTime()===0)&&(_?_&&ce.segmentInfoType===c.a.SEGMENT_TIMELINE&&(kt=V.getValidTimeAheadOfTargetTime(U,R,ce,et.get().streaming.gaps.threshold)):kt=V.getValidTimeAheadOfTargetTime(U,R,ce,et.get().streaming.gaps.threshold),!isNaN(kt)&&kt!==U))return void(tt.isSeeking()||tt.getTime()===0?(m.warn("Adjusting playback time ".concat(kt," because of gap in the manifest. Seeking by ").concat(kt-U)),tt.seek(kt,!1,!1)):(m.warn("Adjusting buffering time ".concat(kt," because of gap in the manifest. Adjusting time by ").concat(kt-U)),Me(kt),se&&Ft()));if(V.isLastSegmentRequested(ce,U)){var Ie=V.getCurrentIndex();return m.debug("Segment requesting for stream ".concat(gt.id," has finished")),ht.trigger(t.a.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ie},{streamId:gt.id,mediaType:yt}),E.segmentRequestingCompleted(Ie),void q.clearScheduleTimer()}se&&Ft()}function lt(){var se,kt=hn();if(isNaN(U)||$t()===h.a.TEXT&&!ut.isTextEnabled())return null;var ce=Y;if(V){var Ie=k&&kt?k.getRepresentationForQuality(kt.quality):null;se=ce?V.getSegmentRequestForTime(R,Ie,U):V.getNextSegmentRequest(R,Ie)}return se}function Ft(){q.startScheduleTimer(tt.getLowLatencyModeEnabled()?et.get().streaming.scheduling.lowLatencyTimeout:et.get().streaming.scheduling.defaultTimeout)}function Qt(se){se.error||(q.setCurrentRepresentation(pt.convertRepresentationToRepresentationInfo(se.currentRepresentation)),E.getIsBufferingCompleted()||E.updateBufferTimestampOffset(se.currentRepresentation))}function ne(se){St.addBufferState(yt,se.state,q.getBufferTarget()),se.state!==n.a.BUFFER_EMPTY||tt.isSeeking()||(m.info("Buffer is empty! Stalling!"),St.pushPlayListTraceMetrics(new Date,It.REBUFFERING_REASON))}function Oe(se){W.syncExecutedRequestsWithBufferedRange(E.getBuffer().getAllBufferRanges(),gt.duration),se.quotaExceeded&&se.from>tt.getTime()&&Me(se.from),se.hasEnoughSpaceToAppend&&se.quotaExceeded&&q.startScheduleTimer()}function xe(se){if(se&&se.lastRequestAppended&&se.lastRequestAppended.url){var kt=se.lastRequestAppended.url;se.lastRequestAppended.range&&(kt=kt.concat("_",se.lastRequestAppended.range)),m.warn("Blacklisting segment with url ".concat(kt)),Kt.add(kt)}}function Le(){Dn(),rt=!1}function tn(se){m.info("onFragmentLoadingAbandoned request: "+se.request.url+" has been aborted"),tt.isSeeking()||q.getSwitchStrack()||rt||(m.info("onFragmentLoadingAbandoned request: "+se.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),se.request&&se.request.isInitializationRequest()?q.setInitSegmentRequired(!0):Me(se.request.startTime+se.request.duration/2),q.startScheduleTimer(0))}function sn(se){m.info("OnFragmentLoadingCompleted for stream id "+gt.id+" and media type "+yt+" - Url:",se.request?se.request.url:"undefined",se.request.range?", Range:"+se.request.range:""),Se()&&q.startScheduleTimer(0),se.error&&se.request.serviceLocation&&function(kt){m.info("Fragment loading completed with an error"),!(!kt||!kt.request||!kt.request.type)&&(kt.request.type===y.a.INIT_SEGMENT_TYPE?he({representationId:kt.request.representationId,sender:{}},!1):kt.request.type===y.a.MEDIA_SEGMENT_TYPE&&(Me(kt.request.startTime+kt.request.duration/2),ze({},!1)))}(se)}function Ye(){Me(tt.getTime()),dn().startScheduleTimer()}function un(se){var kt=se.currentTrackInfo;if(kt){var ce=M.find(function(Ie){return Ie.index===kt.index&&Ie.lang===kt.lang});ce&&vn(ce).then(function(){E.setIsBufferingCompleted(!1),Me(tt.getTime()),q.setInitSegmentRequired(!0),q.startScheduleTimer()})}}function mn(se){Me(se.quotaExceededTime),q.clearScheduleTimer()}function bn(){return E?E.getBuffer():null}function vn(se){se===R||se&&R&&se.type!==R.type||(R=se);var kt=pt.getRealAdaptation(gt,R),ce=pt.getVoRepresentations(R);if(k){var Ie,_t=k.getData(),ye=$.getMaxAllowedIndexFor(yt,gt.id),De=$.getMinAllowedIndexFor(yt,gt.id),le=null;return _t!==null&&_t.id===kt.id||yt===h.a.TEXT?Ie=$.getQualityFor(yt,gt.id):(le=$.getThroughputHistory().getAverageThroughput(yt,_)||$.getInitialBitrateFor(yt,gt.id),Ie=$.getQualityForBitrate(R,le,gt.id)),De!==void 0&&Ie<De&&(Ie=De),Ie>ye&&(Ie=ye),k.updateData(kt,ce,yt,R.isFragmented,Ie)}return Promise.resolve()}function dn(){return q}function hn(se){var kt;return se!==void 0?(Object(vt.a)(se),kt=k?k.getRepresentationForQuality(se):null):kt=k?k.getCurrentRepresentation():null,pt.convertRepresentationToRepresentationInfo(kt)}function Mn(){return!!E&&E.getIsBufferingCompleted()}function On(se){var kt=se.chunk,ce=kt.bytes,Ie=kt.quality,_t=hn(Ie),ye=k&&_t?k.getRepresentationForQuality(_t.quality):null;if(_t&&ye){var De=pt.getEventsFor(_t.mediaInfo,null,gt),le=pt.getEventsFor(_t,ye,gt);if(De&&De.length>0||le&&le.length>0){var qe=function(fn,pn,En,or){try{for(var Xn={},hr=[],gr=En.concat(or),Dr=0,Sr=gr.length;Dr<Sr;Dr++)Xn[gr[Dr].schemeIdUri+"/"+gr[Dr].value]=gr[Dr];var Yr=Object(Q.a)(wt).getInstance().parse(fn),Nr=Yr.getBoxes("emsg");if(!Nr||Nr.length===0)return hr;for(var Pr=Yr.getBox("sidx"),ti=!Pr||isNaN(Pr.earliest_presentation_time)||isNaN(Pr.timescale)?pn&&!isNaN(pn.mediaStartTime)?pn.mediaStartTime:0:Pr.earliest_presentation_time/Pr.timescale,kr=Math.max(ti,0),Mr=k.getCurrentRepresentation(),Wr=0,Li=Nr.length;Wr<Li;Wr++){var Ur=pt.getEvent(Nr[Wr],Xn,kr,Mr);Ur&&hr.push(Ur)}return hr}catch{return[]}}(ce,W.getRequests({state:P.a.FRAGMENT_MODEL_EXECUTED,quality:Ie,index:kt.index})[0],De,le);ht.trigger(t.a.INBAND_EVENTS,{events:qe},{streamId:gt.id})}}}function Nn(){var se=tt.getTime();et.get().streaming.buffer.flushBufferAtTrackSwitch&&tt.seek(se+.001,!1,!0),Me(se),E.setSeekTarget(se),q.startScheduleTimer()}function Dn(){var se=tt.getTime(),kt=E.getContinuousBufferTimeForTargetTime(se);Me(isNaN(kt)?se:kt),q.startScheduleTimer()}function Ln(se){se&&!isNaN(se.time)&&(Me(se.time),E.setSeekTarget(se.time))}function Me(se){U=se,Y=!0}return i={initialize:function(se,kt,ce){st=Object(Wt.a)(wt).create({events:t.a,eventBus:ht,streamInfo:gt,timelineConverter:Tt,dashConstants:c.a,segmentBaseController:p.segmentBaseController,type:yt}),V=Object(Mt.a)(wt).create({streamInfo:gt,type:yt,timelineConverter:Tt,dashMetrics:St,mediaPlayerModel:Dt,baseURLController:p.baseURLController,errHandler:ot,segmentsController:st,settings:et,boxParser:mt,events:t.a,eventBus:ht,errors:H.a,debug:Object(f.a)(wt).getInstance(),requestModifier:Object(Pt.a)(wt).getInstance(),dashConstants:c.a,constants:h.a,urlUtils:Object(ge.a)(wt).getInstance()}),_=gt.manifestInfo.isDynamic,V.initialize(_),$.registerStreamType(yt,i),k=Object(z.a)(wt).create({streamInfo:gt,type:yt,abrController:$,dashMetrics:St,playbackController:tt,timelineConverter:Tt,dashConstants:c.a,events:t.a,eventBus:ht,errors:H.a,isDynamic:_,segmentsController:st}),(E=function(Ie,_t){var ye=null;return Ie?(ye=Ie!==h.a.TEXT||_t?nt(wt).create({streamInfo:gt,type:Ie,mediaPlayerModel:Dt,manifestModel:zt,fragmentModel:W,errHandler:ot,mediaController:Et,representationController:k,adapter:pt,textController:ut,abrController:$,playbackController:tt,settings:et}):O(wt).create({streamInfo:gt,type:Ie,mimeType:Vt,fragmentModel:W,textController:ut,errHandler:ot,settings:et}),ye):(ot.error(new B.a(H.a.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,H.a.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(yt,ce))&&E.initialize(se),(q=X(wt).create({streamInfo:gt,type:yt,mimeType:Vt,adapter:pt,dashMetrics:St,mediaPlayerModel:Dt,fragmentModel:W,abrController:$,playbackController:tt,textController:ut,mediaController:Et,bufferController:E,settings:et})).initialize(kt),U=0,Y=!1},getStreamId:fe,getType:$t,isUpdating:function(){return!!k&&k.isUpdating()},getBufferController:function(){return E},getFragmentModel:function(){return W},getScheduleController:dn,getRepresentationController:function(){return k},getRepresentationInfo:hn,getBufferLevel:function(){return E?E.getBufferLevel():0},isBufferingCompleted:Mn,createBufferSinks:function(se){var kt=bn();return kt?Promise.resolve(kt):E?E.createBufferSink(R,se):Promise.resolve(null)},updateStreamInfo:function(se){return gt=se,Mn()?Promise.resolve():E.updateAppendWindow()},getStreamInfo:function(){return gt},selectMediaInfo:vn,clearMediaInfoArray:function(){M=[]},addMediaInfo:function(se){M.indexOf(se)===-1&&M.push(se)},prepareTrackSwitch:function(){return new Promise(function(se){m.debug("Preparing track switch for type ".concat(yt));var kt=yt===h.a.TEXT||et.get().streaming.trackSwitchMode[yt]===h.a.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&tt.getTimeToStreamEnd(gt)>et.get().streaming.buffer.stallThreshold;if(E.getIsBufferingCompleted()&&!kt)return E.prepareForNonReplacementTrackSwitch(R.codec).then(function(){ht.trigger(t.a.BUFFERING_COMPLETED,{},{streamId:gt.id,mediaType:yt})}).catch(function(){ht.trigger(t.a.BUFFERING_COMPLETED,{},{streamId:gt.id,mediaType:yt})}),void se();q.clearScheduleTimer(),q.setSwitchTrack(!0),kt?(ht.trigger(t.a.BUFFER_REPLACEMENT_STARTED,{mediaType:yt,streamId:gt.id},{mediaType:yt,streamId:gt.id}),W.abortRequests(),E.prepareForReplacementTrackSwitch(R.codec).then(function(){var ce=hn();return E.updateBufferTimestampOffset(ce)}).then(function(){Nn(),se()}).catch(function(){Nn(),se()})):E.prepareForNonReplacementTrackSwitch(R.codec).then(function(){Dn(),se()}).catch(function(){Dn(),se()})})},prepareQualityChange:function(se){m.debug("Preparing quality switch for type ".concat(yt));var kt=se.newQuality;rt=!0,q.clearScheduleTimer();var ce=hn(kt);q.setCurrentRepresentation(ce),k.prepareQualityChange(kt),W.abortRequests(),E.updateBufferTimestampOffset(ce).then(function(){se.reason&&se.reason.forceReplace?(ht.trigger(t.a.BUFFER_REPLACEMENT_STARTED,{mediaType:yt,streamId:gt.id},{mediaType:yt,streamId:gt.id}),E.prepareForReplacementQualitySwitch().then(function(){Nn(),rt=!1}).catch(function(){Nn(),rt=!1})):et.get().streaming.buffer.fastSwitchEnabled?function(Ie){var _t=tt.getTime(),ye=1.5*(isNaN(Ie.fragmentDuration)?1:Ie.fragmentDuration),De=W.getRequests({state:P.a.FRAGMENT_MODEL_EXECUTED,time:_t+ye,threshold:0})[0];if(De&&!Se()){var le=E.getBufferLevel(),qe=$.getAbandonmentStateFor(gt.id,yt);De.quality<Ie.quality&&le>=ye&&qe!==n.a.ABANDON_LOAD?(Me(_t+ye),q.setCheckPlaybackQuality(!1),q.startScheduleTimer()):Le()}else q.startScheduleTimer();rt=!1}(ce):Le(),St.pushPlayListTraceMetrics(new Date,It.REPRESENTATION_SWITCH_STOP_REASON),St.createPlaylistTraceMetrics(ce.id,1e3*tt.getTime(),tt.getPlaybackRate())})},getMediaInfo:function(){return R},getMediaSource:function(){return E.getMediaSource()},setMediaSource:function(se){E.setMediaSource(se)},getBuffer:bn,setExplicitBufferingTime:Me,finalisePlayList:function(se,kt){St.pushPlayListTraceMetrics(se,kt)},probeNextRequest:function(){var se=hn(),kt=k&&se?k.getRepresentationForQuality(se.quality):null;return V.getNextSegmentRequestIdempotent(R,kt)},prepareInnerPeriodPlaybackSeeking:function(se){return new Promise(function(kt){if(E.hasBufferAtTime(se.seekTime))return E.pruneBuffer(),void kt();q.clearScheduleTimer(),W.abortRequests(),E.prepareForPlaybackSeek().then(function(){var ce=E.getAllRangesWithSafetyFactor(se.seekTime);return E.clearBuffers(ce)}).then(function(){var ce=E.getContinuousBufferTimeForTargetTime(se.seekTime);if(!isNaN(ce)&&!isNaN(gt.duration)&&isFinite(gt.duration)&&ce>=gt.start+gt.duration)E.setIsBufferingCompleted(!0),kt();else{var Ie=isNaN(ce)?se.seekTime:ce;Me(Ie),E.setSeekTarget(Ie);var _t=[];_t.push(E.updateAppendWindow());var ye=hn();_t.push(E.updateBufferTimestampOffset(ye)),Promise.all(_t).then(function(){q.setInitSegmentRequired(!0),q.setCheckPlaybackQuality(!1),q.startScheduleTimer(),kt()})}}).catch(function(ce){m.error(ce)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(se,kt){try{q.clearScheduleTimer(),W.abortRequests(),E.prepareForPlaybackSeek().then(function(){return E.pruneAllSafely()}).then(function(){se()})}catch(ce){kt(ce)}})},reset:function(se,kt){V&&V.reset(),E&&(E.reset(se,kt),E=null),q&&(q.reset(),q=null),k&&(k.reset(),k=null),st&&(st=null),$&&$.unRegisterStreamType(fe(),yt),ht.off(t.a.DATA_UPDATE_COMPLETED,Qt,i),ht.off(t.a.INIT_FRAGMENT_NEEDED,he,i),ht.off(t.a.MEDIA_FRAGMENT_NEEDED,ze,i),ht.off(t.a.MEDIA_FRAGMENT_LOADED,On,i),ht.off(t.a.BUFFER_LEVEL_STATE_CHANGED,ne,i),ht.off(t.a.BUFFER_CLEARED,Oe,i),ht.off(t.a.SEEK_TARGET,Ln,i),ht.off(t.a.FRAGMENT_LOADING_ABANDONED,tn,i),ht.off(t.a.FRAGMENT_LOADING_COMPLETED,sn,i),ht.off(t.a.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ye,i),ht.off(t.a.SET_NON_FRAGMENTED_TEXT,un,i),ht.off(t.a.QUOTA_EXCEEDED,mn,i),ht.off(t.a.SOURCE_BUFFER_ERROR,xe,i),oe(),yt=null,gt=null}},m=Object(f.a)(wt).getInstance().getLogger(i),oe(),ht.on(t.a.DATA_UPDATE_COMPLETED,Qt,i,{priority:d.a.EVENT_PRIORITY_HIGH}),ht.on(t.a.INIT_FRAGMENT_NEEDED,he,i),ht.on(t.a.MEDIA_FRAGMENT_NEEDED,ze,i),ht.on(t.a.MEDIA_FRAGMENT_LOADED,On,i),ht.on(t.a.BUFFER_LEVEL_STATE_CHANGED,ne,i),ht.on(t.a.BUFFER_CLEARED,Oe,i),ht.on(t.a.SEEK_TARGET,Ln,i),ht.on(t.a.FRAGMENT_LOADING_ABANDONED,tn,i),ht.on(t.a.FRAGMENT_LOADING_COMPLETED,sn,i),ht.on(t.a.QUOTA_EXCEEDED,mn,i),ht.on(t.a.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ye,i),ht.on(t.a.SET_NON_FRAGMENTED_TEXT,un,i),ht.on(t.a.SOURCE_BUFFER_ERROR,xe,i),i}Yt.__dashjs_factory_name="StreamProcessor";var e=r.a.getClassFactory(Yt),u=x(66),l=x(69);function G(p){p=p||{};var i,m,_,R=this.context,M=Object(d.a)(R).getInstance(),E=p.errHandler,q=p.mediaPlayerModel,k=p.dashMetrics,Y=Object(f.a)(R).getInstance(),rt=p.streamInfo;function V(){return rt.id}function st(){for(var wt in _)_[wt].reset();_={}}function U(wt){if(wt.sender){var ht=wt.request,gt=wt.response,yt=ht.isInitializationRequest(),ot=ht.mediaInfo.streamInfo;if(wt.error&&(ht.mediaType===h.a.AUDIO||ht.mediaType===h.a.VIDEO||ht.mediaType===h.a.TEXT&&ht.mediaInfo.isFragmented)&&M.trigger(t.a.SERVICE_LOCATION_BLACKLIST_ADD,{entry:wt.request.serviceLocation}),gt&&ot){var Vt=function(Tt,pt,zt,Dt){var W=new u.a;return W.streamId=zt,W.mediaInfo=pt.mediaInfo,W.segmentType=pt.type,W.start=pt.startTime,W.duration=pt.duration,W.end=W.start+W.duration,W.bytes=Tt,W.index=pt.index,W.quality=pt.quality,W.representationId=pt.representationId,W.endFragment=Dt,W}(gt,ht,rt.id,wt.type!==t.a.FRAGMENT_LOADING_PROGRESS);M.trigger(yt?t.a.INIT_FRAGMENT_LOADED:t.a.MEDIA_FRAGMENT_LOADED,{chunk:Vt,request:ht},{streamId:ot.id,mediaType:ht.mediaType})}else m.warn("No "+ht.mediaType+" bytes to push or stream is inactive.")}}return i={getStreamId:V,getModel:function(wt){var ht=_[wt];return ht||(ht=Object(P.a)(R).create({streamInfo:rt,type:wt,dashMetrics:k,fragmentLoader:Object(l.a)(R).create({dashMetrics:k,mediaPlayerModel:q,errHandler:E,requestModifier:Object(Pt.a)(R).getInstance(),settings:p.settings,boxParser:p.boxParser,eventBus:M,events:t.a,errors:H.a,dashConstants:p.dashConstants,urlUtils:p.urlUtils,streamId:V()}),debug:Y,eventBus:M,events:t.a}),_[wt]=ht),ht},reset:function(){M.off(o.a.FRAGMENT_LOADING_COMPLETED,U,this),M.off(o.a.FRAGMENT_LOADING_PROGRESS,U,this),st()}},m=Y.getLogger(i),st(),M.on(o.a.FRAGMENT_LOADING_COMPLETED,U,i),M.on(o.a.FRAGMENT_LOADING_PROGRESS,U,i),i}G.__dashjs_factory_name="FragmentController";var A=r.a.getClassFactory(G);function F(p){return(F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function K(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(F(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(F(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),F(M)==="symbol"?M:String(M)),_)}var R,M}function Z(p,i,m){return i&&K(p.prototype,i),m&&K(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var bt=Z(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}),it=x(35);function ct(p){return(ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function jt(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(ct(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(ct(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),ct(M)==="symbol"?M:String(M)),_)}var R,M}function me(p,i,m){return i&&jt(p.prototype,i),m&&jt(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var ue=me(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}),Ct=x(12);function Nt(p){var i,m,_=this.context,R=p.streamInfo;function M(q){m.setTrackByIndex(q)}function E(){m&&m.reset()}return i={getStreamId:function(){return R.id},initialize:function(){m.addTracks();var q=m.getTracks();q&&q.length>0&&M(0)},provide:function(q,k){if(typeof k=="function"){var Y,rt,V=m.getCurrentTrack();if(!V||V.segmentDuration<=0||q==null)k(null);else{(rt=m.getThumbnailRequestForTime(q))&&(V.segmentDuration=rt.duration),Y=q%V.segmentDuration;var st=Math.floor(Y*V.tilesHor*V.tilesVert/V.segmentDuration),U=new bt;if(U.width=Math.floor(V.widthPerTile),U.height=Math.floor(V.heightPerTile),U.x=Math.floor(st%V.tilesHor)*V.widthPerTile,U.y=Math.floor(st/V.tilesHor)*V.heightPerTile,"readThumbnail"in V)return V.readThumbnail(q,function(ht){U.url=ht,k(U)});if(rt)U.url=rt.url,V.segmentDuration=NaN;else{var wt=Math.floor(q/V.segmentDuration);U.url=function(ht,gt){var yt=gt+ht.startNumber,ot=Object(Ct.d)(ht.templateUrl,"Number",yt);return ot=Object(Ct.d)(ot,"Time",(yt-1)*ht.segmentDuration*ht.timescale),ot=Object(Ct.d)(ot,"Bandwidth",ht.bandwidth),Object(Ct.e)(ot)}(V,wt)}k(U)}}},setTrackByIndex:M,getCurrentTrackIndex:function(){return m.getCurrentTrackIndex()},getBitrateList:function(){var q=m.getTracks(),k=0;return q.map(function(Y){var rt=new ue;return rt.mediaType=h.a.IMAGE,rt.qualityIndex=k++,rt.bitrate=Y.bitrate,rt.width=Y.width,rt.height=Y.height,rt})},reset:E},E(),m=Object(it.b)(_).create({streamInfo:R,adapter:p.adapter,baseURLController:p.baseURLController,timelineConverter:p.timelineConverter,debug:p.debug,eventBus:p.eventBus,events:p.events,dashConstants:p.dashConstants,dashMetrics:p.dashMetrics,segmentBaseController:p.segmentBaseController}),i}Nt.__dashjs_factory_name="ThumbnailController";var Ot=r.a.getClassFactory(Nt);function Gt(p){var i;p=p||{};var m=[],_=Object(d.a)(this.context).getInstance(),R=p.updateEventName,M=p.addBlacklistEventName;function E(k){m.indexOf(k)===-1&&(m.push(k),_.trigger(R,{entry:k}))}function q(k){E(k.entry)}return i={add:E,contains:function(k){return!!(m.length&&k&&k.length)&&m.indexOf(k)!==-1},reset:function(){m=[]}},M&&_.on(M,q,i),i}Gt.__dashjs_factory_name="BlackListController";var ve=r.a.getClassFactory(Gt),Ae=[h.a.VIDEO,h.a.AUDIO,h.a.TEXT,h.a.MUXED,h.a.IMAGE];function ie(p){p=p||{};var i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt,ot,Vt=this.context,Tt=Object(d.a)(Vt).getInstance(),pt=Object(ge.a)(Vt).getInstance(),zt=p.manifestModel,Dt=p.mediaPlayerModel,W=p.dashMetrics,$=p.manifestUpdater,tt=p.adapter,Et=p.timelineConverter,ut=p.capabilities,St=p.errHandler,et=p.abrController,mt=p.playbackController,Kt=p.eventController,fe=p.mediaController,$t=p.protectionController,Se=p.textController,oe=p.videoModel,he=p.streamInfo,ze=p.settings;function Pe(Me,se){return new Promise(function(kt,ce){Le(),rt=!0,sn();var Ie,_t=oe.getElement();Ae.forEach(function(ye){(ye!==h.a.VIDEO||!_t||_t&&/^VIDEO$/i.test(_t.nodeName))&&function(De,le){var qe,fn=tt.getAllMediaInfoForType(he,De),pn=[],En=null;if(!fn||fn.length===0)return void m.info("No "+De+" data.");De===h.a.VIDEO&&(q=!0),De===h.a.AUDIO&&(k=!0);for(var or=0,Xn=fn.length;or<Xn;or++)En=fn[or],De===h.a.TEXT&&En.isEmbedded&&(Se.addEmbeddedTrack(he,En),pn.push(En)),Re(En)&&fe.addTrack(En);if(pn.length>0&&(fe.setInitialMediaSettingsForType(De,he),Se.addMediaInfosToBuffer(he,De,pn)),(fn=fn.filter(function(gr){return!gr.isEmbedded})).length!==0){if(De===h.a.IMAGE)return void(st=Ot(Vt).create({streamInfo:he,adapter:tt,baseURLController:p.baseURLController,timelineConverter:p.timelineConverter,debug:gt,eventBus:Tt,events:t.a,dashConstants:c.a,dashMetrics:p.dashMetrics,segmentBaseController:p.segmentBaseController})).initialize();Tt.trigger(t.a.STREAM_INITIALIZING,{streamInfo:he,mediaInfo:En}),fe.setInitialMediaSettingsForType(De,he);var hr=function(gr,Dr){var Sr=gr&&gr.length>0?gr[0]:null,Yr=V.getModel(Sr?Sr.type:null),Nr=Sr?Sr.type:null,Pr=Sr?Sr.mimeType:null,ti=Sr?Sr.isFragmented:null,kr=e(Vt).create({streamInfo:he,type:Nr,mimeType:Pr,timelineConverter:Et,adapter:tt,manifestModel:zt,mediaPlayerModel:Dt,fragmentModel:Yr,dashMetrics:p.dashMetrics,baseURLController:p.baseURLController,segmentBaseController:p.segmentBaseController,abrController:et,playbackController:mt,mediaController:fe,textController:Se,errHandler:St,settings:ze,boxParser:ht,segmentBlacklistController:U});kr.initialize(Dr,q,ti),_.push(kr);for(var Mr=0;Mr<gr.length;Mr++)kr.addMediaInfo(gr[Mr]);return Nr===h.a.TEXT&&Se.addMediaInfosToBuffer(he,Nr,gr,Yr),kr}(fn,le);(qe=fe.getCurrentTrackFor(De,he.id))&&(et.updateTopQualityIndex(qe),hr.selectMediaInfo(De===h.a.TEXT&&qe.isEmbedded?fn[0]:qe))}}(ye,Me)}),(Ie=se,new Promise(function(ye){var De={},le=_.map(function(qe){return qe.createBufferSinks(Ie)});Promise.all(le).then(function(qe){qe.forEach(function(fn){fn&&(De[fn.getType()]=fn)}),ye(De)}).catch(function(){ye(De)})})).then(function(ye){if(rt=!1,_.length===0){var De="No streams to play.";St.error(new B.a(H.a.MANIFEST_ERROR_ID_NOSTREAMS_CODE,De,zt.getValue())),m.fatal(De)}else Ye();Se.createTracks(he),kt(ye)}).catch(function(ye){ce(ye)})})}function Re(Me){var se,kt=Me?Me.type:null;return kt===h.a.MUXED?(se="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",m.fatal(se),St.error(new B.a(H.a.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,se,zt.getValue())),!1):kt===h.a.TEXT||kt===h.a.IMAGE||!(Me.contentProtection&&!ut.supportsEncryptedMedia())||(St.error(new B.a(H.a.CAPABILITY_MEDIAKEYS_ERROR_CODE,H.a.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),!1)}function lt(Me){for(var se=_?_.length:0,kt=0;kt<se;kt++){var ce=_[kt].getFragmentModel();ce.abortRequests(),ce.resetInitialSettings(),_[kt].reset(!1,Me)}Se&&Se.deactivateStream(he),_=[],M=!1,E=!1,Dn(!1),Qt(!1),Tt.trigger(t.a.STREAM_DEACTIVATED,{streamInfo:he})}function Ft(Me){lt(Me),R=!1,q=!1,k=!1,Y={},rt=!1,yt=!1,ot=[]}function Qt(Me){yt=Me}function ne(){return he?he.start:NaN}function Oe(){return he?he.id:null}function xe(){return he}function Le(){if(!oe||!et)throw new Error(h.a.MISSING_CONFIG_ERROR)}function tn(Me){Me.error&&(St.error(Me.error),m.fatal(Me.error.message))}function sn(){if(Kt){var Me=tt.getEventsFor(he);Me&&Me.length>0&&Kt.addInlineEvents(Me,he.id)}}function Ye(){for(var Me=_.length,se=Y.audio||Y.video?new B.a(H.a.DATA_UPDATE_FAILED_ERROR_CODE,H.a.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,kt=0;kt<Me;kt++)if(_[kt].isUpdating()||rt)return;if($t){$t.clearMediaInfoArray();for(var ce=0;ce<Me&&_[ce];ce++){var Ie=_[ce].getType(),_t=_[ce].getMediaInfo();if(Ie===h.a.AUDIO||Ie===h.a.VIDEO||Ie===h.a.TEXT&&_t.isFragmented){var ye=_[ce].getMediaInfo();ye&&$t.initializeForMedia(ye)}}$t.handleKeySystemFromManifest()}se?St.error(se):R||(R=!0,oe.waitForReadyState(h.a.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Tt.trigger(t.a.STREAM_INITIALIZED,{streamInfo:he})}))}function un(){var Me=hn(),se=Me.length;if(se!==0){for(var kt=0;kt<se;kt++)if(!Me[kt].isBufferingCompleted()&&(Me[kt].getType()===h.a.AUDIO||Me[kt].getType()===h.a.VIDEO))return void m.debug("onBufferingCompleted - One streamProcessor has finished but",Me[kt].getType(),"one is not buffering completed");m.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),E=!0,Tt.trigger(t.a.STREAM_BUFFERING_COMPLETED,{streamInfo:he},{streamInfo:he})}else m.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function mn(Me){Y[Me.mediaType]=Me.error,Ye()}function bn(Me){Kt&&Kt.addInbandEvents(Me.events,he.id)}function vn(Me){return Me&&Me.type?dn(Me.type):null}function dn(Me){return Me?hn().filter(function(se){return se.getType()===Me})[0]:null}function hn(){for(var Me,se,kt=[],ce=0;ce<_.length;ce++)(Me=(se=_[ce]).getType())!==h.a.AUDIO&&Me!==h.a.VIDEO&&Me!==h.a.TEXT||kt.push(se);return kt}function Mn(Me,se){var kt=xe(),ce=se.getStreamInfo();if(!ce||!kt)return!0;var Ie=tt.getAdaptationForType(ce.index,Me,ce),_t=tt.getAdaptationForType(kt.index,Me,kt);return Ie&&_t?!(!On(_t)&&On(Ie)):!Ie&&!_t}function On(Me){return!!Me&&!!(Me.ContentProtection||Me.Representation&&Me.Representation.length>0&&Me.Representation[0].ContentProtection)}function Nn(Me,se){var kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Me||!Me.hasOwnProperty("getStreamInfo"))return!1;var ce=Me.getStreamInfo(),Ie=kt?kt.getStreamInfo():xe();if(!ce||!Ie)return!1;var _t=tt.getAdaptationForType(ce.index,se,ce),ye=tt.getAdaptationForType(Ie.index,se,Ie);if(!_t||!ye)return!_t&&!ye;var De=_t&&ye&&_t.mimeType===ye.mimeType,le=ye.Representation_asArray.map(function(En){return En.codecs}),qe=_t.Representation_asArray.map(function(En){return En.codecs}),fn=qe.some(function(En){return le.indexOf(En)>-1}),pn=qe.some(function(En){return le.some(function(or){return ut.codecRootCompatibleWithCodec(or,En)})});return fn||pn&&De}function Dn(Me){wt=Me}function Ln(){return wt}return i={initialize:function(){Tt.on(t.a.BUFFERING_COMPLETED,un,i),Tt.on(t.a.DATA_UPDATE_COMPLETED,mn,i),Tt.on(t.a.INBAND_EVENTS,bn,i),$t&&(Tt.on(t.a.KEY_ERROR,tn,i),Tt.on(t.a.SERVER_CERTIFICATE_UPDATED,tn,i),Tt.on(t.a.LICENSE_REQUEST_COMPLETE,tn,i),Tt.on(t.a.KEY_SYSTEM_SELECTED,tn,i),Tt.on(t.a.KEY_SESSION_CREATED,tn,i),Tt.on(t.a.KEY_STATUSES_CHANGED,tn,i)),Se.initializeForStream(he),Tt.trigger(t.a.STREAM_UPDATED,{streamInfo:he})},getStreamId:function(){return he?he.id:null},activate:function(Me,se){return new Promise(function(kt,ce){if(!M)return Ln()?(M=!0,Tt.trigger(t.a.STREAM_ACTIVATED,{streamInfo:he}),void kt(se)):void function(Ie,_t){return Pe(Ie,_t)}(Me,se).then(function(Ie){M=!0,Tt.trigger(t.a.STREAM_ACTIVATED,{streamInfo:he}),kt(Ie)}).catch(function(Ie){ce(Ie)});kt(se)})},deactivate:lt,getIsActive:function(){return M},getDuration:function(){return he?he.duration:NaN},getStartTime:ne,getId:Oe,getStreamInfo:xe,getHasAudioTrack:function(){return k},getHasVideoTrack:function(){return q},startPreloading:function(Me,se){return new Promise(function(kt,ce){Ln()?ce():(m.info("[startPreloading] Preloading next stream with id ".concat(Oe())),Dn(!0),Pe(Me,se).then(function(){for(var Ie=0;Ie<_.length&&_[Ie];Ie++)_[Ie].setExplicitBufferingTime(ne()),_[Ie].getScheduleController().startScheduleTimer();kt()}).catch(function(){Dn(!1),ce()}))})},getThumbnailController:function(){return st},getBitrateListFor:function(Me){if(Le(),Me===h.a.IMAGE)return st?st.getBitrateList():[];var se=function(kt){for(var ce=null,Ie=0;Ie<_.length;Ie++)if((ce=_[Ie]).getType()===kt)return ce.getMediaInfo();return null}(Me);return et.getBitrateList(se)},updateData:function(Me){return new Promise(function(se){rt=!0,he=Me,Kt&&sn();for(var kt=[],ce=0,Ie=_.length;ce<Ie;ce++){var _t=_[ce],ye=_t.getMediaInfo();kt.push(_t.updateStreamInfo(he));var De=tt.getAllMediaInfoForType(he,_t.getType());if(De){_t.clearMediaInfoArray();for(var le=0;le<De.length;le++){var qe=De[le];_t.addMediaInfo(De[le]),tt.areMediaInfosEqual(ye,qe)&&(et.updateTopQualityIndex(qe),kt.push(_t.selectMediaInfo(qe)))}}}Promise.all(kt).then(function(){for(kt=[];ot.length>0;){var fn=ot.pop(),pn=fn.newMediaInfo,En=vn(fn.oldMediaInfo);if(!En)return;kt.push(En.prepareTrackSwitch()),En.selectMediaInfo(pn)}return Promise.all(kt)}).then(function(){rt=!1,Ye(),Tt.trigger(t.a.STREAM_UPDATED,{streamInfo:he}),se()})})},reset:function(Me){V&&(V.reset(),V=null),et&&he&&et.clearDataForStream(he.id),U&&(U.reset(),U=null),Ft(Me),he=null,Tt.off(t.a.DATA_UPDATE_COMPLETED,mn,i),Tt.off(t.a.BUFFERING_COMPLETED,un,i),Tt.off(t.a.INBAND_EVENTS,bn,i),$t&&(Tt.off(t.a.KEY_ERROR,tn,i),Tt.off(t.a.SERVER_CERTIFICATE_UPDATED,tn,i),Tt.off(t.a.LICENSE_REQUEST_COMPLETE,tn,i),Tt.off(t.a.KEY_SYSTEM_SELECTED,tn,i),Tt.off(t.a.KEY_SESSION_CREATED,tn,i),Tt.off(t.a.KEY_STATUSES_CHANGED,tn,i))},getProcessors:hn,setMediaSource:function(Me){for(var se=0;se<_.length;)Re(_[se].getMediaInfo())?(_[se].setMediaSource(Me),se++):(_[se].reset(),_.splice(se,1));if(_.length===0){var kt="No streams to play.";St.error(new B.a(H.a.MANIFEST_ERROR_ID_NOSTREAMS_CODE,kt+"nostreams",zt.getValue())),m.fatal(kt)}},isMediaCodecCompatible:function(Me){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Nn(Me,h.a.VIDEO,se)&&Nn(Me,h.a.AUDIO,se)},isProtectionCompatible:function(Me){return!Me||Mn(h.a.VIDEO,Me)&&Mn(h.a.AUDIO,Me)},getPreloaded:Ln,getIsEndedEventSignaled:function(){return yt},setIsEndedEventSignaled:Qt,getAdapter:function(){return tt},getHasFinishedBuffering:function(){return E},setPreloaded:Dn,startScheduleControllers:function(){for(var Me=_.length,se=0;se<Me&&_[se];se++)_[se].getScheduleController().startScheduleTimer()},prepareTrackChange:function(Me){if(M&&he){E=!1;var se=Me.newMediaInfo,kt=zt.getValue();tt.setCurrentMediaInfo(he.id,se.type,se);var ce=vn(se);if(ce){var Ie=mt.getTime();m.info("Stream -  Process track changed at current time "+Ie),kt.refreshManifestOnSwitchTrack?(ot.push(Me),$.getIsUpdating()||(m.debug("Stream -  Refreshing manifest for switch track"),$.refreshManifest())):ce.selectMediaInfo(se).then(function(){se.type!==h.a.VIDEO&&se.type!==h.a.AUDIO||et.updateTopQualityIndex(se),ce.prepareTrackSwitch()})}}},prepareQualityChange:function(Me){var se=dn(Me.mediaType);se&&se.prepareQualityChange(Me)}},function(){try{gt=Object(f.a)(Vt).getInstance(),m=gt.getLogger(i),Ft(),ht=Object(Q.a)(Vt).getInstance(),U=ve(Vt).create({updateEventName:t.a.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:t.a.SEGMENT_LOCATION_BLACKLIST_ADD}),V=A(Vt).create({streamInfo:he,mediaPlayerModel:Dt,dashMetrics:W,errHandler:St,settings:ze,boxParser:ht,dashConstants:c.a,urlUtils:pt})}catch(Me){throw Me}}(),i}ie.__dashjs_factory_name="Stream";var Zt=r.a.getClassFactory(ie);function ee(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st=this.context,U=Object(d.a)(st).getInstance(),wt=Object(ge.a)(st).getInstance();function ht(){m=NaN,E=!1,R=!0,M=!1,gt()}function gt(){_!==null&&(clearTimeout(_),_=null)}function yt($){gt(),M||(isNaN($)&&!isNaN(m)&&($=1e3*m),isNaN($)||(i.debug("Refresh manifest in "+$+" milliseconds."),_=setTimeout(Tt,$)))}function ot(){var $=arguments.length>0&&arguments[0]!==void 0&&arguments[0];E=!0;var tt=k.getValue(),Et=tt.url,ut=Y.getPatchLocation(tt),St=Y.getLocation(tt);ut&&!$?Et=ut:St&&(Et=St),wt.isRelative(Et)&&(Et=wt.resolve(Et,tt.url)),q.load(Et)}function Vt($){if($){if(Y.getIsPatch($)){var tt=$;$=k.getValue();var Et=Y.isPatchValid($,tt),ut=Et;if(Et){var St=Y.getPublishTime($);ut=Y.applyPatchToManifest($,tt);var et=Y.getPublishTime($);ut=St.getTime()!=et.getTime()}if(!ut)return i.debug("Patch provided is invalid, performing full manifest refresh"),void ot(!0);$.loadedTime=new Date}}else($=k.getValue()).loadedTime=new Date;if(k.getValue()&&k.getValue().type===c.a.DYNAMIC&&$.type===c.a.STATIC)return U.trigger(t.a.DYNAMIC_TO_STATIC),E=!1,void(M=!0);k.setValue($);var mt=new Date,Kt=(mt.getTime()-$.loadedTime.getTime())/1e3;1e3*(m=Y.getManifestUpdatePeriod($,Kt))>2147483647&&(m=2147483647e-3),U.trigger(t.a.MANIFEST_UPDATED,{manifest:$}),i.info("Manifest has been refreshed at "+mt+"["+mt.getTime()/1e3+"] "),R||yt()}function Tt(){R||(E?yt(V.get().streaming.manifestUpdateRetryInterval):ot())}function pt($){$.error?$.error.code===H.a.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&rt.error($.error):Vt($.manifest)}function zt(){R=!1,yt()}function Dt(){(R=!V.get().streaming.scheduling.scheduleWhilePaused)&&gt()}function W(){E=!1}return p={initialize:function(){ht(),U.on(t.a.STREAMS_COMPOSED,W,this),U.on(o.a.PLAYBACK_STARTED,zt,this),U.on(o.a.PLAYBACK_PAUSED,Dt,this),U.on(t.a.INTERNAL_MANIFEST_LOADED,pt,this)},setManifest:function($){Vt($)},refreshManifest:ot,getIsUpdating:function(){return E},setConfig:function($){$&&($.manifestModel&&(k=$.manifestModel),$.adapter&&(Y=$.adapter),$.manifestLoader&&(q=$.manifestLoader),$.errHandler&&(rt=$.errHandler),$.settings&&(V=$.settings))},reset:function(){U.off(o.a.PLAYBACK_STARTED,zt,this),U.off(o.a.PLAYBACK_PAUSED,Dt,this),U.off(t.a.STREAMS_COMPOSED,W,this),U.off(t.a.INTERNAL_MANIFEST_LOADED,pt,this),ht()}},i=Object(f.a)(st).getInstance().getLogger(p),p}ee.__dashjs_factory_name="ManifestUpdater";var we=r.a.getClassFactory(ee);function Fe(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt=this.context,yt=Object(d.a)(gt).getInstance(),ot=Object(ge.a)(gt).getInstance();function Vt(){q=[],k=[],Y=null,rt=null,st=null,V=NaN,m=!1,_=!1,U=R.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Tt(){R.get().streaming.utcSynchronization.enabled&&!m&&!_&&st&&st.value&&st.schemeIdUri&&!isNaN(V)&&!isNaN(R.get().streaming.utcSynchronization.backgroundAttempts)&&(rt&&(Date.now()-rt)/1e3<30||(q=[],_=!0,function $t(Se){try{if(Se<=0)return void Kt();var oe=Date.now();M[st.schemeIdUri](st.value,function(he){var ze=Date.now(),Pe=pt(oe,ze,he);q.push(Pe),$t(Se-1)},function(){Kt()})}catch{Kt()}}(isNaN(R.get().streaming.utcSynchronization.backgroundAttempts)?2:R.get().streaming.utcSynchronization.backgroundAttempts)))}function pt($t,Se,oe){return oe-(Se-(Se-$t)/2)}function zt(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,Se=isNaN($t);Se&&R.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?et():mt(Se,$t)}function Dt($t){var Se=Date.parse($t);return isNaN(Se)&&(Se=function(oe){var he,ze,Pe=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(oe);return he=Date.UTC(parseInt(Pe[1],10),parseInt(Pe[2],10)-1,parseInt(Pe[3],10),parseInt(Pe[4],10),parseInt(Pe[5],10),Pe[6]&&(parseInt(Pe[6],10)||0),Pe[7]&&1e3*parseFloat(Pe[7])||0),Pe[9]&&Pe[10]&&(ze=60*parseInt(Pe[9],10)+parseInt(Pe[10],10),he+=(Pe[8]==="+"?-1:1)*ze*60*1e3),new Date(he).getTime()}($t)),Se}function W($t){return Date.parse($t)}function $($t){return Date.parse($t)}function tt($t,Se,oe){oe()}function Et($t,Se,oe){var he=Dt($t);isNaN(he)?oe():Se(he)}function ut($t,Se,oe,he,ze){var Pe,Re,lt=!1,Ft=new XMLHttpRequest,Qt=ze?y.a.HEAD:y.a.GET,ne=Se.match(/\S+/g);if(Se=ne.shift(),Pe=function(){lt||(lt=!0,ne.length?ut($t,ne.join(" "),oe,he,ze):he())},Re=function(){var xe,Le;Ft.status===200&&(xe=ze?Ft.getResponseHeader("Date"):Ft.response,Le=$t(xe),isNaN(Le)||(oe(Le),lt=!0))},ot.isRelative(Se)){var Oe=ht.resolve();Oe&&(Se=ot.resolve(Se,Oe.url))}Ft.open(Qt,Se),Ft.timeout=5e3,Ft.onload=Re,Ft.onloadend=Pe,Ft.send()}function St($t,Se,oe){ut($,$t,Se,oe,!0)}function et(){var $t=E.getLatestMPDRequestHeaderValueByID("Date"),Se=$t!==null?new Date($t).getTime():Number.NaN;isNaN(Se)?mt(!0):mt(!1,Se-Date.now())}function mt($t,Se){if(isNaN(V)||isNaN(Se)||$t||function(he){try{var ze,Pe=fe(he),Re=isNaN(U)?30:U,lt=isNaN(R.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:R.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Ft=isNaN(R.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:R.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Qt=isNaN(R.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:R.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Pe?(ze=Math.min(Re*lt,Ft),i.debug("Increasing timeBetweenSyncAttempts to ".concat(ze))):(ze=Math.max(Re/lt,Qt),i.debug("Decreasing timeBetweenSyncAttempts to ".concat(ze))),U=ze}catch{}}(Se),!$t&&!isNaN(Se)){Y=Date.now(),m=!1;var oe=isNaN(V);V=Se,oe&&Tt(),i.debug("Completed UTC sync. Setting client - server offset to ".concat(Se))}$t&&(st=null,m=!1,wt.error(new B.a(H.a.TIME_SYNC_FAILED_ERROR_CODE,H.a.TIME_SYNC_FAILED_ERROR_MESSAGE))),yt.trigger(t.a.UPDATE_TIME_SYNC_OFFSET,{offset:Se}),yt.trigger(t.a.TIME_SYNCHRONIZATION_COMPLETED)}function Kt(){if(q&&q.length!==0){var $t=q.reduce(function(Se,oe){return Se+oe},0)/q.length;fe($t)?i.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(i.debug("Completed background UTC sync. Setting client - server offset to ".concat($t)),V=$t,yt.trigger(t.a.UPDATE_TIME_SYNC_OFFSET,{offset:V})),_=!1,rt=Date.now()}}function fe($t){try{if(isNaN(V))return!0;var Se=R.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(R.get().streaming.utcSynchronization.maximumAllowedDrift)?R.get().streaming.utcSynchronization.maximumAllowedDrift:100;return $t>=V-Se&&$t<=V+Se}catch{return!0}}return p={initialize:function(){Vt(),M={"urn:mpeg:dash:utc:http-head:2014":St,"urn:mpeg:dash:utc:http-xsdate:2014":ut.bind(null,Dt),"urn:mpeg:dash:utc:http-iso:2014":ut.bind(null,W),"urn:mpeg:dash:utc:direct:2014":Et,"urn:mpeg:dash:utc:http-head:2012":St,"urn:mpeg:dash:utc:http-xsdate:2012":ut.bind(null,Dt),"urn:mpeg:dash:utc:http-iso:2012":ut.bind(null,W),"urn:mpeg:dash:utc:direct:2012":Et,"urn:mpeg:dash:utc:http-ntp:2014":tt,"urn:mpeg:dash:utc:ntp:2014":tt,"urn:mpeg:dash:utc:sntp:2014":tt}},attemptSync:function($t,Se){k=$t,m||(function(oe){try{if(!oe||!R.get().streaming.utcSynchronization.enabled)return!1;var he=isNaN(U)?30:U;return!(Y&&he&&!isNaN(he))||(Date.now()-Y)/1e3>=he}catch{return!0}}(Se)?(m=!0,function oe(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ze=he||0;if(!k||k.length===0||ze>=k.length)return void zt();var Pe=k[ze];if(Pe)if(M.hasOwnProperty(Pe.schemeIdUri)){var Re=new Date().getTime();M[Pe.schemeIdUri](Pe.value,function(lt){var Ft=new Date().getTime(),Qt=pt(Re,Ft,lt);st=Pe,zt(Qt)},function(){oe(ze+1)})}else oe(ze+1);else zt()}()):yt.trigger(t.a.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function($t){$t&&($t.dashMetrics&&(E=$t.dashMetrics),$t.baseURLController&&(ht=$t.baseURLController),$t.errHandler&&(wt=$t.errHandler),$t.settings&&(R=$t.settings))},reset:function(){Vt(),yt.off(t.a.ATTEMPT_BACKGROUND_SYNC,Tt,p)}},i=Object(f.a)(gt).getInstance().getLogger(p),yt.on(t.a.ATTEMPT_BACKGROUND_SYNC,Tt,p),p}Fe.__dashjs_factory_name="TimeSyncController";var We=r.a.getSingletonFactory(Fe);We.HTTP_TIMEOUT_MS=5e3,r.a.updateSingletonFactory(Fe.__dashjs_factory_name,We);var Ve=We;function N(){var p,i,m,_=this.context;return p={createMediaSource:function(){var R="WebKitMediaSource"in window;return"MediaSource"in window?i=new MediaSource:R&&(i=new WebKitMediaSource),i},attachMediaSource:function(R){var M=window.URL.createObjectURL(i);return R.setSource(M),M},detachMediaSource:function(R){R.setSource(null)},setDuration:function R(M){i&&i.readyState==="open"&&(M===null&&isNaN(M)||i.duration!==M&&(function(E){for(var q=E.sourceBuffers,k=0;k<q.length;k++)if(q[k].updating)return!0;return!1}(i)?setTimeout(R.bind(null,M),50):(m.info("Set MediaSource duration:"+M),i.duration=M)))},setSeekable:function(R,M){i&&typeof i.setLiveSeekableRange=="function"&&typeof i.clearLiveSeekableRange=="function"&&i.readyState==="open"&&R>=0&&R<M&&(i.clearLiveSeekableRange(),i.setLiveSeekableRange(R,M))},signalEndOfStream:function(R){if(R&&R.readyState==="open"){for(var M=R.sourceBuffers,E=0;E<M.length;E++)if(M[E].updating||M[E].buffered.length===0)return;m.info("call to mediaSource endOfStream"),R.endOfStream()}}},m=Object(f.a)(_).getInstance().getLogger(p),p}N.__dashjs_factory_name="MediaSourceController";var C=r.a.getSingletonFactory(N),dt=x(29);function Bt(){var p,i,m,_,R,M,E,q,k,Y,rt,V="discarded",st="updated",U="added",wt=this.context,ht=Object(d.a)(wt).getInstance();function gt(){if(!E||!q)throw new Error("setConfig function has to be called previously")}function yt(){rt=!1,m={},_={},R=null,Y=!1,M=Date.now()/1e3}function ot(){try{R!==null&&rt&&(clearInterval(R),R=null,rt=!1,function(){try{W(_),W(m)}catch(ut){i.error(ut)}}())}catch(ut){throw ut}}function Vt(){try{if(!Y){Y=!0;var ut=q.getTime(),St=ut-M;St=M>0?Math.max(0,St):0,Tt(_,St,ut),Tt(m,St,ut),pt(_),pt(m),M=ut,Y=!1}}catch(et){Y=!1,i.error(et)}}function Tt(ut,St,et){try{$(ut,function(mt){if(mt!==void 0){var Kt=isNaN(mt.duration)?0:mt.duration;mt.calculatedPresentationTime<=et&&mt.calculatedPresentationTime+St+Kt>=et?Et(mt,o.a.EVENT_MODE_ON_START):(tt(et,Kt+St,mt.calculatedPresentationTime)||function(fe){try{var $t=fe.eventStream.period.start+fe.eventStream.period.duration;return fe.calculatedPresentationTime>$t}catch(Se){return i.error(Se),!1}}(mt))&&(i.debug("Removing event ".concat(mt.id," from period ").concat(mt.eventStream.period.id," as it is expired or invalid")),function(fe,$t){try{var Se=$t.eventStream.schemeIdUri,oe=$t.eventStream.period.id,he=$t.eventStream.value,ze=$t.id;fe[oe][Se]=fe[oe][Se].filter(function(Pe){return he&&Pe.eventStream.value&&Pe.eventStream.value!==he||Pe.id!==ze}),fe[oe][Se].length===0&&delete fe[oe][Se]}catch(Pe){i.error(Pe)}}(ut,mt))}})}catch(mt){i.error(mt)}}function pt(ut){try{for(var St in ut)ut.hasOwnProperty(St)&&Object.keys(ut[St]).length===0&&delete ut[St]}catch(et){i.error(et)}}function zt(ut,St){var et=arguments.length>2&&arguments[2]!==void 0&&arguments[2],mt=ut.eventStream.schemeIdUri,Kt=ut.eventStream.value,fe=ut.id,$t=V;St[mt]||(St[mt]=[]);var Se=St[mt].findIndex(function(he){return(!Kt||he.eventStream.value&&he.eventStream.value===Kt)&&he.id===fe});if(Se===-1)St[mt].push(ut),ut.triggeredReceivedEvent=!1,ut.triggeredStartEvent=!1,$t=U;else if(et){var oe=St[mt][Se];ut.triggeredReceivedEvent=oe.triggeredReceivedEvent,ut.triggeredStartEvent=oe.triggeredStartEvent,St[mt][Se]=ut,$t=st}return $t}function Dt(ut){try{if(ut.eventStream.value==1){var St,et=ut.calculatedPresentationTime;St=ut.calculatedPresentationTime==4294967295?NaN:ut.calculatedPresentationTime+ut.duration,ht.trigger(o.a.MANIFEST_VALIDITY_CHANGED,{id:ut.id,validUntil:et,newDuration:St,newManifestValidAfter:NaN},{mode:o.a.EVENT_MODE_ON_START})}}catch(mt){i.error(mt)}}function W(ut){try{var St=q.getTime();$(ut,function(et){var mt=et.eventStream&&et.eventStream.period&&!isNaN(et.eventStream.period.duration)?et.eventStream.period.duration:NaN,Kt=et.eventStream&&et.eventStream.period&&!isNaN(et.eventStream.period.start)?et.eventStream.period.start:NaN;if(!isNaN(mt)&&!isNaN(Kt)){var fe=et.calculatedPresentationTime;Math.abs(fe-St)<300&&Et(et,o.a.EVENT_MODE_ON_START)}})}catch(et){i.error(et)}}function $(ut,St){try{if(ut)for(var et=Object.keys(ut),mt=0;mt<et.length;mt++)for(var Kt=ut[et[mt]],fe=Object.keys(Kt),$t=0;$t<fe.length;$t++)Kt[fe[$t]].forEach(function(Se){Se!==void 0&&St(Se)})}catch(Se){i.error(Se)}}function tt(ut,St,et){try{return ut-St>et}catch(mt){return i.error(mt),!1}}function Et(ut,St){try{var et=q.getTime(),mt=ut.id;if(St===o.a.EVENT_MODE_ON_RECEIVE&&!ut.triggeredReceivedEvent)return i.debug("Received event ".concat(mt)),ut.triggeredReceivedEvent=!0,void ht.trigger(ut.eventStream.schemeIdUri,{event:ut},{mode:St});ut.triggeredStartEvent||(ut.eventStream.schemeIdUri==="urn:mpeg:dash:event:2012"&&ut.eventStream.value==1?ut.duration===0&&ut.presentationTimeDelta===0||(i.debug("Starting manifest refresh event ".concat(mt," at ").concat(et)),function(){try{gt(),E.refreshManifest()}catch(Kt){i.error(Kt)}}()):ut.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&ut.eventStream.value==1?(i.debug("Starting callback event ".concat(mt," at ").concat(et)),function(Kt){try{Object(dt.a)(wt).create({}).load({method:"get",url:Kt,request:{responseType:"arraybuffer"}})}catch(fe){i.error(fe)}}(ut.messageData)):(i.debug("Starting event ".concat(mt," from period ").concat(ut.eventStream.period.id," at ").concat(et)),ht.trigger(ut.eventStream.schemeIdUri,{event:ut},{mode:St})),ut.triggeredStartEvent=!0)}catch(Kt){i.error(Kt)}}return p={addInlineEvents:function(ut,St){try{if(gt(),m[St]||(m[St]={}),ut)for(var et=0;et<ut.length;et++){var mt=ut[et];if(!tt(q.getTime(),isNaN(mt.duration)?0:mt.duration,mt.calculatedPresentationTime)){var Kt=zt(mt,m[St],!0);Kt===U?(i.debug("Added inline event with id ".concat(mt.id," from period ").concat(St)),Et(mt,o.a.EVENT_MODE_ON_RECEIVE)):Kt===st&&i.debug("Updated inline event with id ".concat(mt.id," from period ").concat(St))}}}catch(fe){throw fe}},addInbandEvents:function(ut,St){try{gt(),_[St]||(_[St]={});for(var et=0;et<ut.length;et++){var mt=ut[et];tt(q.getTime(),isNaN(mt.duration)?0:mt.duration,mt.calculatedPresentationTime)||(zt(mt,_[St],!1)===U?(mt.eventStream.schemeIdUri==="urn:mpeg:dash:event:2012"&&Dt(mt),i.debug("Added inband event with id ".concat(mt.id," from period ").concat(St)),Et(mt,o.a.EVENT_MODE_ON_RECEIVE)):i.debug("Inband event with scheme_id_uri ".concat(mt.eventStream.schemeIdUri,", value ").concat(mt.eventStream.value,", period id ").concat(St," and event id ").concat(mt.id," was ignored because it has been added before.")))}Vt()}catch(Kt){throw Kt}},getInbandEvents:function(){return _},getInlineEvents:function(){return m},start:function(){try{gt(),i.debug("Start Event Controller");var ut=k.get().streaming.eventControllerRefreshDelay;rt||isNaN(ut)||(rt=!0,R=setInterval(Vt,ut))}catch(St){throw St}},setConfig:function(ut){try{if(!ut)return;ut.manifestUpdater&&(E=ut.manifestUpdater),ut.playbackController&&(q=ut.playbackController),ut.settings&&(k=ut.settings)}catch(St){throw St}},reset:function(){ot(),yt()}},i=Object(f.a)(wt).getInstance().getLogger(p),yt(),p}Bt.__dashjs_factory_name="EventController";var Ut=r.a.getSingletonFactory(Bt),xt={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function de(p){return function(i){if(Array.isArray(i))return Ge(i)}(p)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(p)||function(i,m){if(i){if(typeof i=="string")return Ge(i,m);var _=Object.prototype.toString.call(i).slice(8,-1);if(_==="Object"&&i.constructor&&(_=i.constructor.name),_==="Map"||_==="Set")return Array.from(i);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return Ge(i,m)}}(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ge(p,i){(i==null||i>p.length)&&(i=p.length);for(var m=0,_=new Array(i);m<i;m++)_[m]=p[m];return _}function Je(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt,ot,Vt,Tt,pt,zt,Dt,W,$,tt,Et,ut,St,et,mt,Kt,fe,$t,Se,oe,he,ze,Pe,Re,lt,Ft,Qt,ne,Oe,xe,Le,tn,sn=this.context,Ye=Object(d.a)(sn).getInstance();function un(){if(!(M&&M.hasOwnProperty("load")&&pt&&pt.hasOwnProperty("initialize")&&pt.hasOwnProperty("reset")&&pt.hasOwnProperty("getClientTimeOffset")&&E&&Tt&&k&&fe))throw new Error(h.a.MISSING_CONFIG_ERROR)}function mn(){if(!R||!R.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function bn(){(function(){try{var pe=q.getStreamsInfo();if(!Dt&&pe.length===0)throw new Error("There are no periods in the MPD");Dt&&pe.length>0&&k.updateManifestUpdateInfo({currentTime:fe.getTime(),buffered:Kt.getBufferRange(),presentationStartTime:pe[0].start,clientTimeOffset:pt.getClientTimeOffset()}),zt.length>0&&function(In){if(In.length===0)return void i.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.");zt=zt.filter(function(jn){var Vn=In.filter(function(yr){return yr.id===jn.getId()}).length>0||jn.getId()===Dt.getId();return Vn||(i.debug("Removing stream ".concat(jn.getId())),jn.reset(!0)),Vn})}(pe);for(var je=[],ln=0,Sn=pe.length;ln<Sn;ln++){var xn=pe[ln];je.push(dn(xn)),k.addManifestUpdateStreamInfo(xn)}Promise.all(je).then(function(){return ne.get().streaming.applyContentSteering&&!Dt&&V.shouldQueryBeforeStart()?V.loadSteeringData():Promise.resolve()}).then(function(){Dt||function In(jn){Ie();var Vn=k.getCurrentDVRInfo().range;if(Vn.end<Vn.start){xe&&clearTimeout(xe);var yr=Math.min(1e3*(-1*(Vn.end-Vn.start)+2),2147483647);return i.debug("Waiting for ".concat(yr," ms before playback can start")),Ye.trigger(t.a.AST_IN_FUTURE,{delay:yr}),void(xe=setTimeout(function(){In(jn)},yr))}ne.get().streaming.applyProducerReferenceTime&&$t.calculateProducerReferenceTimeOffsets(jn);var ui=jn[0].manifestInfo;if(ne.get().streaming.applyServiceDescription&&$t.applyServiceDescription(ui),q.getIsDynamic()){var Ui=Nr(jn,ui);fe.computeAndSetLiveDelay(Ui,ui)}var Xr=function(){var Ar;if(q.getIsDynamic()){var li=k.getCurrentDVRInfo(),Vo=li&&li.range?li.range.end:0;Ar=Vo-fe.getOriginalLiveDelay();var qa=li?li.range:null;if(qa){if(isNaN(Le)&&Le.toString().indexOf("posix:")===-1){var ta=Dr(!0);isNaN(ta)||(i.info("Start time from URI parameters: ".concat(ta)),Ar=Math.min(Ar,ta))}else{i.info("Start time provided by the app: ".concat(Le));var Ya=Sr(!0,Le);isNaN(Ya)||(Ar=Math.min(Ar,Ya))}var Ko=ne.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Ar=Math.max(Ar,qa.start+Ko)}}else{var zo=ki()[0].getStreamInfo();if(Ar=zo.start,isNaN(Le)){var ea=Dr(!1);isNaN(ea)||(i.info("Start time from URI parameters: ".concat(ea)),Ar=Math.max(Ar,ea))}else{i.info("Start time provided by the app: ".concat(Le));var Ha=Sr(!1,Le);isNaN(Ha)||(Ar=Math.max(Ar,Ha))}}return Ar}(),Ga=ce(Xr),Ho=Ga!==null?Ga:zt[0];Ye.trigger(t.a.INITIAL_STREAM_SWITCH,{startTime:Xr}),hn(Ho,null,Xr),Re||(Re=setInterval(function(){!ut&&fe.getTimeToStreamEnd()<=0&&!fe.isSeeking()&&Ye.trigger(t.a.PLAYBACK_ENDED,{isLast:Ur().isLast})},200))}(pe),Ye.trigger(t.a.STREAMS_COMPOSED),En()}).catch(function(In){throw In})}catch(In){Tt.error(new B.a(H.a.MANIFEST_ERROR_ID_NOSTREAMS_CODE,In.message+" nostreamscomposed",E.getValue())),et=!0,Fi()}})()}function vn(){Oe=!0}function dn(pe){var je=xi(pe.id);return je?je.updateData(pe):(je=Zt(sn).create({manifestModel:E,mediaPlayerModel:Se,dashMetrics:k,manifestUpdater:R,adapter:q,timelineConverter:pt,capabilities:m,capabilitiesFilter:_,errHandler:Tt,baseURLController:st,segmentBaseController:U,textController:$,abrController:ht,playbackController:fe,eventController:yt,mediaController:gt,protectionController:W,videoModel:Kt,streamInfo:pe,settings:ne}),zt.push(je),je.initialize(),Promise.resolve())}function hn(pe,je,ln){try{if(ut||!pe||je===pe&&pe.getIsActive())return;ut=!0,Ye.trigger(t.a.PERIOD_SWITCH_STARTED,{fromStreamInfo:je?je.getStreamInfo():null,toStreamInfo:pe.getStreamInfo()});var Sn=!1;Dt=pe,je&&(Sn=se(pe,je),je.deactivate(Sn)),ln=isNaN(ln)?!Sn&&je?pe.getStreamInfo().start:NaN:ln,i.info("Switch to stream ".concat(pe.getId(),". Seektime is ").concat(ln,", current playback time is ").concat(fe.getTime(),". Seamless period switch is set to ").concat(Sn)),Ft=Ft.filter(function(xn){return xn.getId()!==Dt.getId()}),fe.initialize(Ur(),!!je),Kt.getElement()&&Mn(ln,Sn)}catch{ut=!1}}function Mn(pe,je){var ln;function Sn(){if(mt&&mt.readyState==="open"){i.debug("MediaSource is open!"),window.URL.revokeObjectURL(ln),mt.removeEventListener("sourceopen",Sn),mt.removeEventListener("webkitsourceopen",Sn),gr();var In=k.getCurrentDVRInfo();Y.setSeekable(In.range.start,In.range.end),On(pe,je)}}function xn(){mt.addEventListener("sourceopen",Sn,!1),mt.addEventListener("webkitsourceopen",Sn,!1),ln=Y.attachMediaSource(Kt),i.debug("MediaSource attached to element.  Waiting on open...")}mt?je?On(pe,je):(Y.detachMediaSource(Kt),xn()):(mt=Y.createMediaSource(),xn())}function On(pe,je){Dt.activate(mt,je?lt:void 0,pe).then(function(ln){if(ln){var Sn=Object.keys(ln);Sn.length>0&&ln[Sn[0]].getBuffer().changeType&&(Qt=!0),lt=ln}isNaN(pe)||(Ye.trigger(t.a.SEEK_TARGET,{time:pe},{streamId:Dt.getId()}),fe.seek(pe,!1,!0),Dt.startScheduleControllers()),ut=!1,Ye.trigger(t.a.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Ur()})})}function Nn(pe){var je=ce(pe.seekTime);je&&je!==Dt?je&&je!==Dt&&(Dn(),function(ln,Sn){var xn=ln&&!isNaN(ln.seekTime)?ln.seekTime:NaN,In=Dt.getProcessors().map(function(jn){return jn.prepareOuterPeriodPlaybackSeeking(ln)});Promise.all(In).then(function(){hn(Sn,Dt,xn)}).catch(function(jn){Tt.error(jn)})}(pe,je)):(Dn(),function(ln){Dt.getProcessors().forEach(function(Sn){return Sn.prepareInnerPeriodPlaybackSeeking(ln)}),Mr(It.USER_REQUEST_STOP_REASON)}(pe)),Wr(Te.SEEK_START_REASON)}function Dn(){Ln()}function Ln(){Ft&&Ft.length>0&&(Ft.forEach(function(pe){pe.deactivate(!0)}),Ft=[])}function Me(pe){pe.newMediaInfo.streamInfo.id===Dt.getId()&&(Ln(),Dt.prepareTrackChange(pe))}function se(pe,je){try{return ne.get().streaming.buffer.reuseExistingSourceBuffers&&(je.isProtectionCompatible(pe)||Oe)&&(Qt||je.isMediaCodecCompatible(pe,je))}catch{return!1}}function kt(pe){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(mt&&!pe.getPreloaded()){var ln=se(pe,je);ln&&pe.startPreloading(mt,lt).then(function(){Ft.push(pe)})}}function ce(pe){if(isNaN(pe))return null;for(var je=zt.length,ln=0;ln<je;ln++){var Sn=zt[ln];if(pe<parseFloat((Sn.getStartTime()+Sn.getDuration()).toFixed(5)))return Sn}return null}function Ie(){try{var pe=q.getIsDynamic(),je=q.getStreamsInfo()[0].manifestInfo,ln=fe.getTime(),Sn=pt.calcTimeShiftBufferWindow(zt,pe),xn=Xn();if(Sn.start===void 0||Sn.end===void 0)return;xn&&xn.length!==0?xn.forEach(function(In){k.addDVRInfo(In.getType(),ln,je,Sn)}):k.addDVRInfo(h.a.VIDEO,ln,je,Sn)}catch{}}function _t(pe){if(ze&&Et){var je=Se.getInitialBufferLevel(),ln=[h.a.TEXT];(isNaN(je)||je<=fe.getBufferLevel(ln)||q.getIsDynamic()&&je>fe.getLiveDelay())&&(ze=!1,Wr(Te.INITIAL_PLAYOUT_START_REASON),fe.play())}pe&&pe.mediaType&&k.addBufferLevel(pe.mediaType,new Date,1e3*pe.bufferLevel)}function ye(pe){pe.streamInfo.id===Dt.getId()&&pe.reason&&pe.reason.forceReplace&&Ln(),xi(pe.streamInfo.id).prepareQualityChange(pe)}function De(){if(q.getIsDynamic()&&fe.getOriginalLiveDelay()!==0&&Dt){var pe=q.getStreamsInfo();if(pe.length>0){var je=pe[0].manifestInfo,ln=Nr(pe,je);fe.computeAndSetLiveDelay(ln,je)}}}function le(){if(ti()){var pe=Kt.getPlaybackQuality();pe&&k.addDroppedFrames(pe)}}function qe(){i.debug("[onPlaybackStarted]"),!ze&&he&&Wr(Te.RESUME_FROM_PAUSE_START_REASON),ze&&(ze=!1),Pe&&(Pe=!1,ne.get().streaming.applyContentSteering&&!V.shouldQueryBeforeStart()&&V.loadSteeringData()),he=!1}function fn(pe){i.debug("[onPlaybackPaused]"),pe.ended||(he=!0,Mr(It.USER_REQUEST_STOP_REASON))}function pn(pe){i.debug("Stream with id ".concat(pe.streamInfo.id," finished buffering"));var je=pe.streamInfo.isLast;mt&&je?(i.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Y.signalEndOfStream(mt)):En()}function En(){if(Dt&&Dt.getHasFinishedBuffering())for(var pe=function(){var xn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var In=xn||Dt||null;if(In){var jn=In.getStreamInfo();return zt.filter(function(Vn){var yr=Vn.getStreamInfo();return yr.start>jn.start&&jn.id!==yr.id})}}catch{return[]}}(Dt),je=0;je<pe.length;){var ln=pe[je],Sn=je===0?Dt:pe[je-1];!ln.getPreloaded()&&Sn.getHasFinishedBuffering()&&mt&&kt(ln,Sn),je+=1}}function or(){Re&&(clearInterval(Re),Re=null)}function Xn(){return Dt?Dt.getProcessors():[]}function hr(pe){if(Dt&&!Dt.getIsEndedEventSignaled()){Dt.setIsEndedEventSignaled(!0);var je=function(){var ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Sn=ln||Dt||null;if(!Sn)return null;for(var xn=Sn.getStreamInfo(),In=xn.start,jn=0,Vn=-1,yr=NaN;jn<zt.length;){var ui=zt[jn],Ui=ui.getStreamInfo(),Xr=Ui.start-In;Xr>0&&(isNaN(yr)||Xr<yr)&&xn.id!==Ui.id&&(yr=Xr,Vn=jn),jn+=1}return Vn>=0?zt[Vn]:null}();je?(i.debug("StreamController onEnded, found next stream with id ".concat(je.getStreamInfo().id,". Switching from ").concat(Dt.getStreamInfo().id," to ").concat(je.getStreamInfo().id)),hn(je,Dt,NaN)):(i.debug("StreamController no next stream found"),Dt.setIsEndedEventSignaled(!1)),Mr(je?It.END_OF_PERIOD_STOP_REASON:It.END_OF_CONTENT_STOP_REASON)}pe&&pe.isLast&&(or(),V.stopSteeringRequestTimer())}function gr(pe){var je=pe||Ur().manifestInfo.duration;Y.setDuration(je)}function Dr(pe){var je=wt.getURIFragmentData();if(!je||!je.t)return NaN;var ln=ki()[0].getStreamInfo().start;return je.t=je.t.split(",")[0],Yr(pe,je.t,ln)}function Sr(pe,je){var ln=0;return pe||(ln=ki()[0].getStreamInfo().start),Yr(pe,je,ln)}function Yr(pe,je,ln){var Sn=q.getRegularPeriods()[0],xn=je.toString(),In=xn.indexOf("posix:")!==-1?xn.substring(6)==="now"?Date.now()/1e3:parseFloat(xn.substring(6)):NaN;return pe&&!isNaN(In)?pt.calcPresentationTimeFromWallTime(new Date(1e3*In),Sn):parseFloat(xn)+ln}function Nr(pe,je){try{var ln=NaN;if(je&&!isNaN(je.maxFragmentDuration)&&isFinite(je.maxFragmentDuration))return je.maxFragmentDuration;if(pe&&pe.length===1){var Sn=pe[0],xn=[h.a.VIDEO,h.a.AUDIO,h.a.TEXT].reduce(function(In,jn){var Vn=q.getMediaInfoForType(Sn,jn);return Vn&&Vn.isFragmented!==!1&&In.push(Vn),In},[]).reduce(function(In,jn){var Vn=q.getVoRepresentations(jn);return Vn&&Vn.length>0&&Vn.forEach(function(yr){yr&&In.push(yr)}),In},[]).reduce(function(In,jn){var Vn=q.convertRepresentationToRepresentationInfo(jn);return Vn&&Vn.fragmentDuration&&!isNaN(Vn.fragmentDuration)&&In.push(Vn.fragmentDuration),In},[]);ln=Math.max.apply(Math,de(xn))}return isFinite(ln)?ln:NaN}catch{return NaN}}function Pr(pe){if(pe.error)et=!0,Fi();else{i.info("Manifest updated... updating data system wide.");var je=pe.manifest;q.updatePeriods(je);var ln=q.getUTCTimingSources();!q.getIsDynamic()||ln&&ln.length!==0||Ye.trigger(o.a.CONFORMANCE_VIOLATION,{level:xt.LEVELS.WARNING,event:xt.EVENTS.NO_UTC_TIMING_ELEMENT});var Sn=q.getIsDynamic()?ln.concat(oe.getUTCTimingSources()):ln,xn=Vt.isHTTPS(pe.manifest.url);Sn.forEach(function(In){In.value.replace(/.*?:\/\//g,"")===ne.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(In.value=In.value.replace(xn?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),xn?"https://":"http://"),i.debug("Matching default timing source protocol to manifest protocol: ",In.value))}),_.filterUnsupportedFeatures(je).then(function(){st.initialize(je),rt.attemptSync(Sn,q.getIsDynamic())})}}function ti(){return!!Dt&&Dt.getHasVideoTrack()}function kr(){return!!Dt&&Dt.getHasAudioTrack()}function Mr(pe,je){je=je||new Date,Xn().forEach(function(ln){ln.finalisePlayList(je,pe)}),k.addPlayList()}function Wr(pe){k.createPlaylistMetrics(1e3*fe.getTime(),pe)}function Li(pe){if(pe.error){var je="";switch(pe.error.code){case 1:je="MEDIA_ERR_ABORTED";break;case 2:je="MEDIA_ERR_NETWORK";break;case 3:je="MEDIA_ERR_DECODE",tn.counts.mediaErrorDecode+=1;break;case 4:je="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:je="MEDIA_ERR_ENCRYPTED";break;default:je="UNKNOWN"}je==="MEDIA_ERR_DECODE"&&ne.get().errors.recoverAttempts.mediaErrorDecode>=tn.counts.mediaErrorDecode?function(){i.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var ln=fe.getTime();Dt.deactivate(!1),i.warn("MediaSource has been resetted. Resuming playback from time ".concat(ln)),Mn(ln,!1)}():(St=!0,pe.error.message&&(je+=" ("+pe.error.message+")"),pe.error.msExtendedCode&&(je+=" (0x"+(pe.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),i.fatal("Video Element Error: "+je),pe.error&&i.fatal(pe.error),Tt.error(new B.a(pe.error.code,je)),Fi())}}function Ur(){return Dt?Dt.getStreamInfo():null}function xi(pe){for(var je=0,ln=zt.length;je<ln;je++)if(zt[je].getId()===pe)return zt[je];return null}function Ua(pe){isNaN(pe.newDuration)||gr(pe.newDuration)}function Ba(){zt=[],Le=NaN,W=null,ut=!1,Dt=null,St=!1,et=!1,ze=!0,Pe=!0,he=!1,Et=!0,Re=null,Oe=!1,Qt=!1,Ft=[],xe=null,tn={counts:{mediaErrorDecode:0}}}function Fi(){un(),rt.reset(),Mr(St||et?It.FAILURE_STOP_REASON:It.USER_REQUEST_STOP_REASON);for(var pe=0,je=zt?zt.length:0;pe<je;pe++)zt[pe].reset(St);Ye.off(o.a.PLAYBACK_TIME_UPDATED,le,p),Ye.off(o.a.PLAYBACK_SEEKING,Nn,p),Ye.off(o.a.PLAYBACK_ERROR,Li,p),Ye.off(o.a.PLAYBACK_STARTED,qe,p),Ye.off(o.a.PLAYBACK_PAUSED,fn,p),Ye.off(o.a.PLAYBACK_ENDED,hr,p),Ye.off(o.a.METRIC_ADDED,ja,p),Ye.off(o.a.MANIFEST_VALIDITY_CHANGED,Ua,p),Ye.off(o.a.BUFFER_LEVEL_UPDATED,_t,p),Ye.off(o.a.QUALITY_CHANGE_REQUESTED,ye,p),t.a.KEY_SESSION_UPDATED&&Ye.off(t.a.KEY_SESSION_UPDATED,vn,p),Ye.off(t.a.MANIFEST_UPDATED,Pr,p),Ye.off(t.a.STREAM_BUFFERING_COMPLETED,pn,p),Ye.off(t.a.TIME_SYNCHRONIZATION_COMPLETED,bn,p),Ye.off(t.a.CURRENT_TRACK_CHANGED,Me,p),Ye.off(t.a.SETTING_UPDATED_LIVE_DELAY,De,p),Ye.off(t.a.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,De,p),st.reset(),R.reset(),yt.reset(),k.clearAllCurrentMetrics(),E.setValue(null),M.reset(),pt.reset(),ot.reset(),mt&&(Y.detachMediaSource(Kt),mt=null),Kt=null,W&&(W=null,tt=null,E.getValue()&&Ye.trigger(t.a.PROTECTION_DESTROYED,{data:E.getValue().url})),or(),Ye.trigger(t.a.STREAM_TEARDOWN_COMPLETE),Ba()}function ja(pe){if(pe.metric===n.a.DVR_INFO){var je=kr()?h.a.AUDIO:h.a.VIDEO;pe.mediaType===je&&Y.setSeekable(pe.value.range.start,pe.value.range.end)}}function ki(){return zt}return p={initialize:function(pe,je){un(),Et=pe,tt=je,pt.initialize(),(R=we(sn).create()).setConfig({manifestModel:E,adapter:q,manifestLoader:M,errHandler:Tt,settings:ne}),R.initialize(),(yt=Ut(sn).getInstance()).setConfig({manifestUpdater:R,playbackController:fe,settings:ne}),yt.start(),rt.setConfig({dashMetrics:k,baseURLController:st,errHandler:Tt,settings:ne}),rt.initialize(),W&&(Ye.trigger(t.a.PROTECTION_CREATED,{controller:W}),W.setMediaElement(Kt.getElement()),tt&&W.setProtectionData(tt)),function(){Ye.on(o.a.PLAYBACK_TIME_UPDATED,le,p),Ye.on(o.a.PLAYBACK_SEEKING,Nn,p),Ye.on(o.a.PLAYBACK_ERROR,Li,p),Ye.on(o.a.PLAYBACK_STARTED,qe,p),Ye.on(o.a.PLAYBACK_PAUSED,fn,p),Ye.on(o.a.PLAYBACK_ENDED,hr,p),Ye.on(o.a.METRIC_ADDED,ja,p),Ye.on(o.a.MANIFEST_VALIDITY_CHANGED,Ua,p),Ye.on(o.a.BUFFER_LEVEL_UPDATED,_t,p),Ye.on(o.a.QUALITY_CHANGE_REQUESTED,ye,p),t.a.KEY_SESSION_UPDATED&&Ye.on(t.a.KEY_SESSION_UPDATED,vn,p),Ye.on(t.a.MANIFEST_UPDATED,Pr,p),Ye.on(t.a.STREAM_BUFFERING_COMPLETED,pn,p),Ye.on(t.a.TIME_SYNCHRONIZATION_COMPLETED,bn,p),Ye.on(t.a.CURRENT_TRACK_CHANGED,Me,p),Ye.on(t.a.SETTING_UPDATED_LIVE_DELAY,De,p),Ye.on(t.a.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,De,p)}()},getActiveStreamInfo:Ur,addDVRMetric:Ie,hasVideoTrack:ti,hasAudioTrack:kr,getStreamById:xi,getStreamForTime:ce,getTimeRelativeToStreamId:function(pe,je){for(var ln=null,Sn=0,xn=0,In=null,jn=0;jn<zt.length;jn++){if(xn=(ln=zt[jn]).getStartTime(),In=ln.getDuration(),Number.isFinite(xn)&&(Sn=xn),ln.getId()===je)return pe-Sn;Number.isFinite(In)&&(Sn+=In)}return null},load:function(pe){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;un(),Le=je,M.load(pe)},loadWithManifest:function(pe){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;mn(),Le=je,R.setManifest(pe)},getActiveStreamProcessors:Xn,setConfig:function(pe){pe&&(pe.capabilities&&(m=pe.capabilities),pe.capabilitiesFilter&&(_=pe.capabilitiesFilter),pe.manifestLoader&&(M=pe.manifestLoader),pe.manifestModel&&(E=pe.manifestModel),pe.mediaPlayerModel&&(Se=pe.mediaPlayerModel),pe.customParametersModel&&(oe=pe.customParametersModel),pe.protectionController&&(W=pe.protectionController),pe.adapter&&(q=pe.adapter),pe.dashMetrics&&(k=pe.dashMetrics),pe.errHandler&&(Tt=pe.errHandler),pe.timelineConverter&&(pt=pe.timelineConverter),pe.videoModel&&(Kt=pe.videoModel),pe.playbackController&&(fe=pe.playbackController),pe.serviceDescriptionController&&($t=pe.serviceDescriptionController),pe.contentSteeringController&&(V=pe.contentSteeringController),pe.textController&&($=pe.textController),pe.abrController&&(ht=pe.abrController),pe.mediaController&&(gt=pe.mediaController),pe.settings&&(ne=pe.settings),pe.baseURLController&&(st=pe.baseURLController),pe.uriFragmentModel&&(wt=pe.uriFragmentModel),pe.segmentBaseController&&(U=pe.segmentBaseController))},setProtectionData:function(pe){tt=pe,W&&W.setProtectionData(tt)},getIsStreamSwitchInProgress:function(){return ut},switchToVideoElement:function(pe){Dt&&(fe.initialize(Ur()),Mn(pe,!1))},getHasMediaOrInitialisationError:function(){return St||et},getStreams:ki,getActiveStream:function(){return Dt},getInitialPlayback:function(){return ze},getAutoPlay:function(){return Et},reset:Fi},i=Object(f.a)(sn).getInstance().getLogger(p),rt=Ve(sn).getInstance(),Y=C(sn).getInstance(),ot=L(sn).getInstance(),Vt=Object(ge.a)(sn).getInstance(),Ba(),p}Je.__dashjs_factory_name="StreamController";var Ue=r.a.getSingletonFactory(Je);function $e(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st=this.context,U=Object(d.a)(st).getInstance();function wt(){V.debug("Stopping the gap controller"),R&&(clearInterval(R),R=null),function(){U.off(t.a.WALLCLOCK_TIME_UPDATED,Vt,this),U.off(t.a.INITIAL_STREAM_SWITCH,ot,this),U.off(t.a.PLAYBACK_SEEKING,ht,this),U.off(t.a.BUFFER_REPLACEMENT_STARTED,gt,p),U.off(t.a.TRACK_CHANGE_RENDERED,yt,p)}(),R=null,M=NaN,_=0,Y=null,rt={}}function ht(){Y&&(clearTimeout(Y),Y=null)}function gt($){try{if($.streamId!==q.getActiveStreamInfo().id||$.mediaType!==h.a.VIDEO&&$.mediaType!==h.a.AUDIO)return;$.streamId===q.getActiveStreamInfo().id&&(rt[$.mediaType]=!0)}catch(tt){V.error(tt)}}function yt($){$&&$.mediaType&&(rt[$.mediaType]=!1)}function ot(){R||function(){try{R||(V.debug("Starting the gap controller"),R=setInterval(function(){Tt()&&W(E.getTime())},100))}catch{}}()}function Vt(){if(Tt(m.get().streaming.gaps.enableSeekFix)&&++_>=10){var $=E.getTime();i===$?W($,!0):(i=$,M=NaN),_=0}}function Tt(){var $=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!q.getActiveStream())return!1;var tt=Object.keys(rt).some(function(ut){return rt[ut]}),Et=!!$&&pt();return!tt&&m.get().streaming.gaps.jumpGaps&&q.getActiveStreamProcessors().length>0&&(!E.isSeeking()||Et)&&!E.isPaused()&&!q.getIsStreamSwitchInProgress()&&!q.getHasMediaOrInitialisationError()}function pt(){var $=q.getActiveStream(),tt=parseFloat(($.getStartTime()+$.getDuration()).toFixed(5));return E.getTime()+m.get().streaming.gaps.threshold>=tt}function zt($,tt){try{if(!$||$.length<=1&&tt>0)return NaN;for(var Et=NaN,ut=0;isNaN(Et)&&ut<$.length;){var St=ut>0?$.end(ut-1):0;tt<$.start(ut)&&St-tt<m.get().streaming.gaps.threshold&&(Et=ut),ut+=1}return Et}catch{return null}}function Dt($,tt){for(var Et=0,ut=$.length;Et<ut;Et++)if(tt>=$.start(Et)&&tt<=$.end(Et))return!0;return!1}function W($){var tt,Et=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ut=m.get().streaming.gaps.enableStallFix,St=m.get().streaming.gaps.stallSeek,et=m.get().streaming.gaps.smallGapLimit,mt=m.get().streaming.gaps.jumpLargeGaps,Kt=k.getBufferRange(),fe=NaN,$t=!1;if(tt=zt(Kt,$),!isNaN(tt)){var Se=Kt.start(tt),oe=Se-$;oe>0&&(oe<=et||mt)&&(fe=Se)}var he=E.getTimeToStreamEnd();if(isNaN(fe)&&Et&&isFinite(he)&&!isNaN(he)&&he<et&&(fe=parseFloat(E.getStreamEndTime().toFixed(5)),$t=!0),ut&&isNaN(fe)&&Et&&isNaN(tt)&&Dt(Kt,$)&&(St===0?(V.warn("Toggle play pause to break stall"),k.pause(),k.play()):(V.warn("Jumping ".concat(St,"s to break stall")),fe=$+St)),fe>0&&M!==fe&&fe>$&&!Y){var ze=fe-$;if($t){var Pe=q.getStreamForTime(fe),Re=Pe&&!!Pe.getPreloaded();V.warn("Jumping to end of stream because of gap from ".concat($," to ").concat(fe,". Gap duration: ").concat(ze)),E.seek(fe,!0,Re)}else{var lt=E.getIsDynamic(),Ft=tt>0?Kt.end(tt-1):$,Qt=lt?1e3*Math.max(0,ze-.1):0;Y=window.setTimeout(function(){E.seek(fe,!0,!0),V.warn("Jumping gap occuring in period ".concat(q.getActiveStream().getStreamId()," starting at ").concat(Ft," and ending at ").concat(fe,". Jumping by: ").concat(fe-Ft)),Y=null},Qt)}M=fe}}return p={reset:wt,setConfig:function($){$&&($.settings&&(m=$.settings),$.playbackController&&(E=$.playbackController),$.streamController&&(q=$.streamController),$.videoModel&&(k=$.videoModel))},initialize:function(){(function(){U.on(t.a.WALLCLOCK_TIME_UPDATED,Vt,this),U.on(t.a.INITIAL_STREAM_SWITCH,ot,this),U.on(t.a.PLAYBACK_SEEKING,ht,this),U.on(t.a.BUFFER_REPLACEMENT_STARTED,gt,p),U.on(t.a.TRACK_CHANGE_RENDERED,yt,p)})()}},V=Object(f.a)(st).getInstance().getLogger(p),wt(),p}$e.__dashjs_factory_name="GapController";var Xe=r.a.getSingletonFactory($e),Tn=x(14);function yn(){var p,i,m,_,R,M,E,q,k,Y,rt=this.context,V=Object(d.a)(rt).getInstance();function st(){i=!1;var pt=Tn.a.parseUserAgent();m=pt&&pt.browser&&pt.browser.name&&pt.browser.name.toLowerCase()==="safari"}function U(){i=!1}function wt(pt){if(pt.streamId===M.getActiveStreamInfo().id&&k){var zt=E.getLiveDelay();E.getBufferLevel()>zt/2&&(k=!1)}}function ht(pt){pt.streamId===M.getActiveStreamInfo().id&&(k=pt.state===n.a.BUFFER_EMPTY)}function gt(){q.getCatchupModeEnabled()||_.setPlaybackRate(1)}function yt(){E.getIsDynamic()&&q.getCatchupModeEnabled()&&(q.getCatchupPlaybackRates().max>0||q.getCatchupPlaybackRates().min<0)&&!E.isPaused()&&!E.isSeeking()&&function(){try{if(!E.getTime()>0||i)return!1;if(Vt()===h.a.LIVE_CATCHUP_MODE_LOLP){var pt=E.getBufferLevel(),zt=R.get().streaming.liveCatchup.playbackBufferMin;return function(Dt,W){try{return Math.abs(ot())>0||Dt<W}catch{return!1}}(pt,zt)}return function(){try{return Math.abs(ot())>0}catch{return!1}}()}catch{return!1}}()&&function(){if(!i&&_){var pt,zt=_.getPlaybackRate(),Dt=q.getCatchupPlaybackRates(),W=E.getBufferLevel(),$=ot(),tt=q.getCatchupMaxDrift();if(!isNaN(tt)&&tt>0&&$>tt)Y.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),i=!0,E.seekToCurrentLive(!0,!1);else{var Et=E.getCurrentLiveLatency(),ut=E.getLiveDelay();if(Vt()===h.a.LIVE_CATCHUP_MODE_LOLP){var St=R.get().streaming.liveCatchup.playbackBufferMin;pt=function(mt,Kt,fe,$t,Se){var oe;if(Se<$t){var he=Math.abs(mt.min),ze=5*(Se-$t),Pe=2*he/(1+Math.pow(Math.E,-ze));oe=1-he+Pe,Y.debug("[LoL+ playback control_buffer-based] bufferLevel: "+Se+", newRate: "+oe)}else{var Re=mt.max;if(Math.abs(Kt-fe)<=.02*fe)oe=1;else{var lt=5*(Kt-fe),Ft=2*Re/(1+Math.pow(Math.E,-lt));oe=1-Re+Ft}Y.debug("[LoL+ playback control_latency-based] latency: "+Kt+", newRate: "+oe)}return oe}(Dt,Et,ut,St,W)}else pt=function(mt,Kt,fe,$t){if(k)return 1;var Se=Kt-fe,oe=Se<0?Math.abs(mt.min):mt.max,he=5*Se,ze=2*oe/(1+Math.pow(Math.E,-he)),Pe=1-oe+ze;return E.getPlaybackStalled()&&$t<=fe/2&&Se>0&&(Pe=1),Pe}(Dt,Et,ut,W);var et=m?.25:.02/(.5/Dt.max);pt&&Math.abs(zt-pt)>=et&&(Y.debug("[CatchupController]: Setting playback rate to ".concat(pt)),_.setPlaybackRate(pt))}}}()}function ot(){return E.getCurrentLiveLatency()-E.getLiveDelay()}function Vt(){var pt=R.get().streaming.liveCatchup.playbackBufferMin;return R.get().streaming.liveCatchup.mode!==h.a.LIVE_CATCHUP_MODE_LOLP||pt===null||isNaN(pt)?h.a.LIVE_CATCHUP_MODE_DEFAULT:h.a.LIVE_CATCHUP_MODE_LOLP}function Tt(){q.getCatchupPlaybackRates(!0)}return p={reset:function(){V.off(o.a.BUFFER_LEVEL_UPDATED,wt,p),V.off(o.a.BUFFER_LEVEL_STATE_CHANGED,ht,p),V.off(o.a.PLAYBACK_PROGRESS,yt,p),V.off(o.a.PLAYBACK_TIME_UPDATED,yt,p),V.off(o.a.PLAYBACK_SEEKED,yt,p),V.off(t.a.SETTING_UPDATED_CATCHUP_ENABLED,gt,p),V.off(t.a.SETTING_UPDATED_PLAYBACK_RATE_MIN,Tt,p),V.off(t.a.SETTING_UPDATED_PLAYBACK_RATE_MAX,Tt,p),V.off(o.a.STREAM_INITIALIZED,Tt,p),st(),_.setPlaybackRate(1,!0)},setConfig:function(pt){pt&&(pt.settings&&(R=pt.settings),pt.videoModel&&(_=pt.videoModel),pt.streamController&&(M=pt.streamController),pt.playbackController&&(E=pt.playbackController),pt.mediaPlayerModel&&(q=pt.mediaPlayerModel))},initialize:function(){V.on(o.a.BUFFER_LEVEL_UPDATED,wt,p),V.on(o.a.BUFFER_LEVEL_STATE_CHANGED,ht,p),V.on(o.a.PLAYBACK_PROGRESS,yt,p),V.on(o.a.PLAYBACK_TIME_UPDATED,yt,p),V.on(o.a.PLAYBACK_SEEKED,U,p),V.on(t.a.SETTING_UPDATED_CATCHUP_ENABLED,gt,p),V.on(t.a.SETTING_UPDATED_PLAYBACK_RATE_MIN,Tt,p),V.on(t.a.SETTING_UPDATED_PLAYBACK_RATE_MAX,Tt,p),V.on(o.a.STREAM_INITIALIZED,Tt,p),Tt()}},Y=Object(f.a)(rt).getInstance().getLogger(p),st(),p}yn.__dashjs_factory_name="CatchupController";var zn=r.a.getSingletonFactory(yn),Fn=[h.a.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Pn="video",Gn="audio",qn="any",Bn="all";function $n(){var p,i,m,_,R,M=this.context;function E(){i={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{}},m=[]}function q(k,Y,rt){try{i[k][Y]=rt/1e3}catch(V){_.error(V)}}return p={getServiceDescriptionSettings:function(){return i},getProducerReferenceTimeOffsets:function(){return m},calculateProducerReferenceTimeOffsets:function(k){try{var Y=[];if(k&&k.length>0){var rt=[h.a.VIDEO,h.a.AUDIO,h.a.TEXT],V=R.getAvailabilityStartTime()/1e3;k.forEach(function(st){var U=rt.reduce(function(wt,ht){return wt=wt.concat(R.getAllMediaInfoForType(st,ht))},[]).reduce(function(wt,ht){return R.getProducerReferenceTimes(st,ht).forEach(function(gt){var yt=R.getVoRepresentations(ht);if(yt&&yt.length>0&&yt[0].adaptation&&yt[0].segmentInfoType===c.a.SEGMENT_TEMPLATE){var ot=yt[0],Vt=new Date(gt[c.a.WALL_CLOCK_TIME]).getTime()/1e3-(gt[c.a.PRESENTATION_TIME]/ot[c.a.TIMESCALE]-ot[c.a.PRESENTATION_TIME_OFFSET]+st.start),Tt=V-Vt;wt.push({id:gt[c.a.ID],to:Tt})}}),wt},[]);Y=Y.concat(U)})}m=Y}catch(st){_.error(st),m=[]}},applyServiceDescription:function(k){if(k&&k.serviceDescriptions){var Y=k.serviceDescriptions.filter(function(st){return Fn.includes(st.schemeIdUri)}),rt=k.serviceDescriptions.filter(function(st){return st.schemeIdUri==null}),V=Y.length>0?Y[Y.length-1]:rt[rt.length-1];V&&(V.latency&&V.latency.target>0&&function(st){var U;if(U=st.schemeIdUri===h.a.SERVICE_DESCRIPTION_DVB_LL_SCHEME?function(yt){var ot=yt.latency.target/1e3,Vt=!isNaN(yt.latency.max)&&yt.latency.max>yt.latency.target?(yt.latency.max-yt.latency.target+500)/1e3:NaN,Tt=yt.latency.referenceId||NaN;return{liveDelay:ot,maxDrift:Vt,referenceId:Tt}}(st):function(yt){var ot=yt.latency.target/1e3,Vt=!isNaN(yt.latency.max)&&yt.latency.max>yt.latency.target?(yt.latency.max-yt.latency.target+500)/1e3:NaN,Tt=yt.latency.referenceId||NaN;return{liveDelay:ot,maxDrift:Vt,referenceId:Tt}}(st),m.length>0){var wt=function(yt){var ot,Vt=0,Tt=m.filter(function(pt){return pt.id===yt.referenceId});return Tt.length===0?(Vt=m.length>0?m[0].to:0,ot=m[0].id||NaN):(Vt=Tt[0].to||0,ot=Tt[0].id||NaN),{to:Vt,id:ot}}(U),ht=wt.to,gt=wt.id;i.liveDelay=U.liveDelay-ht,i.liveCatchup.maxDrift=U.maxDrift,_.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(ht," from ProducerReferenceTime element with id ").concat(gt,`.
                Live Delay: `).concat(U.liveDelay-ht,", Live catchup max drift: ").concat(U.maxDrift,`
            `))}else i.liveDelay=U.liveDelay,i.liveCatchup.maxDrift=U.maxDrift,_.debug("Found latency properties coming from service description: Live Delay: ".concat(U.liveDelay,", Live catchup max drift: ").concat(U.maxDrift))}(V),V.playbackRate&&function(st){var U=st.playbackRate.min?Math.round(1e3*(st.playbackRate.min-1))/1e3:NaN,wt=st.playbackRate.max?Math.round(1e3*(st.playbackRate.max-1))/1e3:NaN;i.liveCatchup.playbackRate.min=U,i.liveCatchup.playbackRate.max=wt,_.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(U)),_.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(wt))}(V),V.operatingQuality,V.operatingBandwidth&&function(st){if(!(!st||!st.operatingBandwidth||!st.operatingBandwidth.mediaType||st.operatingBandwidth.mediaType===Bn)){var U={};U.minBandwidth=st.operatingBandwidth.min,U.maxBandwidth=st.operatingBandwidth.max,U.targetBandwidth=st.operatingBandwidth.target;var wt=[];st.operatingBandwidth.mediaType===Pn||st.operatingBandwidth.mediaType===Gn?wt.push(st.operatingBandwidth.mediaType):st.operatingBandwidth.mediaType===qn&&(wt.push(Gn),wt.push(Pn)),wt.forEach(function(ht){isNaN(U.minBandwidth)||q("minBitrate",ht,U.minBandwidth),isNaN(U.maxBandwidth)||q("maxBitrate",ht,U.maxBandwidth),isNaN(U.targetBandwidth)||q("initialBitrate",ht,U.targetBandwidth)})}}(V))}},reset:function(){E()},setConfig:function(k){k&&k.adapter&&(R=k.adapter)}},_=Object(f.a)(M).getInstance().getLogger(p),E(),p}$n.__dashjs_factory_name="ServiceDescriptionController";var er=r.a.getSingletonFactory($n),kn=x(22);function Cn(p){return(Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function ur(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Cn(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Cn(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Cn(M)==="symbol"?M:String(M)),_)}var R,M}function wr(p,i,m){return i&&ur(p.prototype,i),m&&ur(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var br=wr(function p(i){(function(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")})(this,p),this.url=i||null,this.type=y.a.CONTENT_STEERING_TYPE,this.responseType="json"});function dr(p){return(dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function te(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(dr(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(dr(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),dr(M)==="symbol"?M:String(M)),_)}var R,M}function Rt(p,i,m){return i&&te(p.prototype,i),m&&te(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var ae=Rt(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.version=null,this.ttl=300,this.reloadUri=null,this.serviceLocationPriority=[]}),Lt="_DASH_throughput",qt="_DASH_pathway",Xt="url";function re(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht=this.context,gt=Object(ge.a)(ht).getInstance();function yt(W){W&&W.toStreamInfo&&(_=W.toStreamInfo)}function ot(W){W&&W.request&&W.request.serviceLocation&&(R=W.request.serviceLocation)}function Vt(){var W=rt.getValue();return wt.getContentSteering(W)}function Tt(){return new Promise(function(W){try{var $=Vt();if(!$||!$.serverUrl)return void W();var tt=function(ut){var St=ut.proxyServerUrl?ut.proxyServerUrl:ut.serverUrl;m&&m.reloadUri&&(St=gt.isRelative(m.reloadUri)?gt.resolve(m.reloadUri,ut.serverUrl):m.reloadUri);var et=[];if(_){var mt=wt.getIsDynamic(),Kt=wt.getAllMediaInfoForType(_,h.a.VIDEO).length>0?h.a.VIDEO:h.a.AUDIO,fe=st.getThroughputHistory(),$t=fe?fe.getAverageThroughput(Kt,mt):NaN;isNaN($t)||et.push({key:Lt,value:1e3*$t})}return R&&et.push({key:qt,value:R}),ut.proxyServerUrl&&ut.proxyServerUrl===St&&ut.serverUrl&&et.push({key:Xt,value:encodeURI(ut.serverUrl)}),St=Tn.a.addAditionalQueryParameterToUrl(St,et)}($),Et=new br(tt);E.load({request:Et,success:function(ut){(function(St){!St||!St[c.a.CONTENT_STEERING_RESPONSE.VERSION]||parseInt(St[c.a.CONTENT_STEERING_RESPONSE.VERSION])!==1||((m=new ae).version=St[c.a.CONTENT_STEERING_RESPONSE.VERSION],St[c.a.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(St[c.a.CONTENT_STEERING_RESPONSE.TTL])&&(m.ttl=St[c.a.CONTENT_STEERING_RESPONSE.TTL]),St[c.a.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(m.reloadUri=St[c.a.CONTENT_STEERING_RESPONSE.RELOAD_URI]),St[c.a.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]&&(m.serviceLocationPriority=St[c.a.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]),pt())})(ut),U.trigger(o.a.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:m,url:tt}),W()},error:function(ut){(function(St){i.warn("Error fetching data from content steering server",St),pt()})(ut),W(ut)}})}catch(ut){W(ut)}})}function pt(){m&&m.ttl&&!isNaN(m.ttl)&&(M&&clearTimeout(M),M=setTimeout(function(){Tt()},1e3*m.ttl))}function zt(){M&&clearTimeout(M),M=null}function Dt(){m=null,_=null,R=null,zt()}return p={reset:function(){Dt(),U.off(o.a.PERIOD_SWITCH_COMPLETED,yt,p),U.off(t.a.FRAGMENT_LOADING_STARTED,ot,p)},setConfig:function(W){W&&(W.adapter&&(wt=W.adapter),W.errHandler&&(q=W.errHandler),W.dashMetrics&&(k=W.dashMetrics),W.mediaPlayerModel&&(Y=W.mediaPlayerModel),W.requestModifier&&(V=W.requestModifier),W.manifestModel&&(rt=W.manifestModel),W.abrController&&(st=W.abrController),W.eventBus&&(U=W.eventBus))},loadSteeringData:Tt,getCurrentSteeringResponseData:function(){return m},shouldQueryBeforeStart:function(){var W=Vt();return W&&W.queryBeforeStart},getSteeringDataFromManifest:Vt,stopSteeringRequestTimer:zt,initialize:function(){E=Object(kn.a)(ht).create({errHandler:q,dashMetrics:k,mediaPlayerModel:Y,requestModifier:V,errors:H.a}),U.on(o.a.PERIOD_SWITCH_COMPLETED,yt,p),U.on(t.a.FRAGMENT_LOADING_STARTED,ot,p)}},i=Object(f.a)(ht).getInstance().getLogger(p),Dt(),p}re.__dashjs_factory_name="ContentSteeringController";var be=r.a.getSingletonFactory(re),Ne=x(30),Be=x.n(Ne),an=x(50);function rn(){var p,i,m,_,R,M,E,q,k=this.context,Y=Object(d.a)(k).getInstance();function rt(et,mt){return et&&m[mt]&&m[mt][et]?m[mt][et].list:[]}function V(et,mt){return et&&m[mt]&&m[mt][et]?m[mt][et].current:null}function st(et){var mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(et&&et.streamInfo){var Kt=et.type,fe=et.streamInfo,$t=fe.id,Se=V(Kt,$t);if(m[$t]&&m[$t][Kt]&&(m[$t][Kt].current=et,m[$t][Kt].current&&(Kt!==h.a.TEXT&&!ht(et,Se)||Kt===h.a.TEXT&&et.isFragmented)&&Y.trigger(t.a.CURRENT_TRACK_CHANGED,{oldMediaInfo:Se,newMediaInfo:et,switchMode:_.get().streaming.trackSwitchMode[Kt]},{streamId:$t}),!mt)){var oe=yt(et);if(!oe||!m[$t][Kt].storeLastSettings)return;oe.roles&&(oe.role=oe.roles[0],delete oe.roles),oe.accessibility&&(oe.accessibility=oe.accessibility[0]),oe.audioChannelConfiguration&&(oe.audioChannelConfiguration=oe.audioChannelConfiguration[0]),M[Kt]=oe,q.setSavedMediaSettings(Kt,oe)}}}function U(et,mt){et&&mt&&(R[et]=mt)}function wt(et){return et?R[et]:null}function ht(et,mt){if(!et&&!mt)return!0;if(!et||!mt)return!1;var Kt=et.id===mt.id,fe=et.viewpoint===mt.viewpoint,$t=et.lang===mt.lang,Se=et.codec===mt.codec,oe=et.roles.toString()===mt.roles.toString(),he=et.accessibility.toString()===mt.accessibility.toString(),ze=et.audioChannelConfiguration.toString()===mt.audioChannelConfiguration.toString();return Kt&&Se&&fe&&$t&&oe&&he&&ze}function gt(){m={},M={},R={audio:null,video:null,text:null}}function yt(et){var mt={lang:et.lang,viewpoint:et.viewpoint,roles:et.roles,accessibility:et.accessibility,audioChannelConfiguration:et.audioChannelConfiguration};return mt.lang||mt.viewpoint||mt.role&&mt.role.length>0||mt.accessibility&&mt.accessibility.length>0||mt.audioChannelConfiguration&&mt.audioChannelConfiguration.length>0?mt:null}function ot(et,mt,Kt){var fe=[];return et.forEach(function($t){mt(Kt,$t)&&fe.push($t)}),fe.length!==0?fe:et}function Vt(et,mt){return!et.lang||et.lang instanceof RegExp?mt.lang.match(et.lang):mt.lang!==""&&Object(an.extendedFilter)(mt.lang,Be()(et.lang)).length>0}function Tt(et,mt){return et.index===void 0||et.index===null||mt.index===et.index}function pt(et,mt){return!et.viewpoint||et.viewpoint===mt.viewpoint}function zt(et,mt){var Kt=arguments.length>2&&arguments[2]!==void 0&&arguments[2],fe=!et.role||!!mt.roles.filter(function($t){return $t===et.role})[0];return fe||mt.type===h.a.AUDIO&&Kt}function Dt(et,mt){return et.accessibility?!!mt.accessibility.filter(function(Kt){return Kt===et.accessibility})[0]:!mt.accessibility.length}function W(et,mt){return!et.audioChannelConfiguration||!!mt.audioChannelConfiguration.filter(function(Kt){return Kt===et.audioChannelConfiguration})[0]}function $(et){var mt,Kt=0,fe=[];return et.forEach(function($t){(mt=Math.max.apply(Math,$t.bitrateList.map(function(Se){return Se.bandwidth})))>Kt?(Kt=mt,fe=[$t]):mt===Kt&&fe.push($t)}),fe}function tt(et){var mt,Kt=1/0,fe=[];return et.forEach(function($t){var Se=$t.bitrateList.reduce(function(oe,he){var ze=Math.max(1,he.width*he.height);return oe+he.bandwidth/ze},0);(mt=Se/$t.bitrateList.length)<Kt?(Kt=mt,fe=[$t]):mt===Kt&&fe.push($t)}),fe}function Et(et){var mt,Kt=0,fe=[];return et.forEach(function($t){(mt=$t.representationCount)>Kt?(Kt=mt,fe=[$t]):mt===Kt&&fe.push($t)}),fe}function ut(et,mt){if(et===h.a.TEXT)return mt[0];var Kt,fe=_.get().streaming.selectionModeForInitialTrack,$t=E.getCustomInitialTrackSelectionFunction();if($t&&typeof $t=="function")Kt=$t(mt);else switch(fe){case h.a.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Kt=function(Se){var oe=(he=Se,ze=0,Pe=[],he.forEach(function(Re){isNaN(Re.selectionPriority)||(Re.selectionPriority>ze?(ze=Re.selectionPriority,Pe=[Re]):Re.selectionPriority===ze&&Pe.push(Re))}),Pe),he,ze,Pe;return oe.length>1&&(oe=$(oe)),oe.length>1&&(oe=Et(oe)),oe}(mt);break;case h.a.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Kt=function(Se){var oe=$(Se);return oe.length>1&&(oe=Et(oe)),oe}(mt);break;case h.a.TRACK_SELECTION_MODE_FIRST_TRACK:Kt=St(mt);break;case h.a.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Kt=function(Se){var oe=tt(Se);return oe.length>1&&(oe=$(oe)),oe}(mt);break;case h.a.TRACK_SELECTION_MODE_WIDEST_RANGE:Kt=function(Se){var oe=Et(Se);return oe.length>1&&(oe=$(Se)),oe}(mt);break;default:i.warn("Track selection mode ".concat(fe," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Kt=St(mt)}return Kt.length>0?Kt[0]:mt[0]}function St(et){return et[0]}return p={setInitialMediaSettingsForType:function(et,mt){var Kt=M[et]||wt(et),fe=rt(et,mt.id),$t=[];Kt||U(et,Kt=q.getSavedMediaSettings(et)),fe&&fe.length!==0&&(Kt&&($t=ot($t=Array.from(fe),Vt,Kt),$t=ot($t,Tt,Kt),$t=ot($t,pt,Kt),et===h.a.AUDIO&&M[et]||($t=ot($t,zt,Kt)),$t=ot($t,Dt,Kt),$t=ot($t,W,Kt)),$t.length===0?st(ut(et,fe),!0):$t.length>1?st(ut(et,$t,M[et])):st($t[0]))},addTrack:function(et){if(et){var mt=et.type;if((Kt=mt)===h.a.AUDIO||Kt===h.a.VIDEO||Kt===h.a.TEXT||Kt===h.a.IMAGE){var Kt,fe=et.streamInfo.id;m[fe]||(m[fe]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var $t=m[fe][mt].list,Se=0,oe=$t.length;Se<oe;++Se)if(ht($t[Se],et))return;$t.push(et)}}},getTracksFor:rt,getCurrentTrackFor:V,isCurrentTrack:function(et){if(!et)return!1;var mt=et.type,Kt=et.streamInfo.id;return m[Kt]&&m[Kt][mt]&&ht(m[Kt][mt].current,et)},setTrack:st,selectInitialTrack:ut,setInitialSettings:U,getInitialSettings:wt,getTracksWithHighestBitrate:$,getTracksWithHighestEfficiency:tt,getTracksWithWidestRange:Et,isTracksEqual:ht,matchSettings:function(et,mt){var Kt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var fe=!1;if(et.lang){if(et.lang instanceof RegExp)fe=mt.lang.match(et.lang);else if(mt.lang!==""){var $t=Be()(et.lang);$t&&(fe=Object(an.extendedFilter)(mt.lang,$t).length>0)}}else fe=!0;var Se=et.index===void 0||et.index===null||mt.index===et.index,oe=!et.viewpoint||et.viewpoint===mt.viewpoint,he=!et.role||!!mt.roles.filter(function(Re){return Re===et.role})[0],ze=!et.accessibility||!!mt.accessibility.filter(function(Re){return Re===et.accessibility})[0],Pe=!et.audioChannelConfiguration||!!mt.audioChannelConfiguration.filter(function(Re){return Re===et.audioChannelConfiguration})[0];return fe&&Se&&oe&&(he||mt.type===h.a.AUDIO&&Kt)&&ze&&Pe}catch{return!1}},matchSettingsLang:Vt,matchSettingsIndex:Tt,matchSettingsViewPoint:pt,matchSettingsRole:zt,matchSettingsAccessibility:Dt,matchSettingsAudioChannelConfig:W,saveTextSettingsDisabled:function(){q.setSavedMediaSettings(h.a.TEXT,null)},setConfig:function(et){et&&(et.domStorage&&(q=et.domStorage),et.settings&&(_=et.settings),et.customParametersModel&&(E=et.customParametersModel))},reset:gt},i=Object(f.a)(k).getInstance().getLogger(p),gt(),p}rn.__dashjs_factory_name="MediaController";var Ce=r.a.getSingletonFactory(rn);r.a.updateSingletonFactory(rn.__dashjs_factory_name,Ce);var Ke=Ce,Qe=x(46);function cn(p){return(cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function wn(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(cn(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(cn(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),cn(M)==="symbol"?M:String(M)),_)}var R,M}function He(p,i,m){return i&&wn(p.prototype,i),m&&wn(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var ke=He(function p(i,m){(function(_,R){if(!(_ instanceof R))throw new TypeError("Cannot call a class as a function")})(this,p),this.data={baseUrls:i||null,selectedIdx:m||NaN},this.children=[]});function on(){var p,i,m,_=this.context,R=Object(Qe.a)(_).getInstance();function M(k,Y,rt){var V=m.getBaseURLsFromElement(rt);k[Y]?R.areEqual(V,k[Y].data.baseUrls)||(k[Y].data.baseUrls=V,k[Y].data.selectedIdx=NaN):k[Y]=new ke(V)}function E(k){(function(){if(!m||!m.hasOwnProperty("getBaseURLsFromElement")||!m.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var Y=m.getBaseURLsFromElement(k);R.areEqual(Y,i.data.baseUrls)||(i.data.baseUrls=Y,i.data.selectedIdx=NaN),k&&k.Period_asArray&&k.Period_asArray.forEach(function(rt,V){M(i.children,V,rt),rt.AdaptationSet_asArray&&rt.AdaptationSet_asArray.forEach(function(st,U){M(i.children[V].children,U,st),st.Representation_asArray&&st.Representation_asArray.sort(m.getRepresentationSortFunction()).forEach(function(wt,ht){M(i.children[V].children[U].children,ht,wt)})})})}function q(){i=new ke}return p={reset:q,update:function(k){E(k)},getForPath:function(k){var Y=i,rt=[Y.data];return k&&k.forEach(function(V){(Y=Y.children[V])&&rt.push(Y.data)}),rt.filter(function(V){return V.baseUrls.length})},invalidateSelectedIndexes:function(k){(function Y(rt,V){var st=V||i;rt(st.data),st.children&&st.children.forEach(function(U){return Y(rt,U)})})(function(Y){isNaN(Y.selectedIdx)||k===Y.baseUrls[Y.selectedIdx].serviceLocation&&(Y.selectedIdx=NaN)})},setConfig:function(k){k.adapter&&(m=k.adapter)}},q(),p}on.__dashjs_factory_name="BaseURLTreeModel";var en=r.a.getClassFactory(on);function nn(p){var i=(p=p||{}).blacklistController;return{select:function(m){return m&&function(R){var M,E,q=0,k=[],Y=0;if((E=R.sort(function(rt,V){var st=rt.dvb_priority-V.dvb_priority;return isNaN(st)?0:st}).filter(function(rt,V,st){return!V||st[0].dvb_priority&&rt.dvb_priority&&st[0].dvb_priority===rt.dvb_priority})).length)return E.length>1&&(E.forEach(function(rt){q+=rt.dvb_weight,k.push(q)}),M=Math.floor(Math.random()*(q-1)),k.every(function(rt,V){return Y=V,!(M<rt)})),E[Y]}((_=[],m.filter(function(R){return!i.contains(R.serviceLocation)||(R.dvb_priority&&_.push(R.dvb_priority),!1)}).filter(function(R){return!_.length||!R.dvb_priority||_.indexOf(R.dvb_priority)===-1})));var _}}}nn.__dashjs_factory_name="DVBSelector";var _n=r.a.getClassFactory(nn);function Rn(p){var i=(p=p||{}).blacklistController;return{select:function(m){var _,R=0;return m&&m.some(function(M,E){return R=E,!i.contains(M.serviceLocation)})&&(_=m[R]),_}}}Rn.__dashjs_factory_name="BasicSelector";var Hn=r.a.getClassFactory(Rn);function Yn(){var p,i,m,_=this.context;function R(){for(var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=0,k=NaN,Y=function(){var V=M[q],st=E.findIndex(function(U){return U.serviceLocation&&U.serviceLocation===V});if(st!==-1&&!m.contains(E[st].serviceLocation))return k=st,"break";q+=1};q<M.length;){var rt=Y();if(rt==="break")break}return k}return p={selectBaseUrlIndex:function(M){var E=NaN;if(isNaN(M.selectedIdx)){var q=i.getSteeringDataFromManifest();q&&q.defaultServiceLocation&&(E=R([q.defaultServiceLocation],M.baseUrls))}var k=i.getCurrentSteeringResponseData();return M.baseUrls&&M.baseUrls.length&&k&&k.serviceLocationPriority&&k.serviceLocationPriority.length&&(E=R(k.serviceLocationPriority,M.baseUrls)),E},setConfig:function(M){M.blacklistController&&(m=M.blacklistController),M.contentSteeringController&&(i=M.contentSteeringController)}},i=be(_).getInstance(),p}Yn.__dashjs_factory_name="ContentSteeringSelector";var lr=r.a.getClassFactory(Yn);function mr(){var p,i,m,_,R,M,E=this.context,q=Object(d.a)(E).getInstance(),k=Object(D.a)(E).getInstance();function Y(){i.reset()}return p={chooseSelector:function(rt){Object(vt.b)(rt,"boolean"),M=rt?_:m},select:function(rt){if(rt){if(k.get().streaming.applyContentSteering){var V=R.selectBaseUrlIndex(rt);isNaN(V)||V===-1||(rt.selectedIdx=V)}if(!isNaN(rt.selectedIdx))return rt.baseUrls[rt.selectedIdx];var st=M.select(rt.baseUrls);return st?(rt.selectedIdx=rt.baseUrls.indexOf(st),st):(q.trigger(t.a.URL_RESOLUTION_FAILED,{error:new B.a(H.a.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,H.a.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(M===m&&Y()))}},reset:Y,setConfig:function(rt){rt.selector&&(M=rt.selector),rt.contentSteeringSelector&&(R=rt.contentSteeringSelector)}},i=ve(E).create({updateEventName:t.a.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:t.a.SERVICE_LOCATION_BLACKLIST_ADD}),m=Hn(E).create({blacklistController:i}),_=_n(E).create({blacklistController:i}),(R=lr(E).create()).setConfig({blacklistController:i}),M=m,p}mr.__dashjs_factory_name="BaseURLSelector";var nr=r.a.getClassFactory(mr),ir=x(41);function Wn(){var p,i,m,_,R=this.context,M=Object(d.a)(R).getInstance(),E=Object(ge.a)(R).getInstance();function q(k){m.invalidateSelectedIndexes(k.entry)}return p={reset:function(){m.reset(),_.reset()},initialize:function(k){var Y;m.setConfig({adapter:i}),Y=k,m.update(Y),_.chooseSelector(i.getIsDVB(Y))},resolve:function(k){var Y=m.getForPath(k).reduce(function(rt,V){var st=_.select(V);return st?(E.isRelative(st.url)?rt.url=E.resolve(st.url,rt.url):(rt.url=st.url,rt.serviceLocation=st.serviceLocation),rt.availabilityTimeOffset=st.availabilityTimeOffset,rt.availabilityTimeComplete=st.availabilityTimeComplete,rt):new ir.a},new ir.a);if(!E.isRelative(Y.url))return Y},setConfig:function(k){k.baseURLTreeModel&&(m=k.baseURLTreeModel),k.baseURLSelector&&(_=k.baseURLSelector),k.adapter&&(i=k.adapter)}},m=en(R).create(),_=nr(R).create(),M.on(t.a.SERVICE_LOCATION_BLACKLIST_CHANGED,q,p),p}Wn.__dashjs_factory_name="BaseURLController";var sr=r.a.getClassFactory(Wn),pr=x(17);function Ir(p){return(Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function _r(p,i){return(_r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,_){return m.__proto__=_,m})(p,i)}function rr(p){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var m,_=Cr(p);if(i){var R=Cr(this).constructor;m=Reflect.construct(_,arguments,R)}else m=_.apply(this,arguments);return Vr(this,m)}}function Vr(p,i){if(i&&(Ir(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(p)}function Cr(p){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(p)}var Br=function(p){(function(R,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(M&&M.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),M&&_r(R,M)})(_,p);var i,m=rr(_);function _(R,M){var E;return function(q,k){if(!(q instanceof k))throw new TypeError("Cannot call a class as a function")}(this,_),(E=m.call(this)).url=R||null,E.type=M||null,E.mediaType=h.a.STREAM,E.responseType="",E}return i=_,Object.defineProperty(i,"prototype",{writable:!1}),i}(pr.a);function jr(p){p=p||{};var i=this.context,m=Object(d.a)(i).getInstance(),_=Object(kn.a)(i).create({errHandler:p.errHandler,dashMetrics:p.dashMetrics,mediaPlayerModel:p.mediaPlayerModel,requestModifier:p.requestModifier,errors:H.a});return{load:function(R,M,E){var q=function(Y,rt){M.resolved=!0,M.resolvedContent=Y||null,m.trigger(t.a.XLINK_ELEMENT_LOADED,{element:M,resolveObject:E,error:Y||rt?null:new B.a(H.a.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,H.a.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+R)})};if(R==="urn:mpeg:dash:resolve-to-zero:2013")q(null,!0);else{var k=new Br(R,y.a.XLINK_EXPANSION_TYPE);_.load({request:k,success:function(Y){q(Y)},error:function(){q(null)}})}},reset:function(){_&&(_.abort(),_=null)}}}jr.__dashjs_factory_name="XlinkLoader";var Lr=r.a.getClassFactory(jr),Ze=x(47);function gn(p){p=p||{};var i,m,_,R,M,E,q=this.context,k=Object(d.a)(q).getInstance(),Y=Object(ge.a)(q).getInstance();function rt(ht,gt,yt){var ot,Vt,Tt={};Tt.elements=ht,Tt.type=gt,Tt.resolveType=yt,Tt.elements.length===0&&st(Tt);for(var pt=0;pt<Tt.elements.length;pt++)ot=Tt.elements[pt],Vt=Y.isHTTPURL(ot.url)?ot.url:ot.originalContent.BaseURL+ot.url,E.load(Vt,ot,Tt)}function V(ht){var gt,yt,ot="";if(gt=ht.element,yt=ht.resolveObject,gt.resolvedContent){var Vt=0;gt.resolvedContent.indexOf("<?xml")===0&&(Vt=gt.resolvedContent.indexOf("?>")+2),ot=gt.resolvedContent.substr(0,Vt)+"<response>"+gt.resolvedContent.substr(Vt)+"</response>",gt.resolvedContent=M.xml_str2json(ot)}(function(Tt){var pt;for(pt=0;pt<Tt.elements.length;pt++)if(Tt.elements[pt].resolved===!1)return!1;return!0})(yt)&&st(yt)}function st(ht){var gt,yt,ot=[];if(function(Vt){var Tt,pt,zt,Dt,W,$,tt=[];for(Dt=Vt.elements.length-1;Dt>=0;Dt--){if(Tt=Vt.elements[Dt],pt=Tt.type+"_asArray",Tt.resolvedContent){if(Tt.resolvedContent)for(W=0;W<Tt.resolvedContent[pt].length;W++)zt=Tt.resolvedContent[pt][W],tt.push(zt)}else delete Tt.originalContent["xlink:actuate"],delete Tt.originalContent["xlink:href"],tt.push(Tt.originalContent);for(Tt.parentElement[pt].splice(Tt.index,1),$=0;$<tt.length;$++)Tt.parentElement[pt].splice(Tt.index+$,0,tt[$]);tt=[]}Vt.elements.length>0&&_.run(R)}(ht),ht.resolveType==="onActuate"&&k.trigger(t.a.XLINK_READY,{manifest:R}),ht.resolveType==="onLoad")switch(ht.type){case c.a.PERIOD:for(gt=0;gt<R[c.a.PERIOD+"_asArray"].length;gt++)(yt=R[c.a.PERIOD+"_asArray"][gt]).hasOwnProperty(c.a.ADAPTATION_SET+"_asArray")&&(ot=ot.concat(U(yt[c.a.ADAPTATION_SET+"_asArray"],yt,c.a.ADAPTATION_SET,"onLoad"))),yt.hasOwnProperty(c.a.EVENT_STREAM+"_asArray")&&(ot=ot.concat(U(yt[c.a.EVENT_STREAM+"_asArray"],yt,c.a.EVENT_STREAM,"onLoad")));rt(ot,c.a.ADAPTATION_SET,"onLoad");break;case c.a.ADAPTATION_SET:k.trigger(t.a.XLINK_READY,{manifest:R})}}function U(ht,gt,yt,ot){var Vt,Tt,pt,zt=[];for(Tt=ht.length-1;Tt>=0;Tt--)(Vt=ht[Tt]).hasOwnProperty("xlink:href")&&Vt["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&ht.splice(Tt,1);for(Tt=0;Tt<ht.length;Tt++)(Vt=ht[Tt]).hasOwnProperty("xlink:href")&&Vt.hasOwnProperty("xlink:actuate")&&Vt["xlink:actuate"]===ot&&(pt=wt(Vt["xlink:href"],gt,yt,Tt,ot,Vt),zt.push(pt));return zt}function wt(ht,gt,yt,ot,Vt,Tt){return{url:ht,parentElement:gt,type:yt,index:ot,resolveType:Vt,originalContent:Tt,resolvedContent:null,resolved:!1}}return i={resolveManifestOnLoad:function(ht){M=new Ze.a({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:m}),(R=ht).Period_asArray?rt(U(R.Period_asArray,R,c.a.PERIOD,"onLoad"),c.a.PERIOD,"onLoad"):k.trigger(t.a.XLINK_READY,{manifest:R})},setMatchers:function(ht){ht&&(m=ht)},setIron:function(ht){ht&&(_=ht)},reset:function(){k.off(t.a.XLINK_ELEMENT_LOADED,V,i),E&&(E.reset(),E=null)}},k.on(t.a.XLINK_ELEMENT_LOADED,V,i),E=Lr(q).create({errHandler:p.errHandler,dashMetrics:p.dashMetrics,mediaPlayerModel:p.mediaPlayerModel,requestModifier:p.requestModifier,settings:p.settings}),i}gn.__dashjs_factory_name="XlinkController";var An=r.a.getClassFactory(gn),Jn=x(68);function Qn(p){p=p||{};var i,m,_,R,M,E=this.context,q=p.debug,k=p.settings,Y=Object(d.a)(E).getInstance(),rt=Object(ge.a)(E).getInstance(),V=p.mssHandler,st=p.errHandler;function U(wt){Y.trigger(t.a.INTERNAL_MANIFEST_LOADED,{manifest:wt.manifest})}return i={load:function(wt){var ht=new Br(wt,y.a.MPD_TYPE);_.load({request:ht,success:function(gt,yt,ot){var Vt,Tt,pt;if(R)if(ot&&ot!==wt?(Tt=rt.parseBaseUrl(ot),Vt=ot):(rt.isRelative(wt)&&(wt=rt.resolve(wt,window.location.href)),Tt=rt.parseBaseUrl(wt)),yt!="No Content")if(M===null&&(M=function(Dt){var W=null;return Dt.indexOf("SmoothStreamingMedia")>-1?(V&&(W=V.createMssParser(),V.registerEvents()),W):Dt.indexOf("MPD")>-1||Dt.indexOf("Patch")>-1?Object(Jn.a)(E).create({debug:q}):W}(gt)),M!==null){R.setMatchers(M.getMatchers()),R.setIron(M.getIron());try{pt=M.parse(gt)}catch{return void Y.trigger(t.a.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new B.a(H.a.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,H.a.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(wt))})}if(pt){if(pt.url=Vt||wt,pt.originalUrl||(pt.originalUrl=pt.url),pt.hasOwnProperty(h.a.LOCATION)&&(Tt=rt.parseBaseUrl(pt.Location_asArray[0]),m.debug("BaseURI set by Location to: "+Tt)),k&&k.get().streaming.enableManifestDurationMismatchFix&&pt.mediaPresentationDuration&&pt.Period_asArray.length>1){var zt=pt.Period_asArray.reduce(function(Dt,W){return Dt+W.duration},0);!isNaN(zt)&&pt.mediaPresentationDuration>zt&&(m.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),pt.mediaPresentationDuration=zt)}pt.baseUri=Tt,pt.loadedTime=new Date,R.resolveManifestOnLoad(pt),Y.trigger(t.a.ORIGINAL_MANIFEST_LOADED,{originalManifest:gt})}else Y.trigger(t.a.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new B.a(H.a.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,H.a.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(wt))})}else Y.trigger(t.a.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new B.a(H.a.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,H.a.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(wt))});else Y.trigger(t.a.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(gt,yt,ot){Y.trigger(t.a.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new B.a(H.a.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,H.a.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(wt,", ").concat(ot))})}})},reset:function(){Y.off(t.a.XLINK_READY,U,i),V&&V.reset(),R&&(R.reset(),R=null),_&&(_.abort(),_=null)}},m=q.getLogger(i),Y.on(t.a.XLINK_READY,U,i),_=Object(kn.a)(E).create({errHandler:p.errHandler,dashMetrics:p.dashMetrics,mediaPlayerModel:p.mediaPlayerModel,requestModifier:p.requestModifier,urlUtils:rt,constants:h.a,dashConstants:c.a,errors:H.a,requestTimeout:p.settings.get().streaming.manifestRequestTimeout}),R=An(E).create({errHandler:st,dashMetrics:p.dashMetrics,mediaPlayerModel:p.mediaPlayerModel,requestModifier:p.requestModifier,settings:p.settings}),M=null,i}Qn.__dashjs_factory_name="ManifestLoader";var fr=r.a.getClassFactory(Qn);function cr(){var p=this.context,i=Object(d.a)(p).getInstance();return{error:function(m){i.trigger(t.a.ERROR,{error:m})}}}cr.__dashjs_factory_name="ErrorHandler";var xr=r.a.getSingletonFactory(cr),ar=x(53);function Zn(){var p,i,m,_,R,M,E=this.context,q=Object(d.a)(E).getInstance();function k(Y,rt){if(!rt||!rt.Period_asArray||rt.Period_asArray.length===0)return Promise.resolve();var V=[];return rt.Period_asArray.forEach(function(st){V.push(function(U,wt){return new Promise(function(ht){if(U&&U.AdaptationSet_asArray&&U.AdaptationSet_asArray.length!==0){var gt=[];U.AdaptationSet_asArray.forEach(function(yt){i.getIsTypeOf(yt,wt)&&gt.push(function(ot,Vt){return new Promise(function(Tt){if(ot.Representation_asArray&&ot.Representation_asArray.length!==0){var pt=[],zt=[];ot.Representation_asArray.forEach(function(Dt,W){var $=i.getCodec(ot,W,!1),tt=function(Et,ut,St){switch(Et){case h.a.VIDEO:return function(et,mt){var Kt=et.width||null,fe=et.height||null,$t=et.frameRate||null,Se=et.bandwidth||null;return{codec:mt,width:Kt,height:fe,framerate:$t,bitrate:Se}}(ut,St);case h.a.AUDIO:return function(et,mt){var Kt=et.audioSamplingRate||null,fe=et.bandwidth||null;return{codec:mt,bitrate:fe,samplerate:Kt}}(ut,St);default:return null}}(Vt,Dt,$);zt.push(tt),pt.push(m.supportsCodec(tt,Vt))}),Promise.all(pt).then(function(Dt){ot.Representation_asArray=ot.Representation_asArray.filter(function(W,$){return Dt[$]||M.debug("[Stream] Codec ".concat(zt[$].codec," not supported ")),Dt[$]}),Tt()}).catch(function(){Tt()})}else Tt()})}(yt,wt))}),Promise.all(gt).then(function(){U.AdaptationSet_asArray=U.AdaptationSet_asArray.filter(function(yt){var ot=yt.Representation_asArray&&yt.Representation_asArray.length>0;return ot||(q.trigger(t.a.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:yt}),M.warn("AdaptationSet has been removed because of no supported Representation")),ot}),ht()}).catch(function(){ht()})}else ht()})}(st,Y))}),Promise.all(V)}return p={setConfig:function(Y){Y&&(Y.adapter&&(i=Y.adapter),Y.capabilities&&(m=Y.capabilities),Y.settings&&(_=Y.settings),Y.customParametersModel&&(R=Y.customParametersModel))},filterUnsupportedFeatures:function(Y){return new Promise(function(rt){var V=[];V.push(k(h.a.VIDEO,Y)),V.push(k(h.a.AUDIO,Y)),Promise.all(V).then(function(){_.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(st){!st||!st.Period_asArray||st.Period_asArray.length===0||st.Period_asArray.forEach(function(U){U.AdaptationSet_asArray=U.AdaptationSet_asArray.filter(function(wt){return!wt.Representation_asArray||wt.Representation_asArray.length===0||(wt.Representation_asArray=wt.Representation_asArray.filter(function(ht){var gt=i.getEssentialPropertiesForRepresentation(ht);if(gt&&gt.length>0)for(var yt=0;yt<gt.length;){if(!m.supportsEssentialProperty(gt[yt]))return M.debug("[Stream] EssentialProperty not supported: "+gt[yt].schemeIdUri),!1;yt+=1}return!0}),wt.Representation_asArray&&wt.Representation_asArray.length>0)})})}(Y),function(st){var U=R.getCustomCapabilitiesFilters();!U||U.length===0||!st||!st.Period_asArray||st.Period_asArray.length===0||st.Period_asArray.forEach(function(wt){wt.AdaptationSet_asArray=wt.AdaptationSet_asArray.filter(function(ht){return!ht.Representation_asArray||ht.Representation_asArray.length===0||(ht.Representation_asArray=ht.Representation_asArray.filter(function(gt){return!U.some(function(yt){return!yt(gt)})}),ht.Representation_asArray&&ht.Representation_asArray.length>0)})})}(Y),rt()}).catch(function(){rt()})})}},M=Object(f.a)(E).getInstance().getLogger(p),p}Zn.__dashjs_factory_name="CapabilitiesFilter";var Gr=r.a.getSingletonFactory(Zn);function vr(p){return(vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Kr(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(vr(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(vr(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),vr(M)==="symbol"?M:String(M)),_)}var R,M}function Or(p,i,m){return i&&Kr(p.prototype,i),m&&Kr(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var qr=Or(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null});function Fr(){var p;return{initialize:function(i){if(p=new qr,!i)return null;var m=i.indexOf("#");if(m!==-1)for(var _=i.substr(m+1).split("&"),R=0,M=_.length;R<M;++R){var E=_[R],q=E.indexOf("=");if(q!==-1){var k=E.substring(0,q);p.hasOwnProperty(k)&&(p[k]=E.substr(q+1))}}},getURIFragmentData:function(){return p}}}Fr.__dashjs_factory_name="URIFragmentModel";var fi=r.a.getSingletonFactory(Fr);function zr(){var p,i=this.context,m=Object(d.a)(i).getInstance();return{getValue:function(){return p},setValue:function(_){p=_,_&&m.trigger(t.a.MANIFEST_LOADED,{data:_})}}}zr.__dashjs_factory_name="ManifestModel";var ei=r.a.getSingletonFactory(zr);function ni(){var p,i,m,_,R=this.context,M=Object(D.a)(R).getInstance();function E(Y,rt){return isNaN(Y)?0:Y>0?(rt&&i.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Y<-.5?(rt&&i.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):Y}function q(Y,rt){return isNaN(Y)?0:Y<0?(rt&&i.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Y>1?(rt&&i.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Y}function k(){var Y=M.get().streaming.buffer.stableBufferTime>0?M.get().streaming.buffer.stableBufferTime:M.get().streaming.buffer.fastSwitchEnabled?20:12,rt=m.getLiveDelay();return!isNaN(rt)&&rt>0?Math.min(Y,rt):Y}return p={getCatchupMaxDrift:function(){if(!isNaN(M.get().streaming.liveCatchup.maxDrift)&&M.get().streaming.liveCatchup.maxDrift>0)return M.get().streaming.liveCatchup.maxDrift;var Y=_.getServiceDescriptionSettings();return Y&&Y.liveCatchup&&!isNaN(Y.liveCatchup.maxDrift)&&Y.liveCatchup.maxDrift>0?Y.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return M.get().streaming.liveCatchup.enabled!==null?M.get().streaming.liveCatchup.enabled:m.getInitialCatchupModeActivated()},getStableBufferTime:k,getInitialBufferLevel:function(){var Y=M.get().streaming.buffer.initialBufferLevel;return isNaN(Y)||Y<0?0:Math.min(k(),Y)},getRetryAttemptsForType:function(Y){var rt=isNaN(M.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:M.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return m.getLowLatencyModeEnabled()?M.get().streaming.retryAttempts[Y]*rt:M.get().streaming.retryAttempts[Y]},getRetryIntervalsForType:function(Y){var rt=isNaN(M.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:M.get().streaming.retryIntervals.lowLatencyReductionFactor;return m.getLowLatencyModeEnabled()?M.get().streaming.retryIntervals[Y]/rt:M.get().streaming.retryIntervals[Y]},getCatchupPlaybackRates:function(Y){var rt=M.get().streaming.liveCatchup.playbackRate;if(!isNaN(rt.min)||!isNaN(rt.max))return{min:E(rt.min,Y),max:q(rt.max,Y)};var V=_.getServiceDescriptionSettings();if(V&&V.liveCatchup&&(!isNaN(V.liveCatchup.playbackRate.min)||!isNaN(V.liveCatchup.playbackRate.max))){var st=V.liveCatchup.playbackRate;return{min:E(st.min,Y),max:q(st.max,Y)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Y,rt){try{var V=M.get().streaming.abr[Y][rt];if(!isNaN(V)&&V!==-1)return V;var st=_.getServiceDescriptionSettings();return st&&st[Y]&&!isNaN(st[Y][rt])?st[Y][rt]:-1}catch{return-1}},setConfig:function(Y){Y.playbackController&&(m=Y.playbackController),Y.serviceDescriptionController&&(_=Y.serviceDescriptionController)},reset:function(){}},i=Object(f.a)(R).getInstance().getLogger(p),p}ni.__dashjs_factory_name="MediaPlayerModel";var Gi=r.a.getSingletonFactory(ni),qi=x(27);function ci(p){var i=(p=p||{}).abrController,m=p.switchHistory,_=p.droppedFramesHistory,R=p.currentRequest,M=p.useBufferOccupancyABR,E=p.useL2AABR,q=p.useLoLPABR,k=p.streamProcessor?p.streamProcessor.getScheduleController():null,Y=p.streamProcessor?p.streamProcessor.getRepresentationInfo():null,rt=p.videoModel?p.videoModel:null;function V(){return Y?Y.mediaInfo:null}return{getMediaType:function(){var st=V();return st?st.type:null},getMediaInfo:V,getDroppedFramesHistory:function(){return _},getCurrentRequest:function(){return R},getSwitchHistory:function(){return m},getStreamInfo:function(){var st=V();return st?st.streamInfo:null},getScheduleController:function(){return k},getAbrController:function(){return i},getRepresentationInfo:function(){return Y},useBufferOccupancyABR:function(){return M},useL2AABR:function(){return E},useLoLPABR:function(){return q},getVideoModel:function(){return rt}}}ci.__dashjs_factory_name="RulesContext";var di=r.a.getClassFactory(ci),Qr=x(8);function gi(){var p=[],i=[];return{push:function(m){m.newValue===Qr.a.NO_CHANGE&&(m.newValue=m.oldValue),p[m.oldValue]||(p[m.oldValue]={noDrops:0,drops:0,dropSize:0});var _=m.newValue-m.oldValue,R=_<0?1:0,M=R?-_:0,E=R?0:1;if(p[m.oldValue].drops+=R,p[m.oldValue].dropSize+=M,p[m.oldValue].noDrops+=E,i.push({idx:m.oldValue,noDrop:E,drop:R,dropSize:M}),i.length>8){var q=i.shift();p[q.idx].drops-=q.drop,p[q.idx].dropSize-=q.dropSize,p[q.idx].noDrops-=q.noDrop}},getSwitchRequests:function(){return p},reset:function(){p=[],i=[]}}}gi.__dashjs_factory_name="SwitchRequestHistory";var Yi=r.a.getClassFactory(gi);function mi(){var p={},i={},m={};return{push:function(_,R,M){if(R){p[_]||(p[_]=[],i[_]=0,m[_]=0);var E=M&&M.droppedVideoFrames?M.droppedVideoFrames:0,q=M&&M.totalVideoFrames?M.totalVideoFrames:0,k=E-i[_];i[_]=E;var Y=q-m[_];m[_]=q;var rt=p[_];isNaN(R)||(rt[R]?(rt[R].droppedVideoFrames+=k,rt[R].totalVideoFrames+=Y):rt[R]={droppedVideoFrames:k,totalVideoFrames:Y})}},getFrameHistory:function(_){return p[_]},clearForStream:function(_){try{delete p[_],delete i[_],delete m[_]}catch{}},reset:function(){p={},i={},m={}}}}mi.__dashjs_factory_name="DroppedFramesHistory";var Hi=r.a.getClassFactory(mi);function ri(p){var i,m,_,R,M,E=(p=p||{}).settings;function q(U,wt,ht,gt){var yt=Math.pow(.5,ht/gt.fast);U.fastEstimate=(1-yt)*wt+yt*U.fastEstimate;var ot=Math.pow(.5,ht/gt.slow);U.slowEstimate=(1-ot)*wt+ot*U.slowEstimate,U.totalWeight+=ht}function k(U,wt,ht){return E.get().streaming.abr.movingAverageMethod!==h.a.MOVING_AVERAGE_SLIDING_WINDOW?function(gt,yt){var ot=gt?M.throughputHalfLife:M.latencyHalfLife,Vt=gt?_[yt]:R[yt];if(!Vt||Vt.totalWeight<=0)return NaN;var Tt=Vt.fastEstimate/(1-Math.pow(.5,Vt.totalWeight/ot.fast)),pt=Vt.slowEstimate/(1-Math.pow(.5,Vt.totalWeight/ot.slow));return gt?Math.min(Tt,pt):Math.max(Tt,pt)}(U,wt):function(gt,yt,ot){var Vt=function(pt,zt,Dt){var W,$;if(pt?(W=i[zt],$=Dt?3:4):(W=m[zt],$=4),W){if($>=W.length)$=W.length;else if(pt)for(var tt=1;tt<$;++tt){var Et=W[W.length-tt]/W[W.length-tt-1];if((Et>=1.3||Et<=.7692307692307692)&&($+=1)===W.length)break}}else $=0;return $}(gt,yt,ot),Tt=(gt?i:m)[yt];return Vt===0||!Tt||Tt.length===0?NaN:(Tt=Tt.slice(-Vt)).reduce(function(pt,zt){return pt+zt})/Tt.length}(U,wt,ht)}function Y(U,wt){return k(!0,U,wt)}function rt(U){i[U]=i[U]||[],m[U]=m[U]||[],_[U]=_[U]||{fastEstimate:0,slowEstimate:0,totalWeight:0},R[U]=R[U]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function V(){i={},m={},_={},R={}}var st={push:function(U,wt,ht){if(wt.trace&&wt.trace.length){var gt=wt.tresponse.getTime()-wt.trequest.getTime()||1,yt=wt._tfinish.getTime()-wt.tresponse.getTime()||1,ot=wt.trace.reduce(function(pt,zt){return pt+zt.b[0]},0),Vt=0,Tt=0;if((Vt=wt._fileLoaderType&&wt._fileLoaderType===h.a.FILE_LOADER_TYPES.FETCH?wt.trace.reduce(function(pt,zt){return pt+zt.d},0):ht?yt:gt+yt)!==0&&(Tt=Math.round(8*ot/Vt)),rt(U),function(pt,zt,Dt){return pt===h.a.VIDEO?Dt<E.get().streaming.cacheLoadThresholds[h.a.VIDEO]:pt===h.a.AUDIO?Dt<E.get().streaming.cacheLoadThresholds[h.a.AUDIO]:void 0}(U,0,yt)){if(i[U].length>0&&!i[U].hasCachedEntries)return;i[U].hasCachedEntries=!0}else i[U]&&i[U].hasCachedEntries&&function(pt){delete i[pt],delete m[pt],delete _[pt],delete R[pt],rt(pt)}(U);i[U].push(Tt),i[U].length>20&&i[U].shift(),m[U].push(gt),m[U].length>20&&m[U].shift(),q(_[U],Tt,.001*yt,M.throughputHalfLife),q(R[U],gt,1,M.latencyHalfLife)}},getAverageThroughput:Y,getSafeAverageThroughput:function(U,wt){var ht=Y(U,wt);return isNaN(ht)||(ht*=E.get().streaming.abr.bandwidthSafetyFactor),ht},getAverageLatency:function(U){return k(!1,U)},reset:V};return M={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},V(),st}ri.__dashjs_factory_name="ThroughputHistory";var Vi=r.a.getClassFactory(ri);function Un(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt,ot,Vt,Tt,pt,zt,Dt,W,$,tt=this.context,Et=Object(f.a)(tt).getInstance(),ut=Object(d.a)(tt).getInstance();function St(){R={},M={},q={},E={},ot={},pt={},zt={},Dt={},Y===void 0&&(Y=!1),Vt&&Vt.reset(),yt=void 0,Vt=void 0,Tt=void 0,clearTimeout(k),k=null}function et(lt){var Ft=lt.request.mediaType,Qt=lt.streamId;if(Ft&&Qt&&E[Qt]&&$.get().streaming.abr.autoSwitchBitrate[Ft]){var ne=E[Qt][Ft];if(ne){var Oe=di(tt).create({abrController:p,streamProcessor:ne,currentRequest:lt.request,useBufferOccupancyABR:pt[Ft],useL2AABR:zt[Ft],useLoLPABR:Dt[Ft],videoModel:U}),xe=m.shouldAbandonFragment(Oe,Qt);xe.quality>Qr.a.NO_CHANGE&&ne.getFragmentModel().getRequests({state:P.a.FRAGMENT_MODEL_LOADING,index:lt.request.index})[0]&&(q[Qt][Ft].state=n.a.ABANDON_LOAD,ot[Qt][Ft].reset(),ot[Qt][Ft].push({oldValue:Se(Ft,Qt),newValue:xe.quality,confidence:1,reason:xe.reason}),oe(Ft,_.getActiveStreamInfo(),xe.quality,xe.reason),clearTimeout(k),k=setTimeout(function(){q[Qt][Ft].state=n.a.ALLOW_LOAD,k=null},$.get().streaming.abandonLoadTimeout))}}}function mt(lt){lt.mediaType===h.a.VIDEO&&(yt!==void 0&&Vt.push(lt.streamId,yt,U.getPlaybackQuality()),yt=lt.newQuality)}function Kt(lt){var Ft,Qt;lt.metric!==n.a.HTTP_REQUEST||!lt.value||lt.value.type!==y.a.MEDIA_SEGMENT_TYPE||lt.mediaType!==h.a.AUDIO&&lt.mediaType!==h.a.VIDEO||Tt.push(lt.mediaType,lt.value,$.get().streaming.abr.useDeadTimeLatency),lt.metric!==n.a.BUFFER_LEVEL||lt.mediaType!==h.a.AUDIO&&lt.mediaType!==h.a.VIDEO||(Ft=lt.mediaType,Qt=.001*lt.value.level,$.get().streaming.abr.ABRStrategy===h.a.ABR_STRATEGY_DYNAMIC&&function(ne,Oe){try{var xe=wt.getStableBufferTime(),Le=xe,tn=.5*xe,sn=pt[ne],Ye=Oe>(sn?tn:Le);pt[ne]=Ye,Ye!==sn&&(Ye?i.info("["+ne+"] switching from throughput to buffer occupancy ABR rule (buffer: "+Oe.toFixed(3)+")."):i.info("["+ne+"] switching from buffer occupancy to throughput ABR rule (buffer: "+Oe.toFixed(3)+")."))}catch(un){i.error(un)}}(Ft,Qt))}function fe(lt,Ft){try{return R[Ft]=R[Ft]||{},R[Ft].hasOwnProperty(lt)||(R[Ft][lt]=0),function(Qt,ne,Oe){if(ne!==h.a.VIDEO||!$.get().streaming.abr.limitBitrateByPortal||!E[Oe]||!E[Oe][ne])return Qt;Y||Re();var xe=E[Oe][ne].getStreamInfo(),Le=st.getAdaptationForType(xe.index,ne,xe).Representation_asArray,tn=Qt;if(rt>0&&V>0){for(;tn>0&&Le[tn]&&rt<Le[tn].width&&rt-Le[tn-1].width<Le[tn].width-rt;)tn-=1;for(;tn<Le.length-1&&Le[tn].width===Le[tn+1].width;)tn+=1}return tn}(function(Qt,ne,Oe){var xe=R[Oe][ne],Le=$.get().streaming.abr.maxRepresentationRatio[ne];return isNaN(Le)||Le>=1||Le<0?Qt:Math.min(Qt,Math.round(xe*Le))}(function(Qt,ne){var Oe=R[ne][Qt],xe=Oe;if(!E[ne]||!E[ne][Qt])return xe;var Le=$t(Qt,ne);Le!==void 0&&(xe=Math.max(Oe,Le));var tn=function(sn,Ye){try{var un=wt.getAbrBitrateParameter("maxBitrate",sn);return un>-1?ze(E[Ye][sn].getMediaInfo(),un,Ye):void 0}catch{return}}(Qt,ne);return tn!==void 0&&(xe=Math.min(xe,tn)),xe}(lt,Ft),lt,Ft),lt,Ft)}catch{return}}function $t(lt,Ft){try{return function(Qt,ne){try{var Oe=wt.getAbrBitrateParameter("minBitrate",Qt);if(Oe>-1){var xe=E[ne][Qt].getMediaInfo(),Le=Pe(xe),tn=ze(xe,Oe,ne);return Le[tn]&&tn<Le.length-1&&Le[tn].bitrate<1e3*Oe&&tn++,tn}return}catch{return}}(lt,Ft)}catch{return}}function Se(lt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return Ft||(Ft=_.getActiveStreamInfo().id),lt&&E[Ft]&&E[Ft][lt]&&Ft?(M[Ft]=M[Ft]||{},M[Ft].hasOwnProperty(lt)||(M[Ft][lt]=0),M[Ft][lt]):0}catch{return 0}}function oe(lt,Ft,Qt){var ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Ft&&Ft.id&&lt){var Oe=Ft.id,xe=Se(lt,Oe);Object(vt.a)(Qt);var Le=fe(lt,Oe);Qt!==xe&&Qt>=0&&Qt<=Le&&he(lt,xe,Qt,Le,ne,Oe)}}function he(lt,Ft,Qt,ne,Oe,xe){if(lt&&E[xe]&&E[xe][lt]){var Le=E[xe][lt].getStreamInfo(),tn=Le&&Le.manifestInfo&&Le.manifestInfo.isDynamic,sn=W.getCurrentBufferLevel(lt);i.info("Stream ID: "+xe+" ["+lt+"] switch from "+Ft+" to "+Qt+"/"+ne+" (buffer: "+sn+") "+(Oe?JSON.stringify(Oe):".")),M[xe]=M[xe]||{},M[xe][lt]=Qt;var Ye=function(mn,bn,vn){if(bn&&E&&E[mn]&&E[mn][bn]){var dn=Pe(E[mn][bn].getMediaInfo());return dn[vn]?dn[vn]:null}return null}(xe,lt,Qt);ut.trigger(t.a.QUALITY_CHANGE_REQUESTED,{oldQuality:Ft,newQuality:Qt,reason:Oe,streamInfo:Le,bitrateInfo:Ye,maxIdx:ne,mediaType:lt},{streamId:Le.id,mediaType:lt});var un=Tt.getAverageThroughput(lt,tn);isNaN(un)||gt.setSavedBitrateSettings(lt,un)}}function ze(lt,Ft,Qt){var ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Oe=lt&&lt.type?E[Qt][lt.type].getRepresentationInfo():null;if($.get().streaming.abr.useDeadTimeLatency&&ne&&Oe&&Oe.fragmentDuration){ne/=1e3;var xe=Oe.fragmentDuration;if(ne>xe)return 0;var Le=ne/xe;Ft*=1-Le}for(var tn=Pe(lt),sn=tn.length-1;sn>=0;sn--){var Ye=tn[sn];if(1e3*Ft>=Ye.bitrate)return sn}return 0}function Pe(lt){var Ft=[];if(!lt||!lt.bitrateList)return Ft;for(var Qt,ne=lt.bitrateList,Oe=lt.type,xe=0,Le=ne.length;xe<Le;xe++)(Qt=new ue).mediaType=Oe,Qt.qualityIndex=xe,Qt.bitrate=ne[xe].bandwidth,Qt.width=ne[xe].width,Qt.height=ne[xe].height,Qt.scanType=ne[xe].scanType,Ft.push(Qt);return Ft}function Re(){if(U){var lt=$.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;rt=U.getClientWidth()*lt,V=U.getClientHeight()*lt}}return p={initialize:function(){Vt=Hi(tt).create(),Tt=Vi(tt).create({settings:$}),(m=Object(qi.a)(tt).create({dashMetrics:W,customParametersModel:ht,mediaPlayerModel:wt,settings:$})).initialize(),ut.on(o.a.QUALITY_CHANGE_RENDERED,mt,p),ut.on(o.a.METRIC_ADDED,Kt,p),ut.on(t.a.LOADING_PROGRESS,et,p)},isPlayingAtTopQuality:function(lt){var Ft=lt?lt.id:null,Qt=Se(h.a.AUDIO,Ft),ne=Se(h.a.VIDEO,Ft);return Qt===fe(h.a.AUDIO,Ft)&&ne===fe(h.a.VIDEO,Ft)},updateTopQualityIndex:function(lt){var Ft=lt.type,Qt=lt.streamInfo.id,ne=lt.representationCount-1;return R[Qt]=R[Qt]||{},R[Qt][Ft]=ne,ne},clearDataForStream:function(lt){Vt&&Vt.clearForStream(lt),E[lt]&&delete E[lt],ot[lt]&&delete ot[lt],q[lt]&&delete q[lt]},getThroughputHistory:function(){return Tt},getBitrateList:Pe,getQualityForBitrate:ze,getTopBitrateInfoFor:function(lt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Ft||(Ft=_.getActiveStreamInfo().id),lt&&E&&E[Ft]&&E[Ft][lt]){var Qt=fe(lt,Ft),ne=Pe(E[Ft][lt].getMediaInfo());return ne[Qt]?ne[Qt]:null}return null},getMinAllowedIndexFor:$t,getMaxAllowedIndexFor:fe,getInitialBitrateFor:function(lt,Ft){if(function(){if(!gt||!gt.hasOwnProperty("getSavedBitrateSettings"))throw new Error(h.a.MISSING_CONFIG_ERROR)}(),lt===h.a.TEXT)return NaN;var Qt=gt.getSavedBitrateSettings(lt),ne=wt.getAbrBitrateParameter("initialBitrate",lt),Oe=$.get().streaming.abr.initialRepresentationRatio[lt];if(ne===-1)if(Oe>-1){var xe=E[Ft][lt].getStreamInfo(),Le=st.getAdaptationForType(xe.index,lt,xe).Representation_asArray;Array.isArray(Le)?ne=Le[Math.max(Math.round(Le.length*Oe)-1,0)].bandwidth/1e3:ne=0}else ne=isNaN(Qt)?lt===h.a.VIDEO?1e3:100:Qt;return ne},getQualityFor:Se,getAbandonmentStateFor:function(lt,Ft){return q[lt]&&q[lt][Ft]?q[lt][Ft].state:null},setPlaybackQuality:oe,checkPlaybackQuality:function(lt,Ft){try{if(!(lt&&E&&E[Ft]&&E[Ft][lt]))return!1;if(Vt){var Qt=U.getPlaybackQuality();Qt&&Vt.push(Ft,yt,Qt)}if(!$.get().streaming.abr.autoSwitchBitrate[lt])return!1;var ne=Se(lt,Ft),Oe=di(tt).create({abrController:p,switchHistory:ot[Ft][lt],droppedFramesHistory:Vt,streamProcessor:E[Ft][lt],currentValue:ne,useBufferOccupancyABR:pt[lt],useL2AABR:zt[lt],useLoLPABR:Dt[lt],videoModel:U}),xe=$t(lt,Ft),Le=fe(lt,Ft),tn=m.getMaxQuality(Oe),sn=tn.quality;return xe!==void 0&&(sn>Qr.a.NO_CHANGE?sn:ne)<xe&&(sn=xe),sn>Le&&(sn=Le),ot[Ft][lt].push({oldValue:ne,newValue:sn}),sn>Qr.a.NO_CHANGE&&sn!==ne&&(q[Ft][lt].state===n.a.ALLOW_LOAD||sn<ne)&&(he(lt,ne,sn,Le,tn.reason,Ft),!0)}catch{return!1}},setElementSize:Re,setWindowResizeEventCalled:function(lt){Y=lt},registerStreamType:function(lt,Ft){var Qt=Ft.getStreamInfo().id;E[Qt]||(E[Qt]={}),ot[Qt]||(ot[Qt]={}),q[Qt]||(q[Qt]={}),ot[Qt][lt]=Yi(tt).create(),E[Qt][lt]=Ft,q[Qt][lt]={},q[Qt][lt].state=n.a.ALLOW_LOAD,function(ne){var Oe=$.get().streaming.abr.ABRStrategy;Oe===h.a.ABR_STRATEGY_L2A?(pt[ne]=!1,Dt[ne]=!1,zt[ne]=!0):Oe===h.a.ABR_STRATEGY_LoLP?(pt[ne]=!1,Dt[ne]=!0,zt[ne]=!1):Oe===h.a.ABR_STRATEGY_BOLA?(pt[ne]=!0,Dt[ne]=!1,zt[ne]=!1):Oe===h.a.ABR_STRATEGY_THROUGHPUT?(pt[ne]=!1,Dt[ne]=!1,zt[ne]=!1):Oe===h.a.ABR_STRATEGY_DYNAMIC&&(pt[ne]=!(!pt||!pt[ne])&&pt[ne],Dt[ne]=!1,zt[ne]=!1)}(lt),lt===h.a.VIDEO&&Re()},unRegisterStreamType:function(lt,Ft){try{E[lt]&&E[lt][Ft]&&delete E[lt][Ft],ot[lt]&&ot[lt][Ft]&&delete ot[lt][Ft],q[lt]&&q[lt][Ft]&&delete q[lt][Ft]}catch{}},setConfig:function(lt){lt&&(lt.streamController&&(_=lt.streamController),lt.domStorage&&(gt=lt.domStorage),lt.mediaPlayerModel&&(wt=lt.mediaPlayerModel),lt.customParametersModel&&(ht=lt.customParametersModel),lt.dashMetrics&&(W=lt.dashMetrics),lt.adapter&&(st=lt.adapter),lt.videoModel&&(U=lt.videoModel),lt.settings&&($=lt.settings))},reset:function(){St(),ut.off(t.a.LOADING_PROGRESS,et,p),ut.off(o.a.QUALITY_CHANGE_RENDERED,mt,p),ut.off(o.a.METRIC_ADDED,Kt,p),m&&m.reset()}},i=Et.getLogger(p),St(),p}Un.__dashjs_factory_name="AbrController";var Kn=r.a.getSingletonFactory(Un);Kn.QUALITY_DEFAULT=0,r.a.updateSingletonFactory(Un.__dashjs_factory_name,Kn);var Tr=Kn,Rr=x(48),Zr=new Map([[h.a.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[h.a.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[h.a.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[h.a.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Er(){var p,i,m,_,R,M,E=this.context,q=Object(d.a)(E).getInstance(),k=[];function Y(){m&&(m.playbackRate=1,m.removeEventListener("canplay",Y))}function rt(){return k.length>0}function V(){if(m&&rt()&&m.playbackRate===0){var ot=document.createEvent("Event");ot.initEvent("waiting",!0,!1),m.dispatchEvent(ot)}}function st(ot,Vt){m&&m.addEventListener(ot,Vt)}function U(ot,Vt){m&&m.removeEventListener(ot,Vt)}function wt(){return m?m.readyState:NaN}function ht(){return m?m.buffered:null}function gt(ot,Vt,Tt,pt,zt){if(m){for(var Dt=0;Dt<m.textTracks.length;Dt++)if(m.textTracks[Dt].kind===ot&&(!Vt||m.textTracks[Dt].label==Vt)&&m.textTracks[Dt].language===Tt&&m.textTracks[Dt].isTTML===pt&&m.textTracks[Dt].isEmbedded===zt)return m.textTracks[Dt]}return null}function yt(ot,Vt){ot===h.a.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||wt()>=ot?Vt():function(Tt,pt){st(Tt,function zt(){U(Tt,zt),pt(Tt)})}(Zr.get(ot),Vt)}return p={initialize:function(){q.on(t.a.PLAYBACK_PLAYING,V,this)},setCurrentTime:function(ot,Vt){_=ot,yt(h.a.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(m){if(m.currentTime===_)return void(_=NaN);try{_=Vt?function(Tt){var pt=ht(),zt=Tt,Dt=9999999999;if(pt)for(var W=0;W<pt.length;W++){var $=pt.start(W),tt=pt.end(W),Et=Math.abs($-Tt),ut=Math.abs(tt-Tt);if(Tt>=$&&Tt<=tt)return Tt;Et<Dt&&(Dt=Et,zt=$),ut<Dt&&(Dt=ut,zt=tt)}return zt}(_):_,m.currentTime=_,_=NaN}catch(Tt){m.readyState===0&&Tt.code===Tt.INVALID_STATE_ERR&&setTimeout(function(){m.currentTime=_,_=NaN},400)}}})},play:function(){if(m){m.autoplay=!0;var ot=m.play();ot&&ot.catch&&typeof Promise<"u"&&ot.catch(function(Vt){Vt.name==="NotAllowedError"&&q.trigger(t.a.PLAYBACK_NOT_ALLOWED),i.warn("Caught pending play exception - continuing (".concat(Vt,")"))})}},isPaused:function(){return m?m.paused:null},pause:function(){m&&(m.pause(),m.autoplay=!1)},isStalled:rt,isSeeking:function(){return m?m.seeking||!isNaN(_):null},getTime:function(){return m?isNaN(_)?m.currentTime:_:null},getPlaybackRate:function(){return m?m.playbackRate:null},setPlaybackRate:function(ot){var Vt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];m&&(!Vt&&m.readyState<=2&&ot>0?m.addEventListener("canplay",Y):m.playbackRate=ot)},getPlayedRanges:function(){return m?m.played:null},getEnded:function(){return m?m.ended:null},setStallState:function(ot,Vt){(function(Tt,pt){pt?function(zt){zt===null||!m||m.seeking||k.indexOf(zt)!==-1||k.push(zt)}(Tt):function(zt){var Dt=k.indexOf(zt);zt!==null&&Dt!==-1&&k.splice(Dt,1)}(Tt)})(ot,Vt)},getElement:function(){return m},setElement:function(ot){if(!(ot==null||ot&&/^(VIDEO|AUDIO)$/i.test(ot.nodeName)))throw"element is not video or audio DOM type!";(m=ot)&&(m.preload="auto")},setSource:function(ot){m&&(ot?m.src=ot:(m.removeAttribute("src"),m.load()))},getSource:function(){return m?m.src:null},getTTMLRenderingDiv:function(){return R},setTTMLRenderingDiv:function(ot){(R=ot).style.position="absolute",R.style.display="flex",R.style.overflow="hidden",R.style.pointerEvents="none",R.style.top=0,R.style.left=0},getVttRenderingDiv:function(){return M},setVttRenderingDiv:function(ot){M=ot},getPlaybackQuality:function(){if(!m)return null;var ot="webkitDroppedFrameCount"in m&&"webkitDecodedFrameCount"in m,Vt=null;return"getVideoPlaybackQuality"in m?Vt=m.getVideoPlaybackQuality():ot&&(Vt={droppedVideoFrames:m.webkitDroppedFrameCount,totalVideoFrames:m.webkitDroppedFrameCount+m.webkitDecodedFrameCount,creationTime:new Date}),Vt},addEventListener:st,removeEventListener:U,getReadyState:wt,getBufferRange:ht,getClientWidth:function(){return m?m.clientWidth:NaN},getClientHeight:function(){return m?m.clientHeight:NaN},getTextTracks:function(){return m?m.textTracks:[]},getTextTrack:gt,addTextTrack:function(ot,Vt,Tt,pt,zt){if(!m)return null;var Dt=gt(ot,Vt,Tt,pt,zt);return Dt||((Dt=m.addTextTrack(ot,Vt,Tt)).isEmbedded=zt,Dt.isTTML=pt),Dt},appendChild:function(ot){m&&(m.appendChild(ot),ot.isTTML!==void 0&&(m.textTracks[m.textTracks.length-1].isTTML=ot.isTTML,m.textTracks[m.textTracks.length-1].isEmbedded=ot.isEmbedded))},removeChild:function(ot){m&&m.removeChild(ot)},getVideoWidth:function(){return m?m.videoWidth:NaN},getVideoHeight:function(){return m?m.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var ot=m.parentNode.host||m.parentNode;return ot?m.getBoundingClientRect().top-ot.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var ot=m.parentNode.host||m.parentNode;return ot?m.getBoundingClientRect().left-ot.getBoundingClientRect().left:NaN},waitForReadyState:yt,reset:function(){q.off(t.a.PLAYBACK_PLAYING,V,this)}},i=Object(f.a)(E).getInstance().getLogger(p),_=NaN,p}Er.__dashjs_factory_name="VideoModel";var $r=r.a.getSingletonFactory(Er),tr=x(44),Jr=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}];function ii(p){p=p||{};var i,m,_,R=this.context,M=p.settings;function E(rt){if(_!==void 0)return _;_=!1;var V;try{typeof window<"u"&&(V=window[rt])}catch(st){return m.warn("DOMStorage access denied: "+st.message),_}if(!V||rt!=="localStorage"&&rt!=="sessionStorage")return _;try{V.setItem("1","1"),V.removeItem("1"),_=!0}catch(st){m.warn("DOMStorage is supported, but cannot be used: "+st.message)}return _}function q(){return 6e5*Math.round(new Date().getTime()/6e5)}function k(rt,V){return E(rt)&&M.get().streaming[V+"CachingInfo"].enabled}function Y(){if(!M)throw new Error(h.a.MISSING_CONFIG_ERROR)}return i={getSavedBitrateSettings:function(rt){if(Y(),!M.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var V=NaN;if(k("localStorage","lastBitrate")){var st="dashjs_?_bitrate".replace(/\?/,rt);try{var U=JSON.parse(localStorage.getItem(st))||{},wt=new Date().getTime()-parseInt(U.timestamp,10)>=M.get().streaming.lastBitrateCachingInfo.ttl||!1,ht=parseFloat(U.bitrate);isNaN(ht)||wt?wt&&localStorage.removeItem(st):(V=ht,m.debug("Last saved bitrate for "+rt+" was "+ht))}catch{return null}}return V},setSavedBitrateSettings:function(rt,V){if(k("localStorage","lastBitrate")&&V){var st="dashjs_?_bitrate".replace(/\?/,rt);try{localStorage.setItem(st,JSON.stringify({bitrate:V.toFixed(3),timestamp:q()}))}catch(U){m.error(U.message)}}},getSavedMediaSettings:function(rt){if(Y(),!M.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var V=null;if(k("localStorage","lastMediaSettings")){var st="dashjs_?_settings".replace(/\?/,rt);try{var U=JSON.parse(localStorage.getItem(st))||{},wt=new Date().getTime()-parseInt(U.timestamp,10)>=M.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;V=U.settings,wt&&(localStorage.removeItem(st),V=null)}catch{return null}}return V},setSavedMediaSettings:function(rt,V){if(k("localStorage","lastMediaSettings")){var st="dashjs_?_settings".replace(/\?/,rt);try{localStorage.setItem(st,JSON.stringify({settings:V,timestamp:q()}))}catch(U){m.error(U.message)}}}},m=Object(f.a)(R).getInstance().getLogger(i),E("localStorage")&&Jr.forEach(function(rt){var V=localStorage.getItem(rt.oldKey);if(V){localStorage.removeItem(rt.oldKey);try{localStorage.setItem(rt.newKey,V)}catch(st){m.error(st.message)}}}),i}ii.__dashjs_factory_name="DOMStorage";var ai=r.a.getSingletonFactory(ii),pi=x(60),oi=x(33);function si(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st,U=this.context;function wt(gt,yt,ot){ot({segments:gt,representation:yt,error:gt?void 0:new B.a(k.SEGMENT_BASE_LOADER_ERROR_CODE,k.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ht(gt){if(gt.url){var yt=new pr.a;return yt.setInfo(gt),yt}}return p={setConfig:function(gt){gt.baseURLController&&(st=gt.baseURLController),gt.dashMetrics&&(M=gt.dashMetrics),gt.mediaPlayerModel&&(E=gt.mediaPlayerModel),gt.errHandler&&(m=gt.errHandler),gt.boxParser&&(_=gt.boxParser),gt.debug&&(i=gt.debug.getLogger(p)),gt.requestModifier&&(R=gt.requestModifier),gt.errors&&(k=gt.errors),gt.urlUtils&&(V=gt.urlUtils),gt.constants&&(Y=gt.constants),gt.dashConstants&&(rt=gt.dashConstants)},initialize:function(){q=Object(kn.a)(U).create({errHandler:m,dashMetrics:M,mediaPlayerModel:E,requestModifier:R,boxParser:_,errors:k,urlUtils:V,constants:Y,dashConstants:rt})},loadInitialization:function(gt,yt){return new Promise(function(ot){(function Vt(Tt,pt,zt,Dt){var W=null,$=Tt?st.resolve(Tt.path):null,tt=Dt||{init:!0,url:$?$.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:pt};i.debug("Start searching for initialization.");var Et=ht(tt),ut=function(St){if(tt.bytesLoaded=tt.range.end,!(W=_.findInitRange(St)))return tt.range.end=tt.bytesLoaded+tt.bytesToLoad,Vt(Tt,pt,zt,tt);Tt.range=W,zt(Tt)};q.load({request:Et,success:ut,error:function(){zt(Tt)}}),i.debug("Perform init search: "+tt.url)})(gt,yt,ot)})},loadSegments:function(gt,yt,ot){return new Promise(function(Vt){(function Tt(pt,zt,Dt,W,$,tt){if(Dt&&(Dt.start===void 0||Dt.end===void 0)){var Et=Dt?Dt.toString().split("-"):null;Dt=Et?{start:parseFloat(Et[0]),end:parseFloat(Et[1])}:null}$=$||wt;var ut=null,St=null,et=!!Dt,mt=pt?st.resolve(pt.path):null,Kt={init:!1,url:mt?mt.url:void 0,range:et?Dt:{start:0,end:1500},searching:!et,bytesLoaded:tt?tt.bytesLoaded:0,bytesToLoad:1500,mediaType:zt},fe=ht(Kt),$t=function(Se){var oe=Kt.bytesToLoad,he=Se.byteLength;if(Kt.bytesLoaded=Kt.range.end-Kt.range.start,ut=_.parse(Se),(St=ut.getBox("sidx"))&&St.isComplete){var ze,Pe,Re=St.references;if(Re!=null&&Re.length>0&&(ze=Re[0].reference_type===1),ze){var lt,Ft,Qt,ne;i.debug("Initiate multiple SIDX load."),Kt.range.end=Kt.range.start+St.size;var Oe=[],xe=0,Le=(St.offset||Kt.range.start)+St.size,tn=function(Ye){Ye?(Oe=Oe.concat(Ye),++xe>=Ft&&(Oe.sort(function(un,mn){return un.startTime-mn.startTime<0?-1:0}),$(Oe,pt,W))):$(null,pt,W)};for(lt=0,Ft=Re.length;lt<Ft;lt++)Qt=Le,ne=Le+Re[lt].referenced_size-1,Le+=Re[lt].referenced_size,Tt(pt,zt,{start:Qt,end:ne},W,tn,Kt)}else i.debug("Parsing segments from SIDX. representation "+zt+" - id: "+pt.id+" for range : "+Kt.range.start+" - "+Kt.range.end),Pe=function(Ye,un){for(var mn,bn,vn,dn,hn=Ye.references,Mn=hn.length,On=Ye.timescale,Nn=Ye.earliest_presentation_time,Dn=un.range.start+Ye.offset+Ye.first_offset+Ye.size,Ln=[],Me=0;Me<Mn;Me++)vn=hn[Me].subsegment_duration,dn=hn[Me].referenced_size,(mn=new oi.a).duration=vn,mn.startTime=Nn,mn.timescale=On,bn=Dn+dn-1,mn.mediaRange=Dn+"-"+bn,Ln.push(mn),Nn+=vn,Dn+=dn;return Ln}(St,Kt),$(Pe,pt,W)}else{if(St)Kt.range.start=St.offset||Kt.range.start,Kt.range.end=Kt.range.start+(St.size||oe);else{if(he<Kt.bytesLoaded)return void $(null,pt,W);var sn=ut.getLastBox();sn&&sn.size?(Kt.range.start=sn.offset+sn.size,Kt.range.end=Kt.range.start+oe):Kt.range.end+=oe}Tt(pt,zt,Kt.range,W,null,Kt)}};q.load({request:fe,success:$t,error:function(){$(null,pt,W)}}),i.debug("Perform SIDX load for type ".concat(zt," : ").concat(Kt.url," with range ").concat(Kt.range.start," - ").concat(Kt.range.end))})(gt,yt,ot,Vt)})},reset:function(){q&&(q.abort(),q=null)}}}si.__dashjs_factory_name="SegmentBaseLoader";var Ki=r.a.getSingletonFactory(si);function na(p){var i;p=p||{};var m=new DataView(p.data),_=0;function R(E,q){var k=!0,Y=0;if(q===void 0&&(q=!1),E.tag>16777215?(m.getUint32(_)!==E.tag&&(k=!1),Y=4):E.tag>65535?(256*m.getUint16(_)+m.getUint8(_+2)!==E.tag&&(k=!1),Y=3):E.tag>255?(m.getUint16(_)!==E.tag&&(k=!1),Y=2):(m.getUint8(_)!==E.tag&&(k=!1),Y=1),!k&&E.required&&!q)throw new Error("required tag not found");return k&&(_+=Y),k}function M(E){var q=1,k=128,Y=-1,rt=0,V=m.getUint8(_),st=0;for(st=0;st<8;st+=1){if((V&k)===k){rt=E===void 0?V&~k:V,Y=st;break}k>>=1}for(st=0;st<Y;st+=1,q+=1)rt=rt<<8|255&m.getUint8(_+q);return _+=q,rt}return i={getPos:function(){return _},setPos:function(E){_=E},consumeTag:R,consumeTagAndSize:function(E,q){var k=R(E,q);return k&&M(),k},parseTag:function(E){var q;return R(E),q=M(),i[E.parse](q)},skipOverElement:function(E,q){var k,Y=R(E,q);return Y&&(k=M(),_+=k),Y},getMatroskaCodedNum:M,getMatroskaFloat:function(E){var q;switch(E){case 4:q=m.getFloat32(_),_+=4;break;case 8:q=m.getFloat64(_),_+=8}return q},getMatroskaUint:function(E){for(var q=0,k=0;k<E;k+=1)q<<=8,q|=255&m.getUint8(_+k);return _+=E,q},moreData:function(){return _<m.byteLength}}}na.__dashjs_factory_name="EBMLParser";var ra=r.a.getClassFactory(na);function ia(){var p,i,m,_,R,M,E,q,k,Y,rt=this.context;function V(U,wt,ht,gt){var yt,ot,Vt,Tt,pt,zt,Dt,W;for(Vt=[],pt=0,zt=(ot=function($){var tt,Et,ut=[],St=ra(rt).create({data:$});for(St.consumeTagAndSize(m.Segment.Cues);St.moreData()&&St.consumeTagAndSize(m.Segment.Cues.CuePoint,!0);){for((tt={}).CueTime=St.parseTag(m.Segment.Cues.CuePoint.CueTime),tt.CueTracks=[];St.moreData()&&St.consumeTag(m.Segment.Cues.CuePoint.CueTrackPositions,!0);){var et=St.getMatroskaCodedNum(),mt=St.getPos();if((Et={}).Track=St.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Et.Track===0)throw new Error("Cue track cannot be 0");Et.ClusterPosition=St.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),tt.CueTracks.push(Et),St.setPos(mt+et)}if(tt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");ut.push(tt)}if(ut.length===0)throw new Error("mandatory cuepoint not found");return ut}(U)).length;pt<zt;pt+=1)Tt=new oi.a,yt=0,yt=pt<ot.length-1?ot[pt+1].CueTime-ot[pt].CueTime:gt-ot[pt].CueTime,Tt.duration=yt,Tt.startTime=ot[pt].CueTime,Tt.timescale=1e3,Dt=ot[pt].CueTracks[0].ClusterPosition+wt,W=pt<ot.length-1?ot[pt+1].CueTracks[0].ClusterPosition+wt-1:ht-1,Tt.mediaRange=Dt+"-"+W,Vt.push(Tt);return i.debug("Parsed cues: "+Vt.length+" cues."),Vt}function st(U){var wt=new pr.a;return wt.setInfo(U),wt}return p={setConfig:function(U){if(!(U.baseURLController&&U.dashMetrics&&U.mediaPlayerModel&&U.errHandler))throw new Error(h.a.MISSING_CONFIG_ERROR);Y=U.baseURLController,M=U.dashMetrics,E=U.mediaPlayerModel,_=U.errHandler,k=U.errors,i=U.debug.getLogger(p),R=U.requestModifier},initialize:function(){q=Object(kn.a)(rt).create({errHandler:_,dashMetrics:M,mediaPlayerModel:E,requestModifier:R,errors:k})},loadInitialization:function(U,wt){return new Promise(function(ht){var gt=null,yt=U?Y.resolve(U.path):null,ot=U?U.range.split("-"):null,Vt={range:{start:ot?parseFloat(ot[0]):null,end:ot?parseFloat(ot[1]):null},request:gt,url:yt?yt.url:void 0,init:!0,mediaType:wt};i.info("Start loading initialization."),gt=st(Vt),q.load({request:gt,success:function(){ht(U)},error:function(){ht(U)}}),i.debug("Perform init load: "+Vt.url)})},loadSegments:function(U,wt,ht){return new Promise(function(gt){var yt=null,ot=U?Y.resolve(U.path):null,Vt=ot?ot.url:void 0;yt=st({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:yt,url:Vt,init:!1,mediaType:wt}),i.debug("Parsing ebml header"),q.load({request:yt,success:function(Tt){(function(pt,zt,Dt,W){if(pt&&pt.byteLength!==0){var $,tt,Et,ut,St=ra(rt).create({data:pt}),et=Dt?Dt.split("-"):null,mt=null,Kt={url:zt,range:{start:et?parseFloat(et[0]):null,end:et?parseFloat(et[1]):null},request:mt};for(i.debug("Parse EBML header: "+Kt.url),St.skipOverElement(m.EBML),St.consumeTag(m.Segment),Et=St.getMatroskaCodedNum(),Et+=St.getPos(),ut=St.getPos();St.moreData()&&!St.consumeTagAndSize(m.Segment.Info,!0);)if(!(St.skipOverElement(m.Segment.SeekHead,!0)||St.skipOverElement(m.Segment.Tracks,!0)||St.skipOverElement(m.Segment.Cues,!0)||St.skipOverElement(m.Void,!0)))throw new Error("no valid top level element found");for(;$===void 0;){var fe=St.getMatroskaCodedNum(!0),$t=St.getMatroskaCodedNum();switch(fe){case m.Segment.Info.Duration.tag:$=St[m.Segment.Info.Duration.parse]($t);break;default:St.setPos(St.getPos()+$t)}}mt=st(Kt),q.load({request:mt,success:function(Se){tt=V(Se,ut,Et,$),W(tt)},error:function(){i.error("Download Error: Cues "+Kt.url),W(null)}}),i.debug("Perform cues load: "+Kt.url+" bytes="+Kt.range.start+"-"+Kt.range.end)}else W(null)})(Tt,Vt,ht,function(pt){gt({segments:pt,representation:U,error:pt?void 0:new B.a(k.SEGMENT_BASE_LOADER_ERROR_CODE,k.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){gt({representation:U,error:new B.a(k.SEGMENT_BASE_LOADER_ERROR_CODE,k.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){q&&(q.abort(),q=null)}},m={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},p}ia.__dashjs_factory_name="WebmSegmentBaseLoader";var Va=r.a.getSingletonFactory(ia);function aa(p){p=p||{};var i,m,_,R=this.context,M=p.eventBus,E=p.events,q=p.dashMetrics,k=p.mediaPlayerModel,Y=p.errHandler,rt=p.baseURLController,V=p.debug,st=p.boxParser,U=p.requestModifier,wt=p.errors;function ht(gt){return(gt?gt.split("/")[1]:"").toLowerCase()==="webm"}return i={initialize:function(){m.initialize(),_.initialize()},getSegmentBaseInitSegment:function(gt){return ht(gt.representation.mimeType)?_.loadInitialization(gt.representation,gt.mediaType):m.loadInitialization(gt.representation,gt.mediaType)},getSegmentList:function(gt){return ht(gt.mimeType)?_.loadSegments(gt.representation,gt.mediaType,gt.representation?gt.representation.indexRange:null):m.loadSegments(gt.representation,gt.mediaType,gt.representation?gt.representation.indexRange:null)},reset:function(){m.reset(),_.reset()}},m=Ki(R).getInstance(),_=Va(R).getInstance(),m.setConfig({baseURLController:rt,dashMetrics:q,mediaPlayerModel:k,errHandler:Y,eventBus:M,events:E,errors:wt,debug:V,boxParser:st,requestModifier:U}),_.setConfig({baseURLController:rt,dashMetrics:q,mediaPlayerModel:k,errHandler:Y,eventBus:M,events:E,errors:wt,debug:V,requestModifier:U}),i}aa.__dashjs_factory_name="SegmentBaseController";var Ka=r.a.getSingletonFactory(aa);function hi(p){return(hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function oa(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(hi(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(hi(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),hi(M)==="symbol"?M:String(M)),_)}var R,M}function za(p,i,m){return i&&oa(p.prototype,i),m&&oa(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var sa=za(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null});function yi(p){return(yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function ua(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(yi(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(yi(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),yi(M)==="symbol"?M:String(M)),_)}var R,M}function Wa(p,i,m){return i&&ua(p.prototype,i),m&&ua(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var zi=Wa(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={}});function vi(p){return(vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function la(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(vi(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(vi(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),vi(M)==="symbol"?M:String(M)),_)}var R,M}function Xa(p,i,m){return i&&la(p.prototype,i),m&&la(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var fa=Xa(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0});function Ei(p){return(Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function ca(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Ei(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Ei(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Ei(M)==="symbol"?M:String(M)),_)}var R,M}function Qa(p,i,m){return i&&ca(p.prototype,i),m&&ca(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var Za=Qa(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}),$a=x(45),da=x(34);function bi(p){return(bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Ja(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(bi(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(bi(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),bi(M)==="symbol"?M:String(M)),_)}var R,M}var to=function(){function p(_){var R=this;(function(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")})(this,p),this.valid=_[0]=="/",this.path=_.split("/").filter(function(M){return M.length!==0}).map(function(M){var E={name:M},q=M.indexOf("[");if(q!=-1){E.name=M.substring(0,q);var k=M.substring(q+1,M.length-1);R.valid=R.valid&&k.indexOf("[")==-1;var Y=k.indexOf("=");Y!=-1?(E.attribute={name:k.substring(1,Y),value:k.substring(Y+1)},["'",'"'].indexOf(E.attribute.value[0])!=-1&&(E.attribute.value=E.attribute.value.substring(1,E.attribute.value.length-1))):E.position=parseInt(k,10)-1}return E})}var i,m;return i=p,(m=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(_,R){for(var M=null,E=_,q=1,k="MPD";q<this.path.length&&E!==null;){M=E;var Y=this.path[q];if(k=Y.name,q!==this.path.length-1||!k.startsWith("@")){var rt=M[k+"_asArray"]||[];rt.length===0&&M[k]&&rt.push(M[k]),Y.position?E=rt[Y.position]||null:Y.attribute?function(){var V=Y.attribute;E=rt.filter(function(st){return st[V.name]==V.value})[0]||null}():E=rt[0]||null}q++}return E===null?null:k.startsWith("@")?{name:k.substring(1),leaf:E,target:E}:{name:k,leaf:E,target:R?M:E}}}])&&Ja(i.prototype,m),Object.defineProperty(i,"prototype",{writable:!1}),p}();function _i(p){return(_i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function eo(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(_i(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(_i(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),_i(M)==="symbol"?M:String(M)),_)}var R,M}var no=function(){function p(_,R,M){(function(E,q){if(!(E instanceof q))throw new TypeError("Cannot call a class as a function")})(this,p),this.action=_,this.xpath=R,this.value=M,this.position=null}var i,m;return i=p,(m=[{key:"getMpdTarget",value:function(_){var R=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(_,R)}}])&&eo(i.prototype,m),Object.defineProperty(i,"prototype",{writable:!1}),p}();function ga(){var p,i,m=this.context;return p={getIsPatch:function(_){return _&&_.hasOwnProperty(c.a.ORIGINAL_MPD_ID)||!1},getPublishTime:function(_){return _&&_.hasOwnProperty(c.a.PUBLISH_TIME)?new Date(_[c.a.PUBLISH_TIME]):null},getOriginalPublishTime:function(_){return _&&_.hasOwnProperty(c.a.ORIGINAL_PUBLISH_TIME)?new Date(_[c.a.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(_){return _&&_[c.a.ORIGINAL_MPD_ID]||null},getPatchOperations:function(_){return _?(_.__children||[]).map(function(R){var M=Object.keys(R)[0];if(M!=="add"&&M!=="remove"&&M!=="replace")return i.warn("Ignoring node of invalid action: ".concat(M)),null;var E=R[M],q=E.sel;if(M==="add"&&E.type){if(!E.type.startsWith("@"))return i.warn("Ignoring add action for prefixed namespace declaration: ".concat(E.type,"=").concat(E.__text)),null;q="".concat(q,"/").concat(E.type)}var k=new to(q);if(!k.isValid())return i.warn("Ignoring action with invalid selector: ".concat(M," - ").concat(q)),null;var Y=null;k.findsAttribute()?Y=E.__text||"":M!=="remove"&&(Y=E.__children.reduce(function(V,st){var U=Object.keys(st)[0];return U!=="#text"&&(V[U]=V[U]||[],V[U].push(st[U])),V},{}));var rt=new no(M,k,Y);return M==="add"&&(rt.position=E.pos),rt}).filter(function(R){return!!R}):[]}},i=Object(f.a)(m).getInstance().getLogger(p),p}ga.__dashjs_factory_name="PatchManifestModel";var ro=r.a.getSingletonFactory(ga);function ma(){var p,i,m,_,R,M,E,q=this.context;function k(W,$,tt){var Et,ut=i.getAdaptationsForType(_[0].mpd.manifest,W,$);if(!ut||ut.length===0)return null;if(ut.length>1&&tt){var St=V(tt,$);if(R[tt.id]&&R[tt.id][$]){for(var et=0,mt=ut.length;et<mt;et++)if(Y(R[tt.id][$],St[et]))return ut[et]}for(var Kt=0,fe=ut.length;Kt<fe;Kt++)if(Et=ut[Kt],i.getRolesForAdaptation(Et).filter(function($t){return $t.value===c.a.MAIN})[0])return ut[Kt]}return ut[0]}function Y(W,$){if(!W||!$)return!1;var tt=W.id===$.id,Et=W.codec===$.codec,ut=W.viewpoint===$.viewpoint,St=W.lang===$.lang,et=W.roles.toString()===$.roles.toString(),mt=W.accessibility.toString()===$.accessibility.toString(),Kt=W.audioChannelConfiguration.toString()===$.audioChannelConfiguration.toString();return tt&&Et&&ut&&St&&et&&mt&&Kt}function rt(W,$,tt,Et,ut,St){var et,mt,Kt,fe,$t,Se,oe=[];if(!Et||Et.length===0)return[];var he=i.getAdaptationsForPeriod($);for(fe=0,Se=Et.length;fe<Se;fe++)if(et=Et[fe],mt=ot(he[Kt=i.getIndexForAdaptation(et,W,tt.index)]),St){var ze=mt.accessibility.length;for($t=0;$t<ze;$t++)if(mt){var Pe=mt.accessibility[$t];if(Pe.indexOf("cea-608:")===0){var Re=Pe.substring(8).split(";");if(Re[0].substring(0,2)==="CC")for($t=0;$t<Re.length;$t++)mt||(mt=ot.call(this,he[Kt])),Vt(mt,Re[$t].substring(0,3),Re[$t].substring(4)),oe.push(mt),mt=null;else for($t=0;$t<Re.length;$t++)mt||(mt=ot.call(this,he[Kt])),Vt(mt,"CC"+($t+1),Re[$t]),oe.push(mt),mt=null}else Pe.indexOf("cea-608")===0&&(Vt(mt,M.CC1,"eng"),oe.push(mt),mt=null)}}else ut===M.IMAGE?(mt.type=M.IMAGE,oe.push(mt),mt=null):mt&&oe.push(mt);return oe}function V(W,$,tt){var Et=_,ut=tt,St=[];if(ut)pt(),Et=st(ut);else{if(!(_.length>0))return St;ut=_[0].mpd.manifest}var et=yt(W,Et),mt=i.getAdaptationsForType(ut,W?W.index:null,$);return St=rt(ut,et,W,mt,$),$===M.TEXT&&(mt=i.getAdaptationsForType(ut,W?W.index:null,M.VIDEO),St=St.concat(rt(ut,et,W,mt,$,!0))),St}function st(W){var $=U(W);return i.getRegularPeriods($)}function U(W){var $=ht(W);return i.getMpd($)}function wt(){_=[],R={}}function ht(W){return W||(_.length>0?_[0].mpd.manifest:null)}function gt(W){try{var $=yt(W.streamInfo,_),tt=i.getAdaptationsForPeriod($);return W&&W.streamInfo&&W.streamInfo.id!==void 0&&tt?tt[W.index]:null}catch{return null}}function yt(W,$){for(var tt=$.length,Et=0;Et<tt;Et++){var ut=$[Et];if(W&&W.id===ut.id)return ut}return null}function ot(W){if(!W)return null;var $,tt=new zi,Et=W.period.mpd.manifest.Period_asArray[W.period.index].AdaptationSet_asArray[W.index];if(tt.id=W.id,tt.index=W.index,tt.type=W.type,tt.streamInfo=Tt(W.period),tt.representationCount=i.getRepresentationCount(Et),tt.labels=i.getLabelsForAdaptation(Et),tt.lang=i.getLanguageForAdaptation(Et),$=i.getViewpointForAdaptation(Et),tt.viewpoint=$?$.value:void 0,tt.accessibility=i.getAccessibilityForAdaptation(Et).map(function(et){var mt=et.value,Kt=mt;return et.schemeIdUri&&et.schemeIdUri.search("cea-608")>=0&&E!==void 0&&(Kt=mt?"cea-608:"+mt:"cea-608",tt.embeddedCaptions=!0),Kt}),tt.audioChannelConfiguration=i.getAudioChannelConfigurationForAdaptation(Et).map(function(et){return et.value}),tt.audioChannelConfiguration.length===0&&Array.isArray(Et.Representation_asArray)&&Et.Representation_asArray.length>0&&(tt.audioChannelConfiguration=i.getAudioChannelConfigurationForRepresentation(Et.Representation_asArray[0]).map(function(et){return et.value})),tt.roles=i.getRolesForAdaptation(Et).map(function(et){return et.value}),tt.codec=i.getCodec(Et),tt.mimeType=i.getMimeType(Et),tt.contentProtection=i.getContentProtectionData(Et),tt.bitrateList=i.getBitrateListForAdaptation(Et),tt.selectionPriority=i.getSelectionPriority(Et),tt.contentProtection){var ut=tt.contentProtection.map(function(et){return i.getKID(et)}).filter(function(et){return et!==null});if(ut.length){var St=ut[0];tt.contentProtection.forEach(function(et){et.keyId=St})}}return tt.isText=i.getIsText(Et),tt.supplementalProperties=i.getSupplementalProperties(Et),tt.isFragmented=i.getIsFragmented(Et),tt.isEmbedded=!1,tt}function Vt(W,$,tt){W.id=$,W.index=100+parseInt($.substring(2,3)),W.type=M.TEXT,W.codec="cea-608-in-SEI",W.isEmbedded=!0,W.isFragmented=!1,W.lang=Be()(tt),W.roles=["caption"]}function Tt(W){var $,tt,Et=new fa;return Et.id=W.id,Et.index=W.index,Et.start=W.start,Et.duration=W.duration,Et.manifestInfo=($=W.mpd,(tt=new Za).dvrWindowSize=$.timeShiftBufferDepth,tt.loadedTime=$.manifest.loadedTime,tt.availableFrom=$.availabilityStartTime,tt.minBufferTime=$.manifest.minBufferTime,tt.maxFragmentDuration=$.maxSegmentDuration,tt.duration=i.getDuration($.manifest),tt.isDynamic=i.getIsDynamic($.manifest),tt.serviceDescriptions=i.getServiceDescriptions($.manifest),tt.protocol=$.manifest.protocol,tt),Et.isLast=W.mpd.manifest.Period_asArray.length===1||Math.abs(Et.start+Et.duration-Et.manifestInfo.duration)<1,Et}function pt(){if(!M)throw new Error("setConfig function has to be called previously")}function zt(W){return _.length>0?_[0].mpd.manifest.Period_asArray[W]:null}function Dt(W,$,tt){var Et,ut,St,et,mt;if(W){for(Et=W.AdaptationSet_asArray,et=0;et<Et.length;et+=1)for(St=Et[et].Representation_asArray,mt=0;mt<St.length;mt+=1)if($===(ut=St[mt]).id)return tt?mt:ut}return null}return p={getBandwidthForRepresentation:function(W,$){var tt;return(tt=Dt(zt($),W))?tt.bandwidth:null},getIndexForRepresentation:function(W,$){return function(tt,Et){var ut=Dt(tt,Et,!0);return ut!==null?ut:-1}(zt($),W)},getMaxIndexForBufferType:function(W,$){return function(tt,Et){var ut,St,et,mt;if(!tt||!Et)return-1;for(St=tt.AdaptationSet_asArray,mt=0;mt<St.length;mt+=1)if(ut=St[mt],et=ut.Representation_asArray,i.getIsTypeOf(ut,Et))return et.length;return-1}(zt($),W)},convertRepresentationToRepresentationInfo:function(W){if(W){var $=new sa,tt=W.adaptation.period.mpd.manifest.Period_asArray[W.adaptation.period.index].AdaptationSet_asArray[W.adaptation.index],Et=i.getRepresentationFor(W.index,tt);return $.id=W.id,$.quality=W.index,$.bandwidth=i.getBandwidth(Et),$.fragmentDuration=W.segmentDuration||(W.segments&&W.segments.length>0?W.segments[0].duration:NaN),$.MSETimeOffset=W.MSETimeOffset,$.mediaInfo=ot(W.adaptation),$}return null},getStreamsInfo:function(W,$){var tt=[],Et=_;if(W&&(pt(),Et=st(W)),Et.length>0){(!$||$>Et.length)&&($=Et.length);for(var ut=0;ut<$;ut++)tt.push(Tt(Et[ut]))}return tt},getMediaInfoForType:function(W,$){if(_.length===0||!W)return null;var tt=yt(W,_);if(!tt)return null;var Et=i.getAdaptationsForPeriod(tt),ut=k(W.index,$,W);return ut?ot(Et[i.getIndexForAdaptation(ut,_[0].mpd.manifest,W.index)]):null},getAllMediaInfoForType:V,getAdaptationForType:k,getRealAdaptation:function(W,$){var tt,Et,ut=yt(W,_);return tt=$?$.id:null,_.length>0&&ut&&(Et=tt?i.getAdaptationForId(tt,_[0].mpd.manifest,ut.index):i.getAdaptationForIndex($?$.index:null,_[0].mpd.manifest,ut.index)),Et},getProducerReferenceTimes:function(W,$){var tt,Et,ut=yt(W,_);return tt=$?$.id:null,_.length>0&&ut&&(Et=tt?i.getAdaptationForId(tt,_[0].mpd.manifest,ut.index):i.getAdaptationForIndex($?$.index:null,_[0].mpd.manifest,ut.index)),Et?i.getProducerReferenceTimesForAdaptation(Et):[]},getRealPeriodByIndex:function(W){return i.getRealPeriodForIndex(W,_[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(W){try{return i.getEssentialPropertiesForRepresentation(W)}catch{return[]}},getVoRepresentations:function(W){var $=gt(W);return i.getRepresentationsForAdaptation($)},getEventsFor:function(W,$,tt){var Et=[];if(_.length>0){var ut=_[0].mpd.manifest;if(W instanceof fa){var St=yt(W,_);Et=i.getEventsForPeriod(St)}else if(W instanceof zi){var et=yt(tt,_);Et=i.getEventStreamForAdaptationSet(ut,gt(W),et)}else if(W instanceof sa){var mt=yt(tt,_);Et=i.getEventStreamForRepresentation(ut,$,mt)}}return Et},getEvent:function(W,$,tt,Et){try{if(!W||!$||isNaN(tt)||!Et)return null;var ut=W.scheme_id_uri,St=W.value;if(!$[ut+"/"+St])return null;var et,mt=new $a.a,Kt=W.timescale||1,fe=Et.adaptation.period.start,$t=$[ut+"/"+St],Se=isNaN(Et.presentationTimeOffset)?isNaN($t.presentationTimeOffset)?0:$t.presentationTimeOffset:Et.presentationTimeOffset,oe=W.presentation_time_delta/Kt;et=W.version===0?fe+tt-Se+oe:fe-Se+oe;var he=W.event_duration/Kt,ze=W.id,Pe=W.message_data;return mt.eventStream=$t,mt.eventStream.value=St,mt.eventStream.timescale=Kt,mt.duration=he,mt.id=ze,mt.calculatedPresentationTime=et,mt.messageData=Pe,mt.presentationTimeDelta=oe,mt}catch{return null}},getMpd:U,setConfig:function(W){W&&(W.constants&&(M=W.constants),W.cea608parser&&(E=W.cea608parser),W.errHandler&&i.setConfig({errHandler:W.errHandler}),W.BASE64&&i.setConfig({BASE64:W.BASE64}))},updatePeriods:function(W){if(!W)return null;pt(),_=st(W)},getIsTextTrack:function(W){return i.getIsText(W)},getUTCTimingSources:function(){var W=ht();return i.getUTCTimingSources(W)},getSuggestedPresentationDelay:function(){var W=_.length>0?_[0].mpd:null;return i.getSuggestedPresentationDelay(W)},getAvailabilityStartTime:function(W){var $=U(W);return i.getAvailabilityStartTime($)},getIsTypeOf:function(W,$){return i.getIsTypeOf(W,$)},getIsDynamic:function(W){var $=ht(W);return i.getIsDynamic($)},getDuration:function(W){var $=ht(W);return i.getDuration($)},getRegularPeriods:st,getContentSteering:function(W){return i.getContentSteering(W)},getLocation:function(W){return i.getLocation(W)},getPatchLocation:function(W){var $=i.getPatchLocation(W),tt=i.getPublishTime(W);if(!$||!tt)return null;if($.hasOwnProperty("ttl")&&tt){var Et=1e3*parseFloat($.ttl);if(tt.getTime()+Et<=new Date().getTime())return null}return $.__text},getManifestUpdatePeriod:function(W){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return i.getManifestUpdatePeriod(W,$)},getPublishTime:function(W){return i.getPublishTime(W)},getIsDVB:function(W){return i.hasProfile(W,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(W){return m.getIsPatch(W)},getBaseURLsFromElement:function(W){return i.getBaseURLsFromElement(W)},getRepresentationSortFunction:function(){return i.getRepresentationSortFunction()},getCodec:function(W,$,tt){return i.getCodec(W,$,tt)},getPeriodById:function(W){if(!W||_.length===0)return null;var $=_.filter(function(tt){return tt.id===W});return $&&$.length>0?$[0]:null},setCurrentMediaInfo:function(W,$,tt){R[W]=R[W]||{},R[W][$]=R[W][$]||{},R[W][$]=tt},isPatchValid:function(W,$){var tt=i.getId(W),Et=m.getMpdId($),ut=i.getPublishTime(W),St=m.getPublishTime($),et=m.getOriginalPublishTime($);return!!(tt&&Et&&tt==Et&&ut&&et&&ut.getTime()==et.getTime()&&St&&ut.getTime()<St.getTime())},applyPatchToManifest:function(W,$){m.getPatchOperations($).forEach(function(tt){var Et=tt.getMpdTarget(W);if(Et!==null){var ut=Et.name,St=Et.target,et=Et.leaf;if(tt.xpath.findsAttribute())switch(tt.action){case"add":case"replace":St[ut]=tt.value;break;case"remove":delete St[ut]}else{var mt=(St[ut+"_asArray"]||[]).indexOf(et),Kt=tt.position==="prepend"||tt.position==="before";if((tt.action==="remove"||tt.action==="replace")&&(delete St[ut],mt!=-1)){var fe=St[ut+"_asArray"];fe.splice(mt,1),fe.length>1?St[ut]=fe:fe.length==1?St[ut]=fe[0]:delete St[ut+"_asArray"]}tt.action!=="add"&&tt.action!=="replace"||Object.keys(tt.value).forEach(function($t){var Se=tt.value[$t],oe=St[$t+"_asArray"]||[];if(oe.length===0&&St[$t]&&oe.push(St[$t]),oe.length===0)oe=Se;else{var he=oe.length;he=$t==ut&&mt!=-1?mt+(Kt?0:1)+(tt.action=="replace"?-1:0):Kt?0:oe.length,oe.splice.apply(oe,[he,0].concat(Se))}St[$t+"_asArray"]=oe,St[$t]=oe.length==1?oe[0]:oe})}}})},areMediaInfosEqual:Y,reset:wt},i=Object(da.a)(q).getInstance(),m=ro(q).getInstance(),wt(),p}ma.__dashjs_factory_name="DashAdapter";var io=r.a.getSingletonFactory(ma);function Ti(p){return(Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function pa(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Ti(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Ti(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Ti(M)==="symbol"?M:String(M)),_)}var R,M}var ao=function(){function p(){(function(R,M){if(!(R instanceof M))throw new TypeError("Cannot call a class as a function")})(this,p)}var i,m,_;return i=p,_=[{key:"round10",value:function(R,M){return function(E,q,k){return k===void 0||+k==0?Math[E](q):(k=+k,(q=+q)===null||isNaN(q)||typeof k!="number"||k%1!=0?NaN:(q=q.toString().split("e"),+((q=(q=Math[E](+(q[0]+"e"+(q[1]?+q[1]-k:-k)))).toString().split("e"))[0]+"e"+(q[1]?+q[1]+k:k))))}("round",R,M)}}],(m=null)&&pa(i.prototype,m),_&&pa(i,_),Object.defineProperty(i,"prototype",{writable:!1}),p}();function Si(p){return(Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function ha(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Si(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Si(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Si(M)==="symbol"?M:String(M)),_)}var R,M}function oo(p,i,m){return i&&ha(p.prototype,i),m&&ha(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var so=oo(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]});function Ai(p){return(Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function ya(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Ai(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Ai(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Ai(M)==="symbol"?M:String(M)),_)}var R,M}function uo(p,i,m){return i&&ya(p.prototype,i),m&&ya(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var lo=uo(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.t=null,this.mt=null,this.to=null,this.lto=null});function wi(p){return(wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function va(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(wi(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(wi(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),wi(M)==="symbol"?M:String(M)),_)}var R,M}function fo(p,i,m){return i&&va(p.prototype,i),m&&va(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var co=fo(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.t=null,this.level=null});function Ii(p){return(Ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Ea(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Ii(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Ii(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Ii(M)==="symbol"?M:String(M)),_)}var R,M}function go(p,i,m){return i&&Ea(p.prototype,i),m&&Ea(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var mo=go(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.target=null,this.state=n.a.BUFFER_EMPTY});function Ri(p){return(Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function ba(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Ri(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Ri(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Ri(M)==="symbol"?M:String(M)),_)}var R,M}function po(p,i,m){return i&&ba(p.prototype,i),m&&ba(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var ho=po(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.time=null,this.range=null,this.manifestInfo=null});function Ni(p){return(Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function _a(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Ni(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Ni(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Ni(M)==="symbol"?M:String(M)),_)}var R,M}function yo(p,i,m){return i&&_a(p.prototype,i),m&&_a(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var vo=yo(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.time=null,this.droppedFrames=null});function Ci(p){return(Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Ta(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Ci(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Ci(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Ci(M)==="symbol"?M:String(M)),_)}var R,M}function Wi(p,i,m){return i&&Ta(p.prototype,i),m&&Ta(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}function Xi(p,i){if(!(p instanceof i))throw new TypeError("Cannot call a class as a function")}var Eo=Wi(function p(){Xi(this,p),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}),bo=Wi(function p(){Xi(this,p),this.id=null,this.index=null,this.start=null,this.duration=null}),_o=Wi(function p(){Xi(this,p),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null});function Oi(p){return(Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Sa(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Oi(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Oi(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Oi(M)==="symbol"?M:String(M)),_)}var R,M}function To(p,i,m){return i&&Sa(p.prototype,i),m&&Sa(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var So=To(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null});function Di(p){return(Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Aa(p,i){for(var m=0;m<i.length;m++){var _=i[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,(R=_.key,M=void 0,M=function(E,q){if(Di(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var Y=k.call(E,q||"default");if(Di(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(E)}(R,"string"),Di(M)==="symbol"?M:String(M)),_)}var R,M}function Ao(p,i,m){return i&&Aa(p.prototype,i),m&&Aa(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var wo=Ao(function p(){(function(i,m){if(!(i instanceof m))throw new TypeError("Cannot call a class as a function")})(this,p),this.loadingRequests=[],this.executedRequests=[]});function wa(p){var i,m,_=(p=p||{}).settings,R=this.context,M=Object(d.a)(R).getInstance();function E(){M.trigger(t.a.METRICS_CHANGED)}function q(U){M.trigger(t.a.METRIC_CHANGED,{mediaType:U}),E()}function k(U,wt,ht){M.trigger(t.a.METRIC_UPDATED,{mediaType:U,metric:wt,value:ht}),q(U)}function Y(U,wt,ht){M.trigger(t.a.METRIC_ADDED,{mediaType:U,metric:wt,value:ht}),q(U)}function rt(U,wt){var ht=null;return U&&(m.hasOwnProperty(U)?ht=m[U]:wt||(ht=new so,m[U]=ht)),ht}function V(U,wt,ht){var gt=rt(U);gt!==null&&(gt[wt].push(ht),gt[wt].length>_.get().streaming.metrics.maxListDepth&&gt[wt].shift())}function st(U,wt,ht){V(U,wt,ht),Y(U,wt,ht)}return i={clearCurrentMetricsForType:function(U){delete m[U],q(U)},clearAllCurrentMetrics:function(){m={},E()},getMetricsFor:rt,addHttpRequest:function U(wt,ht,gt,yt,ot,Vt,Tt,pt,zt,Dt,W,$,tt,Et,ut,St){var et=new y.a;Vt&&Vt!==yt&&(U(wt,null,gt,yt,ot,null,null,pt,zt,null,null,null,tt,null,null,St),et.actualurl=Vt),et.tcpid=ht,et.type=gt,et.url=yt,et.range=pt,et.trequest=zt,et.tresponse=Dt,et.responsecode=$,et._tfinish=W,et._stream=wt,et._mediaduration=tt,et._quality=ot,et._responseHeaders=Et,et._serviceLocation=Tt,et._fileLoaderType=St,ut?ut.forEach(function(mt){(function(Kt,fe,$t,Se){var oe=new y.b;oe.s=fe,oe.d=$t,oe.b=Se,Kt.trace.push(oe),Kt.interval||(Kt.interval=0),Kt.interval+=$t})(et,mt.s,mt.d,mt.b)}):(delete et.interval,delete et.trace),st(wt,n.a.HTTP_REQUEST,et)},addRepresentationSwitch:function(U,wt,ht,gt,yt){var ot=new lo;ot.t=wt,ot.mt=ht,ot.to=gt,yt?ot.lto=yt:delete ot.lto,st(U,n.a.TRACK_SWITCH,ot)},addBufferLevel:function(U,wt,ht){var gt=new co;gt.t=wt,gt.level=ht,st(U,n.a.BUFFER_LEVEL,gt)},addBufferState:function(U,wt,ht){var gt=new mo;gt.target=ht,gt.state=wt,st(U,n.a.BUFFER_STATE,gt)},addDVRInfo:function(U,wt,ht,gt){var yt=new ho;yt.time=wt,yt.range=gt,yt.manifestInfo=ht,st(U,n.a.DVR_INFO,yt)},addDroppedFrames:function(U,wt){var ht=new vo,gt=rt(U).DroppedFrames;wt&&(ht.time=wt.creationTime,ht.droppedFrames=wt.droppedVideoFrames,gt.length>0&&gt[gt.length-1]==ht||st(U,n.a.DROPPED_FRAMES,ht))},addSchedulingInfo:function(U,wt,ht,gt,yt,ot,Vt,Tt,pt){var zt=new So;zt.mediaType=U,zt.t=wt,zt.type=ht,zt.startTime=gt,zt.availabilityStartTime=yt,zt.duration=ot,zt.quality=Vt,zt.range=Tt,zt.state=pt,st(U,n.a.SCHEDULING_INFO,zt)},addRequestsQueue:function(U,wt,ht){var gt=new wo;gt.loadingRequests=wt,gt.executedRequests=ht,rt(U).RequestsQueue=gt,Y(U,n.a.REQUESTS_QUEUE,gt)},addManifestUpdate:function(U,wt,ht,gt,yt,ot,Vt,Tt,pt,zt){var Dt=new Eo;Dt.mediaType=U,Dt.type=wt,Dt.requestTime=ht,Dt.fetchTime=gt,Dt.availabilityStartTime=yt,Dt.presentationStartTime=ot,Dt.clientTimeOffset=Vt,Dt.currentTime=Tt,Dt.buffered=pt,Dt.latency=zt,V(h.a.STREAM,n.a.MANIFEST_UPDATE,Dt),Y(U,n.a.MANIFEST_UPDATE,Dt)},updateManifestUpdateInfo:function(U,wt){if(U){for(var ht in wt)U[ht]=wt[ht];k(U.mediaType,n.a.MANIFEST_UPDATE,U)}},addManifestUpdateStreamInfo:function(U,wt,ht,gt,yt){if(U){var ot=new bo;ot.id=wt,ot.index=ht,ot.start=gt,ot.duration=yt,U.streamInfo.push(ot),k(U.mediaType,n.a.MANIFEST_UPDATE_STREAM_INFO,U)}},addManifestUpdateRepresentationInfo:function(U,wt,ht,gt,yt,ot,Vt,Tt){if(U&&U.representationInfo){var pt=new _o;pt.id=wt,pt.index=ht,pt.streamIndex=gt,pt.mediaType=yt,pt.startNumber=Vt,pt.fragmentInfoType=Tt,pt.presentationTimeOffset=ot,U.representationInfo.push(pt),k(U.mediaType,n.a.MANIFEST_UPDATE_TRACK_INFO,U)}},addPlayList:function(U){U.trace&&Array.isArray(U.trace)?U.trace.forEach(function(wt){wt.hasOwnProperty("subreplevel")&&!wt.subreplevel&&delete wt.subreplevel}):delete U.trace,st(h.a.STREAM,n.a.PLAY_LIST,U)},addDVBErrors:function(U){st(h.a.STREAM,n.a.DVB_ERRORS,U)}},m={},i}wa.__dashjs_factory_name="MetricsModel";var Io=r.a.getSingletonFactory(wa);function Ia(p){p=p||{};var i,m,_,R,M=this.context,E=p.metricsModel;function q(rt){var V=E.getMetricsFor(rt,!0);if(!V)return null;var st,U=V.HttpList,wt=null;if(!U||U.length<=0)return null;for(st=U.length-1;st>=0;){if(U[st].responsecode){wt=U[st];break}st--}return wt}function k(rt){var V=E.getMetricsFor(rt,!0);return V&&V.HttpList?V.HttpList:[]}function Y(rt,V){if(!rt)return null;var st=rt[V];return st&&st.length!==0?st[st.length-1]:null}return i={getCurrentRepresentationSwitch:function(rt){return Y(E.getMetricsFor(rt,!0),n.a.TRACK_SWITCH)},getCurrentBufferState:function(rt){return Y(E.getMetricsFor(rt,!0),n.a.BUFFER_STATE)},getCurrentBufferLevel:function(rt){var V=Y(E.getMetricsFor(rt,!0),n.a.BUFFER_LEVEL);return V?ao.round10(V.level/1e3,-3):0},getCurrentHttpRequest:q,getHttpRequests:k,getCurrentDroppedFrames:function(){return Y(E.getMetricsFor(h.a.VIDEO,!0),n.a.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(rt){return Y(E.getMetricsFor(rt,!0),n.a.SCHEDULING_INFO)},getCurrentDVRInfo:function(rt){return Y(rt?E.getMetricsFor(rt,!0):E.getMetricsFor(h.a.VIDEO,!0)||E.getMetricsFor(h.a.AUDIO,!0),n.a.DVR_INFO)},getCurrentManifestUpdate:function(){return Y(E.getMetricsFor(h.a.STREAM),n.a.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(rt,V){if(!V)return null;var st={},U=q(rt);U&&(st=Tn.a.parseHttpHeaders(U._responseHeaders));var wt=st[V.toLowerCase()];return wt===void 0?null:wt},getLatestMPDRequestHeaderValueByID:function(rt){if(!rt)return null;var V,st,U,wt={};for(U=(V=k(h.a.STREAM)).length-1;U>=0;U--)if((st=V[U]).type===y.a.MPD_TYPE){wt=Tn.a.parseHttpHeaders(st._responseHeaders);break}var ht=wt[rt.toLowerCase()];return ht===void 0?null:ht},addRepresentationSwitch:function(rt,V,st,U,wt){E.addRepresentationSwitch(rt,V,st,U,wt)},addDVRInfo:function(rt,V,st,U){E.addDVRInfo(rt,V,st,U)},updateManifestUpdateInfo:function(rt){var V=this.getCurrentManifestUpdate();E.updateManifestUpdateInfo(V,rt)},addManifestUpdateStreamInfo:function(rt){if(rt){var V=this.getCurrentManifestUpdate();E.addManifestUpdateStreamInfo(V,rt.id,rt.index,rt.start,rt.duration)}},addManifestUpdateRepresentationInfo:function(rt,V){if(rt){var st=this.getCurrentManifestUpdate();E.addManifestUpdateRepresentationInfo(st,rt.id,rt.index,rt.streamIndex,V,rt.presentationTimeOffset,rt.startNumber,rt.fragmentInfoType)}},addManifestUpdate:function(rt){E.addManifestUpdate(h.a.STREAM,rt.type,rt.requestStartDate,rt.requestEndDate)},addHttpRequest:function(rt,V,st,U,wt){E.addHttpRequest(rt.mediaType,null,rt.type,rt.url,rt.quality,V,rt.serviceLocation||null,rt.range||null,rt.requestStartDate,rt.firstByteDate,rt.requestEndDate,st,rt.duration,U,wt,rt.fileLoaderType)},addSchedulingInfo:function(rt,V){E.addSchedulingInfo(rt.mediaType,new Date,rt.type,rt.startTime,rt.availabilityStartTime,rt.duration,rt.quality,rt.range,V)},addRequestsQueue:function(rt,V,st){E.addRequestsQueue(rt,V,st)},addBufferLevel:function(rt,V,st){E.addBufferLevel(rt,V,st)},addBufferState:function(rt,V,st){E.addBufferState(rt,V,st)},addDroppedFrames:function(rt){E.addDroppedFrames(h.a.VIDEO,rt)},addPlayList:function(){R&&(E.addPlayList(R),R=null)},addDVBErrors:function(rt){E.addDVBErrors(rt)},createPlaylistMetrics:function(rt,V){(R=new Te).start=new Date,R.mstart=rt,R.starttype=V},createPlaylistTraceMetrics:function(rt,V,st){m===!0&&(m=!1,(_=new It).representationid=rt,_.start=new Date,_.mstart=V,_.playbackspeed=st!==null?st.toString():null)},updatePlayListTraceMetrics:function(rt){if(_)for(var V in _)_[V]=rt[V]},pushPlayListTraceMetrics:function(rt,V){if(m===!1&&R&&_&&_.start){var st=_.start,U=rt.getTime()-st.getTime();_.duration=U,_.stopreason=V,R.trace.push(_),m=!0}},clearAllCurrentMetrics:function(){E.clearAllCurrentMetrics()}},E=E||Io(M).getInstance({settings:p.settings}),m=!0,_=null,R=null,i}Ia.__dashjs_factory_name="DashMetrics";var Ro=r.a.getSingletonFactory(Ia);function Ra(){var p,i,m,_,R=this.context,M=Object(d.a)(R).getInstance(),E=Object(D.a)(R).getInstance();function q(yt){_=yt}function k(yt,ot,Vt,Tt){var pt,zt=ot.adaptation.period.mpd,Dt=zt.availabilityStartTime;if(Tt)pt=Vt&&zt.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(Dt.getTime()+1e3*(yt+zt.timeShiftBufferDepth)):zt.availabilityEndTime;else if(Vt){var W=ot.availabilityTimeOffset;pt=new Date(Dt.getTime()+1e3*(yt-W))}else pt=Dt;return pt}function Y(yt,ot){return(yt.getTime()-ot.mpd.availabilityStartTime.getTime()+1e3*_)/1e3}function rt(yt,ot){return yt+(ot.adaptation.period.start-ot.presentationTimeOffset)}function V(yt){var ot={start:NaN,end:NaN},Vt=yt[0].getAdapter().getRegularPeriods()[0],Tt=Y(new Date,Vt);if(!yt||yt.length===0)return{range:ot,now:Tt};yt.forEach(function(zt){var Dt=zt.getAdapter(),W=Dt.getMediaInfoForType(zt.getStreamInfo(),h.a.VIDEO)||Dt.getMediaInfoForType(zt.getStreamInfo(),h.a.AUDIO),$=Dt.getVoRepresentations(W)[0],tt={start:NaN,end:NaN};if($)if($.segmentInfoType===c.a.SEGMENT_TIMELINE)tt=function(ut){var St,et,mt,Kt,fe=ut.adaptation.period.mpd.manifest.Period_asArray[ut.adaptation.period.index].AdaptationSet_asArray[ut.adaptation.index],$t=i.getRepresentationFor(ut.index,fe),Se=$t.SegmentTemplate.SegmentTimeline,oe=$t.SegmentTemplate.timescale,he=Se.S_asArray,ze={start:0,end:0},Pe=0;for(ze.start=rt(he[0].t/oe,ut),mt=0,Kt=he.length;mt<Kt;mt++)St=he[mt],et=0,St.hasOwnProperty("r")&&(et=St.r),Pe+=St.d*(1+et);return ze.end=rt((he[0].t+Pe)/oe,ut),ze}($);else{var Et=$.adaptation.period;tt.start=Et.start,tt.end=Math.max(Tt,Et.start+Et.duration)}!isNaN(tt.start)&&(isNaN(ot.start)||ot.start>tt.start)&&(ot.start=tt.start),!isNaN(tt.end)&&(isNaN(ot.end)||ot.end<tt.end)&&(ot.end=tt.end)}),ot.end=Math.min(Tt,ot.end);var pt=U(yt,ot.end,!0);return ot.end=isNaN(pt)?ot.end:pt,ot.start=Vt&&Vt.mpd&&Vt.mpd.timeShiftBufferDepth&&!isNaN(Vt.mpd.timeShiftBufferDepth)&&!isNaN(ot.end)?Math.max(ot.end-Vt.mpd.timeShiftBufferDepth,ot.start):ot.start,ot.start=U(yt,ot.start),{range:ot,now:Tt}}function st(yt,ot){m=yt-ot.end}function U(yt,ot){var Vt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Tt=0,pt=!1,zt=NaN;!pt&&Tt<yt.length;){var Dt=yt[Tt].getStreamInfo();Dt.start<=ot&&(!isFinite(Dt.duration)||Dt.start+Dt.duration>=ot)?(zt=ot,pt=!0):!Vt&&Dt.start>ot&&(isNaN(zt)||Dt.start<zt)?zt=Dt.start:Vt&&Dt.start+Dt.duration<ot&&(isNaN(zt)||Dt.start+Dt.duration>zt)&&(zt=Dt.start+Dt.duration),Tt+=1}return zt}catch{return ot}}function wt(yt){yt.offset===void 0||isNaN(yt.offset)||q(yt.offset/1e3)}function ht(){_=0,m=0}function gt(){M.off(t.a.UPDATE_TIME_SYNC_OFFSET,wt,this),ht()}return p={initialize:function(){ht(),M.on(t.a.UPDATE_TIME_SYNC_OFFSET,wt,this)},getClientTimeOffset:function(){return _},setClientTimeOffset:q,getClientReferenceTime:function(){return Date.now()-1e3*m+1e3*_},calcAvailabilityStartTimeFromPresentationTime:function(yt,ot,Vt){return k(yt,ot,Vt)},calcAvailabilityEndTimeFromPresentationTime:function(yt,ot,Vt){return k(yt,ot,Vt,!0)},calcPresentationTimeFromWallTime:Y,calcPresentationTimeFromMediaTime:rt,calcPeriodRelativeTimeFromMpdRelativeTime:function(yt,ot){return ot-yt.adaptation.period.start},calcMediaTimeFromPresentationTime:function(yt,ot){return yt-ot.adaptation.period.start+ot.presentationTimeOffset},calcWallTimeForSegment:function(yt,ot){var Vt,Tt,pt;return ot&&(Vt=yt.representation.adaptation.period.mpd.suggestedPresentationDelay,Tt=yt.presentationStartTime+Vt,pt=new Date(yt.availabilityStartTime.getTime()+1e3*Tt)),pt},calcTimeShiftBufferWindow:function(yt,ot){if(!ot)return function(Tt){var pt={start:NaN,end:NaN},zt=0,Dt=NaN;return Tt.forEach(function(W){var $=W.getStreamInfo();zt+=$.duration,(isNaN(Dt)||$.start<Dt)&&(Dt=$.start)}),pt.start=Dt,pt.end=Dt+zt,pt}(yt);if(E.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Vt=V(yt);return st(Vt.now,Vt.range),Vt.range}return function(Tt){var pt={start:NaN,end:NaN};if(!Tt||Tt.length===0)return pt;var zt=Tt[0].getAdapter().getRegularPeriods()[0],Dt=Y(new Date,zt),W=zt.mpd.timeShiftBufferDepth,$=isNaN(W)?0:Dt-W;if(pt.start=U(Tt,$),pt.end=!isNaN(pt.start)&&Dt<pt.start?Dt:U(Tt,Dt,!0),!isNaN(W)&&pt.end<Dt-W&&(pt.end=NaN),E.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var tt=V(Tt);if(tt.range.end<pt.start)return M.trigger(o.a.CONFORMANCE_VIOLATION,{level:xt.LEVELS.WARNING,event:xt.EVENTS.INVALID_DVR_WINDOW}),st(tt.now,tt.range),tt.range}return pt}(yt)},reset:gt},i=Object(da.a)(R).getInstance(),gt(),p}Ra.__dashjs_factory_name="TimelineConverter";var No=r.a.getSingletonFactory(Ra),Co=x(61),Qi=x.n(Co),Oo=x(25),Pi=x.n(Oo);function Na(p){return(Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(p)}function Ca(p,i){return(Ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,_){return m.__proto__=_,m})(p,i)}function Do(p){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var m,_=Zi(p);if(i){var R=Zi(this).constructor;m=Reflect.construct(_,arguments,R)}else m=_.apply(this,arguments);return Po(this,m)}}function Po(p,i){if(i&&(Na(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(p)}function Zi(p){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(p)}var Mo=function(p){(function(R,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(M&&M.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),M&&Ca(R,M)})(_,p);var i,m=Do(_);function _(){var R;return function(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")}(this,_),(R=m.call(this)).captionData=null,R.label=null,R.defaultTrack=!1,R.kind=null,R.isFragmented=!1,R.isEmbedded=!1,R.isTTML=null,R}return i=_,Object.defineProperty(i,"prototype",{writable:!1}),i}(zi),Lo=x(52);function Oa(){var p=0;function i(q){for(var k="",Y=0;Y<q.length;++Y)k+=q[Y].uchar;return k.length-k.replace(/^\s+/,"").length}function m(q){return"left: "+3.125*q.x+"%; top: "+6.66*q.y1+"%; width: "+(100-3.125*q.x)+"%; height: "+6.66*Math.max(q.y2-1-q.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function _(q){return q==="red"?"rgb(255, 0, 0)":q==="green"?"rgb(0, 255, 0)":q==="blue"?"rgb(0, 0, 255)":q==="cyan"?"rgb(0, 255, 255)":q==="magenta"?"rgb(255, 0, 255)":q==="yellow"?"rgb(255, 255, 0)":q==="white"?"rgb(255, 255, 255)":q==="black"?"rgb(0, 0, 0)":q}function R(q,k){var Y=q.videoHeight/15;return k?"font-size: "+Y+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(k.foreground?_(k.foreground):"rgb(255, 255, 255)")+"; font-style: "+(k.italics?"italic":"normal")+"; text-decoration: "+(k.underline?"underline":"none")+"; white-space: pre; background-color: "+(k.background?_(k.background):"transparent")+";":"font-size: "+Y+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function M(q){return q.replace(/^\s+/g,"")}function E(q){return q.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(q,k,Y,rt){var V,st,U=null,wt=!1,ht=-1,gt={start:k,end:Y,spans:[]},yt="style_cea608_white_black",ot={},Vt={},Tt=[];for(V=0;V<15;++V){var pt=rt.rows[V],zt="",Dt=null;if(pt.isEmpty()===!1){var W=i(pt.chars);U===null&&(U={x:W,y1:V,y2:V+1,p:[]}),W!==ht&&wt&&(U.p.push(gt),gt={start:k,end:Y,spans:[]},U.y2=V,U.name="region_"+U.x+"_"+U.y1+"_"+U.y2,ot.hasOwnProperty(U.name)===!1?(Tt.push(U),ot[U.name]=U):ot[U.name].p.contat(U.p),U={x:W,y1:V,y2:V+1,p:[]});for(var $=0;$<pt.chars.length;++$){var tt=pt.chars[$],Et=tt.penState;if(Dt===null||!Et.equals(Dt)){zt.trim().length>0&&(gt.spans.push({name:yt,line:zt,row:V}),zt="");var ut="style_cea608_"+Et.foreground+"_"+Et.background;Et.underline&&(ut+="_underline"),Et.italics&&(ut+="_italics"),Vt.hasOwnProperty(ut)||(Vt[ut]=JSON.parse(JSON.stringify(Et))),Dt=Et,yt=ut}zt+=tt.uchar}zt.trim().length>0&&gt.spans.push({name:yt,line:zt,row:V}),wt=!0,ht=W}else wt=!1,ht=-1,U&&(U.p.push(gt),gt={start:k,end:Y,spans:[]},U.y2=V,U.name="region_"+U.x+"_"+U.y1+"_"+U.y2,ot.hasOwnProperty(U.name)===!1?(Tt.push(U),ot[U.name]=U):ot[U.name].p.contat(U.p),U=null)}U&&(U.p.push(gt),U.y2=V+1,U.name="region_"+U.x+"_"+U.y1+"_"+U.y2,ot.hasOwnProperty(U.name)===!1?(Tt.push(U),ot[U.name]=U):ot[U.name].p.contat(U.p),U=null);var St=[];for(V=0;V<Tt.length;++V){var et=Tt[V],mt="sub_cea608_"+p++,Kt=document.createElement("div");Kt.id=mt;var fe=m(et);Kt.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+fe;var $t=document.createElement("div");$t.className="paragraph bodyStyle",$t.style.cssText=R(q);var Se=document.createElement("div");Se.className="cueUniWrapper",Se.style.cssText="unicode-bidi: normal; direction: ltr;";for(var oe=0;oe<et.p.length;++oe){var he=et.p[oe],ze=0;for(st=0;st<he.spans.length;++st){var Pe=he.spans[st];if(Pe.line.length>0){if(st!==0&&ze!=Pe.row){var Re=document.createElement("br");Re.className="lineBreak",Se.appendChild(Re)}var lt=!1;ze===Pe.row&&(lt=!0),ze=Pe.row;var Ft=Vt[Pe.name],Qt=document.createElement("span");Qt.className="spanPadding "+Pe.name+" customSpanColor",Qt.style.cssText=R(q,Ft),st!==0&&lt?st===he.spans.length-1?Qt.textContent=E(Pe.line):Qt.textContent=Pe.line:he.spans.length>1&&st<he.spans.length-1&&Pe.row===he.spans[st+1].row?Qt.textContent=M(Pe.line):Qt.textContent=Pe.line.trim(),Se.appendChild(Qt)}}}$t.appendChild(Se),Kt.appendChild($t);var ne={bodyStyle:["%",90]};for(var Oe in Vt)Vt.hasOwnProperty(Oe)&&(ne[Oe]=["%",90]);St.push({type:"html",start:k,end:Y,cueHTMLElement:Kt,cueID:mt,cellResolution:[32,15],isFromCEA608:!0,fontSize:ne,lineHeight:{},linePadding:{}})}return St}}}Oa.__dashjs_factory_name="EmbeddedTextHtmlRender";var xo=r.a.getSingletonFactory(Oa);function Da(p){var i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt=p.errHandler,ot=p.manifestModel,Vt=p.mediaController,Tt=p.videoModel,pt=p.textTracks,zt=p.vttParser,Dt=p.vttCustomRenderingParser,W=p.ttmlParser,$=p.streamInfo,tt=p.settings,Et=this.context,ut=Object(d.a)(Et).getInstance(),St=!1;function et(){E=null,k=NaN,Y=[],rt=null,q=!1,M=[],R=null}function mt(Pe){var Re=new Mo;for(var lt in Pe)Re[lt]=Pe[lt];Re.labels=Pe.labels,Re.defaultTrack=function(Ft){var Qt=!1;return st.length>1&&Ft.isEmbedded?Qt=Ft.id&&Ft.id===h.a.CC1:st.length===1?Ft.id&&typeof Ft.id=="string"&&Ft.id.substring(0,2)==="CC"&&(Qt=!0):st.length===0&&(Qt=Ft.index===M[0].index),Qt}(Pe),Re.isFragmented=Pe.isFragmented,Re.isEmbedded=!!Pe.isEmbedded,Re.isTTML=function(Ft){return Ft.codec&&Ft.codec.search(h.a.STPP)>=0||Ft.mimeType&&Ft.mimeType.search(h.a.TTML)>=0}(Pe),Re.kind=function(Ft,Qt){var ne=Ft.roles&&Ft.roles.length>0?Qt[Ft.roles[0]]:Qt.caption;return ne=ne===Qt.caption||ne===Qt.subtitle?ne:Qt.caption}(Pe,{subtitle:"subtitles",caption:"captions"}),pt.addTextTrack(Re)}function Kt(Pe){var Re=Pe.chunk;Re.mediaInfo.embeddedCaptions&&$t(Re.bytes,Re)}function fe(Pe){V=Pe}function $t(Pe,Re){var lt=Re.mediaInfo,Ft=lt.type,Qt=lt.mimeType,ne=lt.codec||Qt;ne?lt.codec.indexOf("application/mp4")!==-1?function(Oe,xe,Le){var tn,sn;if(xe.segmentType==="InitializationSegment")q=!0,k=_.getMediaTimescaleFromMoov(Oe);else{if(!q)return;sn=_.getSamplesInfo(Oe),(tn=sn.sampleList).length>0&&(rt=tn[0].cts-xe.start*k),Le.search(h.a.STPP)>=0?function(Ye,un,mn){var bn,vn;for(R=R!==null?R:he(mn),bn=0;bn<un.length;bn++){var dn=un[bn],hn=dn.cts,Mn=oe(),On=Mn+hn/k,Nn=On+dn.duration/k;i.buffered.add(On,Nn);var Dn=new DataView(Ye,dn.offset,dn.subSizes[0]),Ln=Pi.a.Utils.dataViewToString(Dn,h.a.UTF8),Me=[],se=dn.offset+dn.subSizes[0];for(vn=1;vn<dn.subSizes.length;vn++){var kt=new Uint8Array(Ye,se,dn.subSizes[vn]),ce=String.fromCharCode.apply(null,kt);Me.push(ce),se+=dn.subSizes[vn]}try{var Ie=ot.getValue().ttmlTimeIsRelative?hn/k:0,_t=R.parse(Ln,Ie,hn/k,(hn+dn.duration)/k,Me);pt.addCaptions(V,Mn,_t)}catch(ye){E.removeExecutedRequestsBeforeTime(),this.remove(),m.error("TTML parser error: "+ye.message)}}}(Oe,tn,Le):function(Ye,un){var mn,bn,vn,dn=[];for(mn=0;mn<un.length;mn++){var hn=un[mn];hn.cts-=rt;var Mn=oe()+hn.cts/k,On=Mn+hn.duration/k;i.buffered.add(Mn,On);var Nn=Ye.slice(hn.offset,hn.offset+hn.size),Dn=Pi.a.parseBuffer(Nn);for(bn=0;bn<Dn.boxes.length;bn++){var Ln=Dn.boxes[bn];if(m.debug("VTT box1: "+Ln.type),Ln.type!=="vtte"&&Ln.type==="vttc")for(m.debug("VTT vttc boxes.length = "+Ln.boxes.length),vn=0;vn<Ln.boxes.length;vn++){var Me=Ln.boxes[vn];if(m.debug("VTT box2: "+Me.type),Me.type==="payl"){var se=Me.cue_text;m.debug("VTT cue_text = "+se);var kt=hn.cts/k,ce=(hn.cts+hn.duration)/k;dn.push({start:kt,end:ce,data:se,styles:{}}),m.debug("VTT "+kt+"-"+ce+" : "+se)}}}}dn.length>0&&pt.addCaptions(V,0,dn)}(Oe,tn)}}(Pe,Re,ne):Ft===h.a.VIDEO?function(Oe,xe){var Le,tn;if(xe.segmentType===y.a.INIT_SEGMENT_TYPE)U===0&&(U=_.getMediaTimescaleFromMoov(Oe));else if(xe.segmentType===y.a.MEDIA_SEGMENT_TYPE){if(U===0)return void m.warn("CEA-608: No timescale for embeddedTextTrack yet");var sn=(tn=_.getSamplesInfo(Oe)).lastSequenceNumber;if(ht[0]||ht[1]||function(){for(var vn,dn=0;dn<st.length;dn++){if((vn=pt.getTrackIdxForId(st[dn].id))===-1)return void m.warn("CEA-608: data before track is ready.");var hn=Se(vn);ht[dn]=new b.a.Cea608Parser(dn+1,{newCue:hn},null)}}(),U){if(wt!==null&&sn!==wt+tn.numSequences)for(Le=0;Le<ht.length;Le++)ht[Le]&&ht[Le].reset();for(var Ye=function(vn,dn){if(dn.length===0)return null;for(var hn={splits:[],fields:[[],[]]},Mn=new DataView(vn),On=0;On<dn.length;On++)for(var Nn=dn[On],Dn=b.a.findCea608Nalus(Mn,Nn.offset,Nn.size),Ln=null,Me=0,se=0;se<Dn.length;se++)for(var kt=b.a.extractCea608DataFromRange(Mn,Dn[se]),ce=0;ce<2;ce++)if(kt[ce].length>0){Nn.cts!==Ln?Me=0:Me+=1;var Ie=oe();hn.fields[ce].push([Nn.cts+Ie*U,kt[ce],Me]),Ln=Nn.cts}return hn.fields.forEach(function(_t){_t.sort(function(ye,De){return ye[0]===De[0]?ye[2]-De[2]:ye[0]-De[0]})}),hn}(Oe,tn.sampleList),un=0;un<ht.length;un++){var mn=Ye.fields[un],bn=ht[un];if(bn)for(Le=0;Le<mn.length;Le++)bn.addData(mn[Le][0]/U,mn[Le][1])}wt=sn}}}(Pe,Re):function(Oe,xe,Le){var tn,sn,Ye=new DataView(Oe,0,Oe.byteLength);sn=Pi.a.Utils.dataViewToString(Ye,h.a.UTF8);try{tn=he(Le).parse(sn,0),pt.addCaptions(pt.getCurrentTrackIdx(),0,tn),i.buffered&&i.buffered.add(xe.start,xe.end)}catch(un){yt.error(new B.a(H.a.TIMED_TEXT_ERROR_ID_PARSE_CODE,H.a.TIMED_TEXT_ERROR_MESSAGE_PARSE+un.message,sn))}}(Pe,Re,ne):m.error("No text type defined")}function Se(Pe){return function(Re,lt,Ft){var Qt;Qt=Tt.getTTMLRenderingDiv()?gt.createHTMLCaptionsFromScreen(Tt.getElement(),Re,lt,Ft):[{start:Re,end:lt,data:Ft.getDisplayText(),styles:{}}],Qt&&pt.addCaptions(Pe,0,Qt)}}function oe(){return isNaN(i.timestampOffset)?0:i.timestampOffset}function he(Pe){var Re;return Pe.search(h.a.VTT)>=0?Re=tt.get().streaming.text.webvtt.customRenderingEnabled&&Dt?Dt:zt:(Pe.search(h.a.TTML)>=0||Pe.search(h.a.STPP)>=0)&&(Re=W),Re}function ze(Pe){st.forEach(function(Re){var lt=pt.getTrackIdxForId(Re.id);lt>=0&&pt.deleteCuesFromTrackIdx(lt,Pe.from,Pe.to)})}return i={initialize:function(){St||(st=[],V=null,U=0,ht=[],wt=null,St=!0,gt=xo(Et).getInstance(),ut.on(t.a.VIDEO_CHUNK_RECEIVED,Kt,i),ut.on(t.a.BUFFER_CLEARED,ze,i))},addMediaInfos:function(Pe,Re,lt){if(M=M.concat(Re),Pe===h.a.TEXT&&Re[0].isFragmented&&!Re[0].isEmbedded){E=lt,i.buffered=Object(Lo.a)(Et).create(),Y=Vt.getTracksFor(h.a.TEXT,$.id).filter(function(Oe){return Oe.isFragmented});for(var Ft=Vt.getCurrentTrackFor(h.a.TEXT,$.id),Qt=0;Qt<Y.length;Qt++)if(Y[Qt]===Ft){fe(Qt);break}}for(var ne=0;ne<Re.length;ne++)mt(Re[ne])},resetMediaInfos:function(){M=[]},getStreamId:function(){return $.id},append:$t,abort:function(){},addEmbeddedTrack:function(Pe){if(St&&Pe)if(Pe.id===h.a.CC1||Pe.id===h.a.CC3){for(var Re=0;Re<st.length;Re++)if(st[Re].id===Pe.id)return;st.push(Pe)}else m.warn("Embedded track "+Pe.id+" not supported!")},resetEmbedded:function(){ut.off(t.a.VIDEO_CHUNK_RECEIVED,Kt,i),ut.off(t.a.BUFFER_CLEARED,ze,i),pt&&pt.deleteAllTextTracks(),St=!1,st=[],ht=[null,null],wt=null},getConfig:function(){return{fragmentModel:E,fragmentedTracks:Y,videoModel:Tt}},setCurrentFragmentedTrackIdx:fe,remove:function(Pe,Re){Pe===void 0&&Pe===Re&&(Pe=i.buffered.start(0),Re=i.buffered.end(i.buffered.length-1)),i.buffered.remove(Pe,Re),pt.deleteCuesFromTrackIdx(V,Pe,Re)},reset:function(){et(),M=[],_=null}},m=Object(f.a)(Et).getInstance().getLogger(i),_=Object(Q.a)(Et).getInstance(),et(),i}Da.__dashjs_factory_name="TextSourceBuffer";var Fo=r.a.getClassFactory(Da),$i=x(51);function ko(p,i){var m=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!m){if(Array.isArray(p)||(m=function(k,Y){if(k){if(typeof k=="string")return Pa(k,Y);var rt=Object.prototype.toString.call(k).slice(8,-1);if(rt==="Object"&&k.constructor&&(rt=k.constructor.name),rt==="Map"||rt==="Set")return Array.from(k);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return Pa(k,Y)}}(p))||i&&p&&typeof p.length=="number"){m&&(p=m);var _=0,R=function(){};return{s:R,n:function(){return _>=p.length?{done:!0}:{done:!1,value:p[_++]}},e:function(k){throw k},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M,E=!0,q=!1;return{s:function(){m=m.call(p)},n:function(){var k=m.next();return E=k.done,k},e:function(k){q=!0,M=k},f:function(){try{E||m.return==null||m.return()}finally{if(q)throw M}}}}function Pa(p,i){(i==null||i>p.length)&&(i=p.length);for(var m=0,_=new Array(i);m<i;m++)_[m]=p[m];return _}function Ma(p){var i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt,ot,Vt=this.context,Tt=Object(d.a)(Vt).getInstance(),pt=p.videoModel,zt=p.streamInfo,Dt=p.settings;function W(lt,Ft,Qt,ne,Oe,xe){var Le=0,tn=0;lt/Ft>Qt/ne?Le=(tn=Ft)/ne*Qt:tn=(Le=lt)/Qt*ne;var sn,Ye,un=0,mn=0;return Le/tn>Oe?(mn=tn,un=tn*Oe):(un=Le,mn=Le/Oe),sn=(lt-un)/2,Ye=(Ft-mn)/2,xe?{x:sn+.1*un,y:Ye+.1*mn,w:.8*un,h:.8*mn}:{x:sn,y:Ye,w:un,h:mn}}function $(lt,Ft){var Qt=pt.getClientWidth(),ne=pt.getClientHeight(),Oe=pt.getVideoWidth(),xe=pt.getVideoHeight(),Le=pt.getVideoRelativeOffsetTop(),tn=pt.getVideoRelativeOffsetLeft();if(Oe!==0&&xe!==0){var sn=Oe/xe,Ye=!1;lt.isFromCEA608&&(sn=3.5/3,Ye=!0);var un=W.call(this,Qt,ne,Oe,xe,sn,Ye),mn=un.w,bn=un.h,vn=un.x,dn=un.y;if(mn!=Y||bn!=rt||vn!=q||dn!=k||Ft){if(q=vn+tn,k=dn+Le,Y=mn,rt=bn,V){var hn=V.style;hn&&(hn.left=q+"px",hn.top=k+"px",hn.width=Y+"px",hn.height=rt+"px",hn.zIndex=wt&&document[wt]||ht?yt:null,Tt.trigger(o.a.CAPTION_CONTAINER_RESIZE))}var Mn=lt.activeCues;if(Mn)for(var On=Mn.length,Nn=0;Nn<On;++Nn){var Dn=Mn[Nn];Dn.scaleCue(Dn)}}}}function tt(lt){var Ft,Qt,ne,Oe,xe,Le=Y,tn=rt;if(lt.cellResolution){var sn=[Le/lt.cellResolution[0],tn/lt.cellResolution[1]];if(lt.linePadding){for(Ft in lt.linePadding)if(lt.linePadding.hasOwnProperty(Ft)){Qt=(lt.linePadding[Ft]*sn[0]).toString();for(var Ye=document.getElementsByClassName("spanPadding"),un=0;un<Ye.length;un++)Ye[un].style.cssText=Ye[un].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Qt),Ye[un].style.cssText=Ye[un].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Qt)}}if(lt.fontSize){for(Ft in lt.fontSize)if(lt.fontSize.hasOwnProperty(Ft)){lt.fontSize[Ft][0]==="%"?ne=lt.fontSize[Ft][1]/100:lt.fontSize[Ft][0]==="c"&&(ne=lt.fontSize[Ft][1]),Qt=(ne*sn[1]).toString(),xe=Ft!=="defaultFontSize"?document.getElementsByClassName(Ft):document.getElementsByClassName("paragraph");for(var mn=0;mn<xe.length;mn++)xe[mn].style.cssText=xe[mn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Qt)}if(lt.lineHeight){for(Ft in lt.lineHeight)if(lt.lineHeight.hasOwnProperty(Ft)){lt.lineHeight[Ft][0]==="%"?Oe=lt.lineHeight[Ft][1]/100:lt.fontSize[Ft][0]==="c"&&(Oe=lt.lineHeight[Ft][1]),Qt=(Oe*sn[1]).toString(),xe=document.getElementsByClassName(Ft);for(var bn=0;bn<xe.length;bn++)xe[bn].style.cssText=xe[bn].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Qt)}}}}if(lt.isd){var vn=document.getElementById(lt.cueID);vn&&V.removeChild(vn),Et(lt)}}function Et(lt){if(V){var Ft=document.createElement("div");V.appendChild(Ft),gt=Object($i.renderHTML)(lt.isd,Ft,function(Qt){var ne=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,Oe=/^#(.*)$/;if(ne.test(Qt)){var xe=ne.exec(Qt),Le=parseInt(xe[4],10)-1;return"data:image/png;base64,"+btoa(lt.images[Le])}if(Oe.test(Qt)){var tn=Oe.exec(Qt)[1];return"data:image/png;base64,"+lt.embeddedImages[tn]}return null},V.clientHeight,V.clientWidth,!1,function(Qt){m.info("renderCaption :",Qt)},gt,!0),Ft.id=lt.cueID,Tt.trigger(o.a.CAPTION_RENDERED,{captionDiv:Ft,currentTrackIdx:E})}}function ut(lt,Ft,Qt){var ne=Kt(lt);if(ne&&Array.isArray(Qt)&&Qt.length!==0)for(var Oe=0;Oe<Qt.length;Oe++){var xe=void 0,Le=Qt[Oe];ne.cellResolution=Le.cellResolution,ne.isFromCEA608=Le.isFromCEA608,isNaN(Le.start)||isNaN(Le.end)||(xe=Le.type==="html"&&V?St(Le,Ft,ne):Le.data?et(Le,Ft,ne):null);try{xe?Se(ne,xe)||(Dt.get().streaming.text.webvtt.customRenderingEnabled?(ne.manualCueList||(ne.manualCueList=[]),ne.manualCueList.push(xe)):ne.addCue(xe)):m.error("impossible to display subtitles.")}catch(tn){throw he(ne),ne.addCue(xe),tn}}}function St(lt,Ft,Qt){var ne=this,Oe=new _(lt.start+Ft,lt.end+Ft,"");return Oe.cueHTMLElement=lt.cueHTMLElement,Oe.isd=lt.isd,Oe.images=lt.images,Oe.embeddedImages=lt.embeddedImages,Oe.cueID=lt.cueID,Oe.scaleCue=tt.bind(ne),Oe.cellResolution=lt.cellResolution,Oe.lineHeight=lt.lineHeight,Oe.linePadding=lt.linePadding,Oe.fontSize=lt.fontSize,V.style.left=q+"px",V.style.top=k+"px",V.style.width=Y+"px",V.style.height=rt+"px",Oe.onenter=function(){Qt.mode===h.a.TEXT_SHOWING&&(this.isd?(Et(this),m.debug("Cue enter id:"+this.cueID)):(V.appendChild(this.cueHTMLElement),tt.call(ne,this),Tt.trigger(o.a.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:E})))},Oe.onexit=function(){if(V)for(var xe=V.childNodes,Le=0;Le<xe.length;++Le)xe[Le].id===this.cueID&&(m.debug("Cue exit id:"+xe[Le].id),V.removeChild(xe[Le]),--Le)},Oe}function et(lt,Ft,Qt){var ne=new _(lt.start-Ft,lt.end-Ft,lt.data);if(ne.cueID="".concat(ne.startTime,"_").concat(ne.endTime),ne.isActive=!1,lt.styles)try{lt.styles.align!==void 0&&"align"in ne&&(ne.align=lt.styles.align),lt.styles.line!==void 0&&"line"in ne&&(ne.line=lt.styles.line),lt.styles.position!==void 0&&"position"in ne&&(ne.position=lt.styles.position),lt.styles.size!==void 0&&"size"in ne&&(ne.size=lt.styles.size)}catch(Oe){m.error(Oe)}return ne.onenter=function(){Qt.mode===h.a.TEXT_SHOWING&&Tt.trigger(o.a.CAPTION_RENDERED,{currentTrackIdx:E})},ne}function mt(){var lt,Ft=[],Qt=ko(pt.getTextTracks());try{for(Qt.s();!(lt=Qt.n()).done;){var ne=lt.value;ne.manualMode===h.a.TEXT_SHOWING&&Ft.push(ne)}}catch(Oe){Qt.e(Oe)}finally{Qt.f()}return Ft}function Kt(lt){return lt>=0&&R[lt]?pt.getTextTrack(R[lt].kind,R[lt].id,R[lt].lang,R[lt].isTTML,R[lt].isEmbedded):null}function fe(lt){var Ft=this;if(lt!==E){var Qt=Kt(E=lt);$t.call(this,Qt),U&&(clearInterval(U),U=null),Qt&&Qt.renderingType==="html"&&($.call(this,Qt,!0),window.ResizeObserver?(ot=new window.ResizeObserver(function(){$.call(Ft,Qt,!0)})).observe(pt.getElement()):U=setInterval($.bind(this,Qt),500))}}function $t(lt){Re.call(this),lt&&lt.renderingType==="html"?ze.call(this):Pe.call(this)}function Se(lt,Ft){if(!lt.cues)return!1;for(var Qt=0;Qt<lt.cues.length;Qt++)if(lt.cues[Qt].startTime===Ft.startTime&&lt.cues[Qt].endTime===Ft.endTime)return!0;return!1}function oe(lt,Ft,Qt){var ne=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return(isNaN(Ft)||(ne?lt.startTime:lt.endTime)>=Ft)&&(isNaN(Qt)||(ne?lt.endTime:lt.startTime)<=Qt)}function he(lt,Ft,Qt){var ne=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(lt.cues)for(var Oe=lt.cues,xe=Oe.length-1,Le=xe;Le>=0;Le--)oe(Oe[Le],Ft,Qt,ne)&&(Oe[Le].onexit&&Oe[Le].onexit(),lt.removeCue(Oe[Le]))}function ze(){var lt=document.getElementById("native-cue-style");if(!lt){(lt=document.createElement("style")).id="native-cue-style",document.head.appendChild(lt);var Ft=lt.sheet,Qt=pt.getElement();try{Qt&&(Qt.id?Ft.insertRule("#"+Qt.id+"::cue {background: transparent}",0):Qt.classList.length!==0?Ft.insertRule("."+Qt.className+"::cue {background: transparent}",0):Ft.insertRule("video::cue {background: transparent}",0))}catch(ne){m.info(""+ne.message)}}}function Pe(){var lt=document.getElementById("native-cue-style");lt&&document.head.removeChild(lt)}function Re(){if(V)for(;V.firstChild;)V.removeChild(V.firstChild)}return i={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(_=window.VTTCue||window.TextTrackCue,R=[],M=[],E=-1,q=0,k=0,Y=0,rt=0,V=null,st=null,U=null,ht=!1,yt=2147483647,gt=null,document.fullscreenElement!==void 0?wt="fullscreenElement":document.webkitIsFullScreen!==void 0?wt="webkitIsFullScreen":document.msFullscreenElement?wt="msFullscreenElement":document.mozFullScreen&&(wt="mozFullScreen"))},getStreamId:function(){return zt.id},addTextTrack:function(lt){R.push(lt)},addCaptions:ut,createTracks:function(){R.sort(function(bn,vn){return bn.index-vn.index}),V=pt.getTTMLRenderingDiv(),st=pt.getVttRenderingDiv();for(var lt,Ft,Qt,ne,Oe,xe,Le=-1,tn=0;tn<R.length;tn++){var sn=(lt=R[tn],Ft=void 0,Qt=void 0,ne=void 0,Oe=void 0,xe=void 0,Ft=lt.kind,Qt=lt.id!==void 0?lt.id:lt.lang,ne=lt.lang,Oe=lt.isTTML,xe=lt.isEmbedded,pt.addTextTrack(Ft,Qt,ne,Oe,xe));M.push(sn),R[tn].defaultTrack&&(sn.default=!0,Le=tn);var Ye=Kt(tn);Ye&&(Ye.mode=h.a.TEXT_SHOWING,V&&(R[tn].isTTML||R[tn].isEmbedded)?Ye.renderingType="html":Ye.renderingType="default"),ut(tn,0,R[tn].captionData),Tt.trigger(o.a.TEXT_TRACK_ADDED)}if(fe.call(this,Le),Le>=0){Tt.on(o.a.PLAYBACK_METADATA_LOADED,function bn(){var vn=Kt(Le);vn&&vn.renderingType==="html"&&$.call(this,vn,!0),Tt.off(o.a.PLAYBACK_METADATA_LOADED,bn,this)},this);for(var un=0;un<R.length;un++){var mn=Kt(un);mn&&(mn.mode=un===Le?h.a.TEXT_SHOWING:h.a.TEXT_HIDDEN,mn.manualMode=un===Le?h.a.TEXT_SHOWING:h.a.TEXT_HIDDEN)}}Tt.trigger(t.a.TEXT_TRACKS_QUEUE_INITIALIZED,{index:E,tracks:R,streamId:zt.id})},getCurrentTrackIdx:function(){return E},setCurrentTrackIdx:fe,getTrackIdxForId:function(lt){for(var Ft=-1,Qt=0;Qt<R.length;Qt++)if(R[Qt].id===lt){Ft=Qt;break}return Ft},getCurrentTrackInfo:function(){return R[E]},setModeForTrackIdx:function(lt,Ft){var Qt=Kt(lt);Qt&&Qt.mode!==Ft&&(Qt.mode=Ft),Qt&&Qt.manualMode!==Ft&&(Qt.manualMode=Ft)},deleteCuesFromTrackIdx:function(lt,Ft,Qt){var ne=Kt(lt);ne&&he(ne,Ft,Qt)},deleteAllTextTracks:function(){for(var lt=M?M.length:0,Ft=0;Ft<lt;Ft++){var Qt=Kt(Ft);Qt&&he.call(this,Qt,zt.start,zt.start+zt.duration,!1)}M=[],R=[],U&&(clearInterval(U),U=null),ot&&pt&&(ot.unobserve(pt.getElement()),ot=null),E=-1,Re.call(this)},deleteTextTrack:function(lt){pt.removeChild(M[lt]),M.splice(lt,1)},manualCueProcessing:function(lt){var Ft=mt();if(Ft&&Ft.length>0){var Qt=Ft[0].manualCueList;Qt&&Qt.length>0&&Qt.forEach(function(ne){if(ne.startTime<=lt&&ne.endTime>=lt&&!ne.isActive)ne.isActive=!0,WebVTT.processCues(window,[ne],st,ne.cueID);else if(ne.isActive&&(ne.startTime>lt||ne.endTime<lt)&&(ne.isActive=!1,st))for(var Oe=st.childNodes,xe=0;xe<Oe.length;++xe)Oe[xe].id===ne.cueID&&(st.removeChild(Oe[xe]),--xe)})}},disableManualTracks:function(){var lt=mt();if(lt&&lt.length>0){var Ft=lt[0].manualCueList;Ft&&Ft.length>0&&Ft.forEach(function(Qt){if(Qt.isActive&&(Qt.isActive=!1,st))for(var ne=st.childNodes,Oe=0;Oe<ne.length;++Oe)ne[Oe].id===Qt.cueID&&(st.removeChild(ne[Oe]),--Oe)})}}},m=Object(f.a)(Vt).getInstance().getLogger(i),i}Ma.__dashjs_factory_name="TextTracks";var Uo=r.a.getClassFactory(Ma);function La(){var p,i,m,_,R,M,E=this.context;function q(V){var st=V.split(":"),U=st.length-1;return V=60*parseInt(st[U-1],10)+parseFloat(st[U]),U===2&&(V+=3600*parseInt(st[0],10)),V}function k(V){var st=V.split(_),U=st[1].split(M);return U.shift(),st[1]=U[0],U.shift(),{cuePoints:st,styles:Y(U)}}function Y(V){var st={};return V.forEach(function(U){if(U.split(/:/).length>1){var wt=U.split(/:/)[1];wt&&wt.search(/%/)!=-1&&(wt=parseInt(wt.replace(/%/,""),10)),(U.match(/align/)||U.match(/A/))&&(st.align=wt),(U.match(/line/)||U.match(/L/))&&(st.line=wt),(U.match(/position/)||U.match(/P/))&&(st.position=wt),(U.match(/size/)||U.match(/S/))&&(st.size=wt)}}),st}function rt(V,st){for(var U,wt=st,ht="",gt="";V[wt]!==""&&wt<V.length;)wt++;if((U=wt-st)>1)for(var yt=0;yt<U;yt++){if((gt=V[st+yt]).match(_)){ht="";break}ht+=gt,yt!==U-1&&(ht+=`
`)}else(gt=V[st]).match(_)||(ht=gt);return ht}return p={parse:function(V){var st,U,wt=[];if(!V)return wt;st=(V=V.split(m)).length,U=-1;for(var ht=0;ht<st;ht++){var gt=V[ht];if(gt.length>0&&gt!=="WEBVTT"&&gt.match(_)){var yt=k(gt),ot=yt.cuePoints,Vt=yt.styles,Tt=rt(V,ht+1),pt=q(ot[0].replace(R,"")),zt=q(ot[1].replace(R,""));!isNaN(pt)&&!isNaN(zt)&&pt>=U&&zt>pt?Tt!==""?(U=pt,wt.push({start:pt,end:zt,data:Tt,styles:Vt})):i.error("Skipping cue due to empty/malformed cue text"):i.error("Skipping cue due to incorrect cue timing")}}return wt}},i=Object(f.a)(E).getInstance().getLogger(p),m=/(?:\r\n|\r|\n)/gm,_=/-->/,R=/(^[\s]+|[\s]+$)/g,M=/\s\b/g,p}La.__dashjs_factory_name="VTTParser";var Bo=r.a.getSingletonFactory(La);function xa(){var p,i;return p={parse:function(m){var _=[];return i.oncue=function(R){R.start=R.startTime,R.end=R.endTime,R.data=R.text,R.styles={align:R.align,line:R.line,position:R.position,size:R.size},_.push(R)},i.parse(m),_}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(i=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),p}xa.__dashjs_factory_name="VttCustomRenderingParser";var jo=r.a.getSingletonFactory(xa);function Fa(){var p,i,m=this.context,_=Object(d.a)(m).getInstance(),R=0;return p={parse:function(M,E,q,k,Y){var rt,V,st,U="",wt=[],ht={},gt={},yt="",ot="",Vt={onOpenTag:function(W,$,tt){if(tt[" imagetype"]&&!tt[" imageType"]&&(_.trigger(o.a.CONFORMANCE_VIOLATION,{level:xt.LEVELS.ERROR,event:xt.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),tt[" imageType"]=tt[" imagetype"]),$==="image"&&(W==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||W==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!tt[" imageType"]||tt[" imageType"].value!=="PNG")return void i.warn("smpte-tt imageType != PNG. Discarded");yt=tt["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){yt&&(gt[yt]=ot.trim()),ot="",yt=""},onText:function(W){yt&&(ot+=W)}};if(!M)throw U="no ttml data to parse",new Error(U);ht.data=M,_.trigger(t.a.TTML_TO_PARSE,ht);var Tt=Object($i.fromXML)(ht.data,function(W){U=W},Vt);_.trigger(t.a.TTML_PARSED,{ttmlString:ht.data,ttmlDoc:Tt});var pt,zt=Tt.getMediaTimeEvents();for(st=0;st<zt.length;st++){var Dt=Object($i.generateISD)(Tt,zt[st],function(W){U=W});Dt.contents.some(function(W){return W.contents.length})&&(rt=zt[st]+E<q?q:zt[st]+E)<(V=zt[st+1]+E>k?k:zt[st+1]+E)&&wt.push({start:rt,end:V,type:"html",cueID:(pt=void 0,pt="cue_TTML_"+R,R++,pt),isd:Dt,images:Y,embeddedImages:gt})}if(U!=="")throw i.error(U),new Error(U);return wt}},i=Object(f.a)(m).getInstance().getLogger(p),p}Fa.__dashjs_factory_name="TTMLParser";var Go=r.a.getSingletonFactory(Fa);function ka(p){var i,m,_,R,M,E,q,k,Y,rt,V,st,U=this.context,wt=p.adapter,ht=p.errHandler,gt=p.manifestModel,yt=p.mediaController,ot=p.videoModel,Vt=p.settings;function Tt(Et){var ut=Et.tracks,St=Et.index,et=Et.streamId;if(Vt.get().streaming.text.defaultEnabled===!1&&!Dt()||st)W(et,-1);else{var mt=yt.getCurrentTrackFor(h.a.TEXT,et);if(mt){var Kt={lang:mt.lang,role:mt.roles[0],index:mt.index,codec:mt.codec,accessibility:mt.accessibility[0]};ut.some(function(fe,$t){if(yt.matchSettings(Kt,fe))return W(et,$t),St=$t,!0})}Y=!1}m[et].lastEnabledIndex=St,k.trigger(o.a.TEXT_TRACKS_ADDED,{enabled:Dt(),index:St,tracks:ut,streamId:et}),V=!0}function pt(Et){try{var ut=Et.streamId;if(!R[ut]||isNaN(Et.time))return;R[ut].manualCueProcessing(Et.time)}catch{}}function zt(Et){try{var ut=Et.streamId;if(!R[ut])return;R[ut].disableManualTracks()}catch{}}function Dt(){var Et=!0;return Y&&!rt&&(Et=!1),Et}function W(Et,ut){(Y=ut===-1)&&yt&&yt.saveTextSettingsDisabled();var St=$(Et);if(St!==ut&&R[Et]){R[Et].disableManualTracks(),R[Et].setModeForTrackIdx(St,h.a.TEXT_HIDDEN),R[Et].setCurrentTrackIdx(ut),R[Et].setModeForTrackIdx(ut,h.a.TEXT_SHOWING);var et=R[Et].getCurrentTrackInfo();et&&et.isFragmented&&!et.isEmbedded?function(mt,Kt,fe){if(_[mt])for(var $t=_[mt].getConfig().fragmentedTracks,Se=0;Se<$t.length;Se++){var oe=$t[Se];if(Kt.lang===oe.lang&&(oe.id?Kt.id===oe.id:Kt.index===oe.index)){var he=yt.getCurrentTrackFor(h.a.TEXT,mt);(oe.id?he.id!==oe.id:he.index!==oe.index)?(R[mt].deleteCuesFromTrackIdx(fe),_[mt].setCurrentFragmentedTrackIdx(Se)):fe===-1&&k.trigger(t.a.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:mt,mediaType:h.a.TEXT})}}}(Et,et,St):et&&!et.isFragmented&&function(mt,Kt){k.trigger(t.a.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Kt},{streamId:mt,mediaType:h.a.TEXT})}(Et,et),yt.setTrack(et)}}function $(Et){return R[Et].getCurrentTrackIdx()}function tt(){_={},R={},m={},Y=!0,V=!1,st=!1}return i={deactivateStream:function(Et){if(Et){var ut=Et.id;_[ut]&&_[ut].resetMediaInfos(),R[ut]&&R[ut].deleteAllTextTracks()}},initialize:function(){k.on(t.a.TEXT_TRACKS_QUEUE_INITIALIZED,Tt,i),Vt.get().streaming.text.webvtt.customRenderingEnabled&&(k.on(t.a.PLAYBACK_TIME_UPDATED,pt,i),k.on(t.a.PLAYBACK_SEEKING,zt,i))},initializeForStream:function(Et){var ut=Et.id,St=Uo(U).create({videoModel:ot,settings:Vt,streamInfo:Et});St.initialize(),R[ut]=St;var et=Fo(U).create({errHandler:ht,adapter:wt,manifestModel:gt,mediaController:yt,videoModel:ot,textTracks:St,vttParser:M,vttCustomRenderingParser:E,ttmlParser:q,streamInfo:Et,settings:Vt});et.initialize(),_[ut]=et,m[ut]={},m[ut].lastEnabledIndex=-1},createTracks:function(Et){var ut=Et.id;R[ut]&&R[ut].createTracks()},getTextSourceBuffer:function(Et){var ut=Et.id;if(_&&_[ut])return _[ut]},getAllTracksAreDisabled:function(){return Y},addEmbeddedTrack:function(Et,ut){var St=Et.id;_[St]&&_[St].addEmbeddedTrack(ut)},enableText:function(Et,ut){Object(vt.b)(ut,"boolean"),Dt()!==ut&&(ut&&W(Et,m[Et].lastEnabledIndex),ut||(m[Et].lastEnabledIndex=$(Et),V?W(Et,-1):st=!0))},isTextEnabled:Dt,setTextTrack:W,getCurrentTrackIdx:$,enableForcedTextStreaming:function(Et){Object(vt.b)(Et,"boolean"),rt=Et},addMediaInfosToBuffer:function(Et,ut,St){var et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,mt=Et.id;_[mt]&&_[mt].addMediaInfos(ut,St,et)},reset:function(){tt(),k.off(t.a.TEXT_TRACKS_QUEUE_INITIALIZED,Tt,i),Vt.get().streaming.text.webvtt.customRenderingEnabled&&(k.off(t.a.PLAYBACK_TIME_UPDATED,pt,i),k.off(t.a.PLAYBACK_SEEKING,zt,i)),Object.keys(_).forEach(function(Et){_[Et].resetEmbedded(),_[Et].reset()})}},rt=!1,V=!1,st=!1,M=Bo(U).getInstance(),E=jo(U).getInstance(),q=Go(U).getInstance(),k=Object(d.a)(U).getInstance(),tt(),i}ka.__dashjs_factory_name="TextController";var qo=r.a.getClassFactory(ka),Yo=x(32);function Ji(){var p,i,m,_,R,M,E,q,k,Y,rt,V,st,U,wt,ht,gt,yt,ot,Vt,Tt,pt,zt,Dt,W,$,tt,Et,ut,St,et,mt,Kt,fe,$t,Se,oe,he="You must first call initialize() and set a source before calling this method",ze="You must first call initialize() and set a valid source and view before calling this method",Pe="You must first call attachView() to set the video element before calling this method",Re=this.context,lt=Object(d.a)(Re).getInstance(),Ft=Object(D.a)(Re).getInstance(),Qt=Object(f.a)(Re).getInstance({settings:Ft});function ne(){On(null),hn(null),_=null,st&&(st.reset(),st=null),U&&(U.reset(),U=null),ot&&ot.reset(),Ft.reset(),ht&&(ht.reset(),ht=null)}function Oe(){return!!m&&!!fe.getElement()}function xe(){return Object(pi.a)()}function Le(){if(!E)throw ze;return tt.isPaused()}function tn(){if(!E)throw ze;return tt.getIsDynamic()}function sn(_t){var ye=Dt&&Dt.hasVideoTrack()?h.a.VIDEO:h.a.AUDIO,De=et.getCurrentDVRInfo(ye);if(!De)return 0;var le=tt.getOriginalLiveDelay(),qe=De.range.start+_t;return qe>De.range.end-le&&(qe=De.range.end-le),qe}function Ye(_t){if(!E)throw ze;var ye=dn().currentTime;if(_t!==void 0)ye=Dt.getTimeRelativeToStreamId(ye,_t);else if(tt.getIsDynamic()){var De=Dt&&Dt.hasVideoTrack()?h.a.VIDEO:h.a.AUDIO,le=et.getCurrentDVRInfo(De);ye=le===null||ye===0?0:Math.max(0,ye-le.range.start)}return ye}function un(){if(!E)throw ze;var _t=dn().duration;if(tt.getIsDynamic()){var ye=Dt&&Dt.hasVideoTrack()?h.a.VIDEO:h.a.AUDIO,De=et.getCurrentDVRInfo(ye);_t=De?De.range.end-De.range.start:0}return _t}function mn(_t){Object(vt.b)(_t,"boolean"),q=_t}function bn(){ot.restoreDefaultUTCTimingSources()}function vn(){return et}function dn(){if(!fe.getElement())throw Pe;return fe.getElement()}function hn(_t){if(!R)throw"MediaPlayer not initialized!";fe.setElement(_t),_t&&(se(),function(){if(!U){var ye=dashjs.MetricsReporting;if(typeof ye=="function"){var De=ye(Re).create();U=De.createMetricsReporting({debug:Qt,eventBus:lt,mediaElement:dn(),adapter:gt,dashMetrics:et,mediaPlayerModel:yt,events:t.a,constants:h.a,metricsConstants:n.a})}}}(),function(){if(!wt){var ye=dashjs.MssHandler;typeof ye=="function"&&(H.a.extend(ye.errors),wt=ye(Re).create({eventBus:lt,mediaPlayerModel:yt,dashMetrics:et,manifestModel:mt,playbackController:tt,streamController:Dt,protectionController:st,baseURLController:Tt,errHandler:Vt,events:t.a,constants:h.a,debug:Qt,initSegmentType:y.a.INIT_SEGMENT_TYPE,BASE64:Qi.a,ISOBoxer:Pi.a,settings:Ft}))}}(),Dt&&Dt.switchToVideoElement()),E&&Dn(),Ie()}function Mn(_t){if(!M)throw he;var ye=Dt.getActiveStreamInfo();return ye?V.getTracksFor(_t,ye.id):[]}function On(_t){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!R)throw"MediaPlayer not initialized!";typeof _t=="string"&&$t.initialize(_t),(ye==null||isNaN(ye))&&(ye=NaN),ye=Math.max(0,ye),m=_t,(M||E)&&Dn(),Oe()&&Ie(ye)}function Nn(){if(!M)throw he;var _t=Dt.getActiveStreamInfo();return _t?Dt.getStreamById(_t.id):null}function Dn(){E=!1,M=!1,gt.reset(),Dt.reset(),$.reset(),St.reset(),tt.reset(),Et.reset(),ut.reset(),k.reset(),V.reset(),oe.reset(),st&&(Ft.get().streaming.protection.keepProtectionMediaKeys?st.stop():(st.reset(),st=null,se())),W.reset(),Kt.reset()}function Ln(){var _t=Me();Dt||(Dt=Ue(Re).getInstance()),W||(W=qo(Re).create({errHandler:Vt,manifestModel:mt,adapter:gt,mediaController:V,videoModel:fe,settings:Ft})),zt.setConfig({capabilities:pt,customParametersModel:ot,adapter:gt,settings:Ft,manifestModel:mt,errHandler:Vt}),Dt.setConfig({capabilities:pt,capabilitiesFilter:zt,manifestLoader:_t,manifestModel:mt,mediaPlayerModel:yt,customParametersModel:ot,protectionController:st,textController:W,adapter:gt,dashMetrics:et,errHandler:Vt,timelineConverter:rt,videoModel:fe,playbackController:tt,serviceDescriptionController:Et,contentSteeringController:ut,abrController:k,mediaController:V,settings:Ft,baseURLController:Tt,uriFragmentModel:$t,segmentBaseController:oe}),$.setConfig({settings:Ft,playbackController:tt,streamController:Dt,videoModel:fe,timelineConverter:rt,adapter:gt}),tt.setConfig({streamController:Dt,serviceDescriptionController:Et,dashMetrics:et,adapter:gt,videoModel:fe,timelineConverter:rt,settings:Ft}),St.setConfig({streamController:Dt,playbackController:tt,mediaPlayerModel:yt,videoModel:fe,settings:Ft}),k.setConfig({streamController:Dt,domStorage:Se,mediaPlayerModel:yt,customParametersModel:ot,dashMetrics:et,adapter:gt,videoModel:fe,settings:Ft}),Kt.setConfig({abrController:k,dashMetrics:et,playbackController:tt}),ut.setConfig({adapter:gt,errHandler:Vt,dashMetrics:et,mediaPlayerModel:yt,manifestModel:mt,abrController:k,eventBus:lt,requestModifier:Object(Pt.a)(Re).getInstance()}),k.initialize(),Dt.initialize(q,_),W.initialize(),$.initialize(),St.initialize(),Kt.initialize(),ut.initialize(),oe.initialize()}function Me(){return fr(Re).create({debug:Qt,errHandler:Vt,dashMetrics:et,mediaPlayerModel:yt,requestModifier:Object(Pt.a)(Re).getInstance(),mssHandler:wt,settings:Ft})}function se(){if(st)return st;var _t=dashjs.Protection;if(typeof _t=="function"){var ye=_t(Re).create();return t.a.extend(_t.events),o.a.extend(_t.events,{publicOnly:!0}),H.a.extend(_t.errors),pt||(pt=Object(ar.a)(Re).getInstance()),st=ye.createProtectionSystem({debug:Qt,errHandler:Vt,videoModel:fe,customParametersModel:ot,capabilities:pt,eventBus:lt,events:t.a,BASE64:Qi.a,constants:h.a,cmcdModel:Kt,settings:Ft})}return null}function kt(){if(!R)throw"MediaPlayer not initialized!";if(ht)return ht;var _t=dashjs.OfflineController;if(typeof _t=="function"){t.a.extend(_t.events),o.a.extend(_t.events,{publicOnly:!0}),H.a.extend(_t.errors);var ye=Me(),De=we(Re).create();return De.setConfig({manifestModel:mt,adapter:gt,manifestLoader:ye,errHandler:Vt}),ht=_t(Re).create({debug:Qt,manifestUpdater:De,baseURLController:Tt,manifestLoader:ye,manifestModel:mt,mediaPlayerModel:yt,abrController:k,playbackController:tt,adapter:gt,errHandler:Vt,dashMetrics:et,timelineConverter:rt,segmentBaseController:oe,schemeLoaderFactory:Y,eventBus:lt,events:t.a,errors:H.a,constants:h.a,settings:Ft,dashConstants:c.a,urlUtils:Object(ge.a)(Re).getInstance()})}return null}function ce(_t){var ye=Dt&&Dt.hasVideoTrack()?h.a.VIDEO:h.a.AUDIO,De=et.getCurrentDVRInfo(ye);return De?_t+(De.manifestInfo.availableFrom.getTime()/1e3+De.range.start):0}function Ie(){var _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;ht&&ht.resetRecords(),!M&&m&&(M=!0,i.info("Streaming Initialized"),Ln(),typeof m=="string"?Dt.load(m,_t):Dt.loadWithManifest(m,_t)),!E&&Oe()&&(E=!0,i.info("Playback Initialized"))}return p={initialize:function(_t,ye,De){var le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;pt||(pt=Object(ar.a)(Re).getInstance()).setConfig({settings:Ft}),Vt||(Vt=xr(Re).getInstance()),pt.supportsMediaSource()?(R||(R=!0,rt=No(Re).getInstance(),k||(k=Tr(Re).getInstance()).setConfig({settings:Ft}),Y||(Y=Object(Rr.a)(Re).getInstance()),tt||(tt=v(Re).getInstance()),V||(V=Ke(Re).getInstance()),Dt||(Dt=Ue(Re).getInstance()),$||($=Xe(Re).getInstance()),St||(St=zn(Re).getInstance()),Et||(Et=er(Re).getInstance()),ut||(ut=be(Re).getInstance()),zt||(zt=Gr(Re).getInstance()),gt=io(Re).getInstance(),mt=ei(Re).getInstance(),Kt=Object(tr.a)(Re).getInstance(),et=Ro(Re).getInstance({settings:Ft}),Se=ai(Re).getInstance({settings:Ft}),gt.setConfig({constants:h.a,cea608parser:b.a,errHandler:Vt,BASE64:Qi.a}),Tt||(Tt=sr(Re).create()),Tt.setConfig({adapter:gt}),Et.setConfig({adapter:gt}),oe||(oe=Ka(Re).getInstance({dashMetrics:et,mediaPlayerModel:yt,errHandler:Vt,baseURLController:Tt,events:t.a,eventBus:lt,debug:Qt,boxParser:Object(Q.a)(Re).getInstance(),requestModifier:Object(Pt.a)(Re).getInstance(),errors:H.a})),V.setConfig({domStorage:Se,settings:Ft,customParametersModel:ot}),yt.setConfig({playbackController:tt,serviceDescriptionController:Et}),bn(),mn(De===void 0||De),kt()),_t&&hn(_t),ye&&On(ye,le),i.info("[dash.js "+xe()+"] MediaPlayer has been initialized")):Vt.error(new B.a(H.a.CAPABILITY_MEDIASOURCE_ERROR_CODE,H.a.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(_t){_t&&(_t.capabilities&&(pt=_t.capabilities),_t.capabilitiesFilter&&(zt=_t.capabilitiesFilter),_t.streamController&&(Dt=_t.streamController),_t.textController&&(W=_t.textController),_t.gapController&&($=_t.gapController),_t.playbackController&&(tt=_t.playbackController),_t.serviceDescriptionController&&(Et=_t.serviceDescriptionController),_t.contentSteeringController&&(ut=_t.contentSteeringController),_t.catchupController&&(St=_t.catchupController),_t.mediaPlayerModel&&(yt=_t.mediaPlayerModel),_t.customParametersModel&&(ot=_t.customParametersModel),_t.abrController&&(k=_t.abrController),_t.schemeLoaderFactory&&(Y=_t.schemeLoaderFactory),_t.mediaController&&(V=_t.mediaController),_t.settings&&(Ft=_t.settings))},on:function(_t,ye,De,le){lt.on(_t,ye,De,le)},off:function(_t,ye,De){lt.off(_t,ye,De)},extend:function(_t,ye,De){r.a.extend(_t,ye,De,Re)},attachView:hn,attachSource:On,isReady:Oe,play:function(){if(!E)throw ze;(!q||Le()&&E)&&tt.play(!0)},isPaused:Le,pause:function(){if(!E)throw ze;tt.pause()},isSeeking:function(){if(!E)throw ze;return tt.isSeeking()},isDynamic:tn,getLowLatencyModeEnabled:function(){if(!E)throw ze;return tt.getLowLatencyModeEnabled()},seek:function(_t){if(!E)throw ze;if(Object(vt.b)(_t,"number"),isNaN(_t))throw h.a.BAD_ARGUMENT_ERROR;_t<0&&(_t=0);var ye=tt.getIsDynamic()?sn(_t):_t,De=dn();!tt.getIsDynamic()&&De.duration&&(ye=Math.min(De.duration,ye)),tt.seek(ye,!1,!1,!0)},seekToOriginalLive:function(){E&&tn()&&tt.seekToOriginalLive()},setPlaybackRate:function(_t){dn().playbackRate=_t},getPlaybackRate:function(){return dn().playbackRate},setMute:function(_t){Object(vt.b)(_t,"boolean"),dn().muted=_t},isMuted:function(){return dn().muted},setVolume:function(_t){if(typeof _t!="number"||isNaN(_t)||_t<0||_t>1)throw h.a.BAD_ARGUMENT_ERROR;dn().volume=_t},getVolume:function(){return dn().volume},time:Ye,duration:un,timeAsUTC:function(){if(!E)throw ze;return Ye()<0?NaN:ce(Ye())},durationAsUTC:function(){if(!E)throw ze;return ce(un())},getActiveStream:Nn,getDVRWindowSize:function(){var _t=Dt&&Dt.hasVideoTrack()?h.a.VIDEO:h.a.AUDIO,ye=et.getCurrentDVRInfo(_t);return ye?ye.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:sn,getTargetLiveDelay:function(){if(!E)throw ze;return tt.getOriginalLiveDelay()},convertToTimeCode:function(_t){_t=Math.max(_t,0);var ye=Math.floor(_t/3600),De=Math.floor(_t%3600/60),le=Math.floor(_t%3600%60);return(ye===0?"":ye<10?"0"+ye.toString()+":":ye.toString()+":")+(De<10?"0"+De.toString():De.toString())+":"+(le<10?"0"+le.toString():le.toString())},formatUTC:function(_t,ye,De){var le=arguments.length>3&&arguments[3]!==void 0&&arguments[3],qe=new Date(1e3*_t),fn=qe.toLocaleDateString(ye),pn=qe.toLocaleTimeString(ye,{hour12:De});return le?pn+" "+fn:pn},getVersion:xe,getDebug:function(){return Qt},getBufferLength:function(_t){var ye=[h.a.VIDEO,h.a.AUDIO,h.a.TEXT];if(_t){if(ye.indexOf(_t)!==-1){var De=vn().getCurrentBufferLevel(_t);return De||NaN}return i.warn("getBufferLength requested for invalid type"),NaN}var le=ye.map(function(qe){return Mn(qe).length>0?vn().getCurrentBufferLevel(qe):Number.MAX_VALUE}).reduce(function(qe,fn){return Math.min(qe,fn)});return le===Number.MAX_VALUE?NaN:le},getTTMLRenderingDiv:function(){return fe?fe.getTTMLRenderingDiv():null},getVideoElement:dn,getSource:function(){if(!m)throw"You must first call attachSource() with a valid source before calling this method";return m},updateSource:function(_t){m=_t,Dt.load(m)},getCurrentLiveLatency:function(){if(!R)throw"MediaPlayer not initialized!";return E?tt.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(_t){if(!M)throw he;return k.getTopBitrateInfoFor(_t)},setAutoPlay:mn,getAutoPlay:function(){return q},getDashMetrics:vn,getQualityFor:function(_t){if(!M)throw he;if(_t===h.a.IMAGE){var ye=Nn();if(!ye)return-1;var De=ye.getThumbnailController();return De?De.getCurrentTrackIndex():-1}return k.getQualityFor(_t)},setQualityFor:function(_t,ye){var De=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!M)throw he;if(_t===h.a.IMAGE){var le=Nn();if(!le)return;var qe=le.getThumbnailController();qe&&qe.setTrackByIndex(ye)}k.setPlaybackQuality(_t,Dt.getActiveStreamInfo(),ye,{forceReplace:De})},updatePortalSize:function(){k.setElementSize(),k.setWindowResizeEventCalled(!0)},enableText:function(_t){var ye=Dt.getActiveStreamInfo();return!(!ye||!W)&&W.enableText(ye.id,_t)},enableForcedTextStreaming:function(_t){return!(!Dt.getActiveStreamInfo()||!W)&&W.enableForcedTextStreaming(_t)},isTextEnabled:function(){var _t=Dt.getActiveStreamInfo();return!(!_t||!W)&&W.isTextEnabled(_t)},setTextTrack:function(_t){if(!E)throw ze;var ye=Dt.getActiveStreamInfo();ye&&W&&W.setTextTrack(ye.id,_t)},getBitrateInfoListFor:function(_t){if(!M)throw he;var ye=Nn();return ye?ye.getBitrateListFor(_t):[]},getStreamsFromManifest:function(_t){if(!M)throw he;return gt.getStreamsInfo(_t)},getTracksFor:Mn,getTracksForTypeFromManifest:function(_t,ye,De){if(!M)throw he;return(De=De||gt.getStreamsInfo(ye,1)[0])?gt.getAllMediaInfoForType(De,_t,ye):[]},getCurrentTrackFor:function(_t){if(!M)throw he;var ye=Dt.getActiveStreamInfo();return V.getCurrentTrackFor(_t,ye.id)},setInitialMediaSettingsFor:function(_t,ye){if(!R)throw"MediaPlayer not initialized!";V.setInitialSettings(_t,ye)},getInitialMediaSettingsFor:function(_t){if(!R)throw"MediaPlayer not initialized!";return V.getInitialSettings(_t)},setCurrentTrack:function(_t){if(!M)throw he;V.setTrack(_t)},addABRCustomRule:function(_t,ye,De){ot.addAbrCustomRule(_t,ye,De)},removeABRCustomRule:function(_t){ot.removeAbrCustomRule(_t)},removeAllABRCustomRule:function(){ot.removeAllAbrCustomRule()},getABRCustomRules:function(){return ot.getAbrCustomRules()},getAverageThroughput:function(_t){var ye=k.getThroughputHistory(),De=tt.getIsDynamic();return ye?ye.getAverageThroughput(_t,De):0},retrieveManifest:function(_t,ye){var De=Me(),le=this;lt.on(t.a.INTERNAL_MANIFEST_LOADED,function qe(fn){fn.error?ye(null,fn.error):ye(fn.manifest),lt.off(t.a.INTERNAL_MANIFEST_LOADED,qe,le),De.reset()},le),$t.initialize(_t),De.load(_t)},addUTCTimingSource:function(_t,ye){ot.addUTCTimingSource(_t,ye)},removeUTCTimingSource:function(_t,ye){ot.removeUTCTimingSource(_t,ye)},clearDefaultUTCTimingSources:function(){ot.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:bn,setXHRWithCredentialsForType:function(_t,ye){ot.setXHRWithCredentialsForType(_t,ye)},getXHRWithCredentialsForType:function(_t){return ot.getXHRWithCredentialsForType(_t)},getProtectionController:function(){return se()},attachProtectionController:function(_t){st=_t},setProtectionData:function(_t){_=_t,Dt&&Dt.setProtectionData(_)},registerLicenseRequestFilter:function(_t){ot.registerLicenseRequestFilter(_t)},registerLicenseResponseFilter:function(_t){ot.registerLicenseResponseFilter(_t)},unregisterLicenseRequestFilter:function(_t){ot.unregisterLicenseRequestFilter(_t)},unregisterLicenseResponseFilter:function(_t){ot.unregisterLicenseResponseFilter(_t)},registerCustomCapabilitiesFilter:function(_t){ot.registerCustomCapabilitiesFilter(_t)},unregisterCustomCapabilitiesFilter:function(_t){ot.unregisterCustomCapabilitiesFilter(_t)},setCustomInitialTrackSelectionFunction:function(_t){ot.setCustomInitialTrackSelectionFunction(_t)},resetCustomInitialTrackSelectionFunction:function(){ot.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(_t){if(!fe.getElement())throw Pe;fe.setTTMLRenderingDiv(_t)},attachVttRenderingDiv:function(_t){if(!fe.getElement())throw Pe;fe.setVttRenderingDiv(_t)},getCurrentTextTrackIndex:function(){var _t=Dt.getActiveStreamInfo();if(_t&&W)return W.getCurrentTrackIdx(_t.id)},provideThumbnail:function(_t,ye){if(typeof ye=="function")if(_t<0)ye(null);else{var De=tt.getIsDynamic()?sn(_t):_t,le=Dt.getStreamForTime(De);if(le!==null){var qe=le.getThumbnailController();if(qe)return qe.provide(De,ye);ye(null)}else ye(null)}},getDashAdapter:function(){return gt},getOfflineController:function(){return kt()},triggerSteeringRequest:function(){if(ut)return ut.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ut)return ut.getCurrentSteeringResponseData()},getSettings:function(){return Ft.get()},updateSettings:function(_t){Ft.update(_t)},resetSettings:function(){Ft.reset()},reset:ne,destroy:function(){ne(),r.a.deleteSingletonInstances(Re)}},i=Qt.getLogger(p),R=!1,E=!1,M=!1,q=!0,st=null,ht=null,_=null,gt=null,oe=null,t.a.extend(o.a),yt=Gi(Re).getInstance(),ot=Object(Yo.a)(Re).getInstance(),fe=$r(Re).getInstance(),$t=fi(Re).getInstance(),p}Ji.__dashjs_factory_name="MediaPlayer";var Mi=r.a.getClassFactory(Ji);Mi.events=o.a,Mi.errors=H.a,r.a.updateClassFactory(Ji.__dashjs_factory_name,Mi),At.a=Mi},function(Ee,At,x){x.d(At,"a",function(){return w});function w(){return"4.5.2"}},function(Ee,At,x){var w,b,h,c,n,d={encode:function(r){for(var f=[],o=0;o<r.length;++o){var g=r.charCodeAt(o);g<128?f.push(g):g<2048?(f.push(192|g>>6),f.push(128|63&g)):g<65536?(f.push(224|g>>12),f.push(128|63&g>>6),f.push(128|63&g)):(f.push(240|g>>18),f.push(128|63&g>>12),f.push(128|63&g>>6),f.push(128|63&g))}return f},decode:function(r){for(var f=[],o=0;o<r.length;){var g=r[o++];g<128||(g<224?(g=(31&g)<<6,g|=63&r[o++]):g<240?(g=(15&g)<<12,g|=(63&r[o++])<<6,g|=63&r[o++]):(g=(7&g)<<18,g|=(63&r[o++])<<12,g|=(63&r[o++])<<6,g|=63&r[o++])),f.push(String.fromCharCode(g))}return f.join("")}},t={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=function(r){for(var f=0,o=[],g=0|r.length/3;0<g--;){var v=(r[f]<<16)+(r[f+1]<<8)+r[f+2];f+=3,o.push(w.charAt(63&v>>18)),o.push(w.charAt(63&v>>12)),o.push(w.charAt(63&v>>6)),o.push(w.charAt(63&v))}return r.length-f==2?(v=(r[f]<<16)+(r[f+1]<<8),o.push(w.charAt(63&v>>18)),o.push(w.charAt(63&v>>12)),o.push(w.charAt(63&v>>6)),o.push("=")):r.length-f==1&&(v=r[f]<<16,o.push(w.charAt(63&v>>18)),o.push(w.charAt(63&v>>12)),o.push("==")),o.join("")},h=function(){for(var r=[],f=0;f<w.length;++f)r[w.charCodeAt(f)]=f;return r["=".charCodeAt(0)]=0,r}(),c=function(r){for(var f=0,o=[],g=0|r.length/4;0<g--;){var v=(h[r.charCodeAt(f)]<<18)+(h[r.charCodeAt(f+1)]<<12)+(h[r.charCodeAt(f+2)]<<6)+h[r.charCodeAt(f+3)];o.push(255&v>>16),o.push(255&v>>8),o.push(255&v),f+=4}return o&&(r.charAt(f-2)=="="?(o.pop(),o.pop()):r.charAt(f-1)=="="&&o.pop()),o},n={encode:function(r){for(var f=[],o=0;o<r.length;++o)f.push(r.charCodeAt(o));return f},decode:function(r){for(var f=0;f<s.length;++f)a[f]=String.fromCharCode(a[f]);return a.join("")}},t.decodeArray=function(r){var f=c(r);return new Uint8Array(f)},t.encodeASCII=function(r){var f=n.encode(r);return b(f)},t.decodeASCII=function(r){var f=c(r);return n.decode(f)},t.encode=function(r){var f=d.encode(r);return b(f)},t.decode=function(r){var f=c(r);return d.decode(f)},At.decode=t.decode,At.decodeArray=t.decodeArray,At.encode=t.encode,At.encodeASCII=t.encodeASCII},,function(Ee,At,x){Ee.exports=function(w){var b=typeof w=="string"?w.charCodeAt(0):w;return b>=97&&b<=122||b>=65&&b<=90}},function(Ee,At,x){Ee.exports=function(w){var b=typeof w=="string"?w.charCodeAt(0):w;return b>=48&&b<=57}},function(Ee,At,x){var w=x(1),b=x(3),h=x(4),c=x(12);function n(d){var t,r,f,o,g,v=(d=d||{}).eventBus,P=d.events,B=d.abrController,H=d.dashMetrics,D=d.playbackController,y=d.timelineConverter,S=d.type,T=d.streamInfo,I=d.dashConstants,L=d.segmentsController,J=d.isDynamic;function nt(){return S}function j(){if(!(B&&H&&D&&y))throw new Error(w.a.MISSING_CONFIG_ERROR)}function O(){return f}function at(){return g}function X(){r=null,f=!0,o=[]}function z(ft){return new Promise(function(Ht,_e){var Jt=ft.hasInitialization(),Te=ft.hasSegments(),It=[];It.push(L.updateInitData(ft,Jt)),It.push(L.updateSegmentData(ft,Te)),Promise.all(It).then(function(Wt){var Yt;Wt[0]&&!Wt[0].error&&(ft=function(e,u){return!u||u.error||!u.representation?e:u.representation}(ft,Wt[0])),Wt[1]&&!Wt[1].error&&(ft=function(e,u){if(!(!u||u.error)){var l,G,A,F,K=u.segments,Z=[],bt=0;for(l=0,G=K?K.length:0;l<G;l++)A=K[l],(F=Object(c.b)(y,J,e,A.startTime,A.duration,A.timescale,A.media,A.mediaRange,bt))&&(Z.push(F),F=null,bt++);return Z.length>0&&(e.segments=Z),e}}(ft,Wt[1])),(Yt=ft).mediaFinishedInformation=L.getMediaFinishedInformation(Yt),function(e){if(O()){var u,l=H.getCurrentManifestUpdate(),G=!1;if(l){for(var A=0;A<l.representationInfo.length;A++)if((u=l.representationInfo[A]).index===e.index&&u.mediaType===nt()){G=!0;break}G||H.addManifestUpdateRepresentationInfo(e,nt())}if(function(){for(var Z=0,bt=o.length;Z<bt;Z++){var it=o[Z].segmentInfoType;if(!o[Z].hasInitialization()||(it===I.SEGMENT_BASE||it===I.BASE_URL)&&!o[Z].segments)return!1}return!0}()){B.setPlaybackQuality(S,T,(K=g,o.indexOf(K)));var F=H.getCurrentDVRInfo(S);F&&H.updateManifestUpdateInfo({latency:F.range.end-D.getTime()}),H.getCurrentRepresentationSwitch(at().adaptation.type)||vt(),Pt()}var K}}(ft),Ht()}).catch(function(Wt){_e(Wt)})})}function vt(){j();var ft=new Date,Ht=at(),_e=1e3*D.getTime();Ht&&H.addRepresentationSwitch(Ht.adaptation.type,ft,_e,Ht.id),v.trigger(h.a.REPRESENTATION_SWITCH,{mediaType:S,streamId:T.id,currentRepresentation:Ht,numberOfRepresentations:o.length},{streamId:T.id,mediaType:S})}function Mt(ft){return ft==null||ft>=o.length?null:o[ft]}function Pt(ft){f=!1,v.trigger(P.DATA_UPDATE_COMPLETED,{data:r,currentRepresentation:g,error:ft},{streamId:T.id,mediaType:S})}function ge(ft){g=ft}function Q(ft){if(ft.newDuration){var Ht=at();Ht&&Ht.adaptation.period&&(Ht.adaptation.period.duration=ft.newDuration)}}return t={getStreamId:function(){return T.id},getType:nt,getData:function(){return r},isUpdating:O,updateData:function(ft,Ht,_e,Jt,Te){if(j(),f=!0,o=Ht,ge(Mt(Te)),r=ft,_e!==w.a.VIDEO&&_e!==w.a.AUDIO&&(_e!==w.a.TEXT||!Jt))return Pt(),Promise.resolve();for(var It=[],Wt=0,Yt=o.length;Wt<Yt;Wt++){var e=o[Wt];It.push(z(e))}return Promise.all(It)},getCurrentRepresentation:at,getRepresentationForQuality:Mt,prepareQualityChange:function(ft){ge(Mt(ft)),vt()},reset:function(){v.off(h.a.MANIFEST_VALIDITY_CHANGED,Q,t),X()}},X(),v.on(h.a.MANIFEST_VALIDITY_CHANGED,Q,t),t}n.__dashjs_factory_name="RepresentationController",At.a=b.a.getClassFactory(n)},function(Ee,At,x){function w(n){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(n)}function b(n,d){for(var t=0;t<d.length;t++){var r=d[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(f=r.key,o=void 0,o=function(g,v){if(w(g)!=="object"||g===null)return g;var P=g[Symbol.toPrimitive];if(P!==void 0){var B=P.call(g,v||"default");if(w(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(g)}(f,"string"),w(o)==="symbol"?o:String(o)),r)}var f,o}function h(n,d,t){return d&&b(n.prototype,d),t&&b(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var c=h(function n(){(function(d,t){if(!(d instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null});At.a=c},function(Ee,At,x){var w=Array.isArray,b=Object.keys,h=Object.prototype.hasOwnProperty;Ee.exports=function c(n,d){if(n===d)return!0;if(n&&d&&typeof n=="object"&&typeof d=="object"){var t,r,f,o=w(n),g=w(d);if(o&&g){if((r=n.length)!=d.length)return!1;for(t=r;t--!=0;)if(!c(n[t],d[t]))return!1;return!0}if(o!=g)return!1;var v=n instanceof Date,P=d instanceof Date;if(v!=P)return!1;if(v&&P)return n.getTime()==d.getTime();var B=n instanceof RegExp,H=d instanceof RegExp;if(B!=H)return!1;if(B&&H)return n.toString()==d.toString();var D=b(n);if((r=D.length)!==b(d).length)return!1;for(t=r;t--!=0;)if(!h.call(d,D[t]))return!1;for(t=r;t--!=0;)if(!c(n[f=D[t]],d[f]))return!1;return!0}return n!=n&&d!=d}},function(Ee,At,x){var w=x(3);function b(N){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function h(N){function C(Ut,xt){for(var de in Ut)xt.hasOwnProperty(de)||(xt[de]=Ut[de])}function dt(Ut,xt,de){for(var Ge=0,Je=Ut.length;Ge<Je;++Ge){var Ue=Ut[Ge];if(xt[Ue.name])if(de[Ue.name]){if(Ue.merge){var $e=xt[Ue.name],Xe=de[Ue.name];b($e)==="object"&&b(Xe)==="object"?C($e,Xe):de[Ue.name]=$e+Xe}}else de[Ue.name]=xt[Ue.name]}}function Bt(Ut,xt){for(var de=0,Ge=Ut.children.length;de<Ge;++de){var Je=Ut.children[de],Ue=xt[Je.name+"_asArray"];if(Ue)for(var $e=0,Xe=Ue.length;$e<Xe;++$e){var Tn=Ue[$e];dt(Ut.properties,xt,Tn),Bt(Je,Tn)}}}return{run:function(Ut){if(Ut===null||b(Ut)!=="object")return Ut;if(Ut.Period_asArray&&"period"in N)for(var xt=N.period,de=Ut.Period_asArray,Ge=0,Je=de.length;Ge<Je;++Ge){var Ue=de[Ge];if(Bt(xt,Ue),"adaptationset"in N){var $e=Ue.AdaptationSet_asArray;if($e)for(var Xe=N.adaptationset,Tn=0,yn=$e.length;Tn<yn;++Tn)Bt(Xe,$e[Tn])}}return Ut}}}h.__dashjs_factory_name="ObjectIron";var c=w.a.getClassFactory(h),n=x(47);function d(N){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function t(N,C){for(var dt=0;dt<C.length;dt++){var Bt=C[dt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(N,(Ut=Bt.key,xt=void 0,xt=function(de,Ge){if(d(de)!=="object"||de===null)return de;var Je=de[Symbol.toPrimitive];if(Je!==void 0){var Ue=Je.call(de,Ge||"default");if(d(Ue)!=="object")return Ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ge==="string"?String:Number)(de)}(Ut,"string"),d(xt)==="symbol"?xt:String(xt)),Bt)}var Ut,xt}var r=function(){function N(Bt,Ut){(function(xt,de){if(!(xt instanceof de))throw new TypeError("Cannot call a class as a function")})(this,N),this._test=Bt,this._converter=Ut}var C,dt;return C=N,(dt=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&t(C.prototype,dt),Object.defineProperty(C,"prototype",{writable:!1}),N}(),f=x(0);function o(N){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function g(N,C,dt){return(C=v(C))in N?Object.defineProperty(N,C,{value:dt,enumerable:!0,configurable:!0,writable:!0}):N[C]=dt,N}function v(N){var C=function(dt,Bt){if(o(dt)!=="object"||dt===null)return dt;var Ut=dt[Symbol.toPrimitive];if(Ut!==void 0){var xt=Ut.call(dt,Bt||"default");if(o(xt)!=="object")return xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Bt==="string"?String:Number)(dt)}(N,"string");return o(C)==="symbol"?C:String(C)}function P(N,C){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Bt){return dt.__proto__=Bt,dt})(N,C)}function B(N){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var dt,Bt=D(N);if(C){var Ut=D(this).constructor;dt=Reflect.construct(Bt,arguments,Ut)}else dt=Bt.apply(this,arguments);return H(this,dt)}}function H(N,C){if(C&&(o(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}(N)}function D(N){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var y=function(N){(function(Ut,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Object.defineProperty(Ut,"prototype",{writable:!1}),xt&&P(Ut,xt)})(Bt,N);var C,dt=B(Bt);function Bt(){return function(Ut,xt){if(!(Ut instanceof xt))throw new TypeError("Cannot call a class as a function")}(this,Bt),dt.call(this,function(Ut,xt){var de,Ge=(g(de={},f.a.MPD,[f.a.ID,f.a.PROFILES]),g(de,f.a.PERIOD,[f.a.ID]),g(de,f.a.BASE_URL,[f.a.SERVICE_LOCATION,f.a.BYTE_RANGE]),g(de,f.a.SEGMENT_BASE,[f.a.INDEX_RANGE]),g(de,f.a.INITIALIZATION,[f.a.RANGE]),g(de,f.a.REPRESENTATION_INDEX,[f.a.RANGE]),g(de,f.a.SEGMENT_LIST,[f.a.INDEX_RANGE]),g(de,f.a.BITSTREAM_SWITCHING,[f.a.RANGE]),g(de,f.a.SEGMENT_URL,[f.a.MEDIA_RANGE,f.a.INDEX_RANGE]),g(de,f.a.SEGMENT_TEMPLATE,[f.a.INDEX_RANGE,f.a.MEDIA,f.a.INDEX,f.a.INITIALIZATION_MINUS,f.a.BITSTREAM_SWITCHING_MINUS]),g(de,f.a.ASSET_IDENTIFIER,[f.a.VALUE,f.a.ID]),g(de,f.a.EVENT_STREAM,[f.a.VALUE]),g(de,f.a.ADAPTATION_SET,[f.a.PROFILES,f.a.MIME_TYPE,f.a.SEGMENT_PROFILES,f.a.CODECS,f.a.CONTENT_TYPE]),g(de,f.a.FRAME_PACKING,[f.a.VALUE,f.a.ID]),g(de,f.a.AUDIO_CHANNEL_CONFIGURATION,[f.a.VALUE,f.a.ID]),g(de,f.a.CONTENT_PROTECTION,[f.a.VALUE,f.a.ID]),g(de,f.a.ESSENTIAL_PROPERTY,[f.a.VALUE,f.a.ID]),g(de,f.a.SUPPLEMENTAL_PROPERTY,[f.a.VALUE,f.a.ID]),g(de,f.a.INBAND_EVENT_STREAM,[f.a.VALUE,f.a.ID]),g(de,f.a.ACCESSIBILITY,[f.a.VALUE,f.a.ID]),g(de,f.a.ROLE,[f.a.VALUE,f.a.ID]),g(de,f.a.RATING,[f.a.VALUE,f.a.ID]),g(de,f.a.VIEWPOINT,[f.a.VALUE,f.a.ID]),g(de,f.a.CONTENT_COMPONENT,[f.a.CONTENT_TYPE]),g(de,f.a.REPRESENTATION,[f.a.ID,f.a.DEPENDENCY_ID,f.a.MEDIA_STREAM_STRUCTURE_ID]),g(de,f.a.SUBSET,[f.a.ID]),g(de,f.a.METRICS,[f.a.METRICS_MINUS]),g(de,f.a.REPORTING,[f.a.VALUE,f.a.ID]),de);if(Ge.hasOwnProperty(xt)){var Je=Ge[xt];return Je!==void 0&&Je.indexOf(Ut.name)>=0}return!1},function(Ut){return String(Ut)})}return C=Bt,Object.defineProperty(C,"prototype",{writable:!1}),C}(r),S=x(1);function T(N){return(T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function I(N,C){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Bt){return dt.__proto__=Bt,dt})(N,C)}function L(N){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var dt,Bt=nt(N);if(C){var Ut=nt(this).constructor;dt=Reflect.construct(Bt,arguments,Ut)}else dt=Bt.apply(this,arguments);return J(this,dt)}}function J(N,C){if(C&&(T(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}(N)}function nt(N){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var j=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,O=function(N){(function(Ut,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Object.defineProperty(Ut,"prototype",{writable:!1}),xt&&I(Ut,xt)})(Bt,N);var C,dt=L(Bt);function Bt(){return function(Ut,xt){if(!(Ut instanceof xt))throw new TypeError("Cannot call a class as a function")}(this,Bt),dt.call(this,function(Ut){for(var xt=[f.a.MIN_BUFFER_TIME,f.a.MEDIA_PRESENTATION_DURATION,f.a.MINIMUM_UPDATE_PERIOD,f.a.TIMESHIFT_BUFFER_DEPTH,f.a.MAX_SEGMENT_DURATION,f.a.MAX_SUBSEGMENT_DURATION,f.a.SUGGESTED_PRESENTATION_DELAY,f.a.START,S.a.START_TIME,f.a.DURATION],de=xt.length,Ge=0;Ge<de;Ge++)if(Ut.nodeName===xt[Ge])return j.test(Ut.value);return!1},function(Ut){var xt=j.exec(Ut),de=31536e3*parseFloat(xt[3]||0)+2592e3*parseFloat(xt[5]||0)+86400*parseFloat(xt[7]||0)+3600*parseFloat(xt[9]||0)+60*parseFloat(xt[11]||0)+parseFloat(xt[13]||0);return xt[1]!==void 0&&(de=-de),de})}return C=Bt,Object.defineProperty(C,"prototype",{writable:!1}),C}(r);function at(N){return(at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function X(N,C){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Bt){return dt.__proto__=Bt,dt})(N,C)}function z(N){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var dt,Bt=Mt(N);if(C){var Ut=Mt(this).constructor;dt=Reflect.construct(Bt,arguments,Ut)}else dt=Bt.apply(this,arguments);return vt(this,dt)}}function vt(N,C){if(C&&(at(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}(N)}function Mt(N){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var Pt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,ge=function(N){(function(Ut,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Object.defineProperty(Ut,"prototype",{writable:!1}),xt&&X(Ut,xt)})(Bt,N);var C,dt=z(Bt);function Bt(){return function(Ut,xt){if(!(Ut instanceof xt))throw new TypeError("Cannot call a class as a function")}(this,Bt),dt.call(this,function(Ut){return Pt.test(Ut.value)},function(Ut){var xt,de=Pt.exec(Ut);if(xt=Date.UTC(parseInt(de[1],10),parseInt(de[2],10)-1,parseInt(de[3],10),parseInt(de[4],10),parseInt(de[5],10),de[6]&&parseInt(de[6],10)||0,de[7]&&1e3*parseFloat(de[7])||0),de[9]&&de[10]){var Ge=60*parseInt(de[9],10)+parseInt(de[10],10);xt+=(de[8]==="+"?-1:1)*Ge*60*1e3}return new Date(xt)})}return C=Bt,Object.defineProperty(C,"prototype",{writable:!1}),C}(r);function Q(N){return(Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function ft(N,C){return(ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Bt){return dt.__proto__=Bt,dt})(N,C)}function Ht(N){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var dt,Bt=Jt(N);if(C){var Ut=Jt(this).constructor;dt=Reflect.construct(Bt,arguments,Ut)}else dt=Bt.apply(this,arguments);return _e(this,dt)}}function _e(N,C){if(C&&(Q(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}(N)}function Jt(N){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var Te=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,It=function(N){(function(Ut,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Object.defineProperty(Ut,"prototype",{writable:!1}),xt&&ft(Ut,xt)})(Bt,N);var C,dt=Ht(Bt);function Bt(){return function(Ut,xt){if(!(Ut instanceof xt))throw new TypeError("Cannot call a class as a function")}(this,Bt),dt.call(this,function(Ut){return Te.test(Ut.value)},function(Ut){return parseFloat(Ut)})}return C=Bt,Object.defineProperty(C,"prototype",{writable:!1}),C}(r),Wt=x(30),Yt=x.n(Wt);function e(N){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function u(N,C,dt){return(C=l(C))in N?Object.defineProperty(N,C,{value:dt,enumerable:!0,configurable:!0,writable:!0}):N[C]=dt,N}function l(N){var C=function(dt,Bt){if(e(dt)!=="object"||dt===null)return dt;var Ut=dt[Symbol.toPrimitive];if(Ut!==void 0){var xt=Ut.call(dt,Bt||"default");if(e(xt)!=="object")return xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Bt==="string"?String:Number)(dt)}(N,"string");return e(C)==="symbol"?C:String(C)}function G(N,C){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Bt){return dt.__proto__=Bt,dt})(N,C)}function A(N){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var dt,Bt=K(N);if(C){var Ut=K(this).constructor;dt=Reflect.construct(Bt,arguments,Ut)}else dt=Bt.apply(this,arguments);return F(this,dt)}}function F(N,C){if(C&&(e(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}(N)}function K(N){return(K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var Z=function(N){(function(Ut,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Object.defineProperty(Ut,"prototype",{writable:!1}),xt&&G(Ut,xt)})(Bt,N);var C,dt=A(Bt);function Bt(){return function(Ut,xt){if(!(Ut instanceof xt))throw new TypeError("Cannot call a class as a function")}(this,Bt),dt.call(this,function(Ut,xt){var de,Ge=(u(de={},f.a.ADAPTATION_SET,[f.a.LANG]),u(de,f.a.REPRESENTATION,[f.a.LANG]),u(de,f.a.CONTENT_COMPONENT,[f.a.LANG]),u(de,f.a.LABEL,[f.a.LANG]),u(de,f.a.GROUP_LABEL,[f.a.LANG]),de);if(Ge.hasOwnProperty(xt)){var Je=Ge[xt];return Je!==void 0&&Je.indexOf(Ut.name)>=0}return!1},function(Ut){var xt=Yt()(Ut);return xt!==void 0?xt:String(Ut)})}return C=Bt,Object.defineProperty(C,"prototype",{writable:!1}),C}(r);function bt(N){return(bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function it(N,C){for(var dt=0;dt<C.length;dt++){var Bt=C[dt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(N,(Ut=Bt.key,xt=void 0,xt=function(de,Ge){if(bt(de)!=="object"||de===null)return de;var Je=de[Symbol.toPrimitive];if(Je!==void 0){var Ue=Je.call(de,Ge||"default");if(bt(Ue)!=="object")return Ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ge==="string"?String:Number)(de)}(Ut,"string"),bt(xt)==="symbol"?xt:String(xt)),Bt)}var Ut,xt}var ct=function(){function N(Bt){(function(xt,de){if(!(xt instanceof de))throw new TypeError("Cannot call a class as a function")})(this,N);var Ut;this._name=Bt,this._merge=(Ut=Bt)&&Ut.length&&Ut.charAt(0)===Ut.charAt(0).toUpperCase()}var C,dt;return C=N,(dt=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&it(C.prototype,dt),Object.defineProperty(C,"prototype",{writable:!1}),N}();function jt(N){return(jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function me(N,C){for(var dt=0;dt<C.length;dt++){var Bt=C[dt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(N,(Ut=Bt.key,xt=void 0,xt=function(de,Ge){if(jt(de)!=="object"||de===null)return de;var Je=de[Symbol.toPrimitive];if(Je!==void 0){var Ue=Je.call(de,Ge||"default");if(jt(Ue)!=="object")return Ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ge==="string"?String:Number)(de)}(Ut,"string"),jt(xt)==="symbol"?xt:String(xt)),Bt)}var Ut,xt}var ue=function(){function N(Bt,Ut,xt){var de=this;(function(Ge,Je){if(!(Ge instanceof Je))throw new TypeError("Cannot call a class as a function")})(this,N),this._name=Bt||"",this._properties=[],this._children=xt||[],Array.isArray(Ut)&&Ut.forEach(function(Ge){de._properties.push(new ct(Ge))})}var C,dt;return C=N,(dt=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&me(C.prototype,dt),Object.defineProperty(C,"prototype",{writable:!1}),N}();function Ct(N){return(Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function Nt(N,C){return(Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Bt){return dt.__proto__=Bt,dt})(N,C)}function Ot(N){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var dt,Bt=ve(N);if(C){var Ut=ve(this).constructor;dt=Reflect.construct(Bt,arguments,Ut)}else dt=Bt.apply(this,arguments);return Gt(this,dt)}}function Gt(N,C){if(C&&(Ct(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}(N)}function ve(N){return(ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var Ae=function(N){(function(Ut,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Object.defineProperty(Ut,"prototype",{writable:!1}),xt&&Nt(Ut,xt)})(Bt,N);var C,dt=Ot(Bt);function Bt(){(function(xt,de){if(!(xt instanceof de))throw new TypeError("Cannot call a class as a function")})(this,Bt);var Ut=[f.a.PROFILES,f.a.WIDTH,f.a.HEIGHT,f.a.SAR,f.a.FRAMERATE,f.a.AUDIO_SAMPLING_RATE,f.a.MIME_TYPE,f.a.SEGMENT_PROFILES,f.a.CODECS,f.a.MAXIMUM_SAP_PERIOD,f.a.START_WITH_SAP,f.a.MAX_PLAYOUT_RATE,f.a.CODING_DEPENDENCY,f.a.SCAN_TYPE,f.a.FRAME_PACKING,f.a.AUDIO_CHANNEL_CONFIGURATION,f.a.CONTENT_PROTECTION,f.a.ESSENTIAL_PROPERTY,f.a.SUPPLEMENTAL_PROPERTY,f.a.INBAND_EVENT_STREAM];return dt.call(this,f.a.ADAPTATION_SET,Ut,[new ue(f.a.REPRESENTATION,Ut,[new ue(f.a.SUB_REPRESENTATION,Ut)])])}return C=Bt,Object.defineProperty(C,"prototype",{writable:!1}),C}(ue);function ie(N){return(ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function Zt(N,C){return(Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dt,Bt){return dt.__proto__=Bt,dt})(N,C)}function ee(N){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var dt,Bt=Fe(N);if(C){var Ut=Fe(this).constructor;dt=Reflect.construct(Bt,arguments,Ut)}else dt=Bt.apply(this,arguments);return we(this,dt)}}function we(N,C){if(C&&(ie(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}(N)}function Fe(N){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var We=function(N){(function(Ut,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(xt&&xt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Object.defineProperty(Ut,"prototype",{writable:!1}),xt&&Zt(Ut,xt)})(Bt,N);var C,dt=ee(Bt);function Bt(){(function(xt,de){if(!(xt instanceof de))throw new TypeError("Cannot call a class as a function")})(this,Bt);var Ut=[f.a.SEGMENT_BASE,f.a.SEGMENT_TEMPLATE,f.a.SEGMENT_LIST];return dt.call(this,f.a.PERIOD,Ut,[new ue(f.a.ADAPTATION_SET,Ut,[new ue(f.a.REPRESENTATION,Ut)])])}return C=Bt,Object.defineProperty(C,"prototype",{writable:!1}),C}(ue);function Ve(N){N=N||{};var C,dt,Bt,Ut,xt,de=this.context,Ge=N.debug;return C={parse:function(Je){var Ue,$e=window.performance.now();if(!(Ue=Ut.xml_str2json(Je)))throw new Error("parsing the manifest failed");var Xe=window.performance.now();Ue.Patch?((Ue=Ue.Patch).add_asArray&&Ue.add_asArray.forEach(function(yn){return xt.run(yn)}),Ue.replace_asArray&&Ue.replace_asArray.forEach(function(yn){return xt.run(yn)})):(Ue=Ue.MPD,xt.run(Ue));var Tn=window.performance.now();return dt.info("Parsing complete: ( xml2json: "+(Xe-$e).toPrecision(3)+"ms, objectiron: "+(Tn-Xe).toPrecision(3)+"ms, total: "+((Tn-$e)/1e3).toPrecision(3)+"s)"),Ue.protocol="DASH",Ue},getMatchers:function(){return Bt},getIron:function(){return xt}},dt=Ge.getLogger(C),Bt=[new O,new ge,new It,new Z,new y],Ut=new n.a({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:Bt}),xt=c(de).create({adaptationset:new Ae,period:new We}),C}Ve.__dashjs_factory_name="DashParser",At.a=w.a.getClassFactory(Ve)},function(Ee,At,x){var w=x(1),b=x(22);function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(v)}function c(v,P){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,H){return B.__proto__=H,B})(v,P)}function n(v){var P=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var B,H=t(v);if(P){var D=t(this).constructor;B=Reflect.construct(H,arguments,D)}else B=H.apply(this,arguments);return d(this,B)}}function d(v,P){if(P&&(h(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(v)}function t(v){return(t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(P){return P.__proto__||Object.getPrototypeOf(P)})(v)}var r=function(v){(function(D,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(y&&y.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),y&&c(D,y)})(H,v);var P,B=n(H);function H(D){var y;return function(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}(this,H),(y=B.call(this,D)).checkForExistenceOnly=!0,y}return P=H,Object.defineProperty(P,"prototype",{writable:!1}),P}(x(17).a),f=x(10),o=x(3);function g(v){v=v||{};var P,B,H=this.context,D=v.eventBus,y=v.events,S=v.urlUtils,T=v.errors,I=v.streamId;return P={checkForExistence:function(L){var J=function(j){D.trigger(y.CHECK_FOR_EXISTENCE_COMPLETED,{request:L,exists:j})};if(L){var nt=new r(L.url);B.load({request:nt,success:function(){J(!0)},error:function(){J(!1)}})}else J(!1)},load:function(L){var J=function(nt,j){D.trigger(y.LOADING_COMPLETED,{request:L,response:nt||null,error:j||null,sender:P})};L?B.load({request:L,progress:function(nt){D.trigger(y.LOADING_PROGRESS,{request:L,stream:nt.stream,streamId:I}),nt.data&&D.trigger(y.LOADING_DATA_PROGRESS,{request:L,response:nt.data||null,error:null,sender:P})},success:function(nt){J(nt)},error:function(nt,j,O){J(void 0,new f.a(T.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,O,j))},abort:function(nt){nt&&D.trigger(y.LOADING_ABANDONED,{mediaType:nt.mediaType,request:nt,sender:P})}}):J(void 0,new f.a(T.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,T.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=Object(b.a)(H).create({errHandler:v.errHandler,errors:T,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,requestModifier:v.requestModifier,urlUtils:S,constants:w.a,boxParser:v.boxParser,dashConstants:v.dashConstants,requestTimeout:v.settings.get().streaming.fragmentRequestTimeout}),P}g.__dashjs_factory_name="FragmentLoader",At.a=o.a.getClassFactory(g)},function(Ee,At,x){(function(w,b,h){function c(t,r,f,o,g,v,P,B){this.name=r,this.ns=t,this.qname=t+" "+r,this.inherit=g,this.animatable=v,this.initial=f,this.applies=o,this.parse=P,this.compute=B}for(var n in w.all=[new c(b.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,h.parseColor,null),new c(b.ns_tts,"color","white",["span"],!0,!0,h.parseColor,null),new c(b.ns_tts,"direction","ltr",["p","span"],!0,!0,function(t){return t},null),new c(b.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(t){return t},null),new c(b.ns_tts,"displayAlign","before",["region"],!1,!0,function(t){return t},null),new c(b.ns_tts,"extent","auto",["tt","region"],!1,!0,function(t){if(t==="auto")return t;var r=t.split(" ");if(r.length!==2)return null;var f=h.parseLength(r[0]),o=h.parseLength(r[1]);return o&&f?{h:o,w:f}:null},function(t,r,f,o,g){var v,P;if(o==="auto")v=new h.ComputedLength(0,1);else if((v=h.toComputedLength(o.h.value,o.h.unit,null,t.dimensions.h,null,t.pxLength.h))===null)return null;if(o==="auto")P=new h.ComputedLength(1,0);else if((P=h.toComputedLength(o.w.value,o.w.unit,null,t.dimensions.w,null,t.pxLength.w))===null)return null;return{h:v,w:P}}),new c(b.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(t){for(var r=t.split(","),f=[],o=0;o<r.length;o++)r[o].charAt(0)!=="'"&&r[o].charAt(0)!=='"'&&r[o]==="default"?f.push("monospaceSerif"):f.push(r[o]);return f},null),new c(b.ns_tts,"shear","0%",["p"],!0,!0,h.parseLength,function(t,r,f,o){return o.unit!=="%"?null:Math.abs(o.value)>100?100*Math.sign(o.value):o.value}),new c(b.ns_tts,"fontSize","1c",["span","p"],!0,!0,h.parseLength,function(t,r,f,o,g){return h.toComputedLength(o.value,o.unit,r!==null?r.styleAttrs[w.byName.fontSize.qname]:t.cellLength.h,r!==null?r.styleAttrs[w.byName.fontSize.qname]:t.cellLength.h,t.cellLength.h,t.pxLength.h)}),new c(b.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(t){return t},null),new c(b.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(t){return t},null),new c(b.ns_tts,"lineHeight","normal",["p"],!0,!0,function(t){return t==="normal"?t:h.parseLength(t)},function(t,r,f,o,g){var v;if(o==="normal")v=o;else if((v=h.toComputedLength(o.value,o.unit,f.styleAttrs[w.byName.fontSize.qname],f.styleAttrs[w.byName.fontSize.qname],t.cellLength.h,t.pxLength.h))===null)return null;return v}),new c(b.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new c(b.ns_tts,"origin","auto",["region"],!1,!0,function(t){if(t==="auto")return t;var r=t.split(" ");if(r.length!==2)return null;var f=h.parseLength(r[0]),o=h.parseLength(r[1]);return o&&f?{h:o,w:f}:null},function(t,r,f,o,g){var v,P;if(o==="auto")v=new h.ComputedLength(0,0);else if((v=h.toComputedLength(o.h.value,o.h.unit,null,t.dimensions.h,null,t.pxLength.h))===null)return null;if(o==="auto")P=new h.ComputedLength(0,0);else if((P=h.toComputedLength(o.w.value,o.w.unit,null,t.dimensions.w,null,t.pxLength.w))===null)return null;return{h:v,w:P}}),new c(b.ns_tts,"overflow","hidden",["region"],!1,!0,function(t){return t},null),new c(b.ns_tts,"padding","0px",["region"],!1,!0,function(t){var r=t.split(" ");if(r.length>4)return null;for(var f=[],o=0;o<r.length;o++){var g=h.parseLength(r[o]);if(!g)return null;f.push(g)}return f},function(t,r,f,o,g){var v;if(o.length===1)v=[o[0],o[0],o[0],o[0]];else if(o.length===2)v=[o[0],o[1],o[0],o[1]];else if(o.length===3)v=[o[0],o[1],o[2],o[1]];else{if(o.length!==4)return null;v=[o[0],o[1],o[2],o[3]]}var P=f.styleAttrs[w.byName.writingMode.qname];if(P==="lrtb"||P==="lr")v=[v[0],v[3],v[2],v[1]];else if(P==="rltb"||P==="rl")v=[v[0],v[1],v[2],v[3]];else if(P==="tblr")v=[v[3],v[0],v[1],v[2]];else{if(P!=="tbrl"&&P!=="tb")return null;v=[v[3],v[2],v[1],v[0]]}for(var B=[],H=0;H<v.length;H++)if(v[H].value===0)B[H]=new h.ComputedLength(0,0);else if(B[H]=h.toComputedLength(v[H].value,v[H].unit,f.styleAttrs[w.byName.fontSize.qname],H===0||H===2?f.styleAttrs[w.byName.extent.qname].h:f.styleAttrs[w.byName.extent.qname].w,H===0||H===2?t.cellLength.h:t.cellLength.w,H===0||H===2?t.pxLength.h:t.pxLength.w),B[H]===null)return null;return B}),new c(b.ns_tts,"position","top left",["region"],!1,!0,function(t){return h.parsePosition(t)},function(t,r,f,o){var g,v;return(g=h.toComputedLength(o.v.offset.value,o.v.offset.unit,null,new h.ComputedLength(-f.styleAttrs[w.byName.extent.qname].h.rw,t.dimensions.h.rh-f.styleAttrs[w.byName.extent.qname].h.rh),null,t.pxLength.h))===null?null:(o.v.edge==="bottom"&&(g=new h.ComputedLength(-g.rw-f.styleAttrs[w.byName.extent.qname].h.rw,t.dimensions.h.rh-g.rh-f.styleAttrs[w.byName.extent.qname].h.rh)),v=h.toComputedLength(o.h.offset.value,o.h.offset.unit,null,new h.ComputedLength(t.dimensions.w.rw-f.styleAttrs[w.byName.extent.qname].w.rw,-f.styleAttrs[w.byName.extent.qname].w.rh),null,t.pxLength.w),g===null?null:(o.h.edge==="right"&&(v=new h.ComputedLength(t.dimensions.w.rw-v.rw-f.styleAttrs[w.byName.extent.qname].w.rw,-v.rh-f.styleAttrs[w.byName.extent.qname].w.rh)),{h:g,w:v}))}),new c(b.ns_tts,"ruby","none",["span"],!1,!0,function(t){return t},null),new c(b.ns_tts,"rubyAlign","center",["span"],!0,!0,function(t){return t!=="center"&&t!=="spaceAround"?null:t},null),new c(b.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(t){return t},null),new c(b.ns_tts,"rubyReserve","none",["p"],!0,!0,function(t){var r=t.split(" "),f=[null,null];if(r.length===0||r.length>2||r[0]!=="none"&&r[0]!=="both"&&r[0]!=="after"&&r[0]!=="before"&&r[0]!=="outside")return null;if(f[0]=r[0],r.length===2&&r[0]!=="none"){var o=h.parseLength(r[1]);if(!o)return null;f[1]=o}return f},function(t,r,f,o,g){if(o[0]==="none")return o;var v=null;return(v=o[1]===null?new h.ComputedLength(.5*f.styleAttrs[w.byName.fontSize.qname].rw,.5*f.styleAttrs[w.byName.fontSize.qname].rh):h.toComputedLength(o[1].value,o[1].unit,f.styleAttrs[w.byName.fontSize.qname],f.styleAttrs[w.byName.fontSize.qname],t.cellLength.h,t.pxLength.h))===null?null:[o[0],v]}),new c(b.ns_tts,"showBackground","always",["region"],!1,!0,function(t){return t},null),new c(b.ns_tts,"textAlign","start",["p"],!0,!0,function(t){return t},function(t,r,f,o,g){return o==="left"?"start":o==="right"?"end":o}),new c(b.ns_tts,"textCombine","none",["span"],!0,!0,function(t){return t==="none"||t==="all"?t:null},null),new c(b.ns_tts,"textDecoration","none",["span"],!0,!0,function(t){return t.split(" ")},null),new c(b.ns_tts,"textEmphasis","none",["span"],!0,!0,function(t){for(var r=t.split(" "),f={style:null,symbol:null,color:null,position:null},o=0;o<r.length;o++)if(r[o]==="none"||r[o]==="auto")f.style=r[o];else if(r[o]==="filled"||r[o]==="open")f.style=r[o];else if(r[o]==="circle"||r[o]==="dot"||r[o]==="sesame")f.symbol=r[o];else if(r[o]==="current")f.color=r[o];else if(r[o]==="outside"||r[o]==="before"||r[o]==="after")f.position=r[o];else if(f.color=h.parseColor(r[o]),f.color===null)return null;return f.style==null&&f.symbol==null?f.style="auto":(f.symbol=f.symbol||"circle",f.style=f.style||"filled"),f.position=f.position||"outside",f.color=f.color||"current",f},null),new c(b.ns_tts,"textOutline","none",["span"],!0,!0,function(t){if(t==="none")return t;var r={},f=t.split(" ");if(f.length===0||f.length>2)return null;var o=h.parseColor(f[0]);if(r.color=o,o!==null&&f.shift(),f.length!==1)return null;var g=h.parseLength(f[0]);return g?(r.thickness=g,r):null},function(t,r,f,o,g){if(o==="none")return o;var v={};return o.color===null?v.color=f.styleAttrs[w.byName.color.qname]:v.color=o.color,v.thickness=h.toComputedLength(o.thickness.value,o.thickness.unit,f.styleAttrs[w.byName.fontSize.qname],f.styleAttrs[w.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),v.thickness===null?null:v}),new c(b.ns_tts,"textShadow","none",["span"],!0,!0,h.parseTextShadow,function(t,r,f,o){if(o==="none")return o;for(var g=[],v=0;v<o.length;v++){var P={};if(P.x_off=h.toComputedLength(o[v][0].value,o[v][0].unit,null,f.styleAttrs[w.byName.fontSize.qname],null,t.pxLength.w),P.x_off===null||(P.y_off=h.toComputedLength(o[v][1].value,o[v][1].unit,null,f.styleAttrs[w.byName.fontSize.qname],null,t.pxLength.h),P.y_off===null))return null;if(o[v][2]===null)P.b_radius=0;else if(P.b_radius=h.toComputedLength(o[v][2].value,o[v][2].unit,null,f.styleAttrs[w.byName.fontSize.qname],null,t.pxLength.h),P.b_radius===null)return null;o[v][3]===null?P.color=f.styleAttrs[w.byName.color.qname]:P.color=o[v][3],g.push(P)}return g}),new c(b.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(t){return t},null),new c(b.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(t){return t},null),new c(b.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(t){return t},null),new c(b.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(t){return t},null),new c(b.ns_tts,"zIndex","auto",["region"],!1,!0,function(t){var r;return t==="auto"?r=t:(r=parseInt(t),isNaN(r)&&(r=null)),r},null),new c(b.ns_ebutts,"linePadding","0c",["p"],!0,!1,h.parseLength,function(t,r,f,o,g){return h.toComputedLength(o.value,o.unit,null,null,t.cellLength.w,null)}),new c(b.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(t){return t},null),new c(b.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(t){return t},null),new c(b.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(t){return t==="true"},null),new c(b.ns_itts,"fillLineGap","false",["p"],!0,!0,function(t){return t==="true"},null)],w.byQName={},w.all)w.byQName[w.all[n].qname]=w.all[n];for(var d in w.byName={},w.all)w.byName[w.all[d].name]=w.all[d]})(At,typeof imscNames>"u"?x(55):imscNames,typeof imscUtils>"u"?x(56):imscUtils)},function(Ee,At,x){var w,b=typeof Reflect=="object"?Reflect:null,h=b&&typeof b.apply=="function"?b.apply:function(D,y,S){return Function.prototype.apply.call(D,y,S)};w=b&&typeof b.ownKeys=="function"?b.ownKeys:Object.getOwnPropertySymbols?function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:function(D){return Object.getOwnPropertyNames(D)};var c=Number.isNaN||function(D){return D!=D};function n(){n.init.call(this)}Ee.exports=n,Ee.exports.once=function(D,y){return new Promise(function(S,T){function I(J){D.removeListener(y,L),T(J)}function L(){typeof D.removeListener=="function"&&D.removeListener("error",I),S([].slice.call(arguments))}H(D,y,L,{once:!0}),y!=="error"&&function(J,nt,j){typeof J.on=="function"&&H(J,"error",nt,j)}(D,I,{once:!0})})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var d=10;function t(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}function r(D){return D._maxListeners===void 0?n.defaultMaxListeners:D._maxListeners}function f(D,y,S,T){var I,L,J,nt;if(t(S),(L=D._events)===void 0?(L=D._events=Object.create(null),D._eventsCount=0):(L.newListener!==void 0&&(D.emit("newListener",y,S.listener?S.listener:S),L=D._events),J=L[y]),J===void 0)J=L[y]=S,++D._eventsCount;else if(typeof J=="function"?J=L[y]=T?[S,J]:[J,S]:T?J.unshift(S):J.push(S),(I=r(D))>0&&J.length>I&&!J.warned){J.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=D,j.type=y,j.count=J.length,nt=j,console&&console.warn&&console.warn(nt)}return D}function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(D,y,S){var T={fired:!1,wrapFn:void 0,target:D,type:y,listener:S},I=o.bind(T);return I.listener=S,T.wrapFn=I,I}function v(D,y,S){var T=D._events;if(T===void 0)return[];var I=T[y];return I===void 0?[]:typeof I=="function"?S?[I.listener||I]:[I]:S?function(L){for(var J=new Array(L.length),nt=0;nt<J.length;++nt)J[nt]=L[nt].listener||L[nt];return J}(I):B(I,I.length)}function P(D){var y=this._events;if(y!==void 0){var S=y[D];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function B(D,y){for(var S=new Array(y),T=0;T<y;++T)S[T]=D[T];return S}function H(D,y,S,T){if(typeof D.on=="function")T.once?D.once(y,S):D.on(y,S);else{if(typeof D.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D);D.addEventListener(y,function I(L){T.once&&D.removeEventListener(y,I),S(L)})}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(D){if(typeof D!="number"||D<0||c(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");d=D}}),n.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||c(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this},n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(D){for(var y=[],S=1;S<arguments.length;S++)y.push(arguments[S]);var T=D==="error",I=this._events;if(I!==void 0)T=T&&I.error===void 0;else if(!T)return!1;if(T){var L;if(y.length>0&&(L=y[0]),L instanceof Error)throw L;var J=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw J.context=L,J}var nt=I[D];if(nt===void 0)return!1;if(typeof nt=="function")h(nt,this,y);else{var j=nt.length,O=B(nt,j);for(S=0;S<j;++S)h(O[S],this,y)}return!0},n.prototype.addListener=function(D,y){return f(this,D,y,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(D,y){return f(this,D,y,!0)},n.prototype.once=function(D,y){return t(y),this.on(D,g(this,D,y)),this},n.prototype.prependOnceListener=function(D,y){return t(y),this.prependListener(D,g(this,D,y)),this},n.prototype.removeListener=function(D,y){var S,T,I,L,J;if(t(y),(T=this._events)===void 0)return this;if((S=T[D])===void 0)return this;if(S===y||S.listener===y)--this._eventsCount==0?this._events=Object.create(null):(delete T[D],T.removeListener&&this.emit("removeListener",D,S.listener||y));else if(typeof S!="function"){for(I=-1,L=S.length-1;L>=0;L--)if(S[L]===y||S[L].listener===y){J=S[L].listener,I=L;break}if(I<0)return this;I===0?S.shift():function(nt,j){for(;j+1<nt.length;j++)nt[j]=nt[j+1];nt.pop()}(S,I),S.length===1&&(T[D]=S[0]),T.removeListener!==void 0&&this.emit("removeListener",D,J||y)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(D){var y,S,T;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[D]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete S[D]),this;if(arguments.length===0){var I,L=Object.keys(S);for(T=0;T<L.length;++T)(I=L[T])!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(y=S[D])=="function")this.removeListener(D,y);else if(y!==void 0)for(T=y.length-1;T>=0;T--)this.removeListener(D,y[T]);return this},n.prototype.listeners=function(D){return v(this,D,!0)},n.prototype.rawListeners=function(D){return v(this,D,!1)},n.listenerCount=function(D,y){return typeof D.listenerCount=="function"?D.listenerCount(y):P.call(D,y)},n.prototype.listenerCount=P,n.prototype.eventNames=function(){return this._eventsCount>0?w(this._events):[]}},function(Ee,At,x){(At=Ee.exports=x(88)).Stream=At,At.Readable=At,At.Writable=x(74),At.Duplex=x(36),At.Transform=x(91),At.PassThrough=x(108)},function(Ee,At,x){var w=x(57),b=w.Buffer;function h(n,d){for(var t in n)d[t]=n[t]}function c(n,d,t){return b(n,d,t)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?Ee.exports=w:(h(w,At),At.Buffer=c),h(b,c),c.from=function(n,d,t){if(typeof n=="number")throw new TypeError("Argument must not be a number");return b(n,d,t)},c.alloc=function(n,d,t){if(typeof n!="number")throw new TypeError("Argument must be a number");var r=b(n);return d!==void 0?typeof t=="string"?r.fill(d,t):r.fill(d):r.fill(0),r},c.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return b(n)},c.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(n)}},function(Ee,At,x){(function(w,b,h){var c=x(58);function n(j){var O=this;this.next=null,this.entry=null,this.finish=function(){(function(at,X,z){var vt=at.entry;for(at.entry=null;vt;){var Mt=vt.callback;X.pendingcb--,Mt(z),vt=vt.next}X.corkedRequestsFree?X.corkedRequestsFree.next=at:X.corkedRequestsFree=at})(O,j)}}Ee.exports=y;var d,t=!w.browser&&["v0.10","v0.9."].indexOf(w.version.slice(0,5))>-1?b:c.nextTick;y.WritableState=D;var r=Object.create(x(49));r.inherits=x(42);var f={deprecate:x(106)},o=x(89),g=x(73).Buffer,v=h.Uint8Array||function(){},P,B=x(90);function H(){}function D(j,O){d=d||x(36),j=j||{};var at=O instanceof d;this.objectMode=!!j.objectMode,at&&(this.objectMode=this.objectMode||!!j.writableObjectMode);var X=j.highWaterMark,z=j.writableHighWaterMark,vt=this.objectMode?16:16384;this.highWaterMark=X||X===0?X:at&&(z||z===0)?z:vt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Mt=j.decodeStrings===!1;this.decodeStrings=!Mt,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Pt){(function(ge,Q){var ft=ge._writableState,Ht=ft.sync,_e=ft.writecb;if(function(Te){Te.writing=!1,Te.writecb=null,Te.length-=Te.writelen,Te.writelen=0}(ft),Q)(function(Te,It,Wt,Yt,e){--It.pendingcb,Wt?(c.nextTick(e,Yt),c.nextTick(nt,Te,It),Te._writableState.errorEmitted=!0,Te.emit("error",Yt)):(e(Yt),Te._writableState.errorEmitted=!0,Te.emit("error",Yt),nt(Te,It))})(ge,ft,Ht,Q,_e);else{var Jt=L(ft);Jt||ft.corked||ft.bufferProcessing||!ft.bufferedRequest||I(ge,ft),Ht?t(T,ge,ft,Jt,_e):T(ge,ft,Jt,_e)}})(O,Pt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function y(j){if(d=d||x(36),!(P.call(y,this)||this instanceof d))return new y(j);this._writableState=new D(j,this),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),o.call(this)}function S(j,O,at,X,z,vt,Mt){O.writelen=X,O.writecb=Mt,O.writing=!0,O.sync=!0,at?j._writev(z,O.onwrite):j._write(z,vt,O.onwrite),O.sync=!1}function T(j,O,at,X){at||function(z,vt){vt.length===0&&vt.needDrain&&(vt.needDrain=!1,z.emit("drain"))}(j,O),O.pendingcb--,X(),nt(j,O)}function I(j,O){O.bufferProcessing=!0;var at=O.bufferedRequest;if(j._writev&&at&&at.next){var X=O.bufferedRequestCount,z=new Array(X),vt=O.corkedRequestsFree;vt.entry=at;for(var Mt=0,Pt=!0;at;)z[Mt]=at,at.isBuf||(Pt=!1),at=at.next,Mt+=1;z.allBuffers=Pt,S(j,O,!0,O.length,z,"",vt.finish),O.pendingcb++,O.lastBufferedRequest=null,vt.next?(O.corkedRequestsFree=vt.next,vt.next=null):O.corkedRequestsFree=new n(O),O.bufferedRequestCount=0}else{for(;at;){var ge=at.chunk,Q=at.encoding,ft=at.callback;if(S(j,O,!1,O.objectMode?1:ge.length,ge,Q,ft),at=at.next,O.bufferedRequestCount--,O.writing)break}at===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=at,O.bufferProcessing=!1}function L(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function J(j,O){j._final(function(at){O.pendingcb--,at&&j.emit("error",at),O.prefinished=!0,j.emit("prefinish"),nt(j,O)})}function nt(j,O){var at=L(O);return at&&(function(X,z){z.prefinished||z.finalCalled||(typeof X._final=="function"?(z.pendingcb++,z.finalCalled=!0,c.nextTick(J,X,z)):(z.prefinished=!0,X.emit("prefinish")))}(j,O),O.pendingcb===0&&(O.finished=!0,j.emit("finish"))),at}r.inherits(y,o),D.prototype.getBuffer=function(){for(var j=this.bufferedRequest,O=[];j;)O.push(j),j=j.next;return O},function(){try{Object.defineProperty(D.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(j){return!!P.call(this,j)||this===y&&j&&j._writableState instanceof D}})):P=function(j){return j instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(j,O,at){var X,z=this._writableState,vt=!1,Mt=!z.objectMode&&(X=j,g.isBuffer(X)||X instanceof v);return Mt&&!g.isBuffer(j)&&(j=function(Pt){return g.from(Pt)}(j)),typeof O=="function"&&(at=O,O=null),Mt?O="buffer":O||(O=z.defaultEncoding),typeof at!="function"&&(at=H),z.ended?function(Pt,ge){var Q=new Error("write after end");Pt.emit("error",Q),c.nextTick(ge,Q)}(this,at):(Mt||function(Pt,ge,Q,ft){var Ht=!0,_e=!1;return Q===null?_e=new TypeError("May not write null values to stream"):typeof Q=="string"||Q===void 0||ge.objectMode||(_e=new TypeError("Invalid non-string/buffer chunk")),_e&&(Pt.emit("error",_e),c.nextTick(ft,_e),Ht=!1),Ht}(this,z,j,at))&&(z.pendingcb++,vt=function(Pt,ge,Q,ft,Ht,_e){if(!Q){var Jt=function(Yt,e,u){return Yt.objectMode||Yt.decodeStrings===!1||typeof e!="string"||(e=g.from(e,u)),e}(ge,ft,Ht);ft!==Jt&&(Q=!0,Ht="buffer",ft=Jt)}var Te=ge.objectMode?1:ft.length;ge.length+=Te;var It=ge.length<ge.highWaterMark;if(It||(ge.needDrain=!0),ge.writing||ge.corked){var Wt=ge.lastBufferedRequest;ge.lastBufferedRequest={chunk:ft,encoding:Ht,isBuf:Q,callback:_e,next:null},Wt?Wt.next=ge.lastBufferedRequest:ge.bufferedRequest=ge.lastBufferedRequest,ge.bufferedRequestCount+=1}else S(Pt,ge,!1,Te,ft,Ht,_e);return It}(this,z,Mt,j,O,at)),vt},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,j.writing||j.corked||j.finished||j.bufferProcessing||!j.bufferedRequest||I(this,j))},y.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=j.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((j+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+j);return this._writableState.defaultEncoding=j,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(j,O,at){at(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(j,O,at){var X=this._writableState;typeof j=="function"?(at=j,j=null,O=null):typeof O=="function"&&(at=O,O=null),j!=null&&this.write(j,O),X.corked&&(X.corked=1,this.uncork()),X.ending||X.finished||function(z,vt,Mt){vt.ending=!0,nt(z,vt),Mt&&(vt.finished?c.nextTick(Mt):z.once("finish",Mt)),vt.ended=!0,z.writable=!1}(this,X,at)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(j){this._writableState&&(this._writableState.destroyed=j)}}),y.prototype.destroy=B.destroy,y.prototype._undestroy=B.undestroy,y.prototype._destroy=function(j,O){this.end(),O(j)}}).call(this,x(26),x(104).setImmediate,x(24))},function(Ee,At,x){var w=x(107).Buffer,b=w.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function h(v){var P;switch(this.encoding=function(B){var H=function(D){if(!D)return"utf8";for(var y;;)switch(D){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return D;default:if(y)return;D=(""+D).toLowerCase(),y=!0}}(B);if(typeof H!="string"&&(w.isEncoding===b||!b(B)))throw new Error("Unknown encoding: "+B);return H||B}(v),this.encoding){case"utf16le":this.text=d,this.end=t,P=4;break;case"utf8":this.fillLast=n,P=4;break;case"base64":this.text=r,this.end=f,P=3;break;default:return this.write=o,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(P)}function c(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function n(v){var P=this.lastTotal-this.lastNeed,B=function(H,D,y){if((192&D[0])!=128)return H.lastNeed=0,"";if(H.lastNeed>1&&D.length>1){if((192&D[1])!=128)return H.lastNeed=1,"";if(H.lastNeed>2&&D.length>2&&(192&D[2])!=128)return H.lastNeed=2,""}}(this,v);return B!==void 0?B:this.lastNeed<=v.length?(v.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,P,0,v.length),void(this.lastNeed-=v.length))}function d(v,P){if((v.length-P)%2==0){var B=v.toString("utf16le",P);if(B){var H=B.charCodeAt(B.length-1);if(H>=55296&&H<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",P,v.length-1)}function t(v){var P=v&&v.length?this.write(v):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return P+this.lastChar.toString("utf16le",0,B)}return P}function r(v,P){var B=(v.length-P)%3;return B===0?v.toString("base64",P):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",P,v.length-B))}function f(v){var P=v&&v.length?this.write(v):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function o(v){return v.toString(this.encoding)}function g(v){return v&&v.length?this.write(v):""}At.StringDecoder=h,h.prototype.write=function(v){if(v.length===0)return"";var P,B;if(this.lastNeed){if((P=this.fillLast(v))===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<v.length?P?P+this.text(v,B):this.text(v,B):P||""},h.prototype.end=function(v){var P=v&&v.length?this.write(v):"";return this.lastNeed?P+"":P},h.prototype.text=function(v,P){var B=function(D,y,S){var T=y.length-1;if(T<S)return 0;var I=c(y[T]);return I>=0?(I>0&&(D.lastNeed=I-1),I):--T<S||I===-2?0:(I=c(y[T]))>=0?(I>0&&(D.lastNeed=I-2),I):--T<S||I===-2?0:(I=c(y[T]))>=0?(I>0&&(I===2?I=0:D.lastNeed=I-3),I):0}(this,v,P);if(!this.lastNeed)return v.toString("utf8",P);this.lastTotal=B;var H=v.length-(B-this.lastNeed);return v.copy(this.lastChar,0,H),v.toString("utf8",P,H)},h.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},function(Ee,At,x){var w=x(77),b=x(50),h=x(83),c=x(84),n=x(85),d=x(86);Ee.exports=function(B,H){var D,y=H||{},S=w.parse(String(B||"").toLowerCase(),y),T=w.stringify(S),I=-1;if(!T)return T;for(;++I<h.length;)b.extendedFilter(T,h[I].from).length&&(o(S,h[I].from,h[I].to),T=w.stringify(S));for(I=-1;++I<c.length;)g(S,c[I].from.field,c[I].from.value)&&v(S,c[I].to.field,c[I].to.value);for(T=w.stringify(Object.assign({},S,f)),I=-1;++I<n.length;)T===n[I]&&(o(S,n[I],n[I].split("-").slice(0,-1).join("-")),T=w.stringify(Object.assign({},S,f)));if(S.extensions.sort(P),y.warning)for(D in d)t.call(d[D],S[D])&&y.warning("Deprecated "+D+" `"+S[D]+"`, expected one of `"+d[D][S[D]].join("`, `")+"`",null,7);return S.script&&(S.script=S.script.charAt(0).toUpperCase()+S.script.slice(1)),S.region&&(S.region=S.region.toUpperCase()),w.stringify(S)};var t={}.hasOwnProperty,r=new Intl.Collator,f={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function o(B,H,D){var y,S=w.parse(H),T=w.parse(D),I=[];for(y in S)S[y]&&S[y].length&&g(B,y,S[y])&&I.push(y);for(y in T)T[y]&&T[y].length&&(I.indexOf(y)>-1||!B[y]||!B[y].length)&&v(B,y,T[y])}function g(B,H,D){var y,S,T,I,L=!1;if(D){if(S=y=B[H],y&&typeof y=="object")for(S=[],T=-1;++T<y.length;)I=y[T],D.indexOf(I)<0?S.push(I):L=!0;else y===D&&(S=null,L=!0);B[H]=S}return L}function v(B,H,D){var y,S,T,I=B[H];if(I&&typeof I=="object")for(y=[].concat(D),S=-1;++S<y.length;)T=y[S],I.indexOf(T)<0&&I.push(T);else B[H]=D}function P(B,H){return r.compare(B.singleton,H.singleton)}},function(Ee,At,x){At.parse=x(78),At.stringify=x(82)},function(Ee,At,x){var w=x(79),b=x(63),h=x(64),c=x(80),n=x(81);Ee.exports=function t(r,f){var o,g,v,P=f||{},B={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},H=String(r),D=H.toLowerCase(),y=0;if(r==null)throw new Error("Expected string, got `"+r+"`");if(d.call(n,D))return(P.normalize==null||P.normalize)&&n[D]?t(n[D]):(B[c.indexOf(D)===-1?"irregular":"regular"]=H,B);for(;b(D.charCodeAt(y))&&y<9;)y++;if(y>1&&y<9){if(B.language=H.slice(0,y),y<4)for(g=0;D.charCodeAt(y)===45&&b(D.charCodeAt(y+1))&&b(D.charCodeAt(y+2))&&b(D.charCodeAt(y+3))&&!b(D.charCodeAt(y+4));){if(g>2)return S(y,3,"Too many extended language subtags, expected at most 3 subtags");B.extendedLanguageSubtags.push(H.slice(y+1,y+4)),y+=4,g++}for(D.charCodeAt(y)===45&&b(D.charCodeAt(y+1))&&b(D.charCodeAt(y+2))&&b(D.charCodeAt(y+3))&&b(D.charCodeAt(y+4))&&!b(D.charCodeAt(y+5))&&(B.script=H.slice(y+1,y+5),y+=5),D.charCodeAt(y)===45&&(b(D.charCodeAt(y+1))&&b(D.charCodeAt(y+2))&&!b(D.charCodeAt(y+3))?(B.region=H.slice(y+1,y+3),y+=3):h(D.charCodeAt(y+1))&&h(D.charCodeAt(y+2))&&h(D.charCodeAt(y+3))&&!h(D.charCodeAt(y+4))&&(B.region=H.slice(y+1,y+4),y+=4));D.charCodeAt(y)===45;){for(v=o=y+1;w(D.charCodeAt(v));){if(v-o>7)return S(v,1,"Too long variant, expected at most 8 characters");v++}if(!(v-o>4||v-o>3&&h(D.charCodeAt(o))))break;B.variants.push(H.slice(o,v)),y=v}for(;D.charCodeAt(y)===45&&D.charCodeAt(y+1)!==120&&w(D.charCodeAt(y+1))&&D.charCodeAt(y+2)===45&&w(D.charCodeAt(y+3));){for(v=y+2,g=0;D.charCodeAt(v)===45&&w(D.charCodeAt(v+1))&&w(D.charCodeAt(v+2));)for(v=(o=v+1)+2,g++;w(D.charCodeAt(v));){if(v-o>7)return S(v,2,"Too long extension, expected at most 8 characters");v++}if(!g)return S(v,4,"Empty extension, extensions must have at least 2 characters of content");B.extensions.push({singleton:H.charAt(y+1),extensions:H.slice(y+3,v).split("-")}),y=v}}else y=0;if(y===0&&D.charCodeAt(y)===120||D.charCodeAt(y)===45&&D.charCodeAt(y+1)===120)for(v=y=y?y+2:1;D.charCodeAt(v)===45&&w(D.charCodeAt(v+1));){for(v=o=y+1;w(D.charCodeAt(v));){if(v-o>7)return S(v,5,"Too long private-use area, expected at most 8 characters");v++}B.privateuse.push(H.slice(y+1,v)),y=v}if(y!==H.length)return S(y,6,"Found superfluous content after tag");return B;function S(T,I,L){return P.warning&&P.warning(L,I,T),P.forgiving?B:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var d={}.hasOwnProperty},function(Ee,At,x){var w=x(63),b=x(64);Ee.exports=function(h){return w(h)||b(h)}},function(Ee){Ee.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')},function(Ee){Ee.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},function(Ee,At,x){Ee.exports=function(w){var b,h,c,n=w||{},d=[];if(n.irregular||n.regular)return n.irregular||n.regular;if(n.language)for(d=d.concat(n.language,n.extendedLanguageSubtags||[],n.script||[],n.region||[],n.variants||[]),b=n.extensions||[],h=-1;++h<b.length;)(c=b[h]).singleton&&c.extensions&&c.extensions.length&&(d=d.concat(c.singleton,c.extensions));return n.privateuse&&n.privateuse.length&&(d=d.concat("x",n.privateuse)),d.join("-")}},function(Ee){Ee.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},function(Ee){Ee.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},function(Ee){Ee.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},function(Ee){Ee.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},function(Ee,At){var x={}.toString;Ee.exports=Array.isArray||function(w){return x.call(w)=="[object Array]"}},function(Ee,At,x){(function(w,b){var h=x(58);Ee.exports=S;var c,n=x(87);S.ReadableState=y,x(71).EventEmitter;var d=function(Q,ft){return Q.listeners(ft).length},t=x(89),r=x(73).Buffer,f=w.Uint8Array||function(){},o=Object.create(x(49));o.inherits=x(42);var g=x(101),v=void 0;v=g&&g.debuglog?g.debuglog("stream"):function(){};var P,B=x(102),H=x(90);o.inherits(S,t);var D=["error","close","destroy","pause","resume"];function y(Q,ft){Q=Q||{};var Ht=ft instanceof(c=c||x(36));this.objectMode=!!Q.objectMode,Ht&&(this.objectMode=this.objectMode||!!Q.readableObjectMode);var _e=Q.highWaterMark,Jt=Q.readableHighWaterMark,Te=this.objectMode?16:16384;this.highWaterMark=_e||_e===0?_e:Ht&&(Jt||Jt===0)?Jt:Te,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(P||(P=x(75).StringDecoder),this.decoder=new P(Q.encoding),this.encoding=Q.encoding)}function S(Q){if(c=c||x(36),!(this instanceof S))return new S(Q);this._readableState=new y(Q,this),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),t.call(this)}function T(Q,ft,Ht,_e,Jt){var Te,It=Q._readableState;return ft===null?(It.reading=!1,function(Wt,Yt){if(!Yt.ended){if(Yt.decoder){var e=Yt.decoder.end();e&&e.length&&(Yt.buffer.push(e),Yt.length+=Yt.objectMode?1:e.length)}Yt.ended=!0,J(Wt)}}(Q,It)):(Jt||(Te=function(Wt,Yt){var e;u=Yt,r.isBuffer(u)||u instanceof f||typeof Yt=="string"||Yt===void 0||Wt.objectMode||(e=new TypeError("Invalid non-string/buffer chunk"));var u;return e}(It,ft)),Te?Q.emit("error",Te):It.objectMode||ft&&ft.length>0?(typeof ft=="string"||It.objectMode||Object.getPrototypeOf(ft)===r.prototype||(ft=function(Wt){return r.from(Wt)}(ft)),_e?It.endEmitted?Q.emit("error",new Error("stream.unshift() after end event")):I(Q,It,ft,!0):It.ended?Q.emit("error",new Error("stream.push() after EOF")):(It.reading=!1,It.decoder&&!Ht?(ft=It.decoder.write(ft),It.objectMode||ft.length!==0?I(Q,It,ft,!1):j(Q,It)):I(Q,It,ft,!1))):_e||(It.reading=!1)),function(Wt){return!Wt.ended&&(Wt.needReadable||Wt.length<Wt.highWaterMark||Wt.length===0)}(It)}function I(Q,ft,Ht,_e){ft.flowing&&ft.length===0&&!ft.sync?(Q.emit("data",Ht),Q.read(0)):(ft.length+=ft.objectMode?1:Ht.length,_e?ft.buffer.unshift(Ht):ft.buffer.push(Ht),ft.needReadable&&J(Q)),j(Q,ft)}Object.defineProperty(S.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Q){this._readableState&&(this._readableState.destroyed=Q)}}),S.prototype.destroy=H.destroy,S.prototype._undestroy=H.undestroy,S.prototype._destroy=function(Q,ft){this.push(null),ft(Q)},S.prototype.push=function(Q,ft){var Ht,_e=this._readableState;return _e.objectMode?Ht=!0:typeof Q=="string"&&((ft=ft||_e.defaultEncoding)!==_e.encoding&&(Q=r.from(Q,ft),ft=""),Ht=!0),T(this,Q,ft,!1,Ht)},S.prototype.unshift=function(Q){return T(this,Q,null,!0,!1)},S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(Q){return P||(P=x(75).StringDecoder),this._readableState.decoder=new P(Q),this._readableState.encoding=Q,this};function L(Q,ft){return Q<=0||ft.length===0&&ft.ended?0:ft.objectMode?1:Q!=Q?ft.flowing&&ft.length?ft.buffer.head.data.length:ft.length:(Q>ft.highWaterMark&&(ft.highWaterMark=function(Ht){return Ht>=8388608?Ht=8388608:(Ht--,Ht|=Ht>>>1,Ht|=Ht>>>2,Ht|=Ht>>>4,Ht|=Ht>>>8,Ht|=Ht>>>16,Ht++),Ht}(Q)),Q<=ft.length?Q:ft.ended?ft.length:(ft.needReadable=!0,0))}function J(Q){var ft=Q._readableState;ft.needReadable=!1,ft.emittedReadable||(v("emitReadable",ft.flowing),ft.emittedReadable=!0,ft.sync?h.nextTick(nt,Q):nt(Q))}function nt(Q){v("emit readable"),Q.emit("readable"),z(Q)}function j(Q,ft){ft.readingMore||(ft.readingMore=!0,h.nextTick(O,Q,ft))}function O(Q,ft){for(var Ht=ft.length;!ft.reading&&!ft.flowing&&!ft.ended&&ft.length<ft.highWaterMark&&(v("maybeReadMore read 0"),Q.read(0),Ht!==ft.length);)Ht=ft.length;ft.readingMore=!1}function at(Q){v("readable nexttick read 0"),Q.read(0)}function X(Q,ft){ft.reading||(v("resume read 0"),Q.read(0)),ft.resumeScheduled=!1,ft.awaitDrain=0,Q.emit("resume"),z(Q),ft.flowing&&!ft.reading&&Q.read(0)}function z(Q){var ft=Q._readableState;for(v("flow",ft.flowing);ft.flowing&&Q.read()!==null;);}function vt(Q,ft){return ft.length===0?null:(ft.objectMode?Ht=ft.buffer.shift():!Q||Q>=ft.length?(Ht=ft.decoder?ft.buffer.join(""):ft.buffer.length===1?ft.buffer.head.data:ft.buffer.concat(ft.length),ft.buffer.clear()):Ht=function(_e,Jt,Te){var It;return _e<Jt.head.data.length?(It=Jt.head.data.slice(0,_e),Jt.head.data=Jt.head.data.slice(_e)):It=_e===Jt.head.data.length?Jt.shift():Te?function(Wt,Yt){var e=Yt.head,u=1,l=e.data;for(Wt-=l.length;e=e.next;){var G=e.data,A=Wt>G.length?G.length:Wt;if(A===G.length?l+=G:l+=G.slice(0,Wt),(Wt-=A)===0){A===G.length?(++u,e.next?Yt.head=e.next:Yt.head=Yt.tail=null):(Yt.head=e,e.data=G.slice(A));break}++u}return Yt.length-=u,l}(_e,Jt):function(Wt,Yt){var e=r.allocUnsafe(Wt),u=Yt.head,l=1;for(u.data.copy(e),Wt-=u.data.length;u=u.next;){var G=u.data,A=Wt>G.length?G.length:Wt;if(G.copy(e,e.length-Wt,0,A),(Wt-=A)===0){A===G.length?(++l,u.next?Yt.head=u.next:Yt.head=Yt.tail=null):(Yt.head=u,u.data=G.slice(A));break}++l}return Yt.length-=l,e}(_e,Jt),It}(Q,ft.buffer,ft.decoder),Ht);var Ht}function Mt(Q){var ft=Q._readableState;if(ft.length>0)throw new Error('"endReadable()" called on non-empty stream');ft.endEmitted||(ft.ended=!0,h.nextTick(Pt,ft,Q))}function Pt(Q,ft){Q.endEmitted||Q.length!==0||(Q.endEmitted=!0,ft.readable=!1,ft.emit("end"))}function ge(Q,ft){for(var Ht=0,_e=Q.length;Ht<_e;Ht++)if(Q[Ht]===ft)return Ht;return-1}S.prototype.read=function(Q){v("read",Q),Q=parseInt(Q,10);var ft=this._readableState,Ht=Q;if(Q!==0&&(ft.emittedReadable=!1),Q===0&&ft.needReadable&&(ft.length>=ft.highWaterMark||ft.ended))return v("read: emitReadable",ft.length,ft.ended),ft.length===0&&ft.ended?Mt(this):J(this),null;if((Q=L(Q,ft))===0&&ft.ended)return ft.length===0&&Mt(this),null;var _e,Jt=ft.needReadable;return v("need readable",Jt),(ft.length===0||ft.length-Q<ft.highWaterMark)&&v("length less than watermark",Jt=!0),ft.ended||ft.reading?v("reading or ended",Jt=!1):Jt&&(v("do read"),ft.reading=!0,ft.sync=!0,ft.length===0&&(ft.needReadable=!0),this._read(ft.highWaterMark),ft.sync=!1,ft.reading||(Q=L(Ht,ft))),(_e=Q>0?vt(Q,ft):null)===null?(ft.needReadable=!0,Q=0):ft.length-=Q,ft.length===0&&(ft.ended||(ft.needReadable=!0),Ht!==Q&&ft.ended&&Mt(this)),_e!==null&&this.emit("data",_e),_e},S.prototype._read=function(Q){this.emit("error",new Error("_read() is not implemented"))},S.prototype.pipe=function(Q,ft){var Ht=this,_e=this._readableState;switch(_e.pipesCount){case 0:_e.pipes=Q;break;case 1:_e.pipes=[_e.pipes,Q];break;default:_e.pipes.push(Q)}_e.pipesCount+=1,v("pipe count=%d opts=%j",_e.pipesCount,ft);var Jt=(!ft||ft.end!==!1)&&Q!==b.stdout&&Q!==b.stderr?It:F;function Te(K,Z){v("onunpipe"),K===Ht&&Z&&Z.hasUnpiped===!1&&(Z.hasUnpiped=!0,v("cleanup"),Q.removeListener("close",G),Q.removeListener("finish",A),Q.removeListener("drain",Wt),Q.removeListener("error",l),Q.removeListener("unpipe",Te),Ht.removeListener("end",It),Ht.removeListener("end",F),Ht.removeListener("data",u),Yt=!0,!_e.awaitDrain||Q._writableState&&!Q._writableState.needDrain||Wt())}function It(){v("onend"),Q.end()}_e.endEmitted?h.nextTick(Jt):Ht.once("end",Jt),Q.on("unpipe",Te);var Wt=function(K){return function(){var Z=K._readableState;v("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&d(K,"data")&&(Z.flowing=!0,z(K))}}(Ht);Q.on("drain",Wt);var Yt=!1,e=!1;function u(K){v("ondata"),e=!1,Q.write(K)!==!1||e||((_e.pipesCount===1&&_e.pipes===Q||_e.pipesCount>1&&ge(_e.pipes,Q)!==-1)&&!Yt&&(v("false write response, pause",Ht._readableState.awaitDrain),Ht._readableState.awaitDrain++,e=!0),Ht.pause())}function l(K){v("onerror",K),F(),Q.removeListener("error",l),d(Q,"error")===0&&Q.emit("error",K)}function G(){Q.removeListener("finish",A),F()}function A(){v("onfinish"),Q.removeListener("close",G),F()}function F(){v("unpipe"),Ht.unpipe(Q)}return Ht.on("data",u),function(K,Z,bt){if(typeof K.prependListener=="function")return K.prependListener(Z,bt);K._events&&K._events[Z]?n(K._events[Z])?K._events[Z].unshift(bt):K._events[Z]=[bt,K._events[Z]]:K.on(Z,bt)}(Q,"error",l),Q.once("close",G),Q.once("finish",A),Q.emit("pipe",Ht),_e.flowing||(v("pipe resume"),Ht.resume()),Q},S.prototype.unpipe=function(Q){var ft=this._readableState,Ht={hasUnpiped:!1};if(ft.pipesCount===0)return this;if(ft.pipesCount===1)return Q&&Q!==ft.pipes||(Q||(Q=ft.pipes),ft.pipes=null,ft.pipesCount=0,ft.flowing=!1,Q&&Q.emit("unpipe",this,Ht)),this;if(!Q){var _e=ft.pipes,Jt=ft.pipesCount;ft.pipes=null,ft.pipesCount=0,ft.flowing=!1;for(var Te=0;Te<Jt;Te++)_e[Te].emit("unpipe",this,Ht);return this}var It=ge(ft.pipes,Q);return It===-1||(ft.pipes.splice(It,1),ft.pipesCount-=1,ft.pipesCount===1&&(ft.pipes=ft.pipes[0]),Q.emit("unpipe",this,Ht)),this},S.prototype.on=function(Q,ft){var Ht=t.prototype.on.call(this,Q,ft);if(Q==="data")this._readableState.flowing!==!1&&this.resume();else if(Q==="readable"){var _e=this._readableState;_e.endEmitted||_e.readableListening||(_e.readableListening=_e.needReadable=!0,_e.emittedReadable=!1,_e.reading?_e.length&&J(this):h.nextTick(at,this))}return Ht},S.prototype.addListener=S.prototype.on,S.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(v("resume"),Q.flowing=!0,function(ft,Ht){Ht.resumeScheduled||(Ht.resumeScheduled=!0,h.nextTick(X,ft,Ht))}(this,Q)),this},S.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this},S.prototype.wrap=function(Q){var ft=this,Ht=this._readableState,_e=!1;for(var Jt in Q.on("end",function(){if(v("wrapped end"),Ht.decoder&&!Ht.ended){var It=Ht.decoder.end();It&&It.length&&ft.push(It)}ft.push(null)}),Q.on("data",function(It){v("wrapped data"),Ht.decoder&&(It=Ht.decoder.write(It)),Ht.objectMode&&It==null||(Ht.objectMode||It&&It.length)&&(ft.push(It)||(_e=!0,Q.pause()))}),Q)this[Jt]===void 0&&typeof Q[Jt]=="function"&&(this[Jt]=function(It){return function(){return Q[It].apply(Q,arguments)}}(Jt));for(var Te=0;Te<D.length;Te++)Q.on(D[Te],this.emit.bind(this,D[Te]));return this._read=function(It){v("wrapped _read",It),_e&&(_e=!1,Q.resume())},this},Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),S._fromList=vt}).call(this,x(24),x(26))},function(Ee,At,x){Ee.exports=x(71).EventEmitter},function(Ee,At,x){var w=x(58);function b(h,c){h.emit("error",c)}Ee.exports={destroy:function(h,c){var n=this,d=this._readableState&&this._readableState.destroyed,t=this._writableState&&this._writableState.destroyed;return d||t?(c?c(h):!h||this._writableState&&this._writableState.errorEmitted||w.nextTick(b,this,h),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(r){!c&&r?(w.nextTick(b,n,r),n._writableState&&(n._writableState.errorEmitted=!0)):c&&c(r)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(Ee,At,x){Ee.exports=c;var w=x(36),b=Object.create(x(49));function h(t,r){var f=this._transformState;f.transforming=!1;var o=f.writecb;if(!o)return this.emit("error",new Error("write callback called multiple times"));f.writechunk=null,f.writecb=null,r!=null&&this.push(r),o(t);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);w.call(this,t),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",n)}function n(){var t=this;typeof this._flush=="function"?this._flush(function(r,f){d(t,r,f)}):d(this,null,null)}function d(t,r,f){if(r)return t.emit("error",r);if(f!=null&&t.push(f),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}b.inherits=x(42),b.inherits(c,w),c.prototype.push=function(t,r){return this._transformState.needTransform=!1,w.prototype.push.call(this,t,r)},c.prototype._transform=function(t,r,f){throw new Error("_transform() is not implemented")},c.prototype._write=function(t,r,f){var o=this._transformState;if(o.writecb=f,o.writechunk=t,o.writeencoding=r,!o.transforming){var g=this._readableState;(o.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},c.prototype._read=function(t){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},c.prototype._destroy=function(t,r){var f=this;w.prototype._destroy.call(this,t,function(o){r(o),f.emit("close")})}},function(Ee,At,x){function w(te){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function b(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(w(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(w(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),w(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}x.r(At);var h={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},c=function(){function te(){(function(qt,Xt){if(!(qt instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,te)}var Rt,ae,Lt;return Rt=te,Lt=[{key:"findCencContentProtection",value:function(qt){for(var Xt=null,re=0;re<qt.length;++re){var be=qt[re];be.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||be.value.toLowerCase()!=="cenc"&&be.value.toLowerCase()!=="cbcs"||(Xt=be)}return Xt}},{key:"getPSSHData",value:function(qt){var Xt=8,re=new DataView(qt),be=re.getUint8(Xt);return Xt+=20,be>0&&(Xt+=4+16*re.getUint32(Xt)),Xt+=4,qt.slice(Xt)}},{key:"getPSSHForKeySystem",value:function(qt,Xt){var re=te.parsePSSHList(Xt);return qt&&re.hasOwnProperty(qt.uuid.toLowerCase())?re[qt.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(qt,Xt){return"pssh"in qt?(qt.pssh.__text=qt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Xt.decodeArray(qt.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(qt){if(qt==null)return[];for(var Xt=new DataView(qt.buffer||qt),re={},be=0;;){var Ne,Be,an=void 0,rn=be;if(be>=Xt.buffer.byteLength)break;if(Ne=be+Xt.getUint32(be),be+=4,Xt.getUint32(be)===1886614376)if(be+=4,(Be=Xt.getUint8(be))===0||Be===1){be++,be+=3,an="";var Ce=void 0,Ke=void 0;for(Ce=0;Ce<4;Ce++)an+=(Ke=Xt.getUint8(be+Ce).toString(16)).length===1?"0"+Ke:Ke;for(be+=4,an+="-",Ce=0;Ce<2;Ce++)an+=(Ke=Xt.getUint8(be+Ce).toString(16)).length===1?"0"+Ke:Ke;for(be+=2,an+="-",Ce=0;Ce<2;Ce++)an+=(Ke=Xt.getUint8(be+Ce).toString(16)).length===1?"0"+Ke:Ke;for(be+=2,an+="-",Ce=0;Ce<2;Ce++)an+=(Ke=Xt.getUint8(be+Ce).toString(16)).length===1?"0"+Ke:Ke;for(be+=2,an+="-",Ce=0;Ce<6;Ce++)an+=(Ke=Xt.getUint8(be+Ce).toString(16)).length===1?"0"+Ke:Ke;be+=6,be+=4,re[an=an.toLowerCase()]=Xt.buffer.slice(rn,Ne),be=Ne}else be=Ne;else be=Ne}return re}},{key:"getLicenseServerUrlFromMediaInfo",value:function(qt,Xt){try{if(!qt||qt.length===0)return null;for(var re=0,be=null;re<qt.length&&!be;){var Ne=qt[re];if(Ne&&Ne.contentProtection&&Ne.contentProtection.length>0){var Be=Ne.contentProtection.filter(function(wn){return wn.schemeIdUri&&wn.schemeIdUri===Xt});if(Be&&Be.length>0)for(var an=0;an<Be.length&&!be;){for(var rn=Be[an],Ce=0;Ce<h.attributes.length&&!be;){for(var Ke=0,Qe=h.attributes[Ce];Ke<h.prefixes.length&&!be;){var cn=h.prefixes[Ke];rn[Qe]&&rn[Qe].__prefix&&rn[Qe].__prefix===cn&&rn[Qe].__text&&(be=rn[Qe].__text),Ke+=1}Ce+=1}an+=1}}re+=1}return be}catch{return null}}}],(ae=null)&&b(Rt.prototype,ae),Lt&&b(Rt,Lt),Object.defineProperty(Rt,"prototype",{writable:!1}),te}();function n(te){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function d(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(n(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(n(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),n(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function t(te,Rt,ae){return Rt&&d(te.prototype,Rt),ae&&d(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var r=t(function te(Rt,ae){(function(Lt,qt){if(!(Lt instanceof qt))throw new TypeError("Cannot call a class as a function")})(this,te),this.contentType=Rt,this.robustness=ae});function f(te){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function o(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(f(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(f(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),f(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function g(te,Rt,ae){return Rt&&o(te.prototype,Rt),ae&&o(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var v=g(function te(Rt,ae,Lt,qt,Xt){(function(re,be){if(!(re instanceof be))throw new TypeError("Cannot call a class as a function")})(this,te),this.initDataTypes=["cenc"],Rt&&Rt.length&&(this.audioCapabilities=Rt),ae&&ae.length&&(this.videoCapabilities=ae),this.distinctiveIdentifier=Lt,this.persistentState=qt,this.sessionTypes=Xt});function P(te){return(P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function B(te,Rt){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ae,Lt){return ae.__proto__=Lt,ae})(te,Rt)}function H(te){var Rt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ae,Lt=y(te);if(Rt){var qt=y(this).constructor;ae=Reflect.construct(Lt,arguments,qt)}else ae=Lt.apply(this,arguments);return D(this,ae)}}function D(te,Rt){if(Rt&&(P(Rt)==="object"||typeof Rt=="function"))return Rt;if(Rt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}(te)}function y(te){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Rt){return Rt.__proto__||Object.getPrototypeOf(Rt)})(te)}var S=new(function(te){(function(qt,Xt){if(typeof Xt!="function"&&Xt!==null)throw new TypeError("Super expression must either be null or a function");qt.prototype=Object.create(Xt&&Xt.prototype,{constructor:{value:qt,writable:!0,configurable:!0}}),Object.defineProperty(qt,"prototype",{writable:!1}),Xt&&B(qt,Xt)})(Lt,te);var Rt,ae=H(Lt);function Lt(){var qt;return function(Xt,re){if(!(Xt instanceof re))throw new TypeError("Cannot call a class as a function")}(this,Lt),(qt=ae.call(this)).MEDIA_KEYERR_CODE=100,qt.MEDIA_KEYERR_UNKNOWN_CODE=101,qt.MEDIA_KEYERR_CLIENT_CODE=102,qt.MEDIA_KEYERR_SERVICE_CODE=103,qt.MEDIA_KEYERR_OUTPUT_CODE=104,qt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,qt.MEDIA_KEYERR_DOMAIN_CODE=106,qt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,qt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,qt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,qt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,qt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,qt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,qt.KEY_SESSION_CREATED_ERROR_CODE=113,qt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,qt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",qt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",qt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",qt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",qt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",qt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",qt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",qt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",qt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",qt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",qt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",qt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",qt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",qt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",qt}return Rt=Lt,Object.defineProperty(Rt,"prototype",{writable:!1}),Rt}(x(28).a)),T=x(10);function I(te){return(I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function L(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(I(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(I(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),I(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function J(te,Rt,ae){return Rt&&L(te.prototype,Rt),ae&&L(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var nt=J(function te(Rt,ae,Lt,qt,Xt,re,be,Ne){(function(Be,an){if(!(Be instanceof an))throw new TypeError("Cannot call a class as a function")})(this,te),this.url=Rt,this.method=ae,this.responseType=Lt,this.headers=qt,this.withCredentials=Xt,this.messageType=re,this.sessionId=be,this.data=Ne});function j(te){return(j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function O(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(j(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(j(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),j(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function at(te,Rt,ae){return Rt&&O(te.prototype,Rt),ae&&O(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var X=at(function te(Rt,ae,Lt){(function(qt,Xt){if(!(qt instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,te),this.url=Rt,this.headers=ae,this.data=Lt}),z=x(5),vt=x(14),Mt=x(1),Pt=x(3);function ge(te){return(ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function Q(te){var Rt,ae,Lt,qt,Xt,re,be,Ne,Be,an,rn,Ce=(te=te||{}).protectionKeyController,Ke=te.protectionModel,Qe=te.eventBus,cn=te.events,wn=te.debug,He=te.BASE64,ke=te.constants,on=[],en=te.cmcdModel,nn=te.settings,_n=te.customParametersModel;function Rn(){if(!(Qe&&Qe.hasOwnProperty("on")&&Ce&&Ce.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function Hn(Ze,gn){Ne||Be?Ne&&Yn():function(An,Jn){if(!Be){Be=!0;var Qn,fr=[];An=An.sort(function(ar,Zn){return(Xt&&Xt[ar.ks.systemString]&&Xt[ar.ks.systemString].priority>=0?Xt[ar.ks.systemString].priority:An.length)-(Xt&&Xt[Zn.ks.systemString]&&Xt[Zn.ks.systemString].priority>=0?Xt[Zn.ks.systemString].priority:An.length)});for(var cr=0;cr<An.length;cr++){var xr=pr(An[cr]);fr.push({ks:An[cr].ks,configs:[xr],protData:An[cr].protData})}Ke.requestKeySystemAccess(fr).then(function(ar){var Zn=(Qn=ar.data).mksa&&Qn.mksa.selectedSystemString?Qn.mksa.selectedSystemString:Qn.keySystem.systemString;return ae.info("DRM: KeySystem Access Granted for system string ("+Zn+")!  Selecting key system..."),Ke.selectKeySystem(Qn)}).then(function(ar){if(Ne=ar,Be=!1,Ke){Qe.trigger(cn.KEY_SYSTEM_SELECTED,{data:Qn});var Zn=ir(Ne);Zn&&Zn.serverCertificate&&Zn.serverCertificate.length>0&&Ke.setServerCertificate(He.decodeArray(Zn.serverCertificate).buffer),Yn()}}).catch(function(ar){Ne=null,Be=!1,Jn||Qe.trigger(cn.KEY_SYSTEM_SELECTED,{data:null,error:new T.a(S.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,S.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+ar.error)})})}}(Ze,gn)}function Yn(){for(var Ze,gn=0;gn<Lt.length;gn++)for(Ze=0;Ze<Lt[gn].length;Ze++)if(Ne===Lt[gn][Ze].ks){lr(Lt[gn][Ze]);break}Lt=[]}function lr(Ze){if(Ce.isClearKey(Ne)&&Ze.protData&&Ze.protData.hasOwnProperty("clearkeys")&&Object.keys(Ze.protData.clearkeys).length!==0){var gn={kids:Object.keys(Ze.protData.clearkeys)};Ze.initData=new TextEncoder().encode(JSON.stringify(gn))}Ze.sessionId?mr(Ze):Ze.initData!==null&&nr(Ze)}function mr(Ze){Rn(),Ke.loadKeySession(Ze)}function nr(Ze){var gn=c.getPSSHForKeySystem(Ne,Ze?Ze.initData:null);if(gn){if(function(An){if(!An)return!1;try{for(var Jn=Ke.getSessions(),Qn=0;Qn<Jn.length;Qn++)if(Jn[Qn].getKeyId()===An)return!0;return!1}catch{return!1}}(Ze.keyId)||Wn(gn))return;try{Ze.initData=gn,Ke.createKeySession(Ze)}catch(An){Qe.trigger(cn.KEY_SESSION_CREATED,{data:null,error:new T.a(S.KEY_SESSION_CREATED_ERROR_CODE,S.KEY_SESSION_CREATED_ERROR_MESSAGE+An.message)})}}else Ze&&Ze.initData?Ke.createKeySession(Ze):Qe.trigger(cn.KEY_SESSION_CREATED,{data:null,error:new T.a(S.KEY_SESSION_CREATED_ERROR_CODE,S.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Ne?Ne.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function ir(Ze){if(Ze){var gn=Ze.systemString;if(Xt)return gn in Xt?Xt[gn]:null}return null}function Wn(Ze){if(!Ze)return!1;try{for(var gn=Ke.getAllInitData(),An=0;An<gn.length;An++)if(Ce.initDataEquals(Ze,gn[An]))return ae.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function sr(Ze){Rn(),Ze?(Ke.setMediaElement(Ze),Qe.on(cn.NEED_KEY,Lr,Rt)):Ze===null&&(Ke.setMediaElement(Ze),Qe.off(cn.NEED_KEY,Lr,Rt))}function pr(Ze){var gn=Ze.protData,An=[],Jn=[],Qn=gn&&gn.audioRobustness&&gn.audioRobustness.length>0?gn.audioRobustness:be,fr=gn&&gn.videoRobustness&&gn.videoRobustness.length>0?gn.videoRobustness:be,cr=Ze.sessionType,xr=gn&&gn.distinctiveIdentifier?gn.distinctiveIdentifier:"optional",ar=gn&&gn.persistentState?gn.persistentState:cr==="temporary"?"optional":"required";return qt.forEach(function(Zn){Zn.type===ke.AUDIO?An.push(new r(Zn.codec,Qn)):Zn.type===ke.VIDEO&&Jn.push(new r(Zn.codec,fr))}),new v(An,Jn,xr,ar,[cr])}function Ir(Ze){Ze.error?Qe.trigger(cn.KEY_STATUSES_CHANGED,{data:null,error:Ze.error}):ae.debug("DRM: key status = "+Ze.status)}function _r(Ze){ae.debug("DRM: onKeyMessage");var gn=Ze.data;Qe.trigger(cn.KEY_MESSAGE,{data:gn});var An=gn.messageType?gn.messageType:"license-request",Jn=gn.message,Qn=gn.sessionToken,fr=ir(Ne),cr=Ce.getLicenseServerModelInstance(Ne,fr,An),xr={sessionToken:Qn,messageType:An};if(Jn&&Jn.byteLength!==0){if(!cr)return ae.debug("DRM: License server request not required for this message (type = "+Ze.data.messageType+").  Session ID = "+Qn.getSessionId()),void rr(xr);if(Ce.isClearKey(Ne)){var ar=Ce.processClearKeyLicenseRequest(Ne,fr,Jn);if(ar&&ar.keyPairs&&ar.keyPairs.length>0)return ae.debug("DRM: ClearKey license request handled by application!"),rr(xr),void Ke.updateKeySession(Qn,ar)}(function(Zn,Gr,vr){var Kr=Zn.sessionToken,Or=Zn.messageType?Zn.messageType:"license-request",qr={sessionToken:Kr,messageType:Or},Fr=Ne?Ne.systemString:null,fi=function(Un,Kn,Tr,Rr,Zr){var Er=null,$r=Rr.message;if(Un&&Un.serverURL){var tr=Un.serverURL;typeof tr=="string"&&tr!==""?Er=tr:ge(tr)==="object"&&tr.hasOwnProperty(Kn)&&(Er=tr[Kn])}else if(Un&&Un.laURL&&Un.laURL!=="")Er=Un.laURL;else if(!(Er=c.getLicenseServerUrlFromMediaInfo(qt,Ne.schemeIdURI))&&!Ce.isClearKey(Ne)){var Jr=c.getPSSHData(Tr.initData);(Er=Ne.getLicenseServerURLFromInitData(Jr))||(Er=Rr.laURL)}return Er=Zr.getServerURLFromMessage(Er,$r,Kn)}(vr,Or,Kr,Zn,Gr);if(!fi)return void rr(qr,new T.a(S.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,S.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));var zr={},ei=!1;vr&&Cr(zr,vr.httpRequestHeaders);var ni=Zn.message,Gi=Ne.getRequestHeadersFromMessage(ni);Cr(zr,Gi),Object.keys(zr).forEach(function(Un){Un.toLowerCase()==="authorization"&&(ei=!0)}),vr&&typeof vr.withCredentials=="boolean"&&(ei=vr.withCredentials);var qi=function(Un){if(Ke)if(Un.status>=200&&Un.status<=299){var Kn=vt.a.parseHttpHeaders(Un.getAllResponseHeaders?Un.getAllResponseHeaders():null),Tr=new X(Un.responseURL,Kn,Un.response);jr(_n.getLicenseResponseFilters(),Tr).then(function(){var Rr=Gr.getLicenseMessage(Tr.data,Fr,Or);Rr!==null?(rr(qr),Ke.updateKeySession(Kr,Rr)):Br(Un,qr,Fr,Or,Gr)})}else Br(Un,qr,Fr,Or,Gr)},ci=function(Un){rr(qr,new T.a(S.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,S.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Fr+' update, XHR aborted. status is "'+Un.statusText+'" ('+Un.status+"), readyState is "+Un.readyState))},di=function(Un){rr(qr,new T.a(S.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,S.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Fr+' update, XHR error. status is "'+Un.statusText+'" ('+Un.status+"), readyState is "+Un.readyState))},Qr=Ne.getLicenseRequestFromMessage(ni),gi=Gr.getHTTPMethod(Or),Yi=Gr.getResponseType(Fr,Or),mi=vr&&!isNaN(vr.httpTimeout)?vr.httpTimeout:8e3,Hi=Kr.getSessionId()||null,ri=new nt(fi,gi,Yi,zr,ei,Or,Hi,Qr),Vi=isNaN(nn.get().streaming.retryAttempts[z.a.LICENSE])?3:nn.get().streaming.retryAttempts[z.a.LICENSE];jr(_n.getLicenseRequestFilters(),ri).then(function(){(function Un(Kn,Tr,Rr,Zr,Er,$r){var tr=new XMLHttpRequest;if(nn.get().streaming.cmcd&&nn.get().streaming.cmcd.enabled&&nn.get().streaming.cmcd.mode===Mt.a.CMCD_MODE_QUERY){var Jr=en.getQueryParameter({url:Kn.url,type:z.a.LICENSE});Jr&&(Kn.url=vt.a.addAditionalQueryParameterToUrl(Kn.url,[Jr]))}tr.open(Kn.method,Kn.url,!0),tr.responseType=Kn.responseType,tr.withCredentials=Kn.withCredentials,Rr>0&&(tr.timeout=Rr);for(var ii in Kn.headers)tr.setRequestHeader(ii,Kn.headers[ii]);if(nn.get().streaming.cmcd&&nn.get().streaming.cmcd.enabled&&nn.get().streaming.cmcd.mode===Mt.a.CMCD_MODE_HEADER){var ai=en.getHeaderParameters({url:Kn.url,type:z.a.LICENSE});if(ai)for(var pi in ai){var oi=ai[pi];oi&&tr.setRequestHeader(pi,oi)}}var si=function(){Tr--;var Ki=isNaN(nn.get().streaming.retryIntervals[z.a.LICENSE])?1e3:nn.get().streaming.retryIntervals[z.a.LICENSE];rn=setTimeout(function(){Un(Kn,Tr,Rr,Zr,Er,$r)},Ki)};tr.onload=function(){an=null,this.status>=200&&this.status<=299||Tr<=0?Zr(this):(ae.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Tr),si())},tr.ontimeout=tr.onerror=function(){an=null,Tr<=0?$r(this):(ae.warn("License request network request failed . Retrying it... Pending retries: "+Tr),si())},tr.onabort=function(){Er(this)},Qe.trigger(cn.LICENSE_REQUEST_SENDING,{url:Kn.url,headers:Kn.headers,payload:Kn.data,sessionId:Kn.sessionId}),an=tr,tr.send(Kn.data)})(ri,Vi,mi,qi,ci,di)})})(gn,cr,fr)}else rr(xr,new T.a(S.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,S.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function rr(Ze,gn){Qe.trigger(cn.LICENSE_REQUEST_COMPLETE,{data:Ze,error:gn})}function Vr(){an&&(an.onloadend=an.onerror=an.onprogress=void 0,an.abort(),an=null),rn&&(clearTimeout(rn),rn=null)}function Cr(Ze,gn){if(gn)for(var An in gn)Ze[An]=gn[An]}function Br(Ze,gn,An,Jn,Qn){var fr="NONE",cr=null;Ze.response&&(fr=Qn.getErrorResponse(Ze.response,An,Jn),cr={serverResponse:Ze.response||null,responseCode:Ze.status||null,responseText:Ze.statusText||null}),rr(gn,new T.a(S.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,S.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+An+' update, XHR complete. status is "'+Ze.statusText+'" ('+Ze.status+"), readyState is "+Ze.readyState+".  Response is "+fr,cr))}function jr(Ze,gn){return Ze?Ze.reduce(function(An,Jn){return An.then(function(){return Jn(gn)})},Promise.resolve()):Promise.resolve()}function Lr(Ze,gn){if(!nn.get().streaming.protection.ignoreEmeEncryptedEvent){if(ae.debug("DRM: onNeedKey"),Ze.key.initDataType!=="cenc")return void ae.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Ze.key.initDataType);if(qt.length===0&&(ae.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(gn=gn===void 0?1:gn+1)<5))return void on.push(setTimeout(function(){Lr(Ze,gn)},500));var An=Ze.key.initData;if(ArrayBuffer.isView(An)&&(An=An.buffer),Ne){var Jn=c.getPSSHForKeySystem(Ne,An);if(Jn&&Wn(Jn))return}ae.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(An)));var Qn=Ce.getSupportedKeySystemsFromSegmentPssh(An,Xt,re);if(Qn.length===0)return void ae.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(fr){Lt.push(fr),Hn(fr,!1)})(Qn)}}return Rt={initializeForMedia:function(Ze){if(!Ze)throw new Error("mediaInfo can not be null or undefined");Rn(),qt.push(Ze)},clearMediaInfoArray:function(){qt=[]},handleKeySystemFromManifest:function(){if(qt&&qt.length!==0){var Ze=[];qt.forEach(function(gn){var An=Ce.getSupportedKeySystemsFromContentProtection(gn.contentProtection,Xt,re);An.length>0&&(Ze.length===0&&(Ze=An),Lt.push(An))}),Ze&&Ze.length>0&&Hn(Ze,!0)}},createKeySession:nr,loadKeySession:mr,removeKeySession:function(Ze){Rn(),Ke.removeKeySession(Ze)},closeKeySession:function(Ze){Rn(),Ke.closeKeySession(Ze)},setServerCertificate:function(Ze){Rn(),Ke.setServerCertificate(Ze)},setMediaElement:sr,setSessionType:function(Ze){re=Ze},setRobustnessLevel:function(Ze){be=Ze},setProtectionData:function(Ze){Xt=Ze,Ce.setProtectionData(Ze)},getSupportedKeySystemsFromContentProtection:function(Ze){return Rn(),Ce.getSupportedKeySystemsFromContentProtection(Ze,Xt,re)},getKeySystems:function(){return Ce?Ce.getKeySystems():[]},setKeySystems:function(Ze){Ce&&Ce.setKeySystems(Ze)},stop:function(){Vr(),Ke&&Ke.stop()},reset:function(){Qe.off(cn.INTERNAL_KEY_MESSAGE,_r,Rt),Qe.off(cn.INTERNAL_KEY_STATUS_CHANGED,Ir,Rt),Rn(),Vr(),sr(null),Ne=null,Be=!1,Ke&&(Ke.reset(),Ke=null),on.forEach(function(Ze){return clearTimeout(Ze)}),on=[],qt=[],Lt=[]}},ae=wn.getLogger(Rt),Lt=[],qt=[],re="temporary",be="",an=null,rn=null,Qe.on(cn.INTERNAL_KEY_MESSAGE,_r,Rt),Qe.on(cn.INTERNAL_KEY_STATUS_CHANGED,Ir,Rt),Rt}Q.__dashjs_factory_name="ProtectionController";var ft=Pt.a.getClassFactory(Q);function Ht(te){return(Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function _e(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(Ht(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(Ht(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),Ht(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function Jt(te,Rt,ae){return Rt&&_e(te.prototype,Rt),ae&&_e(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var Te=Jt(function te(Rt,ae){(function(Lt,qt){if(!(Lt instanceof qt))throw new TypeError("Cannot call a class as a function")})(this,te),this.keyID=Rt,this.key=ae});function It(te){return(It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function Wt(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(It(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(It(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),It(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}var Yt=function(){function te(Lt,qt){if(function(Xt,re){if(!(Xt instanceof re))throw new TypeError("Cannot call a class as a function")}(this,te),qt&&qt!=="persistent"&&qt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Lt,this.type=qt}var Rt,ae;return Rt=te,(ae=[{key:"toJWK",value:function(){var Lt,qt=this.keyPairs.length,Xt={keys:[]};for(Lt=0;Lt<qt;Lt++){var re={kty:"oct",alg:"A128KW",kid:this.keyPairs[Lt].keyID,k:this.keyPairs[Lt].key};Xt.keys.push(re)}this.type&&(Xt.type=this.type);var be=JSON.stringify(Xt),Ne=be.length,Be=new ArrayBuffer(Ne),an=new Uint8Array(Be);for(Lt=0;Lt<Ne;Lt++)an[Lt]=be.charCodeAt(Lt);return Be}}])&&Wt(Rt.prototype,ae),Object.defineProperty(Rt,"prototype",{writable:!1}),te}();function e(te){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function u(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(e(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(e(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),e(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}var l=new(function(){function te(){(function(Lt,qt){if(!(Lt instanceof qt))throw new TypeError("Cannot call a class as a function")})(this,te),this.init()}var Rt,ae;return Rt=te,(ae=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&u(Rt.prototype,ae),Object.defineProperty(Rt,"prototype",{writable:!1}),te}()),G="e2719d58-a985-b3c9-781a-b030af78d30e",A=l.CLEARKEY_KEYSTEM_STRING;function F(te){var Rt=(te=te||{}).BASE64;return{uuid:G,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:A,getInitData:function(ae,Lt){try{var qt=c.parseInitDataFromContentProtection(ae,Rt);if(!qt&&Lt){var Xt={kids:[function(re){try{var be=re.replace(/-/g,"");return(be=btoa(be.match(/\w{2}/g).map(function(Ne){return String.fromCharCode(parseInt(Ne,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Lt["cenc:default_KID"])]};qt=new TextEncoder().encode(JSON.stringify(Xt))}return qt}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(ae){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(ae))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(ae,Lt){var qt=null;if(ae){for(var Xt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Lt))),re=[],be=0;be<Xt.kids.length;be++){var Ne=Xt.kids[be],Be=ae.clearkeys&&ae.clearkeys.hasOwnProperty(Ne)?ae.clearkeys[Ne]:null;if(!Be)throw new Error("DRM: ClearKey keyID ("+Ne+") is not known!");re.push(new Te(Ne,Be))}qt=new Yt(re)}return qt}}}F.__dashjs_factory_name="KeySystemClearKey";var K=dashjs.FactoryMaker.getSingletonFactory(F),Z=l.CLEARKEY_KEYSTEM_STRING;function bt(te){var Rt,ae=te.BASE64,Lt=te.debug.getLogger(Rt);return Rt={uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:Z,getInitData:function(qt){return c.parseInitDataFromContentProtection(qt,ae)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(qt){return new Uint8Array(qt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(qt,Xt){var re=null;if(qt){for(var be=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Xt))),Ne=[],Be=0;Be<be.kids.length;Be++){var an=be.kids[Be],rn=qt.clearkeys&&qt.clearkeys.hasOwnProperty(an)?qt.clearkeys[an]:null;if(!rn)throw new Error("DRM: ClearKey keyID ("+an+") is not known!");Ne.push(new Te(an,rn))}re=new Yt(Ne),Lt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return re}}}bt.__dashjs_factory_name="KeySystemW3CClearKey";var it=dashjs.FactoryMaker.getSingletonFactory(bt),ct=l.WIDEVINE_KEYSTEM_STRING;function jt(te){var Rt=(te=te||{}).BASE64;return{uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:ct,getInitData:function(ae){return c.parseInitDataFromContentProtection(ae,Rt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(ae){return new Uint8Array(ae)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}jt.__dashjs_factory_name="KeySystemWidevine";var me=dashjs.FactoryMaker.getSingletonFactory(jt),ue=l.PLAYREADY_KEYSTEM_STRING;function Ct(te){var Rt="utf-16",ae=(te=te||{}).BASE64,Lt=te.settings;function qt(){if(!ae||!ae.hasOwnProperty("decodeArray")||!ae.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:"9a04f079-9840-4286-ab92-e65be0885f95",schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:ue,getInitData:function(Xt){var re,be,Ne,Be,an,rn=new Uint8Array([112,115,115,104,0,0,0,0]),Ce=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Ke=0,Qe=null;if(qt(),!Xt)return null;if("pssh"in Xt)return c.parseInitDataFromContentProtection(Xt,ae);if("pro"in Xt)Qe=ae.decodeArray(Xt.pro.__text);else{if(!("prheader"in Xt))return null;Qe=ae.decodeArray(Xt.prheader.__text)}return re=Qe.length,be=4+rn.length+Ce.length+4+re,Ne=new ArrayBuffer(be),Be=new Uint8Array(Ne),(an=new DataView(Ne)).setUint32(Ke,be),Ke+=4,Be.set(rn,Ke),Ke+=rn.length,Be.set(Ce,Ke),Ke+=Ce.length,an.setUint32(Ke,re),Ke+=4,Be.set(Qe,Ke),Ke+=re,Be.buffer},getRequestHeadersFromMessage:function(Xt){var re,be,Ne={},Be=new DOMParser;if(Lt&&Lt.get().streaming.protection.detectPlayreadyMessageFormat&&Rt==="utf-16"&&Xt&&Xt.byteLength%2==1)return Ne["Content-Type"]="text/xml; charset=utf-8",Ne;var an=Rt==="utf-16"?new Uint16Array(Xt):new Uint8Array(Xt);re=String.fromCharCode.apply(null,an);for(var rn=(be=Be.parseFromString(re,"application/xml")).getElementsByTagName("name"),Ce=be.getElementsByTagName("value"),Ke=0;Ke<rn.length;Ke++)Ne[rn[Ke].childNodes[0].nodeValue]=Ce[Ke].childNodes[0].nodeValue;return Ne.hasOwnProperty("Content")&&(Ne["Content-Type"]=Ne.Content,delete Ne.Content),Ne.hasOwnProperty("Content-Type")||(Ne["Content-Type"]="text/xml; charset=utf-8"),Ne},getLicenseRequestFromMessage:function(Xt){var re=null,be=new DOMParser;if(Lt&&Lt.get().streaming.protection.detectPlayreadyMessageFormat&&Rt==="utf-16"&&Xt&&Xt.byteLength%2==1)return Xt;var Ne=Rt==="utf-16"?new Uint16Array(Xt):new Uint8Array(Xt);qt();var Be=String.fromCharCode.apply(null,Ne),an=be.parseFromString(Be,"application/xml");if(!an.getElementsByTagName("PlayReadyKeyMessage")[0])return Xt;var rn=an.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return rn&&(re=ae.decode(rn)),re},getLicenseServerURLFromInitData:function(Xt){if(Xt)for(var re=new DataView(Xt),be=re.getUint16(4,!0),Ne=6,Be=new DOMParser,an=0;an<be;an++){var rn=re.getUint16(Ne,!0);Ne+=2;var Ce=re.getUint16(Ne,!0);if(Ne+=2,rn===1){var Ke=Xt.slice(Ne,Ne+Ce),Qe=String.fromCharCode.apply(null,new Uint16Array(Ke)),cn=Be.parseFromString(Qe,"application/xml");if(cn.getElementsByTagName("LA_URL")[0]){var wn=cn.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(wn)return wn}if(cn.getElementsByTagName("LUI_URL")[0]){var He=cn.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(He)return He}}else Ne+=Ce}return null},getCDMData:function(Xt){var re,be,Ne,Be;if(qt(),!Xt)return null;for(re=[],Be=0;Be<Xt.length;++Be)re.push(Xt.charCodeAt(Be)),re.push(0);for(re=String.fromCharCode.apply(null,re),re=ae.encode(re),be='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",re),Ne=[],Be=0;Be<be.length;++Be)Ne.push(be.charCodeAt(Be)),Ne.push(0);return new Uint8Array(Ne).buffer},setPlayReadyMessageFormat:function(Xt){if(Xt!=="utf-8"&&Xt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');Rt=Xt}}}Ct.__dashjs_factory_name="KeySystemPlayReady";var Nt=dashjs.FactoryMaker.getSingletonFactory(Ct);function Ot(te){var Rt=(te=te||{}).BASE64,ae={};return ae[l.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Lt){return Rt.decodeArray(Lt.license)},getErrorResponse:function(Lt){return Lt}},ae[l.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Lt){return Lt},getErrorResponse:function(Lt){return String.fromCharCode.apply(null,new Uint8Array(Lt))}},{getServerURLFromMessage:function(Lt){return Lt},getHTTPMethod:function(){return"POST"},getResponseType:function(Lt){return ae[Lt].responseType},getLicenseMessage:function(Lt,qt){return function(){if(!Rt||!Rt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),ae[qt].getLicenseMessage(Lt)},getErrorResponse:function(Lt,qt){return ae[qt].getErrorResponse(Lt)}}}Ot.__dashjs_factory_name="DRMToday";var Gt=dashjs.FactoryMaker.getSingletonFactory(Ot);function ve(){var te="http://schemas.xmlsoap.org/soap/envelope/";function Rt(qt){var Xt=String.fromCharCode.apply(null,new Uint8Array(qt));return decodeURIComponent(escape(Xt))}function ae(qt){if(window.DOMParser){var Xt=Rt(qt),re=new window.DOMParser().parseFromString(Xt,"text/xml"),be=re?re.getElementsByTagNameNS(te,"Envelope")[0]:null,Ne=be?be.getElementsByTagNameNS(te,"Body")[0]:null;if(Ne&&Ne.getElementsByTagNameNS(te,"Fault")[0])return null}return qt}function Lt(qt){var Xt="",re="",be="",Ne=-1,Be=-1;if(window.DOMParser){var an=Rt(qt),rn=new window.DOMParser().parseFromString(an,"text/xml"),Ce=rn?rn.getElementsByTagNameNS(te,"Envelope")[0]:null,Ke=Ce?Ce.getElementsByTagNameNS(te,"Body")[0]:null,Qe=Ke?Ke.getElementsByTagNameNS(te,"Fault")[0]:null,cn=Qe?Qe.getElementsByTagName("detail")[0]:null,wn=cn?cn.getElementsByTagName("Exception")[0]:null,He=null;if(Qe===null)return an;Xt=(He=Qe.getElementsByTagName("faultstring")[0].firstChild)?He.nodeValue:null,wn!==null&&(re=(He=wn.getElementsByTagName("StatusCode")[0])?He.firstChild.nodeValue:null,Ne=(be=(He=wn.getElementsByTagName("Message")[0])?He.firstChild.nodeValue:null)?be.lastIndexOf("[")+1:-1,Be=be?be.indexOf("]"):-1,be=be?be.substring(Ne,Be):"")}var ke="code: ".concat(re,", name: ").concat(Xt);return be&&(ke+=", message: ".concat(be)),ke}return{getServerURLFromMessage:function(qt){return qt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(qt){return ae.call(this,qt)},getErrorResponse:function(qt){return Lt.call(this,qt)}}}ve.__dashjs_factory_name="PlayReady";var Ae=dashjs.FactoryMaker.getSingletonFactory(ve);function ie(){return{getServerURLFromMessage:function(te){return te},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(te){return te},getErrorResponse:function(te){return String.fromCharCode.apply(null,new Uint8Array(te))}}}ie.__dashjs_factory_name="Widevine";var Zt=dashjs.FactoryMaker.getSingletonFactory(ie);function ee(){return{getServerURLFromMessage:function(te){return te},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(te){if(!te.hasOwnProperty("keys"))return null;for(var Rt=[],ae=0;ae<te.keys.length;ae++){var Lt=te.keys[ae],qt=Lt.kid.replace(/=/g,""),Xt=Lt.k.replace(/=/g,"");Rt.push(new Te(qt,Xt))}return new Yt(Rt)},getErrorResponse:function(te){return String.fromCharCode.apply(null,new Uint8Array(te))}}}ee.__dashjs_factory_name="ClearKey";var we=dashjs.FactoryMaker.getSingletonFactory(ee);function Fe(){var te,Rt,ae,Lt,qt,Xt,re,be,Ne=this.context;function Be(Ce,Ke){return Ke&&Ce in Ke?Ke[Ce]:null}function an(Ce,Ke){return Ce&&Ce.sessionId?Ce.sessionId:Ke&&Ke.sessionId?Ke.sessionId:null}function rn(Ce,Ke){return Ce&&Ce.sessionType?Ce.sessionType:Ke}return te={initialize:function(){var Ce;Lt=[],Ce=Nt(Ne).getInstance({BASE64:qt,settings:Xt}),Lt.push(Ce),Ce=me(Ne).getInstance({BASE64:qt}),Lt.push(Ce),Ce=K(Ne).getInstance({BASE64:qt}),Lt.push(Ce),re=Ce,Ce=it(Ne).getInstance({BASE64:qt,debug:Rt}),Lt.push(Ce),be=Ce},setProtectionData:function(Ce){for(var Ke,Qe,cn=0;cn<Lt.length;cn++){var wn=Lt[cn];wn.hasOwnProperty("init")&&wn.init((Ke=wn.systemString,Qe=void 0,Qe=null,Ce&&(Qe=Ke in Ce?Ce[Ke]:null),Qe))}},isClearKey:function(Ce){return Ce===re||Ce===be},initDataEquals:function(Ce,Ke){if(Ce.byteLength===Ke.byteLength){for(var Qe=new Uint8Array(Ce),cn=new Uint8Array(Ke),wn=0;wn<Qe.length;wn++)if(Qe[wn]!==cn[wn])return!1;return!0}return!1},getKeySystems:function(){return Lt},setKeySystems:function(Ce){Lt=Ce},getKeySystemBySystemString:function(Ce){for(var Ke=0;Ke<Lt.length;Ke++)if(Lt[Ke].systemString===Ce)return Lt[Ke];return null},getSupportedKeySystemsFromContentProtection:function(Ce,Ke,Qe){var cn,wn,He,ke,on=[];if(Ce){var en=c.findCencContentProtection(Ce);for(He=0;He<Lt.length;++He){var nn=Be((wn=Lt[He]).systemString,Ke);for(ke=0;ke<Ce.length;++ke)if((cn=Ce[ke]).schemeIdUri.toLowerCase()===wn.schemeIdURI){var _n=wn.getInitData(cn,en);on.push({ks:Lt[He],keyId:cn.keyId,initData:_n,protData:nn,cdmData:wn.getCDMData(nn?nn.cdmData:null),sessionId:an(nn,cn),sessionType:rn(nn,Qe)})}}}return on},getSupportedKeySystemsFromSegmentPssh:function(Ce,Ke,Qe){for(var cn,wn=[],He=c.parsePSSHList(Ce),ke=0;ke<Lt.length;++ke){var on=Be((cn=Lt[ke]).systemString,Ke);cn.uuid in He&&wn.push({ks:cn,initData:He[cn.uuid],protData:on,cdmData:cn.getCDMData(on?on.cdmData:null),sessionId:an(on),sessionType:rn(on,Qe)})}return wn},getLicenseServerModelInstance:function(Ce,Ke,Qe){if(Qe==="license-release"||Qe==="individualization-request")return null;var cn=null;return Ke&&Ke.hasOwnProperty("drmtoday")?cn=Gt(Ne).getInstance({BASE64:qt}):Ce.systemString===l.WIDEVINE_KEYSTEM_STRING?cn=Zt(Ne).getInstance():Ce.systemString===l.PLAYREADY_KEYSTEM_STRING?cn=Ae(Ne).getInstance():Ce.systemString===l.CLEARKEY_KEYSTEM_STRING&&(cn=we(Ne).getInstance()),cn},processClearKeyLicenseRequest:function(Ce,Ke,Qe){try{return Ce.getClearKeysFromProtectionData(Ke,Qe)}catch{return ae.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(Ce){Ce&&(Ce.debug&&(Rt=Ce.debug,ae=Rt.getLogger(te)),Ce.BASE64&&(qt=Ce.BASE64),Ce.settings&&(Xt=Ce.settings))}}}Fe.__dashjs_factory_name="ProtectionKeyController";var We=dashjs.FactoryMaker.getSingletonFactory(Fe);function Ve(te){return(Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function N(te,Rt){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ae,Lt){return ae.__proto__=Lt,ae})(te,Rt)}function C(te){var Rt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ae,Lt=Bt(te);if(Rt){var qt=Bt(this).constructor;ae=Reflect.construct(Lt,arguments,qt)}else ae=Lt.apply(this,arguments);return dt(this,ae)}}function dt(te,Rt){if(Rt&&(Ve(Rt)==="object"||typeof Rt=="function"))return Rt;if(Rt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}(te)}function Bt(te){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Rt){return Rt.__proto__||Object.getPrototypeOf(Rt)})(te)}var Ut=new(function(te){(function(qt,Xt){if(typeof Xt!="function"&&Xt!==null)throw new TypeError("Super expression must either be null or a function");qt.prototype=Object.create(Xt&&Xt.prototype,{constructor:{value:qt,writable:!0,configurable:!0}}),Object.defineProperty(qt,"prototype",{writable:!1}),Xt&&N(qt,Xt)})(Lt,te);var Rt,ae=C(Lt);function Lt(){var qt;return function(Xt,re){if(!(Xt instanceof re))throw new TypeError("Cannot call a class as a function")}(this,Lt),(qt=ae.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",qt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",qt.KEY_ADDED="public_keyAdded",qt.KEY_ERROR="public_keyError",qt.KEY_MESSAGE="public_keyMessage",qt.KEY_SESSION_CLOSED="public_keySessionClosed",qt.KEY_SESSION_CREATED="public_keySessionCreated",qt.KEY_SESSION_REMOVED="public_keySessionRemoved",qt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",qt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",qt.KEY_SYSTEM_SELECTED="public_keySystemSelected",qt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",qt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",qt.NEED_KEY="needkey",qt.PROTECTION_CREATED="public_protectioncreated",qt.PROTECTION_DESTROYED="public_protectiondestroyed",qt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",qt.TEARDOWN_COMPLETE="protectionTeardownComplete",qt.VIDEO_ELEMENT_SELECTED="videoElementSelected",qt.KEY_SESSION_UPDATED="public_keySessionUpdated",qt}return Rt=Lt,Object.defineProperty(Rt,"prototype",{writable:!1}),Rt}(x(18).a));function xt(te){return(xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function de(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(xt(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(xt(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),xt(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function Ge(te,Rt,ae){return Rt&&de(te.prototype,Rt),ae&&de(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var Je=Ge(function te(Rt,ae){(function(Lt,qt){if(!(Lt instanceof qt))throw new TypeError("Cannot call a class as a function")})(this,te),this.initData=Rt,this.initDataType=ae});function Ue(te){return(Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function $e(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(Ue(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(Ue(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),Ue(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function Xe(te,Rt,ae){return Rt&&$e(te.prototype,Rt),ae&&$e(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var Tn=Xe(function te(Rt,ae,Lt,qt){(function(Xt,re){if(!(Xt instanceof re))throw new TypeError("Cannot call a class as a function")})(this,te),this.sessionToken=Rt,this.message=ae,this.defaultURL=Lt,this.messageType=qt||"license-request"});function yn(te){return(yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(te)}function zn(te,Rt){for(var ae=0;ae<Rt.length;ae++){var Lt=Rt[ae];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(te,(qt=Lt.key,Xt=void 0,Xt=function(re,be){if(yn(re)!=="object"||re===null)return re;var Ne=re[Symbol.toPrimitive];if(Ne!==void 0){var Be=Ne.call(re,be||"default");if(yn(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(be==="string"?String:Number)(re)}(qt,"string"),yn(Xt)==="symbol"?Xt:String(Xt)),Lt)}var qt,Xt}function Fn(te,Rt,ae){return Rt&&zn(te.prototype,Rt),ae&&zn(te,ae),Object.defineProperty(te,"prototype",{writable:!1}),te}var Pn=Fn(function te(Rt,ae){(function(Lt,qt){if(!(Lt instanceof qt))throw new TypeError("Cannot call a class as a function")})(this,te),this.keySystem=Rt,this.ksConfiguration=ae}),Gn={};function qn(te){te=te||{};var Rt,ae,Lt,qt,Xt,re,be,Ne,Be=this.context,an=te.eventBus,rn=te.events,Ce=te.debug;function Ke(He){var ke=He.session;return ke.removeEventListener("keystatuseschange",He),ke.removeEventListener("message",He),ke.close()}function Qe(He){for(var ke=0;ke<re.length;ke++)if(re[ke]===He){re.splice(ke,1);break}}function cn(He){var ke,on;return He&&He.length>0&&(He[0]&&(typeof He[0]=="string"?ke=He[0]:on=He[0]),He[1]&&(typeof He[1]=="string"?ke=He[1]:on=He[1])),{status:ke,keyId:on}}function wn(He,ke){var on={session:He,keyId:ke.keyId,initData:ke.initData,sessionId:ke.sessionId,sessionType:ke.sessionType,handleEvent:function(en){switch(en.type){case"keystatuseschange":an.trigger(rn.KEY_STATUSES_CHANGED,{data:this}),en.target.keyStatuses.forEach(function(){var _n=cn(arguments);switch(_n.status){case"expired":an.trigger(rn.INTERNAL_KEY_STATUS_CHANGED,{error:new T.a(S.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,S.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:an.trigger(rn.INTERNAL_KEY_STATUS_CHANGED,_n)}});break;case"message":var nn=ArrayBuffer.isView(en.message)?en.message.buffer:en.message;an.trigger(rn.INTERNAL_KEY_MESSAGE,{data:new Tn(this,nn,void 0,en.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return He.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return He.expiration},getKeyStatuses:function(){return He.keyStatuses},getUsable:function(){var en=!1;return He.keyStatuses.forEach(function(){var nn=cn(arguments);nn.status==="usable"&&(en=!0)}),en}};return He.addEventListener("keystatuseschange",on),He.addEventListener("message",on),He.closed.then(function(){Qe(on),ae.debug("DRM: Session closed.  SessionID = "+on.getSessionId()),an.trigger(rn.KEY_SESSION_CLOSED,{data:on.getSessionId()})}),re.push(on),on}return Rt={getAllInitData:function(){for(var He=[],ke=0;ke<re.length;ke++)re[ke].initData&&He.push(re[ke].initData);return He},getSessions:function(){return re},requestKeySystemAccess:function(He){return new Promise(function(ke,on){(function en(nn,_n,Rn,Hn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var Yn="Insecure origins are not allowed";return an.trigger(rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Yn}),void Hn({error:Yn})}var lr=nn[_n].protData&&nn[_n].protData.systemStringPriority?nn[_n].protData.systemStringPriority:null,mr=nn[_n].configs,nr=nn[_n].ks,ir=nr.systemString;(function(Wn,sr){return new Promise(function(pr,Ir){(function _r(rr,Vr,Cr,Br,jr){var Lr=rr[Cr];ae.debug("Requesting key system access for system string ".concat(Lr)),navigator.requestMediaKeySystemAccess(Lr,Vr).then(function(Ze){Ze.selectedSystemString=Lr,Br(Ze)}).catch(function(Ze){Cr+1<rr.length?_r(rr,Vr,Cr+1,Br,jr):jr(Ze)})})(Wn,sr,0,pr,Ir)})})(lr||(Gn[ir]?Gn[ir]:[ir]),mr).then(function(Wn){var sr=typeof Wn.getConfiguration=="function"?Wn.getConfiguration():null,pr=new Pn(nr,sr);pr.mksa=Wn,an.trigger(rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:pr}),Rn({data:pr})}).catch(function(Wn){_n+1<nn.length?en(nn,_n+1,Rn,Hn):(an.trigger(rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+Wn.message}),Hn({error:"Key system access denied! "+Wn.message}))})})(He,0,ke,on)})},selectKeySystem:function(He){return new Promise(function(ke,on){He.mksa.createMediaKeys().then(function(en){return Lt=He.keySystem,Xt=en,qt?qt.setMediaKeys(Xt):Promise.resolve()}).then(function(){ke(Lt)}).catch(function(){on({error:"Error selecting keys system ("+He.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(He){qt!==He&&(qt&&(qt.removeEventListener("encrypted",be),qt.setMediaKeys&&qt.setMediaKeys(null)),(qt=He)&&(qt.addEventListener("encrypted",be),qt.setMediaKeys&&Xt&&qt.setMediaKeys(Xt)))},setServerCertificate:function(He){if(!Lt||!Xt)throw new Error("Can not set server certificate until you have selected a key system");Xt.setServerCertificate(He).then(function(){ae.info("DRM: License server certificate successfully updated."),an.trigger(rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(ke){an.trigger(rn.SERVER_CERTIFICATE_UPDATED,{error:new T.a(S.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,S.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+ke.name)})})},createKeySession:function(He){if(!Lt||!Xt)throw new Error("Can not create sessions until you have selected a key system");var ke=Xt.createSession(He.sessionType),on=wn(ke,He),en=Lt.systemString===l.CLEARKEY_KEYSTEM_STRING&&(He.initData||He.protData&&He.protData.clearkeys)?l.INITIALIZATION_DATA_TYPE_KEYIDS:l.INITIALIZATION_DATA_TYPE_CENC;ke.generateRequest(en,He.initData).then(function(){ae.debug("DRM: Session created.  SessionID = "+on.getSessionId()),an.trigger(rn.KEY_SESSION_CREATED,{data:on})}).catch(function(nn){Qe(on),an.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new T.a(S.KEY_SESSION_CREATED_ERROR_CODE,S.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+nn.name)})})},updateKeySession:function(He,ke){var on=He.session;Ne.isClearKey(Lt)&&(ke=ke.toJWK()),on.update(ke).then(function(){an.trigger(rn.KEY_SESSION_UPDATED)}).catch(function(en){an.trigger(rn.KEY_ERROR,{error:new T.a(S.MEDIA_KEYERR_CODE,"Error sending update() message! "+en.name,He)})})},loadKeySession:function(He){if(!Lt||!Xt)throw new Error("Can not load sessions until you have selected a key system");for(var ke=He.sessionId,on=0;on<re.length;on++)if(ke===re[on].sessionId)return void ae.warn("DRM: Ignoring session ID because we have already seen it!");var en=Xt.createSession(He.sessionType),nn=wn(en,He);en.load(ke).then(function(_n){_n?(ae.debug("DRM: Session loaded.  SessionID = "+nn.getSessionId()),an.trigger(rn.KEY_SESSION_CREATED,{data:nn})):(Qe(nn),an.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new T.a(S.KEY_SESSION_CREATED_ERROR_CODE,S.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+ke+")")}))}).catch(function(_n){Qe(nn),an.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new T.a(S.KEY_SESSION_CREATED_ERROR_CODE,S.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+ke+")! "+_n.name)})})},removeKeySession:function(He){He.session.remove().then(function(){ae.debug("DRM: Session removed.  SessionID = "+He.getSessionId()),an.trigger(rn.KEY_SESSION_REMOVED,{data:He.getSessionId()})},function(ke){an.trigger(rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+He.getSessionId()+"). "+ke.name})})},closeKeySession:function(He){Ke(He).catch(function(ke){Qe(He),an.trigger(rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+He.getSessionId()+") "+ke.name})})},stop:function(){for(var He,ke=0;ke<re.length;ke++)(He=re[ke]).getUsable()||Ke(He).catch(function(){Qe(He)})},reset:function(){var He,ke=re.length;ke!==0?function(){for(var on=function(nn){Qe(nn),re.length===0&&(qt?(qt.removeEventListener("encrypted",be),qt.setMediaKeys(null).then(function(){an.trigger(rn.TEARDOWN_COMPLETE)})):an.trigger(rn.TEARDOWN_COMPLETE))},en=0;en<ke;en++)(function(nn){He.session.closed.then(function(){on(nn)}),Ke(He).catch(function(){on(nn)})})(He=re[en])}():an.trigger(rn.TEARDOWN_COMPLETE)}},ae=Ce.getLogger(Rt),Lt=null,qt=null,Xt=null,re=[],Ne=We(Be).getInstance(),be={handleEvent:function(He){switch(He.type){case"encrypted":if(He.initData){var ke=ArrayBuffer.isView(He.initData)?He.initData.buffer:He.initData;an.trigger(rn.NEED_KEY,{key:new Je(ke,He.initDataType)})}}}},Rt}Gn[l.PLAYREADY_KEYSTEM_STRING]=[l.PLAYREADY_KEYSTEM_STRING,l.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],Gn[l.WIDEVINE_KEYSTEM_STRING]=[l.WIDEVINE_KEYSTEM_STRING],Gn[l.CLEARKEY_KEYSTEM_STRING]=[l.CLEARKEY_KEYSTEM_STRING],qn.__dashjs_factory_name="ProtectionModel_21Jan2015";var Bn=dashjs.FactoryMaker.getClassFactory(qn);function $n(te){te=te||{};var Rt,ae,Lt,qt,Xt,re,be,Ne,Be,an=this.context,rn=te.eventBus,Ce=te.events,Ke=te.debug,Qe=te.api;function cn(){try{for(var ke=0;ke<be.length;ke++)wn(be[ke]);Lt&&Lt.removeEventListener(Qe.needkey,Ne),rn.trigger(Ce.TEARDOWN_COMPLETE)}catch(on){rn.trigger(Ce.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+on.message})}}function wn(ke){var on=ke.session;on.removeEventListener(Qe.error,ke),on.removeEventListener(Qe.message,ke),on.removeEventListener(Qe.ready,ke),on.removeEventListener(Qe.close,ke);for(var en=0;en<be.length;en++)if(be[en]===ke){be.splice(en,1);break}on[Qe.release]()}function He(){var ke=null,on=function(){Lt.removeEventListener("loadedmetadata",ke),Lt[Qe.setMediaKeys](Xt),rn.trigger(Ce.VIDEO_ELEMENT_SELECTED)};Lt.readyState>=1?on():(ke=on.bind(this),Lt.addEventListener("loadedmetadata",ke))}return Rt={getAllInitData:function(){for(var ke=[],on=0;on<be.length;on++)ke.push(be[on].initData);return ke},getSessions:function(){return be},requestKeySystemAccess:function(ke){return new Promise(function(on,en){for(var nn=!1,_n=0;_n<ke.length;_n++)for(var Rn=ke[_n].ks.systemString,Hn=ke[_n].configs,Yn=null,lr=null,mr=0;mr<Hn.length;mr++){var nr=Hn[mr].audioCapabilities,ir=Hn[mr].videoCapabilities;if(nr&&nr.length!==0){Yn=[];for(var Wn=0;Wn<nr.length;Wn++)window[Qe.MediaKeys].isTypeSupported(Rn,nr[Wn].contentType)&&Yn.push(nr[Wn])}if(ir&&ir.length!==0){lr=[];for(var sr=0;sr<ir.length;sr++)window[Qe.MediaKeys].isTypeSupported(Rn,ir[sr].contentType)&&lr.push(ir[sr])}if(!(!Yn&&!lr||Yn&&Yn.length===0||lr&&lr.length===0)){nn=!0;var pr=new v(Yn,lr),Ir=Be.getKeySystemBySystemString(Rn),_r=new Pn(Ir,pr);rn.trigger(Ce.KEY_SYSTEM_ACCESS_COMPLETE,{data:_r}),on({data:_r});break}}if(!nn){var rr="Key system access denied! -- No valid audio/video content configurations detected!";rn.trigger(Ce.KEY_SYSTEM_ACCESS_COMPLETE,{error:rr}),en({error:rr})}})},selectKeySystem:function(ke){return new Promise(function(on,en){try{Xt=ke.mediaKeys=new window[Qe.MediaKeys](ke.keySystem.systemString),qt=ke.keySystem,re=ke,Lt&&He(),on(qt)}catch{en({error:"Error selecting keys system ("+qt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(ke){Lt!==ke&&(Lt&&Lt.removeEventListener(Qe.needkey,Ne),(Lt=ke)&&(Lt.addEventListener(Qe.needkey,Ne),Xt&&He()))},createKeySession:function(ke){if(!qt||!Xt||!re)throw new Error("Can not create sessions until you have selected a key system");var on=null;if(re.ksConfiguration.videoCapabilities&&re.ksConfiguration.videoCapabilities.length>0&&(on=re.ksConfiguration.videoCapabilities[0]),on===null&&re.ksConfiguration.audioCapabilities&&re.ksConfiguration.audioCapabilities.length>0&&(on=re.ksConfiguration.audioCapabilities[0]),on===null)throw new Error("Can not create sessions for unknown content types.");var en=on.contentType,nn=Xt.createSession(en,new Uint8Array(ke.initData),ke.cdmData?new Uint8Array(ke.cdmData):null),_n=function(Rn,Hn){return{session:Rn,keyId:Hn.keyId,initData:Hn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Yn){switch(Yn.type){case Qe.error:rn.trigger(Ce.KEY_ERROR,{error:new T.a(S.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Qe.message:var lr=ArrayBuffer.isView(Yn.message)?Yn.message.buffer:Yn.message;rn.trigger(Ce.INTERNAL_KEY_MESSAGE,{data:new Tn(this,lr,Yn.destinationURL)});break;case Qe.ready:ae.debug("DRM: Key added."),rn.trigger(Ce.KEY_ADDED);break;case Qe.close:ae.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),rn.trigger(Ce.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(nn,ke);nn.addEventListener(Qe.error,_n),nn.addEventListener(Qe.message,_n),nn.addEventListener(Qe.ready,_n),nn.addEventListener(Qe.close,_n),be.push(_n),ae.debug("DRM: Session created.  SessionID = "+_n.getSessionId()),rn.trigger(Ce.KEY_SESSION_CREATED,{data:_n})},updateKeySession:function(ke,on){var en=ke.session;Be.isClearKey(qt)?en.update(new Uint8Array(on.toJWK())):en.update(new Uint8Array(on)),rn.trigger(Ce.KEY_SESSION_UPDATED)},closeKeySession:wn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:cn,reset:cn},ae=Ke.getLogger(Rt),Lt=null,qt=null,Xt=null,re=null,be=[],Be=We(an).getInstance(),Ne={handleEvent:function(ke){switch(ke.type){case Qe.needkey:if(ke.initData){var on=ArrayBuffer.isView(ke.initData)?ke.initData.buffer:ke.initData;rn.trigger(Ce.NEED_KEY,{key:new Je(on,"cenc")})}}}},Rt}$n.__dashjs_factory_name="ProtectionModel_3Feb2014";var er=dashjs.FactoryMaker.getClassFactory($n);function kn(te){te=te||{};var Rt,ae,Lt,qt,Xt,re,be,Ne,Be,an=this.context,rn=te.eventBus,Ce=te.events,Ke=te.debug,Qe=te.api,cn=te.errHandler;function wn(){Lt&&on();for(var en=0;en<be.length;en++)He(be[en]);rn.trigger(Ce.TEARDOWN_COMPLETE)}function He(en){try{Lt[Qe.cancelKeyRequest](qt.systemString,en.sessionId)}catch(nn){rn.trigger(Ce.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+en.sessionId+") "+nn.message})}}function ke(en,nn){if(nn&&en){for(var _n=en.length,Rn=0;Rn<_n;Rn++)if(en[Rn].sessionId==nn)return en[Rn];return null}return null}function on(){Lt.removeEventListener(Qe.keyerror,Be),Lt.removeEventListener(Qe.needkey,Be),Lt.removeEventListener(Qe.keymessage,Be),Lt.removeEventListener(Qe.keyadded,Be)}return Rt={getAllInitData:function(){for(var en=[],nn=0;nn<re.length;nn++)en.push(re[nn].initData);for(var _n=0;_n<be.length;_n++)en.push(be[_n].initData);return en},getSessions:function(){return be.concat(re)},requestKeySystemAccess:function(en){return new Promise(function(nn,_n){var Rn=Lt;Rn||(Rn=document.createElement("video"));for(var Hn=!1,Yn=0;Yn<en.length;Yn++)for(var lr=en[Yn].ks.systemString,mr=en[Yn].configs,nr=null,ir=0;ir<mr.length;ir++){var Wn=mr[ir].videoCapabilities;if(Wn&&Wn.length!==0){nr=[];for(var sr=0;sr<Wn.length;sr++)Rn.canPlayType(Wn[sr].contentType,lr)!==""&&nr.push(Wn[sr])}if(nr&&(!nr||nr.length!==0)){Hn=!0;var pr=new v(null,nr),Ir=Xt.getKeySystemBySystemString(lr),_r=new Pn(Ir,pr);rn.trigger(Ce.KEY_SYSTEM_ACCESS_COMPLETE,{data:_r}),nn({data:_r});break}}if(!Hn){var rr="Key system access denied! -- No valid audio/video content configurations detected!";rn.trigger(Ce.KEY_SYSTEM_ACCESS_COMPLETE,{error:rr}),_n({error:rr})}})},selectKeySystem:function(en){return qt=en.keySystem,Promise.resolve(qt)},setMediaElement:function(en){if(Lt!==en){if(Lt){on();for(var nn=0;nn<be.length;nn++)He(be[nn]);be=[]}(Lt=en)&&(Lt.addEventListener(Qe.keyerror,Be),Lt.addEventListener(Qe.needkey,Be),Lt.addEventListener(Qe.keymessage,Be),Lt.addEventListener(Qe.keyadded,Be),rn.trigger(Ce.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(en){if(!qt)throw new Error("Can not create sessions until you have selected a key system");if(Ne||be.length===0){var nn={sessionId:null,keyId:en.keyId,initData:en.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return re.push(nn),Lt[Qe.generateKeyRequest](qt.systemString,new Uint8Array(en.initData)),nn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(en,nn){var _n=en.sessionId;if(Xt.isClearKey(qt))for(var Rn=0;Rn<nn.keyPairs.length;Rn++)Lt[Qe.addKey](qt.systemString,nn.keyPairs[Rn].key,nn.keyPairs[Rn].keyID,_n);else Lt[Qe.addKey](qt.systemString,new Uint8Array(nn),new Uint8Array(en.initData),_n);rn.trigger(Ce.KEY_SESSION_UPDATED)},closeKeySession:He,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:wn,reset:wn},ae=Ke.getLogger(Rt),Lt=null,qt=null,re=[],be=[],Xt=We(an).getInstance(),Be={handleEvent:function(en){var nn=null;switch(en.type){case Qe.needkey:var _n=ArrayBuffer.isView(en.initData)?en.initData.buffer:en.initData;rn.trigger(Ce.NEED_KEY,{key:new Je(_n,"cenc")});break;case Qe.keyerror:if((nn=ke(be,en.sessionId))||(nn=ke(re,en.sessionId)),nn){var Rn=S.MEDIA_KEYERR_CODE,Hn="";switch(en.errorCode.code){case 1:Rn=S.MEDIA_KEYERR_UNKNOWN_CODE,Hn+="MEDIA_KEYERR_UNKNOWN - "+S.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:Rn=S.MEDIA_KEYERR_CLIENT_CODE,Hn+="MEDIA_KEYERR_CLIENT - "+S.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:Rn=S.MEDIA_KEYERR_SERVICE_CODE,Hn+="MEDIA_KEYERR_SERVICE - "+S.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:Rn=S.MEDIA_KEYERR_OUTPUT_CODE,Hn+="MEDIA_KEYERR_OUTPUT - "+S.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:Rn=S.MEDIA_KEYERR_HARDWARECHANGE_CODE,Hn+="MEDIA_KEYERR_HARDWARECHANGE - "+S.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:Rn=S.MEDIA_KEYERR_DOMAIN_CODE,Hn+="MEDIA_KEYERR_DOMAIN - "+S.MEDIA_KEYERR_DOMAIN_MESSAGE}Hn+="  System Code = "+en.systemCode,rn.trigger(Ce.KEY_ERROR,{error:new T.a(Rn,Hn,nn)})}else ae.error("No session token found for key error");break;case Qe.keyadded:(nn=ke(be,en.sessionId))||(nn=ke(re,en.sessionId)),nn?(ae.debug("DRM: Key added."),rn.trigger(Ce.KEY_ADDED,{data:nn})):ae.debug("No session token found for key added");break;case Qe.keymessage:if((Ne=en.sessionId!==null&&en.sessionId!==void 0)?!(nn=ke(be,en.sessionId))&&re.length>0&&(nn=re.shift(),be.push(nn),nn.sessionId=en.sessionId,rn.trigger(Ce.KEY_SESSION_CREATED,{data:nn})):re.length>0&&(nn=re.shift(),be.push(nn),re.length!==0&&cn.error(new T.a(S.MEDIA_KEY_MESSAGE_ERROR_CODE,S.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),nn){var Yn=ArrayBuffer.isView(en.message)?en.message.buffer:en.message;nn.keyMessage=Yn,rn.trigger(Ce.INTERNAL_KEY_MESSAGE,{data:new Tn(nn,Yn,en.defaultURL)})}else ae.warn("No session token found for key message")}}},Rt}kn.__dashjs_factory_name="ProtectionModel_01b";var Cn=dashjs.FactoryMaker.getClassFactory(kn),ur=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],wr=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function br(){var te,Rt=this.context;function ae(Lt,qt){for(var Xt=0;Xt<qt.length;Xt++){var re=qt[Xt];if(typeof Lt[re[Object.keys(re)[0]]]=="function")return re}return null}return te={createProtectionSystem:function(Lt){var qt=null,Xt=We(Rt).getInstance();Xt.setConfig({debug:Lt.debug,BASE64:Lt.BASE64,settings:Lt.settings}),Xt.initialize();var re=function(be){var Ne=be.debug,Be=Ne.getLogger(te),an=be.eventBus,rn=be.errHandler,Ce=be.videoModel?be.videoModel.getElement():null;return Ce&&Ce.onencrypted===void 0||Ce&&Ce.mediaKeys===void 0?ae(Ce,wr)?(Be.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),er(Rt).create({debug:Ne,eventBus:an,events:be.events,api:ae(Ce,wr)})):ae(Ce,ur)?(Be.info("EME detected on this user agent! (ProtectionModel_01b)"),Cn(Rt).create({debug:Ne,eventBus:an,errHandler:rn,events:be.events,api:ae(Ce,ur)})):(Be.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Be.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Bn(Rt).create({debug:Ne,eventBus:an,events:be.events}))}(Lt);return!qt&&re&&(qt=ft(Rt).create({protectionModel:re,protectionKeyController:Xt,eventBus:Lt.eventBus,debug:Lt.debug,events:Lt.events,BASE64:Lt.BASE64,constants:Lt.constants,cmcdModel:Lt.cmcdModel,customParametersModel:Lt.customParametersModel,settings:Lt.settings}),Lt.capabilities.setEncryptedMediaSupported(!0)),qt}}}br.__dashjs_factory_name="Protection";var dr=dashjs.FactoryMaker.getClassFactory(br);dr.events=Ut,dr.errors=S,dashjs.FactoryMaker.updateClassFactory(br.__dashjs_factory_name,dr),At.default=dr},function(Ee,At,x){function w(Ct){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt})(Ct)}function b(Ct,Nt){for(var Ot=0;Ot<Nt.length;Ot++){var Gt=Nt[Ot];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Ct,(ve=Gt.key,Ae=void 0,Ae=function(ie,Zt){if(w(ie)!=="object"||ie===null)return ie;var ee=ie[Symbol.toPrimitive];if(ee!==void 0){var we=ee.call(ie,Zt||"default");if(w(we)!=="object")return we;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Zt==="string"?String:Number)(ie)}(ve,"string"),w(Ae)==="symbol"?Ae:String(Ae)),Gt)}var ve,Ae}function h(Ct,Nt,Ot){return Nt&&b(Ct.prototype,Nt),Ot&&b(Ct,Ot),Object.defineProperty(Ct,"prototype",{writable:!1}),Ct}x.r(At);var c=h(function Ct(){(function(Nt,Ot){if(!(Nt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,Ct),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null});c.SSL_CONNECTION_FAILED_PREFIX="SSL",c.DNS_RESOLUTION_FAILED="C00",c.HOST_UNREACHABLE="C01",c.CONNECTION_REFUSED="C02",c.CONNECTION_ERROR="C03",c.CORRUPT_MEDIA_ISOBMFF="M00",c.CORRUPT_MEDIA_OTHER="M01",c.BASE_URL_CHANGED="F00",c.BECAME_REPORTER="S00";var n=c,d=x(19);function t(Ct){var Nt,Ot,Gt=(Ct=Ct||{}).eventBus,ve=Ct.dashMetrics,Ae=Ct.metricsConstants,ie=Ct.events;function Zt(N){var C=new n;if(Ot){for(var dt in N)N.hasOwnProperty(dt)&&(C[dt]=N[dt]);C.mpdurl||(C.mpdurl=Ot.originalUrl||Ot.url),C.terror||(C.terror=new Date),ve.addDVBErrors(C)}}function ee(N){N.error||(Ot=N.manifest)}function we(N){Zt({errorcode:n.BASE_URL_CHANGED,servicelocation:N.entry})}function Fe(){Zt({errorcode:n.BECAME_REPORTER})}function We(N){switch(N.metric){case Ae.HTTP_REQUEST:((C=N.value).responsecode===0||C.responsecode==null||C.responsecode>=400||C.responsecode<100||C.responsecode>=600)&&Zt({errorcode:C.responsecode||n.CONNECTION_ERROR,url:C.url,terror:C.tresponse,servicelocation:C._serviceLocation})}var C}function Ve(N){var C;switch(N.error?N.error.code:0){case MediaError.MEDIA_ERR_NETWORK:C=n.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:C=n.CORRUPT_MEDIA_OTHER;break;default:return}Zt({errorcode:C})}return Nt={initialise:function(){Gt.on(ie.MANIFEST_UPDATED,ee,Nt),Gt.on(ie.SERVICE_LOCATION_BLACKLIST_CHANGED,we,Nt),Gt.on(ie.METRIC_ADDED,We,Nt),Gt.on(ie.METRIC_UPDATED,We,Nt),Gt.on(ie.PLAYBACK_ERROR,Ve,Nt),Gt.on(d.a.BECAME_REPORTING_PLAYER,Fe,Nt)},reset:function(){Gt.off(ie.MANIFEST_UPDATED,ee,Nt),Gt.off(ie.SERVICE_LOCATION_BLACKLIST_CHANGED,we,Nt),Gt.off(ie.METRIC_ADDED,We,Nt),Gt.off(ie.METRIC_UPDATED,We,Nt),Gt.off(ie.PLAYBACK_ERROR,Ve,Nt),Gt.off(d.a.BECAME_REPORTING_PLAYER,Fe,Nt)}}}t.__dashjs_factory_name="DVBErrorsTranslator";var r=dashjs.FactoryMaker.getSingletonFactory(t),f=x(52);function o(Ct){Ct=Ct||{};var Nt,Ot,Gt=!1,ve=this.context,Ae=Ct.mediaElement;return Nt={initialize:function(ie){ie&&ie.length&&(ie.forEach(function(Zt){var ee=Zt.starttime,we=ee+Zt.duration;Ot.add(ee,we)}),Gt=!!ie[0]._useWallClockTime)},reset:function(){Ot.clear()},isEnabled:function(){var ie,Zt=Ot.length;if(!Zt)return!0;ie=Gt?new Date().getTime()/1e3:Ae.currentTime;for(var ee=0;ee<Zt;ee+=1){var we=Ot.start(ee),Fe=Ot.end(ee);if(we<=ie&&ie<Fe)return!0}return!1}},Ot=Object(f.a)(ve).create(),Nt}o.__dashjs_factory_name="RangeController";var g=dashjs.FactoryMaker.getClassFactory(o);function v(){return{serialise:function Ct(Nt){var Ot,Gt,ve=[],Ae=[];for(Ot in Nt)if(Nt.hasOwnProperty(Ot)&&Ot.indexOf("_")!==0){if((Gt=Nt[Ot])==null&&(Gt=""),Array.isArray(Gt)){if(!Gt.length)continue;Ae=[],Gt.forEach(function(ie){var Zt=Object.prototype.toString.call(ie).slice(8,-1)!=="Object";Ae.push(Zt?ie:Ct(ie))}),Gt=Ae.map(encodeURIComponent).join(",")}else typeof Gt=="string"?Gt=encodeURIComponent(Gt):Gt instanceof Date?Gt=Gt.toISOString():typeof Gt=="number"&&(Gt=Math.round(Gt));ve.push(Ot+"="+Gt)}return ve.join("&")}}}v.__dashjs_factory_name="MetricSerialiser";var P=dashjs.FactoryMaker.getSingletonFactory(v);function B(){var Ct,Nt,Ot,Gt=window.crypto||window.msCrypto,ve=Uint32Array,Ae=Math.pow(2,8*ve.BYTES_PER_ELEMENT)-1;function ie(){Gt&&(Ct||(Ct=new ve(10)),Gt.getRandomValues(Ct),Nt=0)}return Ot={random:function(Zt,ee){var we;return Zt||(Zt=0),ee||(ee=1),Gt?(Nt===Ct.length&&ie(),we=Ct[Nt]/Ae,Nt+=1):we=Math.random(),we*(ee-Zt)+Zt}},ie(),Ot}B.__dashjs_factory_name="RNG";var H=dashjs.FactoryMaker.getSingletonFactory(B),D=x(32);function y(Ct){var Nt;Ct=Ct||{};var Ot,Gt,ve,Ae,ie,Zt,ee,we=this.context,Fe=[],We=Ct.metricsConstants;function Ve(){Ae=!1,ie=!1,Zt=null,ee=null}return Nt={report:function(N,C){Array.isArray(C)||(C=[C]),ie&&ee.isEnabled()&&C.forEach(function(dt){var Bt=Ot.serialise(dt);N!==We.DVB_ERRORS&&(Bt="metricname=".concat(N,"&").concat(Bt)),function(Ut,xt,de){var Ge=new XMLHttpRequest;Ge.withCredentials=Gt.getXHRWithCredentialsForType(We.HTTP_REQUEST_DVB_REPORTING_TYPE);var Je=function(){var Ue=Fe.indexOf(Ge);Ue!==-1&&(Fe.splice(Ue,1),Ge.status>=200&&Ge.status<300?xt&&xt():de&&de())};Fe.push(Ge);try{Ge.open("GET",Ut),Ge.onloadend=Je,Ge.onerror=Je,Ge.send()}catch{Ge.onerror()}}(Bt="".concat(Zt,"?").concat(Bt),null,function(){ie=!1})})},initialize:function(N,C){var dt;if(ee=C,!(Zt=N.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");Ae||((dt=N.dvb_probability)&&(dt===1e3||dt/1e3>=ve.random())&&(ie=!0),Ae=!0)},reset:function(){Ve()}},Ot=P(we).getInstance(),ve=H(we).getInstance(),Gt=Object(D.a)(we).getInstance(),Ve(),Nt}y.__dashjs_factory_name="DVBReporting";var S=dashjs.FactoryMaker.getClassFactory(y);function T(Ct){Ct=Ct||{};var Nt,Ot={"urn:dvb:dash:reporting:2014":S},Gt=this.context,ve=Ct.debug?Ct.debug.getLogger(Nt):{},Ae=Ct.metricsConstants,ie=Ct.mediaPlayerModel||{};return Nt={create:function(Zt,ee){var we;try{(we=Ot[Zt.schemeIdUri](Gt).create({metricsConstants:Ae,mediaPlayerModel:ie})).initialize(Zt,ee)}catch(Fe){we=null,ve.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(Zt.schemeIdUri," (").concat(Fe.message,")"))}return we},register:function(Zt,ee){Ot[Zt]=ee},unregister:function(Zt){delete Ot[Zt]}}}T.__dashjs_factory_name="ReportingFactory";var I=dashjs.FactoryMaker.getSingletonFactory(T);function L(Ct){var Nt=[],Ot=I(this.context).getInstance(Ct);return{initialize:function(Gt,ve){Gt.some(function(Ae){var ie=Ot.create(Ae,ve);if(ie)return Nt.push(ie),!0})},reset:function(){Nt.forEach(function(Gt){return Gt.reset()}),Nt=[]},report:function(Gt,ve){Nt.forEach(function(Ae){return Ae.report(Gt,ve)})}}}L.__dashjs_factory_name="ReportingController";var J=dashjs.FactoryMaker.getClassFactory(L);function nt(){return{reconstructFullMetricName:function(Ct,Nt,Ot){var Gt=Ct;return Nt&&(Gt+="("+Nt,Ot&&Ot.length&&(Gt+=","+Ot),Gt+=")"),Gt},validateN:function(Ct){if(!Ct)throw new Error("missing n");if(isNaN(Ct))throw new Error("n is NaN");if(Ct<0)throw new Error("n must be positive");return Ct}}}nt.__dashjs_factory_name="HandlerHelpers";var j=dashjs.FactoryMaker.getSingletonFactory(nt);function O(Ct){var Nt,Ot,Gt,ve,Ae;Ct=Ct||{};var ie=this.context,Zt=j(ie).getInstance(),ee=[],we=Ct.metricsConstants;function Fe(){var We=function(){try{return Object.keys(ee).map(function(Ve){return ee[Ve]}).reduce(function(Ve,N){return Ve.level<N.level?Ve:N})}catch{return}}();We&&Ae!==We.t&&(Ae=We.t,Nt.report(Gt,We))}return{initialize:function(We,Ve,N){Ve&&(Ot=Zt.validateN(N),Nt=Ve,Gt=Zt.reconstructFullMetricName(We,N),ve=setInterval(Fe,Ot))},reset:function(){clearInterval(ve),ve=null,Ot=0,Nt=null,Ae=null},handleNewMetric:function(We,Ve,N){We===we.BUFFER_LEVEL&&(ee[N]=Ve)}}}O.__dashjs_factory_name="BufferLevelHandler";var at=dashjs.FactoryMaker.getClassFactory(O),X=dashjs.FactoryMaker.getClassFactory(function(Ct){var Nt,Ot=(Ct=Ct||{}).eventBus,Gt=Ct.metricsConstants;function ve(){Ot.off(d.a.METRICS_INITIALISATION_COMPLETE,ve,this),Ot.trigger(d.a.BECAME_REPORTING_PLAYER)}return{initialize:function(Ae,ie){ie&&(Nt=ie,Ot.on(d.a.METRICS_INITIALISATION_COMPLETE,ve,this))},reset:function(){Nt=null},handleNewMetric:function(Ae,ie){Ae===Gt.DVB_ERRORS&&Nt&&Nt.report(Ae,ie)}}});function z(Ct){var Nt,Ot,Gt,ve,Ae;Ct=Ct||{};var ie=[],Zt=j(this.context).getInstance(),ee=Ct.metricsConstants;function we(){var Fe=ie;Fe.length&&Nt&&Nt.report(ve,Fe),ie=[]}return{initialize:function(Fe,We,Ve,N){We&&(Ot=Zt.validateN(Ve),Nt=We,N&&N.length&&(Gt=N),ve=Zt.reconstructFullMetricName(Fe,Ve,N),Ae=setInterval(we,Ot))},reset:function(){clearInterval(Ae),Ae=null,Ot=null,Gt=null,ie=[],Nt=null},handleNewMetric:function(Fe,We){Fe===ee.HTTP_REQUEST&&(Gt&&Gt!==We.type||ie.push(We))}}}z.__dashjs_factory_name="HttpListHandler";var vt=dashjs.FactoryMaker.getClassFactory(z);function Mt(){var Ct,Nt;return{initialize:function(Ot,Gt){Ct=Ot,Nt=Gt},reset:function(){Nt=null,Ct=void 0},handleNewMetric:function(Ot,Gt){Ot===Ct&&Nt&&Nt.report(Ct,Gt)}}}Mt.__dashjs_factory_name="GenericMetricHandler";var Pt=dashjs.FactoryMaker.getClassFactory(Mt);function ge(Ct){var Nt,Ot=(Ct=Ct||{}).debug?Ct.debug.getLogger(Nt):{},Gt=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,ve=this.context,Ae={BufferLevel:at,DVBErrors:X,HttpList:vt,PlayList:Pt,RepSwitchList:Pt,TcpList:Pt};return Nt={create:function(ie,Zt){var ee,we=ie.match(Gt);if(we){try{(ee=Ae[we[1]](ve).create({eventBus:Ct.eventBus,metricsConstants:Ct.metricsConstants})).initialize(we[1],Zt,we[3],we[5])}catch(Fe){ee=null,Ot.error("MetricsHandlerFactory: Could not create handler for type ".concat(we[1]," with args ").concat(we[3],", ").concat(we[5]," (").concat(Fe.message,")"))}return ee}},register:function(ie,Zt){Ae[ie]=Zt},unregister:function(ie){delete Ae[ie]}}}ge.__dashjs_factory_name="MetricsHandlerFactory";var Q=dashjs.FactoryMaker.getSingletonFactory(ge);function ft(Ct){Ct=Ct||{};var Nt,Ot=[],Gt=this.context,ve=Ct.eventBus,Ae=Ct.events,ie=Q(Gt).getInstance({debug:Ct.debug,eventBus:Ct.eventBus,metricsConstants:Ct.metricsConstants});function Zt(ee){Ot.forEach(function(we){we.handleNewMetric(ee.metric,ee.value,ee.mediaType)})}return Nt={initialize:function(ee,we){ee.split(",").forEach(function(Fe,We,Ve){var N;if(Fe.indexOf("(")!==-1&&Fe.indexOf(")")===-1){var C=Ve[We+1];C&&C.indexOf("(")===-1&&C.indexOf(")")!==-1&&(Fe+=","+C,delete Ve[We+1])}(N=ie.create(Fe,we))&&Ot.push(N)}),ve.on(Ae.METRIC_ADDED,Zt,Nt),ve.on(Ae.METRIC_UPDATED,Zt,Nt)},reset:function(){ve.off(Ae.METRIC_ADDED,Zt,Nt),ve.off(Ae.METRIC_UPDATED,Zt,Nt),Ot.forEach(function(ee){return ee.reset()}),Ot=[]}}}ft.__dashjs_factory_name="MetricsHandlersController";var Ht=dashjs.FactoryMaker.getClassFactory(ft);function _e(Ct){var Nt,Ot,Gt;Ct=Ct||{};var ve=this.context;function Ae(){Nt&&Nt.reset(),Ot&&Ot.reset(),Gt&&Gt.reset()}return{initialize:function(ie){try{(Gt=g(ve).create({mediaElement:Ct.mediaElement})).initialize(ie.Range),(Ot=J(ve).create({debug:Ct.debug,metricsConstants:Ct.metricsConstants,mediaPlayerModel:Ct.mediaPlayerModel})).initialize(ie.Reporting,Gt),(Nt=Ht(ve).create({debug:Ct.debug,eventBus:Ct.eventBus,metricsConstants:Ct.metricsConstants,events:Ct.events})).initialize(ie.metrics,Ot)}catch(Zt){throw Ae(),Zt}},reset:Ae}}_e.__dashjs_factory_name="MetricsController";var Jt=dashjs.FactoryMaker.getClassFactory(_e);function Te(Ct){return(Te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt})(Ct)}function It(Ct,Nt){for(var Ot=0;Ot<Nt.length;Ot++){var Gt=Nt[Ot];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Ct,(ve=Gt.key,Ae=void 0,Ae=function(ie,Zt){if(Te(ie)!=="object"||ie===null)return ie;var ee=ie[Symbol.toPrimitive];if(ee!==void 0){var we=ee.call(ie,Zt||"default");if(Te(we)!=="object")return we;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Zt==="string"?String:Number)(ie)}(ve,"string"),Te(Ae)==="symbol"?Ae:String(Ae)),Gt)}var ve,Ae}function Wt(Ct,Nt,Ot){return Nt&&It(Ct.prototype,Nt),Ot&&It(Ct,Ot),Object.defineProperty(Ct,"prototype",{writable:!1}),Ct}var Yt=Wt(function Ct(){(function(Nt,Ot){if(!(Nt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,Ct),this.metrics="",this.Range=[],this.Reporting=[]});function e(Ct){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt})(Ct)}function u(Ct,Nt){for(var Ot=0;Ot<Nt.length;Ot++){var Gt=Nt[Ot];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Ct,(ve=Gt.key,Ae=void 0,Ae=function(ie,Zt){if(e(ie)!=="object"||ie===null)return ie;var ee=ie[Symbol.toPrimitive];if(ee!==void 0){var we=ee.call(ie,Zt||"default");if(e(we)!=="object")return we;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Zt==="string"?String:Number)(ie)}(ve,"string"),e(Ae)==="symbol"?Ae:String(Ae)),Gt)}var ve,Ae}function l(Ct,Nt,Ot){return Nt&&u(Ct.prototype,Nt),Ot&&u(Ct,Ot),Object.defineProperty(Ct,"prototype",{writable:!1}),Ct}var G=l(function Ct(){(function(Nt,Ot){if(!(Nt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,Ct),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1});function A(Ct){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt})(Ct)}function F(Ct,Nt){for(var Ot=0;Ot<Nt.length;Ot++){var Gt=Nt[Ot];Gt.enumerable=Gt.enumerable||!1,Gt.configurable=!0,"value"in Gt&&(Gt.writable=!0),Object.defineProperty(Ct,(ve=Gt.key,Ae=void 0,Ae=function(ie,Zt){if(A(ie)!=="object"||ie===null)return ie;var ee=ie[Symbol.toPrimitive];if(ee!==void 0){var we=ee.call(ie,Zt||"default");if(A(we)!=="object")return we;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Zt==="string"?String:Number)(ie)}(ve,"string"),A(Ae)==="symbol"?Ae:String(Ae)),Gt)}var ve,Ae}function K(Ct,Nt,Ot){return Nt&&F(Ct.prototype,Nt),Ot&&F(Ct,Ot),Object.defineProperty(Ct,"prototype",{writable:!1}),Ct}var Z=K(function Ct(){(function(Nt,Ot){if(!(Nt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,Ct),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3});function bt(Ct){var Nt=(Ct=Ct||{}).adapter,Ot=Ct.constants;return{getMetrics:function(Gt){var ve=[];return Gt&&Gt.Metrics_asArray&&Gt.Metrics_asArray.forEach(function(Ae){var ie=new Yt,Zt=Nt.getIsDynamic(Gt);Ae.hasOwnProperty("metrics")&&(ie.metrics=Ae.metrics,Ae.Range_asArray&&Ae.Range_asArray.forEach(function(ee){var we=new G;we.starttime=function(Fe,We,Ve){var N,C,dt=0;return We?dt=Nt.getAvailabilityStartTime(Fe)/1e3:(N=Nt.getRegularPeriods(Fe)).length&&(dt=N[0].start),C=dt,Ve&&Ve.hasOwnProperty(Ot.START_TIME)&&(C+=Ve.starttime),C}(Gt,Zt,ee),ee.hasOwnProperty("duration")?we.duration=ee.duration:we.duration=Nt.getDuration(Gt),we._useWallClockTime=Zt,ie.Range.push(we)}),Ae.Reporting_asArray&&(Ae.Reporting_asArray.forEach(function(ee){var we=new Z;ee.hasOwnProperty(Ot.SCHEME_ID_URI)&&(we.schemeIdUri=ee.schemeIdUri,ee.hasOwnProperty("value")&&(we.value=ee.value),ee.hasOwnProperty(Ot.DVB_REPORTING_URL)&&(we.dvb_reportingUrl=ee[Ot.DVB_REPORTING_URL]),ee.hasOwnProperty(Ot.DVB_PROBABILITY)&&(we.dvb_probability=ee[Ot.DVB_PROBABILITY]),ie.Reporting.push(we))}),ve.push(ie)))}),ve}}}bt.__dashjs_factory_name="ManifestParsing";var it=dashjs.FactoryMaker.getSingletonFactory(bt);function ct(Ct){var Nt;Ct=Ct||{};var Ot={},Gt=this.context,ve=Ct.eventBus,Ae=Ct.events;function ie(ee){if(!ee.error){var we=Object.keys(Ot);it(Gt).getInstance({adapter:Ct.adapter,constants:Ct.constants}).getMetrics(ee.manifest).forEach(function(Fe){var We=JSON.stringify(Fe);if(Ot.hasOwnProperty(We))we.splice(We,1);else try{var Ve=Jt(Gt).create(Ct);Ve.initialize(Fe),Ot[We]=Ve}catch{}}),we.forEach(function(Fe){Ot[Fe].reset(),delete Ot[Fe]}),ve.trigger(d.a.METRICS_INITIALISATION_COMPLETE)}}function Zt(){Object.keys(Ot).forEach(function(ee){Ot[ee].reset()}),Ot={}}return Nt={reset:function(){ve.off(Ae.MANIFEST_UPDATED,ie,Nt),ve.off(Ae.STREAM_TEARDOWN_COMPLETE,Zt,Nt)}},ve.on(Ae.MANIFEST_UPDATED,ie,Nt),ve.on(Ae.STREAM_TEARDOWN_COMPLETE,Zt,Nt),Nt}ct.__dashjs_factory_name="MetricsCollectionController";var jt=dashjs.FactoryMaker.getClassFactory(ct);function me(){var Ct=this.context;return{createMetricsReporting:function(Nt){return r(Ct).getInstance({eventBus:Nt.eventBus,dashMetrics:Nt.dashMetrics,metricsConstants:Nt.metricsConstants,events:Nt.events}).initialise(),jt(Ct).create(Nt)},getReportingFactory:function(){return I(Ct).getInstance()},getMetricsHandlerFactory:function(){return Q(Ct).getInstance()}}}me.__dashjs_factory_name="MetricsReporting";var ue=dashjs.FactoryMaker.getClassFactory(me);ue.events=d.a,dashjs.FactoryMaker.updateClassFactory(me.__dashjs_factory_name,ue),At.default=ue},function(Ee,At,x){x.r(At),function(w){var b=x(59);x.d(At,"MediaPlayer",function(){return b.a});var h=x(3);x.d(At,"FactoryMaker",function(){return h.a});var c=x(6);x.d(At,"Debug",function(){return c.a});var n=x(60),d=(x(114),typeof window<"u"&&window||w),t=d.dashjs;t||(t=d.dashjs={}),t.MediaPlayer=b.a,t.FactoryMaker=h.a,t.Debug=c.a,t.Version=Object(n.a)(),At.default=t}.call(this,x(24))},function(Ee,At,x){(function(w,b,h,c){w.generateISD=function(o,g,v){var P=new t(o),B={},H={},D={},y=o.head.styling.initials[h.byName.showBackground.qname],S=o.head.styling.initials[h.byName.backgroundColor.qname];for(var T in o.head.layout.regions)if(o.head.layout.regions.hasOwnProperty(T)){var I=o.head.layout.regions[T],L=I.styleAttrs[h.byName.showBackground.qname]||y,J=I.styleAttrs[h.byName.backgroundColor.qname]||S;D[I.id]=(L==="always"||L===void 0)&&J!==void 0&&!(g<I.begin||g>=I.end)}for(var nt in o.body&&o.body.regionID&&(D[o.body.regionID]=!0),H=o.body!==null?function O(at,X){if(X.contents){var z={};for(var vt in X)X.hasOwnProperty(vt)&&(z[vt]=X[vt]);return z.contents=[],X.contents.filter(function(Mt){return!(at<Mt.begin||at>=Mt.end)}).forEach(function(Mt){var Pt=O(at,Mt);Pt.regionID&&(D[Pt.regionID]=!0),Pt!==null&&z.contents.push(Pt)}),z}return X}(g,o.body):null,D[""]!==void 0&&(D[""]=!0),D)if(D[nt]){var j=d(o,g,o.head.layout.regions[nt],H,null,"",o.head.layout.regions[nt],v,B);j!==null&&P.contents.push(j.element)}return P};var n=[h.byName.color.qname,h.byName.textCombine.qname,h.byName.textDecoration.qname,h.byName.textEmphasis.qname,h.byName.textOutline.qname,h.byName.textShadow.qname];function d(o,g,v,P,B,H,D,y,S){if(g<D.begin||g>=D.end)return null;var T="regionID"in D&&D.regionID!==""?D.regionID:H;if(B!==null&&T!==v.id&&(!("contents"in D)||"contents"in D&&D.contents.length===0||T!==""))return null;var I=new r(D);if("sets"in D)for(var L=0;L<D.sets.length;L++)g<D.sets[L].begin||g>=D.sets[L].end||(I.styleAttrs[D.sets[L].qname]=D.sets[L].value);var J={};for(var nt in I.styleAttrs)if(I.styleAttrs.hasOwnProperty(nt)&&(J[nt]=!0,I.kind==="region"&&nt===h.byName.writingMode.qname&&!(h.byName.direction.qname in I.styleAttrs))){var j=I.styleAttrs[nt];j==="lrtb"||j==="lr"?I.styleAttrs[h.byName.direction.qname]="ltr":j!=="rltb"&&j!=="rl"||(I.styleAttrs[h.byName.direction.qname]="rtl")}if(B!==null)for(var O=0;O<h.all.length;O++){var at=h.all[O];if(at.qname===h.byName.textDecoration.qname){var X=B.styleAttrs[at.qname],z=I.styleAttrs[at.qname],vt=[];z===void 0?vt=X:z.indexOf("none")===-1?((z.indexOf("noUnderline")===-1&&X.indexOf("underline")!==-1||z.indexOf("underline")!==-1)&&vt.push("underline"),(z.indexOf("noLineThrough")===-1&&X.indexOf("lineThrough")!==-1||z.indexOf("lineThrough")!==-1)&&vt.push("lineThrough"),(z.indexOf("noOverline")===-1&&X.indexOf("overline")!==-1||z.indexOf("overline")!==-1)&&vt.push("overline")):vt.push("none"),I.styleAttrs[at.qname]=vt}else if(at.qname!==h.byName.fontSize.qname||at.qname in I.styleAttrs||I.kind!=="span"||I.styleAttrs[h.byName.ruby.qname]!=="textContainer")if(at.qname!==h.byName.fontSize.qname||at.qname in I.styleAttrs||I.kind!=="span"||I.styleAttrs[h.byName.ruby.qname]!=="text")at.inherit&&at.qname in B.styleAttrs&&!(at.qname in I.styleAttrs)&&(I.styleAttrs[at.qname]=B.styleAttrs[at.qname]);else{var Mt=B.styleAttrs[h.byName.fontSize.qname];B.styleAttrs[h.byName.ruby.qname]==="textContainer"?I.styleAttrs[at.qname]=Mt:I.styleAttrs[at.qname]=new c.ComputedLength(.5*Mt.rw,.5*Mt.rh)}else{var Pt=B.styleAttrs[h.byName.fontSize.qname];I.styleAttrs[at.qname]=new c.ComputedLength(.5*Pt.rw,.5*Pt.rh)}}for(var ge=0;ge<h.all.length;ge++){var Q=h.all[ge];if(!(Q.qname in I.styleAttrs)&&!(Q.qname===h.byName.position.qname&&h.byName.origin.qname in I.styleAttrs||Q.qname===h.byName.origin.qname&&h.byName.position.qname in I.styleAttrs)){var ft=o.head.styling.initials[Q.qname]||Q.initial;if(ft!==null&&(I.kind==="region"||Q.inherit===!1&&ft!==null)){var Ht=Q.parse(ft);Ht!==null?(I.styleAttrs[Q.qname]=Ht,J[Q.qname]=!0):f(y,"Invalid initial value for '"+Q.qname+"' on element '"+I.kind)}}}for(var _e=0;_e<h.all.length;_e++){var Jt=h.all[_e];if(Jt.qname in J&&Jt.compute!==null){var Te=Jt.compute(o,B,I,I.styleAttrs[Jt.qname],S);Te!==null?I.styleAttrs[Jt.qname]=Te:(I.styleAttrs[Jt.qname]=Jt.compute(o,B,I,Jt.parse(Jt.initial),S),f(y,"Style '"+Jt.qname+"' on element '"+I.kind+"' cannot be computed"))}}if(I.styleAttrs[h.byName.display.qname]==="none")return null;var It=null;B===null?It=P===null?[]:[P]:"contents"in D&&(It=D.contents);for(var Wt=0;It!==null&&Wt<It.length;Wt++){var Yt=d(o,g,v,P,I,T,It[Wt],y,S);Yt!==null&&I.contents.push(Yt.element)}for(var e in I.styleAttrs)if(I.styleAttrs.hasOwnProperty(e)){var u=!1;if(I.kind==="span"){var l=I.styleAttrs[h.byName.ruby.qname];(u=(l==="container"||l==="textContainer"||l==="baseContainer")&&n.indexOf(e)!==-1)||(u=l!=="container"&&e===h.byName.rubyAlign.qname),u||(u=!(l==="textContainer"||l==="text")&&e===h.byName.rubyPosition.qname)}if(!u){var G=h.byQName[e];"applies"in G&&(u=G.applies.indexOf(I.kind)===-1)}u&&delete I.styleAttrs[e]}var A=I.styleAttrs[h.byName.ruby.qname];if(I.kind==="p"||I.kind==="span"&&(A==="textContainer"||A==="text")){var F=[];(function K(Z,bt){if("contents"in Z)for(var it=0;it<Z.contents.length;it++){var ct=Z.contents[it],jt=ct.styleAttrs[h.byName.ruby.qname];(ct.kind!=="span"||jt!=="textContainer"&&jt!=="text")&&("contents"in ct?K(ct,bt):(ct.kind==="span"&&ct.text.length!==0||ct.kind==="br")&&bt.push(ct))}})(I,F),function(K){for(var Z,bt=0;bt<K.length;)if((Z=K[bt]).kind!=="br"&&Z.space!=="preserve"){var it=Z.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(it)&&(bt===0||(ct=K[bt-1]).kind==="br"||/[\r\n\t ]$/.test(ct.text))&&(it=it.substring(1)),Z.text=it,it.length===0?K.splice(bt,1):bt++}else bt++;var ct;for(bt=0;bt<K.length;bt++)(Z=K[bt]).kind!=="br"&&Z.space!=="preserve"?/[ ]$/.test(Z.text)&&(bt===K.length-1||(jt=K[bt+1]).kind==="br"||jt.space==="preserve"&&/^[\r\n]/.test(jt.text))&&(Z.text=Z.text.slice(0,-1)):bt++;var jt}(F),function K(Z){if(Z.kind==="br")return!1;if("text"in Z)return Z.text.length===0;if("contents"in Z){for(var bt=Z.contents.length;bt--;)K(Z.contents[bt])&&Z.contents.splice(bt,1);return Z.contents.length===0}}(I)}return I.kind==="div"&&h.byName.backgroundImage.qname in I.styleAttrs||I.kind==="br"||I.kind==="image"||"contents"in I&&I.contents.length>0||I.kind==="span"&&I.text!==null||I.kind==="region"&&I.styleAttrs[h.byName.showBackground.qname]==="always"?{region_id:T,element:I}:null}function t(o){this.contents=[],this.aspectRatio=o.aspectRatio,this.lang=o.lang}function r(o){for(var g in this.kind=o.kind||"region",this.lang=o.lang,o.id&&(this.id=o.id),this.styleAttrs={},o.styleAttrs)o.styleAttrs.hasOwnProperty(g)&&(this.styleAttrs[g]=o.styleAttrs[g]);"src"in o&&(this.src=o.src),"type"in o&&(this.type=o.type),"text"in o?this.text=o.text:(this.kind==="region"||"contents"in o)&&(this.contents=[]),"space"in o&&(this.space=o.space)}function f(o,g){if(o&&o.error&&o.error(g))throw g}})(At,typeof imscNames>"u"?x(55):imscNames,typeof imscStyles>"u"?x(70):imscStyles,typeof imscUtils>"u"?x(56):imscUtils)},function(Ee,At,x){(function(w,b,h,c,n){function d(e,u,l,G){var A=G&&G.timeContainer==="seq",F=0;G&&(F=A&&l?l.end:G.begin),u.begin=u.explicit_begin?u.explicit_begin+F:F;var K=u.begin,Z=null;if("sets"in u)for(var bt=0;bt<u.sets.length;bt++)d(e,u.sets[bt],Z,u),K=u.timeContainer==="seq"?u.sets[bt].end:Math.max(K,u.sets[bt].end),Z=u.sets[bt];if("contents"in u){if("contents"in u)for(var it=0;it<u.contents.length;it++)d(e,u.contents[it],Z,u),K=u.timeContainer==="seq"?u.contents[it].end:Math.max(K,u.contents[it].end),Z=u.contents[it]}else K=A?u.begin:Number.POSITIVE_INFINITY;u.explicit_end!==null&&u.explicit_dur!==null?u.end=Math.min(u.begin+u.explicit_dur,F+u.explicit_end):u.explicit_end===null&&u.explicit_dur!==null?u.end=u.begin+u.explicit_dur:u.explicit_end!==null&&u.explicit_dur===null?u.end=F+u.explicit_end:u.end=K,delete u.explicit_begin,delete u.explicit_dur,delete u.explicit_end,e._registerEvent(u)}function t(e){this.node=e}function r(){this.events=[],this.head=new f,this.body=null}function f(){this.styling=new o,this.layout=new P}function o(){this.styles={},this.initials={}}function g(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function v(){this.styleAttrs=null}function P(){this.regions={}}function B(e,u){H.call(this,"image"),this.src=e,this.type=u}function H(e){this.kind=e}function D(e){this.id=e}function y(e){this.regionID=e}function S(e){this.styleAttrs=e}function T(e){this.sets=e}function I(e){this.contents=e}function L(e,u,l){this.explicit_begin=e,this.explicit_end=u,this.explicit_dur=l}function J(){H.call(this,"body")}function nt(){H.call(this,"div")}function j(){H.call(this,"p")}function O(){H.call(this,"span")}function at(){H.call(this,"span")}function X(){H.call(this,"br")}function z(){}function vt(){}function Mt(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function Pt(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function ge(e,u){var l={};if(e!==null)for(var G in e.attributes){var A=e.attributes[G].uri+" "+e.attributes[G].local,F=c.byQName[A];if(F!==void 0){var K=F.parse(e.attributes[G].value);K!==null?(l[A]=K,F===c.byName.zIndex&&Te(u,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):It(u,"Cannot parse styling attribute "+A+" --> "+e.attributes[G].value)}}return l}function Q(e,u,l){for(var G in e.attributes)if(e.attributes[G].uri===u&&e.attributes[G].local===l)return e.attributes[G].value;return null}function ft(e,u,l){var G,A=null;return(G=/^(\d+(?:\.\d+)?)f$/.exec(l))!==null?u!==null&&(A=parseFloat(G[1])/u):(G=/^(\d+(?:\.\d+)?)t$/.exec(l))!==null?e!==null&&(A=parseFloat(G[1])/e):(G=/^(\d+(?:\.\d+)?)ms$/.exec(l))!==null?A=parseFloat(G[1])/1e3:(G=/^(\d+(?:\.\d+)?)s$/.exec(l))!==null?A=parseFloat(G[1]):(G=/^(\d+(?:\.\d+)?)h$/.exec(l))!==null?A=3600*parseFloat(G[1]):(G=/^(\d+(?:\.\d+)?)m$/.exec(l))!==null?A=60*parseFloat(G[1]):(G=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(l))!==null?A=3600*parseInt(G[1])+60*parseInt(G[2])+parseFloat(G[3]):(G=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(l))!==null&&u!==null&&(A=3600*parseInt(G[1])+60*parseInt(G[2])+parseInt(G[3])+(G[4]===null?0:parseInt(G[4])/u)),A}function Ht(e,u,l){for(;u.styleRefs.length>0;){var G=u.styleRefs.pop();G in e.styles?(Ht(e,e.styles[G],l),Jt(e.styles[G].styleAttrs,u.styleAttrs)):It(l,"Non-existant style id referenced")}}function _e(e,u,l,G){for(var A=u.length-1;A>=0;A--){var F=u[A];F in e.styles?Jt(e.styles[F].styleAttrs,l):It(G,"Non-existant style id referenced")}}function Jt(e,u){for(var l in e)e.hasOwnProperty(l)&&(l in u||(u[l]=e[l]))}function Te(e,u){if(e&&e.warn&&e.warn(u))throw u}function It(e,u){if(e&&e.error&&e.error(u))throw u}function Wt(e,u){throw e&&e.fatal&&e.fatal(u),u}function Yt(e,u){for(var l,G=0,A=e.length-1;G<=A;){var F=e[l=Math.floor((G+A)/2)];if(F<u)G=l+1;else{if(!(F>u))return{found:!0,index:l};A=l-1}}return{found:!1,index:G}}w.fromXML=function(e,u,l){var G=b.parser(!0,{xmlns:!0}),A=[],F=[],K=[],Z=0,bt=null;G.onclosetag=function(ue){if(A[0]instanceof z)bt.head!==null&&bt.head.styling!==null&&_e(bt.head.styling,A[0].styleRefs,A[0].styleAttrs,u),delete A[0].styleRefs;else if(A[0]instanceof o)for(var Ct in A[0].styles)A[0].styles.hasOwnProperty(Ct)&&Ht(A[0],A[0].styles[Ct],u);else if(A[0]instanceof j||A[0]instanceof O){if(A[0].contents.length>1){var Nt,Ot=[A[0].contents[0]];for(Nt=1;Nt<A[0].contents.length;Nt++)A[0].contents[Nt]instanceof at&&Ot[Ot.length-1]instanceof at?Ot[Ot.length-1].text+=A[0].contents[Nt].text:Ot.push(A[0].contents[Nt]);A[0].contents=Ot}A[0]instanceof O&&A[0].contents.length===1&&A[0].contents[0]instanceof at&&(A[0].text=A[0].contents[0].text,delete A[0].contents)}else A[0]instanceof t&&(A[0].node.uri===h.ns_tt&&A[0].node.local==="metadata"?Z--:Z>0&&l&&"onCloseTag"in l&&l.onCloseTag());K.shift(),F.shift(),A.shift()},G.ontext=function(ue){if(A[0]!==void 0)if(A[0]instanceof O||A[0]instanceof j){if(A[0]instanceof O){var Ct=A[0].styleAttrs[c.byName.ruby.qname];if(Ct==="container"||Ct==="textContainer"||Ct==="baseContainer")return}var Nt=new at;Nt.initFromText(bt,A[0],ue,F[0],K[0],u),A[0].contents.push(Nt)}else A[0]instanceof t&&Z>0&&l&&"onText"in l&&l.onText(ue)},G.onopentag=function(ue){var Ct=ue.attributes["xml:space"];Ct?K.unshift(Ct.value):K.length===0?K.unshift("default"):K.unshift(K[0]);var Nt=ue.attributes["xml:lang"];if(Nt?F.unshift(Nt.value):F.length===0?F.unshift(""):F.unshift(F[0]),ue.uri===h.ns_tt)if(ue.local==="tt")bt!==null&&Wt(u,"Two <tt> elements at ("+this.line+","+this.column+")"),(bt=new r).initFromNode(ue,F[0],u),A.unshift(bt);else if(ue.local==="head")A[0]instanceof r||Wt(u,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),A.unshift(bt.head);else if(ue.local==="styling")A[0]instanceof f||Wt(u,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),A.unshift(bt.head.styling);else if(ue.local==="style"){var Ot;A[0]instanceof o?((Ot=new g).initFromNode(ue,u),Ot.id?bt.head.styling.styles[Ot.id]=Ot:It(u,"<style> element missing @id attribute"),A.unshift(Ot)):A[0]instanceof z?((Ot=new g).initFromNode(ue,u),Jt(Ot.styleAttrs,A[0].styleAttrs),A.unshift(Ot)):Wt(u,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(ue.local==="initial"){var Gt;if(A[0]instanceof o){for(var ve in(Gt=new v).initFromNode(ue,u),Gt.styleAttrs)Gt.styleAttrs.hasOwnProperty(ve)&&(bt.head.styling.initials[ve]=Gt.styleAttrs[ve]);A.unshift(Gt)}else Wt(u,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(ue.local==="layout")A[0]instanceof f||Wt(u,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),A.unshift(bt.head.layout);else if(ue.local==="region"){A[0]instanceof P||Wt(u,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Ae=new z;Ae.initFromNode(bt,ue,F[0],u),!Ae.id||Ae.id in bt.head.layout.regions?It(u,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):bt.head.layout.regions[Ae.id]=Ae,A.unshift(Ae)}else if(ue.local==="body"){A[0]instanceof r||Wt(u,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),bt.body!==null&&Wt(u,"Second <body> element at "+this.line+","+this.column+")");var ie=new J;ie.initFromNode(bt,ue,F[0],u),bt.body=ie,A.unshift(ie)}else if(ue.local==="div"){A[0]instanceof nt||A[0]instanceof J||Wt(u,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Zt=new nt;Zt.initFromNode(bt,A[0],ue,F[0],u);var ee=Zt.styleAttrs[c.byName.backgroundImage.qname];ee&&(Zt.contents.push(new B(ee)),delete Zt.styleAttrs[c.byName.backgroundImage.qname]),A[0].contents.push(Zt),A.unshift(Zt)}else if(ue.local==="image"){A[0]instanceof nt||Wt(u,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var we=new B;we.initFromNode(bt,A[0],ue,F[0],u),A[0].contents.push(we),A.unshift(we)}else if(ue.local==="p"){A[0]instanceof nt||Wt(u,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Fe=new j;Fe.initFromNode(bt,A[0],ue,F[0],u),A[0].contents.push(Fe),A.unshift(Fe)}else if(ue.local==="span"){A[0]instanceof O||A[0]instanceof j||Wt(u,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var We=new O;We.initFromNode(bt,A[0],ue,F[0],K[0],u),A[0].contents.push(We),A.unshift(We)}else if(ue.local==="br"){A[0]instanceof O||A[0]instanceof j||Wt(u,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Ve=new X;Ve.initFromNode(bt,A[0],ue,F[0],u),A[0].contents.push(Ve),A.unshift(Ve)}else if(ue.local==="set"){A[0]instanceof O||A[0]instanceof j||A[0]instanceof nt||A[0]instanceof J||A[0]instanceof z||A[0]instanceof X||Wt(u,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var N=new vt;N.initFromNode(bt,A[0],ue,u),A[0].sets.push(N),A.unshift(N)}else A.unshift(new t(ue));else A.unshift(new t(ue));if(A[0]instanceof t){if(ue.uri===h.ns_tt&&ue.local==="metadata")Z++;else if(Z>0&&l&&"onOpenTag"in l){var C=[];for(var dt in ue.attributes)C[ue.attributes[dt].uri+" "+ue.attributes[dt].local]={uri:ue.attributes[dt].uri,local:ue.attributes[dt].local,value:ue.attributes[dt].value};l.onOpenTag(ue.uri,ue.local,C)}}},G.write(e).close(),delete bt.head.styling.styles;var it=!1;for(var ct in bt.head.layout.regions)if(bt.head.layout.regions.hasOwnProperty(ct)){it=!0;break}if(!it){var jt=z.prototype.createDefaultRegion(bt.lang);bt.head.layout.regions[jt.id]=jt}for(var me in bt.head.layout.regions)bt.head.layout.regions.hasOwnProperty(me)&&d(bt,bt.head.layout.regions[me],null,null);return bt.body&&d(bt,bt.body,null,null),bt.body&&function ue(Ct){if("contents"in Ct)for(var Nt=("styleAttrs"in Ct)?Ct.styleAttrs[c.byName.ruby.qname]:null,Ot=Ct.kind==="span"&&(Nt==="container"||Nt==="textContainer"||Nt==="baseContainer"),Gt=Ct.contents.length-1;Gt>=0;Gt--)!Ot||"styleAttrs"in Ct.contents[Gt]&&c.byName.ruby.qname in Ct.contents[Gt].styleAttrs?ue(Ct.contents[Gt]):delete Ct.contents[Gt]}(bt.body),bt},r.prototype.initFromNode=function(e,u,l){var G=function(Z,bt){var it=Q(Z,h.ns_ttp,"cellResolution"),ct=15,jt=32;if(it!==null){var me=/(\d+) (\d+)/.exec(it);me!==null?(jt=parseInt(me[1]),ct=parseInt(me[2])):Te(bt,"Malformed cellResolution value (using initial value instead)")}return{w:jt,h:ct}}(e,l);this.cellLength={h:new n.ComputedLength(0,1/G.h),w:new n.ComputedLength(1/G.w,0)};var A=function(Z,bt){var it,ct=Q(Z,h.ns_ttp,"frameRate"),jt=30;ct!==null&&((it=/(\d+)/.exec(ct))!==null?jt=parseInt(it[1]):Te(bt,"Malformed frame rate attribute (using initial value instead)"));var me=Q(Z,h.ns_ttp,"frameRateMultiplier"),ue=1;me!==null&&((it=/(\d+) (\d+)/.exec(me))!==null?ue=parseInt(it[1])/parseInt(it[2]):Te(bt,"Malformed frame rate multiplier attribute (using initial value instead)"));var Ct=ue*jt,Nt=1,Ot=Q(Z,h.ns_ttp,"tickRate");return Ot===null?ct!==null&&(Nt=Ct):(it=/(\d+)/.exec(Ot))!==null?Nt=parseInt(it[1]):Te(bt,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Ct,tickRate:Nt}}(e,l);this.effectiveFrameRate=A.effectiveFrameRate,this.tickRate=A.tickRate,this.aspectRatio=function(Z,bt){var it=Q(Z,h.ns_ittp,"aspectRatio");it===null&&(it=Q(Z,h.ns_ttp,"displayAspectRatio"));var ct=null;if(it!==null){var jt=/(\d+)\s+(\d+)/.exec(it);if(jt!==null){var me=parseInt(jt[1]),ue=parseInt(jt[2]);me!==0&&ue!==0?ct=me/ue:It(bt,"Illegal aspectRatio values (ignoring)")}else It(bt,"Malformed aspectRatio attribute (ignoring)")}return ct}(e,l);var F=Q(e,h.ns_ttp,"timeBase");F!==null&&F!=="media"&&Wt(l,"Unsupported time base");var K=function(Z,bt){var it=Q(Z,h.ns_tts,"extent");if(it===null)return null;var ct=it.split(" ");if(ct.length!==2)return Te(bt,"Malformed extent (ignoring)"),null;var jt=n.parseLength(ct[0]),me=n.parseLength(ct[1]);return!me||!jt?(Te(bt,"Malformed extent values (ignoring)"),null):{h:me,w:jt}}(e,l);K===null?this.pxLength={h:null,w:null}:(K.h.unit==="px"&&K.w.unit==="px"||Wt(l,"Extent on TT must be in px or absent"),this.pxLength={h:new n.ComputedLength(0,1/K.h.value),w:new n.ComputedLength(1/K.w.value,0)}),this.dimensions={h:new n.ComputedLength(0,1),w:new n.ComputedLength(1,0)},this.lang=u},r.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var u=Yt(this.events,e.begin);if(u.found||this.events.splice(u.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var l=Yt(this.events,e.end);l.found||this.events.splice(l.index,0,e.end)}}},r.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},r.prototype.getMediaTimeEvents=function(){return this.events},g.prototype.initFromNode=function(e,u){this.id=Mt(e),this.styleAttrs=ge(e,u),this.styleRefs=Pt(e)},v.prototype.initFromNode=function(e,u){for(var l in this.styleAttrs={},e.attributes)if(e.attributes[l].uri===h.ns_itts||e.attributes[l].uri===h.ns_ebutts||e.attributes[l].uri===h.ns_tts){var G=e.attributes[l].uri+" "+e.attributes[l].local;this.styleAttrs[G]=e.attributes[l].value}},B.prototype.initFromNode=function(e,u,l,G,A){this.src="src"in l.attributes?l.attributes.src.value:null,this.src||It(A,"Invalid image@src attribute"),this.type="type"in l.attributes?l.attributes.type.value:null,this.type||It(A,"Invalid image@type attribute"),S.prototype.initFromNode.call(this,e,u,l,A),L.prototype.initFromNode.call(this,e,u,l,A),T.prototype.initFromNode.call(this,e,u,l,A),y.prototype.initFromNode.call(this,e,u,l,A),this.lang=G},D.prototype.initFromNode=function(e,u,l,G){this.id=Mt(l)},y.prototype.initFromNode=function(e,u,l,G){this.regionID=function(A){return A&&"region"in A.attributes?A.attributes.region.value:""}(l)},S.prototype.initFromNode=function(e,u,l,G){this.styleAttrs=ge(l,G),e.head!==null&&e.head.styling!==null&&_e(e.head.styling,Pt(l),this.styleAttrs,G)},T.prototype.initFromNode=function(e,u,l,G){this.sets=[]},I.prototype.initFromNode=function(e,u,l,G){this.contents=[]},L.prototype.initFromNode=function(e,u,l,G){var A=function(F,K,Z,bt){var it=null;Z&&"begin"in Z.attributes&&(it=ft(F.tickRate,F.effectiveFrameRate,Z.attributes.begin.value))===null&&Te(bt,"Malformed begin value "+Z.attributes.begin.value+" (using 0)");var ct=null;Z&&"dur"in Z.attributes&&(ct=ft(F.tickRate,F.effectiveFrameRate,Z.attributes.dur.value))===null&&Te(bt,"Malformed dur value "+Z.attributes.dur.value+" (ignoring)");var jt=null;return Z&&"end"in Z.attributes&&(jt=ft(F.tickRate,F.effectiveFrameRate,Z.attributes.end.value))===null&&Te(bt,"Malformed end value (ignoring)"),{explicit_begin:it,explicit_end:jt,explicit_dur:ct}}(e,0,l,G);this.explicit_begin=A.explicit_begin,this.explicit_end=A.explicit_end,this.explicit_dur=A.explicit_dur,this.timeContainer=function(F,K){var Z=F&&"timeContainer"in F.attributes?F.attributes.timeContainer.value:null;return Z&&Z!=="par"?Z==="seq"?"seq":(It(K,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(l,G)},J.prototype.initFromNode=function(e,u,l,G){S.prototype.initFromNode.call(this,e,null,u,G),L.prototype.initFromNode.call(this,e,null,u,G),T.prototype.initFromNode.call(this,e,null,u,G),y.prototype.initFromNode.call(this,e,null,u,G),I.prototype.initFromNode.call(this,e,null,u,G),this.lang=l},nt.prototype.initFromNode=function(e,u,l,G,A){S.prototype.initFromNode.call(this,e,u,l,A),L.prototype.initFromNode.call(this,e,u,l,A),T.prototype.initFromNode.call(this,e,u,l,A),y.prototype.initFromNode.call(this,e,u,l,A),I.prototype.initFromNode.call(this,e,u,l,A),this.lang=G},j.prototype.initFromNode=function(e,u,l,G,A){S.prototype.initFromNode.call(this,e,u,l,A),L.prototype.initFromNode.call(this,e,u,l,A),T.prototype.initFromNode.call(this,e,u,l,A),y.prototype.initFromNode.call(this,e,u,l,A),I.prototype.initFromNode.call(this,e,u,l,A),this.lang=G},O.prototype.initFromNode=function(e,u,l,G,A,F){S.prototype.initFromNode.call(this,e,u,l,F),L.prototype.initFromNode.call(this,e,u,l,F),T.prototype.initFromNode.call(this,e,u,l,F),y.prototype.initFromNode.call(this,e,u,l,F),I.prototype.initFromNode.call(this,e,u,l,F),this.space=A,this.lang=G},at.prototype.initFromText=function(e,u,l,G,A,F){L.prototype.initFromNode.call(this,e,u,null,F),this.text=l,this.space=A,this.lang=G},X.prototype.initFromNode=function(e,u,l,G,A){y.prototype.initFromNode.call(this,e,u,l,A),L.prototype.initFromNode.call(this,e,u,l,A),this.lang=G},z.prototype.createDefaultRegion=function(e){var u=new z;return D.call(u,""),S.call(u,{}),T.call(u,[]),L.call(u,0,Number.POSITIVE_INFINITY,null),this.lang=e,u},z.prototype.initFromNode=function(e,u,l,G){D.prototype.initFromNode.call(this,e,null,u,G),L.prototype.initFromNode.call(this,e,null,u,G),T.prototype.initFromNode.call(this,e,null,u,G),this.styleAttrs=ge(u,G),this.styleRefs=Pt(u),this.lang=l},vt.prototype.initFromNode=function(e,u,l,G){L.prototype.initFromNode.call(this,e,u,l,G);var A=ge(l,G);for(var F in this.qname=null,this.value=null,A)if(A.hasOwnProperty(F)){if(this.qname){It(G,"More than one style specified on set");break}this.qname=F,this.value=A[F]}}})(At,typeof sax>"u"?x(97):sax,typeof imscNames>"u"?x(55):imscNames,typeof imscStyles>"u"?x(70):imscStyles,typeof imscUtils>"u"?x(56):imscUtils)},function(Ee,At,x){(function(w){(function(b){b.parser=function(e,u){return new n(e,u)},b.SAXParser=n,b.SAXStream=t,b.createStream=function(e,u){return new t(e,u)},b.MAX_BUFFER_LENGTH=65536;var h,c=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function n(e,u){if(!(this instanceof n))return new n(e,u);(function(l){for(var G=0,A=c.length;G<A;G++)l[c[G]]=""})(this),this.q=this.c="",this.bufferCheckPosition=b.MAX_BUFFER_LENGTH,this.opt=u||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=O.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(b.XML_ENTITIES):Object.create(b.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(B)),this.trackPosition=this.opt.position!==!1,this.trackPosition&&(this.position=this.line=this.column=0),X(this,"onready")}b.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function u(){}return u.prototype=e,new u}),Object.keys||(Object.keys=function(e){var u=[];for(var l in e)e.hasOwnProperty(l)&&u.push(l);return u}),n.prototype={end:function(){ge(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return Pt(this,"Cannot write after close. Assign an onready handler.");if(e===null)return ge(this);typeof e=="object"&&(e=e.toString());for(var u=0,l="";l=Yt(e,u++),this.c=l,l;)switch(this.trackPosition&&(this.position++,l===`
`?(this.line++,this.column=0):this.column++),this.state){case O.BEGIN:if(this.state=O.BEGIN_WHITESPACE,l==="\uFEFF")continue;Wt(this,l);continue;case O.BEGIN_WHITESPACE:Wt(this,l);continue;case O.TEXT:if(this.sawRoot&&!this.closedRoot){for(var G=u-1;l&&l!=="<"&&l!=="&";)(l=Yt(e,u++))&&this.trackPosition&&(this.position++,l===`
`?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(G,u-1)}l!=="<"||this.sawRoot&&this.closedRoot&&!this.strict?(!L(r,l)||this.sawRoot&&!this.closedRoot||Q(this,"Text data outside of root node."),l==="&"?this.state=O.TEXT_ENTITY:this.textNode+=l):(this.state=O.OPEN_WAKA,this.startTagPosition=this.position);continue;case O.SCRIPT:l==="<"?this.state=O.SCRIPT_ENDING:this.script+=l;continue;case O.SCRIPT_ENDING:l==="/"?this.state=O.CLOSE_TAG:(this.script+="<"+l,this.state=O.SCRIPT);continue;case O.OPEN_WAKA:if(l==="!")this.state=O.SGML_DECL,this.sgmlDecl="";else if(!I(r,l))if(I(H,l))this.state=O.OPEN_TAG,this.tagName=l;else if(l==="/")this.state=O.CLOSE_TAG,this.tagName="";else if(l==="?")this.state=O.PROC_INST,this.procInstName=this.procInstBody="";else{if(Q(this,"Unencoded <"),this.startTagPosition+1<this.position){var A=this.position-this.startTagPosition;l=new Array(A).join(" ")+l}this.textNode+="<"+l,this.state=O.TEXT}continue;case O.SGML_DECL:(this.sgmlDecl+l).toUpperCase()==="[CDATA["?(z(this,"onopencdata"),this.state=O.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+l==="--"?(this.state=O.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+l).toUpperCase()==="DOCTYPE"?(this.state=O.DOCTYPE,(this.doctype||this.sawRoot)&&Q(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):l===">"?(z(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=O.TEXT):I(g,l)?(this.state=O.SGML_DECL_QUOTED,this.sgmlDecl+=l):this.sgmlDecl+=l;continue;case O.SGML_DECL_QUOTED:l===this.q&&(this.state=O.SGML_DECL,this.q=""),this.sgmlDecl+=l;continue;case O.DOCTYPE:l===">"?(this.state=O.TEXT,z(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=l,l==="["?this.state=O.DOCTYPE_DTD:I(g,l)&&(this.state=O.DOCTYPE_QUOTED,this.q=l));continue;case O.DOCTYPE_QUOTED:this.doctype+=l,l===this.q&&(this.q="",this.state=O.DOCTYPE);continue;case O.DOCTYPE_DTD:this.doctype+=l,l==="]"?this.state=O.DOCTYPE:I(g,l)&&(this.state=O.DOCTYPE_DTD_QUOTED,this.q=l);continue;case O.DOCTYPE_DTD_QUOTED:this.doctype+=l,l===this.q&&(this.state=O.DOCTYPE_DTD,this.q="");continue;case O.COMMENT:l==="-"?this.state=O.COMMENT_ENDING:this.comment+=l;continue;case O.COMMENT_ENDING:l==="-"?(this.state=O.COMMENT_ENDED,this.comment=Mt(this.opt,this.comment),this.comment&&z(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+l,this.state=O.COMMENT);continue;case O.COMMENT_ENDED:l!==">"?(Q(this,"Malformed comment"),this.comment+="--"+l,this.state=O.COMMENT):this.state=O.TEXT;continue;case O.CDATA:l==="]"?this.state=O.CDATA_ENDING:this.cdata+=l;continue;case O.CDATA_ENDING:l==="]"?this.state=O.CDATA_ENDING_2:(this.cdata+="]"+l,this.state=O.CDATA);continue;case O.CDATA_ENDING_2:l===">"?(this.cdata&&z(this,"oncdata",this.cdata),z(this,"onclosecdata"),this.cdata="",this.state=O.TEXT):l==="]"?this.cdata+="]":(this.cdata+="]]"+l,this.state=O.CDATA);continue;case O.PROC_INST:l==="?"?this.state=O.PROC_INST_ENDING:I(r,l)?this.state=O.PROC_INST_BODY:this.procInstName+=l;continue;case O.PROC_INST_BODY:if(!this.procInstBody&&I(r,l))continue;l==="?"?this.state=O.PROC_INST_ENDING:this.procInstBody+=l;continue;case O.PROC_INST_ENDING:l===">"?(z(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=O.TEXT):(this.procInstBody+="?"+l,this.state=O.PROC_INST_BODY);continue;case O.OPEN_TAG:I(D,l)?this.tagName+=l:(ft(this),l===">"?Jt(this):l==="/"?this.state=O.OPEN_TAG_SLASH:(L(r,l)&&Q(this,"Invalid character in tag name"),this.state=O.ATTRIB));continue;case O.OPEN_TAG_SLASH:l===">"?(Jt(this,!0),Te(this)):(Q(this,"Forward-slash in opening tag not followed by >"),this.state=O.ATTRIB);continue;case O.ATTRIB:if(I(r,l))continue;l===">"?Jt(this):l==="/"?this.state=O.OPEN_TAG_SLASH:I(H,l)?(this.attribName=l,this.attribValue="",this.state=O.ATTRIB_NAME):Q(this,"Invalid attribute name");continue;case O.ATTRIB_NAME:l==="="?this.state=O.ATTRIB_VALUE:l===">"?(Q(this,"Attribute without value"),this.attribValue=this.attribName,_e(this),Jt(this)):I(r,l)?this.state=O.ATTRIB_NAME_SAW_WHITE:I(D,l)?this.attribName+=l:Q(this,"Invalid attribute name");continue;case O.ATTRIB_NAME_SAW_WHITE:if(l==="=")this.state=O.ATTRIB_VALUE;else{if(I(r,l))continue;Q(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",z(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",l===">"?Jt(this):I(H,l)?(this.attribName=l,this.state=O.ATTRIB_NAME):(Q(this,"Invalid attribute name"),this.state=O.ATTRIB)}continue;case O.ATTRIB_VALUE:if(I(r,l))continue;I(g,l)?(this.q=l,this.state=O.ATTRIB_VALUE_QUOTED):(Q(this,"Unquoted attribute value"),this.state=O.ATTRIB_VALUE_UNQUOTED,this.attribValue=l);continue;case O.ATTRIB_VALUE_QUOTED:if(l!==this.q){l==="&"?this.state=O.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=l;continue}_e(this),this.q="",this.state=O.ATTRIB_VALUE_CLOSED;continue;case O.ATTRIB_VALUE_CLOSED:I(r,l)?this.state=O.ATTRIB:l===">"?Jt(this):l==="/"?this.state=O.OPEN_TAG_SLASH:I(H,l)?(Q(this,"No whitespace between attributes"),this.attribName=l,this.attribValue="",this.state=O.ATTRIB_NAME):Q(this,"Invalid attribute name");continue;case O.ATTRIB_VALUE_UNQUOTED:if(L(v,l)){l==="&"?this.state=O.ATTRIB_VALUE_ENTITY_U:this.attribValue+=l;continue}_e(this),l===">"?Jt(this):this.state=O.ATTRIB;continue;case O.CLOSE_TAG:if(this.tagName)l===">"?Te(this):I(D,l)?this.tagName+=l:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=O.SCRIPT):(L(r,l)&&Q(this,"Invalid tagname in closing tag"),this.state=O.CLOSE_TAG_SAW_WHITE);else{if(I(r,l))continue;L(H,l)?this.script?(this.script+="</"+l,this.state=O.SCRIPT):Q(this,"Invalid tagname in closing tag."):this.tagName=l}continue;case O.CLOSE_TAG_SAW_WHITE:if(I(r,l))continue;l===">"?Te(this):Q(this,"Invalid characters in closing tag");continue;case O.TEXT_ENTITY:case O.ATTRIB_VALUE_ENTITY_Q:case O.ATTRIB_VALUE_ENTITY_U:var F,K;switch(this.state){case O.TEXT_ENTITY:F=O.TEXT,K="textNode";break;case O.ATTRIB_VALUE_ENTITY_Q:F=O.ATTRIB_VALUE_QUOTED,K="attribValue";break;case O.ATTRIB_VALUE_ENTITY_U:F=O.ATTRIB_VALUE_UNQUOTED,K="attribValue"}l===";"?(this[K]+=It(this),this.entity="",this.state=F):I(this.entity.length?S:y,l)?this.entity+=l:(Q(this,"Invalid character in entity name"),this[K]+="&"+this.entity+l,this.entity="",this.state=F);continue;default:throw new Error(this,"Unknown state: "+this.state)}return this.position>=this.bufferCheckPosition&&function(Z){for(var bt=Math.max(b.MAX_BUFFER_LENGTH,10),it=0,ct=0,jt=c.length;ct<jt;ct++){var me=Z[c[ct]].length;if(me>bt)switch(c[ct]){case"textNode":vt(Z);break;case"cdata":z(Z,"oncdata",Z.cdata),Z.cdata="";break;case"script":z(Z,"onscript",Z.script),Z.script="";break;default:Pt(Z,"Max buffer length exceeded: "+c[ct])}it=Math.max(it,me)}var ue=b.MAX_BUFFER_LENGTH-it;Z.bufferCheckPosition=ue+Z.position}(this),this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;vt(e=this),e.cdata!==""&&(z(e,"oncdata",e.cdata),e.cdata=""),e.script!==""&&(z(e,"onscript",e.script),e.script="")}};try{h=x(100).Stream}catch{h=function(){}}var d=b.EVENTS.filter(function(e){return e!=="error"&&e!=="end"});function t(e,u){if(!(this instanceof t))return new t(e,u);h.apply(this),this._parser=new n(e,u),this.writable=!0,this.readable=!0;var l=this;this._parser.onend=function(){l.emit("end")},this._parser.onerror=function(G){l.emit("error",G),l._parser.error=null},this._decoder=null,d.forEach(function(G){Object.defineProperty(l,"on"+G,{get:function(){return l._parser["on"+G]},set:function(A){if(!A)return l.removeAllListeners(G),l._parser["on"+G]=A,A;l.on(G,A)},enumerable:!0,configurable:!1})})}t.prototype=Object.create(h.prototype,{constructor:{value:t}}),t.prototype.write=function(e){if(typeof w=="function"&&typeof w.isBuffer=="function"&&w.isBuffer(e)){if(!this._decoder){var u=x(75).StringDecoder;this._decoder=new u("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},t.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},t.prototype.on=function(e,u){var l=this;return l._parser["on"+e]||d.indexOf(e)===-1||(l._parser["on"+e]=function(){var G=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);G.splice(0,0,e),l.emit.apply(l,G)}),h.prototype.on.call(l,e,u)};var r=`\r
	 `,f="0124356789",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",g=`'"`,v=r+">",P="http://www.w3.org/XML/1998/namespace",B={xml:P,xmlns:"http://www.w3.org/2000/xmlns/"};r=T(r),f=T(f),o=T(o);var H=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function T(e){return e.split("").reduce(function(u,l){return u[l]=!0,u},{})}function I(e,u){return function(l){return Object.prototype.toString.call(l)==="[object RegExp]"}(e)?!!u.match(e):e[u]}function L(e,u){return!I(e,u)}g=T(g),v=T(v);var J,nt,j,O=0;for(var at in b.STATE={BEGIN:O++,BEGIN_WHITESPACE:O++,TEXT:O++,TEXT_ENTITY:O++,OPEN_WAKA:O++,SGML_DECL:O++,SGML_DECL_QUOTED:O++,DOCTYPE:O++,DOCTYPE_QUOTED:O++,DOCTYPE_DTD:O++,DOCTYPE_DTD_QUOTED:O++,COMMENT_STARTING:O++,COMMENT:O++,COMMENT_ENDING:O++,COMMENT_ENDED:O++,CDATA:O++,CDATA_ENDING:O++,CDATA_ENDING_2:O++,PROC_INST:O++,PROC_INST_BODY:O++,PROC_INST_ENDING:O++,OPEN_TAG:O++,OPEN_TAG_SLASH:O++,ATTRIB:O++,ATTRIB_NAME:O++,ATTRIB_NAME_SAW_WHITE:O++,ATTRIB_VALUE:O++,ATTRIB_VALUE_QUOTED:O++,ATTRIB_VALUE_CLOSED:O++,ATTRIB_VALUE_UNQUOTED:O++,ATTRIB_VALUE_ENTITY_Q:O++,ATTRIB_VALUE_ENTITY_U:O++,CLOSE_TAG:O++,CLOSE_TAG_SAW_WHITE:O++,SCRIPT:O++,SCRIPT_ENDING:O++},b.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},b.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(b.ENTITIES).forEach(function(e){var u=b.ENTITIES[e],l=typeof u=="number"?String.fromCharCode(u):u;b.ENTITIES[e]=l}),b.STATE)b.STATE[b.STATE[at]]=at;function X(e,u,l){e[u]&&e[u](l)}function z(e,u,l){e.textNode&&vt(e),X(e,u,l)}function vt(e){e.textNode=Mt(e.opt,e.textNode),e.textNode&&X(e,"ontext",e.textNode),e.textNode=""}function Mt(e,u){return e.trim&&(u=u.trim()),e.normalize&&(u=u.replace(/\s+/g," ")),u}function Pt(e,u){return vt(e),e.trackPosition&&(u+=`
Line: `+e.line+`
Column: `+e.column+`
Char: `+e.c),u=new Error(u),e.error=u,X(e,"onerror",u),e}function ge(e){return e.sawRoot&&!e.closedRoot&&Q(e,"Unclosed root tag"),e.state!==O.BEGIN&&e.state!==O.BEGIN_WHITESPACE&&e.state!==O.TEXT&&Pt(e,"Unexpected end"),vt(e),e.c="",e.closed=!0,X(e,"onend"),n.call(e,e.strict,e.opt),e}function Q(e,u){if(typeof e!="object"||!(e instanceof n))throw new Error("bad call to strictFail");e.strict&&Pt(e,u)}function ft(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var u=e.tags[e.tags.length-1]||e,l=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(l.ns=u.ns),e.attribList.length=0,z(e,"onopentagstart",l)}function Ht(e,u){var l=e.indexOf(":")<0?["",e]:e.split(":"),G=l[0],A=l[1];return u&&e==="xmlns"&&(G="xmlns",A=""),{prefix:G,local:A}}function _e(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),e.attribList.indexOf(e.attribName)!==-1||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var u=Ht(e.attribName,!0),l=u.prefix,G=u.local;if(l==="xmlns")if(G==="xml"&&e.attribValue!==P)Q(e,"xml: prefix must be bound to "+P+`
Actual: `+e.attribValue);else if(G==="xmlns"&&e.attribValue!=="http://www.w3.org/2000/xmlns/")Q(e,`xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/
Actual: `+e.attribValue);else{var A=e.tag,F=e.tags[e.tags.length-1]||e;A.ns===F.ns&&(A.ns=Object.create(F.ns)),A.ns[G]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,z(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function Jt(e,u){if(e.opt.xmlns){var l=e.tag,G=Ht(e.tagName);l.prefix=G.prefix,l.local=G.local,l.uri=l.ns[G.prefix]||"",l.prefix&&!l.uri&&(Q(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),l.uri=G.prefix);var A=e.tags[e.tags.length-1]||e;l.ns&&A.ns!==l.ns&&Object.keys(l.ns).forEach(function(Nt){z(e,"onopennamespace",{prefix:Nt,uri:l.ns[Nt]})});for(var F=0,K=e.attribList.length;F<K;F++){var Z=e.attribList[F],bt=Z[0],it=Z[1],ct=Ht(bt,!0),jt=ct.prefix,me=ct.local,ue=jt===""?"":l.ns[jt]||"",Ct={name:bt,value:it,prefix:jt,local:me,uri:ue};jt&&jt!=="xmlns"&&!ue&&(Q(e,"Unbound namespace prefix: "+JSON.stringify(jt)),Ct.uri=jt),e.tag.attributes[bt]=Ct,z(e,"onattribute",Ct)}e.attribList.length=0}e.tag.isSelfClosing=!!u,e.sawRoot=!0,e.tags.push(e.tag),z(e,"onopentag",e.tag),u||(e.noscript||e.tagName.toLowerCase()!=="script"?e.state=O.TEXT:e.state=O.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function Te(e){if(!e.tagName)return Q(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=O.TEXT);if(e.script){if(e.tagName!=="script")return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=O.SCRIPT);z(e,"onscript",e.script),e.script=""}var u=e.tags.length,l=e.tagName;e.strict||(l=l[e.looseCase]());for(var G=l;u--&&e.tags[u].name!==G;)Q(e,"Unexpected close tag");if(u<0)return Q(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=O.TEXT);e.tagName=l;for(var A=e.tags.length;A-- >u;){var F=e.tag=e.tags.pop();e.tagName=e.tag.name,z(e,"onclosetag",e.tagName);var K={};for(var Z in F.ns)K[Z]=F.ns[Z];var bt=e.tags[e.tags.length-1]||e;e.opt.xmlns&&F.ns!==bt.ns&&Object.keys(F.ns).forEach(function(it){var ct=F.ns[it];z(e,"onclosenamespace",{prefix:it,uri:ct})})}u===0&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=O.TEXT}function It(e){var u,l=e.entity,G=l.toLowerCase(),A="";return e.ENTITIES[l]?e.ENTITIES[l]:e.ENTITIES[G]?e.ENTITIES[G]:((l=G).charAt(0)==="#"&&(l.charAt(1)==="x"?(l=l.slice(2),A=(u=parseInt(l,16)).toString(16)):(l=l.slice(1),A=(u=parseInt(l,10)).toString(10))),l=l.replace(/^0+/,""),A.toLowerCase()!==l?(Q(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(u))}function Wt(e,u){u==="<"?(e.state=O.OPEN_WAKA,e.startTagPosition=e.position):L(r,u)&&(Q(e,"Non-whitespace before first tag."),e.textNode=u,e.state=O.TEXT)}function Yt(e,u){var l="";return u<e.length&&(l=e.charAt(u)),l}O=b.STATE,String.fromCodePoint||(J=String.fromCharCode,nt=Math.floor,j=function(){var e,u,l=16384,G=[],A=-1,F=arguments.length;if(!F)return"";for(var K="";++A<F;){var Z=Number(arguments[A]);if(!isFinite(Z)||Z<0||Z>1114111||nt(Z)!==Z)throw RangeError("Invalid code point: "+Z);Z<=65535?G.push(Z):(e=55296+((Z-=65536)>>10),u=Z%1024+56320,G.push(e,u)),(A+1===F||G.length>l)&&(K+=J.apply(null,G),G.length=0)}return K},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:j,configurable:!0,writable:!0}):String.fromCodePoint=j)})(At)}).call(this,x(57).Buffer)},function(Ee,At,x){At.byteLength=function(f){var o=t(f),g=o[0],v=o[1];return 3*(g+v)/4-v},At.toByteArray=function(f){var o,g,v=t(f),P=v[0],B=v[1],H=new h(function(S,T,I){return 3*(T+I)/4-I}(0,P,B)),D=0,y=B>0?P-4:P;for(g=0;g<y;g+=4)o=b[f.charCodeAt(g)]<<18|b[f.charCodeAt(g+1)]<<12|b[f.charCodeAt(g+2)]<<6|b[f.charCodeAt(g+3)],H[D++]=o>>16&255,H[D++]=o>>8&255,H[D++]=255&o;return B===2&&(o=b[f.charCodeAt(g)]<<2|b[f.charCodeAt(g+1)]>>4,H[D++]=255&o),B===1&&(o=b[f.charCodeAt(g)]<<10|b[f.charCodeAt(g+1)]<<4|b[f.charCodeAt(g+2)]>>2,H[D++]=o>>8&255,H[D++]=255&o),H},At.fromByteArray=function(f){for(var o,g=f.length,v=g%3,P=[],B=0,H=g-v;B<H;B+=16383)P.push(r(f,B,B+16383>H?H:B+16383));return v===1?(o=f[g-1],P.push(w[o>>2]+w[o<<4&63]+"==")):v===2&&(o=(f[g-2]<<8)+f[g-1],P.push(w[o>>10]+w[o>>4&63]+w[o<<2&63]+"=")),P.join("")};for(var w=[],b=[],h=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,d=c.length;n<d;++n)w[n]=c[n],b[c.charCodeAt(n)]=n;function t(f){var o=f.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=f.indexOf("=");return g===-1&&(g=o),[g,g===o?0:4-g%4]}function r(f,o,g){for(var v,P,B=[],H=o;H<g;H+=3)v=(f[H]<<16&16711680)+(f[H+1]<<8&65280)+(255&f[H+2]),B.push(w[(P=v)>>18&63]+w[P>>12&63]+w[P>>6&63]+w[63&P]);return B.join("")}b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63},function(Ee,At){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */At.read=function(x,w,b,h,c){var n,d,t=8*c-h-1,r=(1<<t)-1,f=r>>1,o=-7,g=b?c-1:0,v=b?-1:1,P=x[w+g];for(g+=v,n=P&(1<<-o)-1,P>>=-o,o+=t;o>0;n=256*n+x[w+g],g+=v,o-=8);for(d=n&(1<<-o)-1,n>>=-o,o+=h;o>0;d=256*d+x[w+g],g+=v,o-=8);if(n===0)n=1-f;else{if(n===r)return d?NaN:1/0*(P?-1:1);d+=Math.pow(2,h),n-=f}return(P?-1:1)*d*Math.pow(2,n-h)},At.write=function(x,w,b,h,c,n){var d,t,r,f=8*n-c-1,o=(1<<f)-1,g=o>>1,v=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=h?0:n-1,B=h?1:-1,H=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(t=isNaN(w)?1:0,d=o):(d=Math.floor(Math.log(w)/Math.LN2),w*(r=Math.pow(2,-d))<1&&(d--,r*=2),(w+=d+g>=1?v/r:v*Math.pow(2,1-g))*r>=2&&(d++,r/=2),d+g>=o?(t=0,d=o):d+g>=1?(t=(w*r-1)*Math.pow(2,c),d+=g):(t=w*Math.pow(2,g-1)*Math.pow(2,c),d=0));c>=8;x[b+P]=255&t,P+=B,t/=256,c-=8);for(d=d<<c|t,f+=c;f>0;x[b+P]=255&d,P+=B,d/=256,f-=8);x[b+P-B]|=128*H}},function(Ee,At,x){Ee.exports=b;var w=x(71).EventEmitter;function b(){w.call(this)}x(42)(b,w),b.Readable=x(72),b.Writable=x(109),b.Duplex=x(110),b.Transform=x(111),b.PassThrough=x(112),b.Stream=b,b.prototype.pipe=function(h,c){var n=this;function d(P){h.writable&&h.write(P)===!1&&n.pause&&n.pause()}function t(){n.readable&&n.resume&&n.resume()}n.on("data",d),h.on("drain",t),h._isStdio||c&&c.end===!1||(n.on("end",f),n.on("close",o));var r=!1;function f(){r||(r=!0,h.end())}function o(){r||(r=!0,typeof h.destroy=="function"&&h.destroy())}function g(P){if(v(),w.listenerCount(this,"error")===0)throw P}function v(){n.removeListener("data",d),h.removeListener("drain",t),n.removeListener("end",f),n.removeListener("close",o),n.removeListener("error",g),h.removeListener("error",g),n.removeListener("end",v),n.removeListener("close",v),h.removeListener("close",v)}return n.on("error",g),h.on("error",g),n.on("end",v),n.on("close",v),h.on("close",v),h.emit("pipe",n),h}},function(Ee,At){},function(Ee,At,x){var w=x(73).Buffer,b=x(103);Ee.exports=function(){function h(){(function(c,n){if(!(c instanceof n))throw new TypeError("Cannot call a class as a function")})(this,h),this.head=null,this.tail=null,this.length=0}return h.prototype.push=function(c){var n={data:c,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},h.prototype.unshift=function(c){var n={data:c,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},h.prototype.shift=function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}},h.prototype.clear=function(){this.head=this.tail=null,this.length=0},h.prototype.join=function(c){if(this.length===0)return"";for(var n=this.head,d=""+n.data;n=n.next;)d+=c+n.data;return d},h.prototype.concat=function(c){if(this.length===0)return w.alloc(0);if(this.length===1)return this.head.data;for(var n,d,t,r=w.allocUnsafe(c>>>0),f=this.head,o=0;f;)n=f.data,d=r,t=o,n.copy(d,t),o+=f.data.length,f=f.next;return r},h}(),b&&b.inspect&&b.inspect.custom&&(Ee.exports.prototype[b.inspect.custom]=function(){var h=b.inspect({length:this.length});return this.constructor.name+" "+h})},function(Ee,At){},function(Ee,At,x){(function(w){var b=w!==void 0&&w||typeof self<"u"&&self||window,h=Function.prototype.apply;function c(n,d){this._id=n,this._clearFn=d}At.setTimeout=function(){return new c(h.call(setTimeout,b,arguments),clearTimeout)},At.setInterval=function(){return new c(h.call(setInterval,b,arguments),clearInterval)},At.clearTimeout=At.clearInterval=function(n){n&&n.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(b,this._id)},At.enroll=function(n,d){clearTimeout(n._idleTimeoutId),n._idleTimeout=d},At.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},At._unrefActive=At.active=function(n){clearTimeout(n._idleTimeoutId);var d=n._idleTimeout;d>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},d))},x(105),At.setImmediate=typeof self<"u"&&self.setImmediate||w!==void 0&&w.setImmediate||this&&this.setImmediate,At.clearImmediate=typeof self<"u"&&self.clearImmediate||w!==void 0&&w.clearImmediate||this&&this.clearImmediate}).call(this,x(24))},function(Ee,At,x){(function(w,b){(function(h,c){if(!h.setImmediate){var n,d,t,r,f,o=1,g={},v=!1,P=h.document,B=Object.getPrototypeOf&&Object.getPrototypeOf(h);B=B&&B.setTimeout?B:h,{}.toString.call(h.process)==="[object process]"?n=function(y){b.nextTick(function(){D(y)})}:function(){if(h.postMessage&&!h.importScripts){var y=!0,S=h.onmessage;return h.onmessage=function(){y=!1},h.postMessage("","*"),h.onmessage=S,y}}()?(r="setImmediate$"+Math.random()+"$",f=function(y){y.source===h&&typeof y.data=="string"&&y.data.indexOf(r)===0&&D(+y.data.slice(r.length))},h.addEventListener?h.addEventListener("message",f,!1):h.attachEvent("onmessage",f),n=function(y){h.postMessage(r+y,"*")}):h.MessageChannel?((t=new MessageChannel).port1.onmessage=function(y){D(y.data)},n=function(y){t.port2.postMessage(y)}):P&&"onreadystatechange"in P.createElement("script")?(d=P.documentElement,n=function(y){var S=P.createElement("script");S.onreadystatechange=function(){D(y),S.onreadystatechange=null,d.removeChild(S),S=null},d.appendChild(S)}):n=function(y){setTimeout(D,0,y)},B.setImmediate=function(y){typeof y!="function"&&(y=new Function(""+y));for(var S=new Array(arguments.length-1),T=0;T<S.length;T++)S[T]=arguments[T+1];var I={callback:y,args:S};return g[o]=I,n(o),o++},B.clearImmediate=H}function H(y){delete g[y]}function D(y){if(v)setTimeout(D,0,y);else{var S=g[y];if(S){v=!0;try{(function(T){var I=T.callback,L=T.args;switch(L.length){case 0:I();break;case 1:I(L[0]);break;case 2:I(L[0],L[1]);break;case 3:I(L[0],L[1],L[2]);break;default:I.apply(void 0,L)}})(S)}finally{H(y),v=!1}}}}})(typeof self>"u"?w===void 0?this:w:self)}).call(this,x(24),x(26))},function(Ee,At,x){(function(w){function b(h){try{if(!w.localStorage)return!1}catch{return!1}var c=w.localStorage[h];return c!=null&&String(c).toLowerCase()==="true"}Ee.exports=function(h,c){if(b("noDeprecation"))return h;var n=!1;return function(){if(!n){if(b("throwDeprecation"))throw new Error(c);b("traceDeprecation")?console.trace(c):console.warn(c),n=!0}return h.apply(this,arguments)}}}).call(this,x(24))},function(Ee,At,x){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w=x(57),b=w.Buffer;function h(n,d){for(var t in n)d[t]=n[t]}function c(n,d,t){return b(n,d,t)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?Ee.exports=w:(h(w,At),At.Buffer=c),c.prototype=Object.create(b.prototype),h(b,c),c.from=function(n,d,t){if(typeof n=="number")throw new TypeError("Argument must not be a number");return b(n,d,t)},c.alloc=function(n,d,t){if(typeof n!="number")throw new TypeError("Argument must be a number");var r=b(n);return d!==void 0?typeof t=="string"?r.fill(d,t):r.fill(d):r.fill(0),r},c.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return b(n)},c.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(n)}},function(Ee,At,x){Ee.exports=h;var w=x(91),b=Object.create(x(49));function h(c){if(!(this instanceof h))return new h(c);w.call(this,c)}b.inherits=x(42),b.inherits(h,w),h.prototype._transform=function(c,n,d){d(null,c)}},function(Ee,At,x){Ee.exports=x(74)},function(Ee,At,x){Ee.exports=x(36)},function(Ee,At,x){Ee.exports=x(72).Transform},function(Ee,At,x){Ee.exports=x(72).PassThrough},function(Ee,At,x){(function(w,b,h){function c(T,I,L,J){var nt;if(L.kind==="region")(nt=document.createElement("div")).style.position="absolute";else if(L.kind==="body")nt=document.createElement("div");else if(L.kind==="div")nt=document.createElement("div");else if(L.kind==="image"){if(nt=document.createElement("img"),T.imgResolver!==null&&L.src!==null){var j=T.imgResolver(L.src,nt);j&&(nt.src=j),nt.height=T.regionH,nt.width=T.regionW}}else if(L.kind==="p")nt=document.createElement("p");else if(L.kind==="span")if(L.styleAttrs[h.byName.ruby.qname]==="container")nt=document.createElement("ruby"),T.ruby=!0;else if(L.styleAttrs[h.byName.ruby.qname]==="base")nt=document.createElement("rb");else if(L.styleAttrs[h.byName.ruby.qname]==="text")nt=document.createElement("rt");else if(L.styleAttrs[h.byName.ruby.qname]==="baseContainer")nt=document.createElement("rbc");else if(L.styleAttrs[h.byName.ruby.qname]==="textContainer")nt=document.createElement("rtc");else{if(L.styleAttrs[h.byName.ruby.qname]==="delimiter")return;nt=document.createElement("span")}else L.kind==="br"&&(nt=document.createElement("br"));if(nt){if(L.lang&&(L.kind!=="region"&&L.lang===J.lang||(nt.lang=L.lang)),I.appendChild(nt),nt.style.margin="0",L.kind==="region"){var O=L.styleAttrs[h.byName.writingMode.qname];O==="lrtb"||O==="lr"?(T.ipd="lr",T.bpd="tb"):O==="rltb"||O==="rl"?(T.ipd="rl",T.bpd="tb"):O==="tblr"?(T.ipd="tb",T.bpd="lr"):O!=="tbrl"&&O!=="tb"||(T.ipd="tb",T.bpd="rl")}else if(L.kind==="p"&&T.bpd==="tb"){var at=L.styleAttrs[h.byName.direction.qname];T.ipd=at==="ltr"?"lr":"rl"}for(var X=0;X<v.length;X++){var z=v[X],vt=L.styleAttrs[z.qname];vt!==void 0&&z.map!==null&&z.map(T,nt,L,vt)}var Mt=nt,Pt=L.styleAttrs[h.byName.linePadding.qname];if(Pt&&!Pt.isZero()){var ge=Pt.toUsedLength(T.w,T.h);if(ge>0){var Q=Math.ceil(ge)+"px";T.bpd==="tb"?(Mt.style.paddingLeft=Q,Mt.style.paddingRight=Q):(Mt.style.paddingTop=Q,Mt.style.paddingBottom=Q),T.lp=Pt}}var ft=L.styleAttrs[h.byName.multiRowAlign.qname];if(ft&&ft!=="auto"){var Ht=document.createElement("span");Ht.style.display="inline-block",Ht.style.textAlign=ft,nt.appendChild(Ht),Mt=Ht,T.mra=ft}var _e=L.styleAttrs[h.byName.rubyReserve.qname];if(_e&&_e[0]!=="none"&&(T.rubyReserve=_e),L.styleAttrs[h.byName.fillLineGap.qname]&&(T.flg=!0),L.kind==="span"&&L.text){var Jt=L.styleAttrs[h.byName.textEmphasis.qname];if(Jt&&Jt.style!=="none"&&(T.textEmphasis=!0),h.byName.textCombine.qname in L.styleAttrs&&L.styleAttrs[h.byName.textCombine.qname]==="all")nt.textContent=L.text,Jt&&o(T,nt,L,Jt);else for(var Te="",It=0;It<L.text.length;It++){Te+=L.text.charAt(It);var Wt=L.text.charCodeAt(It);if(Wt<55296||Wt>56319||It===L.text.length-1){var Yt=document.createElement("span");Yt.textContent=Te,Jt&&o(T,Yt,L,Jt),nt.appendChild(Yt),Te="",Yt._isd_element=L}}}if("contents"in L)for(var e=0;e<L.contents.length;e++)c(T,Mt,L.contents[e],L);var u=[];if(L.kind==="p"&&(f(T,Mt,u,null),T.rubyReserve&&(function(K,Z){for(var bt=0;bt<K.length;bt++){var it,ct,jt=document.createElement("ruby"),me=document.createElement("rb");me.textContent="",jt.appendChild(me);var ue,Ct=Z.rubyReserve[1].toUsedLength(Z.w,Z.h)+"px";Z.rubyReserve[0]==="both"||Z.rubyReserve[0]==="outside"&&K.length==1?((it=document.createElement("rtc")).style[D]=H?"after":"under",it.textContent="",it.style.fontSize=Ct,(ct=document.createElement("rtc")).style[D]=H?"before":"over",ct.textContent="",ct.style.fontSize=Ct,jt.appendChild(it),jt.appendChild(ct)):((it=document.createElement("rtc")).textContent="",it.style.fontSize=Ct,ue=Z.rubyReserve[0]==="after"||Z.rubyReserve[0]==="outside"&&bt>0?H?"after":Z.bpd==="tb"||Z.bpd==="rl"?"under":"over":H?"before":Z.bpd==="tb"||Z.bpd==="rl"?"over":"under",it.style[D]=ue,jt.appendChild(it));for(var Nt=null,Ot=0;Ot<K[bt].rbc.length;Ot++)if(K[bt].rbc[Ot].localName==="ruby"){Nt=K[bt].rbc[Ot];for(var Gt=0;Gt<Nt.style.length;Gt++)jt.style.setProperty(Nt.style.item(Gt),Nt.style.getPropertyValue(Nt.style.item(Gt)));break}(Nt=Nt||K[bt].elements[0].node).parentElement.insertBefore(jt,Nt)}}(u,T),T.rubyReserve=null),(T.ruby||T.rubyReserve)&&(function(K,Z){for(var bt=0;bt<K.length;bt++)for(var it=0;it<K[bt].rbc.length;it++){var ct;K[bt].rbc[it].style[D]||(ct=H?bt===0?"before":"after":Z.bpd==="tb"||Z.bpd==="rl"?bt===0?"over":"under":bt===0?"under":"over",K[bt].rbc[it].style[D]=ct)}}(u,T),T.ruby=null),T.textEmphasis&&(function(K,Z){for(var bt=0;bt<K.length;bt++)for(var it=0;it<K[bt].te.length;it++){var ct;(!K[bt].te[it].style[S]||K[bt].te[it].style[S]==="none")&&(ct=Z.bpd==="tb"?bt===0?"left over":"left under":Z.bpd==="rl"?bt===0?"right under":"left under":bt===0?"left under":"right under",K[bt].te[it].style[S]=ct)}}(u,T),T.textEmphasis=null),T.mra&&(function(K){for(var Z=0;Z<K.length-1;Z++){var bt=K[Z].elements.length;if(bt!==0&&K[Z].br===!1){var it=document.createElement("br"),ct=K[Z].elements[bt-1].node;ct.parentElement.insertBefore(it,ct.nextSibling)}}}(u),T.mra=null),T.lp&&(function(K,Z,bt){if(K!==null)for(var it=0;it<K.length;it++){var ct=K[it].elements.length,jt=Math.ceil(Z)+"px",me="-"+Math.ceil(Z)+"px";if(ct!==0){var ue=K[it].elements[K[it].start_elem],Ct=K[it].elements[K[it].end_elem];if(ue===Ct&&(elementBoundingRect=ue.node.getBoundingClientRect(),elementBoundingRect.width==0||elementBoundingRect.height==0))continue;bt.ipd==="lr"?(ue.node.style.marginLeft=me,ue.node.style.paddingLeft=jt):bt.ipd==="rl"?(ue.node.style.paddingRight=jt,ue.node.style.marginRight=me):bt.ipd==="tb"&&(ue.node.style.paddingTop=jt,ue.node.style.marginTop=me),bt.ipd==="lr"?(Ct.node.style.marginRight=me,Ct.node.style.paddingRight=jt):bt.ipd==="rl"?(Ct.node.style.paddingLeft=jt,Ct.node.style.marginLeft=me):bt.ipd==="tb"&&(Ct.node.style.paddingBottom=jt,Ct.node.style.marginBottom=me)}}}(u,T.lp.toUsedLength(T.w,T.h),T),T.lp=null),function(K){for(var Z=0;Z<K.length;Z++)for(var bt=K[Z],it=1;it<bt.elements.length;){var ct=bt.elements[it-1],jt=bt.elements[it];d(ct.node,jt.node)?bt.elements.splice(it,1):it++}for(var me,ue,Ct=[],Nt=0;Nt<K.length;Nt++)for(var Ot=0;Ot<K[Nt].elements.length;Ot++)me=K[Nt].elements[Ot].node,(ue=n(me,Ct,!1))&&(me.style.backgroundColor=ue);for(var Gt=0;Gt<Ct.length;Gt++)Ct[Gt].style.backgroundColor=""}(u),T.flg)){var l=r(Mt.getBoundingClientRect(),T);(function(K,Z,bt,it,ct){for(var jt=Math.sign(bt-Z),me=0;me<=K.length;me++){var ue,Ct,Nt,Ot;if(ue=me===0?Math.round(Z):me===K.length?Math.round(bt):Math.round((K[me-1].after+K[me].before)/2),me>0&&K[me-1])for(Nt=0;Nt<K[me-1].elements.length;Nt++)Ot=K[me-1].elements[Nt],Ct=jt*(ue-Ot.after)+"px",it.bpd==="lr"?Ot.node.style.paddingRight=Ct:it.bpd==="rl"?Ot.node.style.paddingLeft=Ct:it.bpd==="tb"&&(Ot.node.style.paddingBottom=Ct);if(me<K.length)for(Nt=0;Nt<K[me].elements.length;Nt++)Ot=K[me].elements[Nt],Ct=jt*(Ot.before-ue)+"px",it.bpd==="lr"?Ot.node.style.paddingLeft=Ct:it.bpd==="rl"?Ot.node.style.paddingRight=Ct:it.bpd==="tb"&&(Ot.node.style.paddingTop=Ct)}})(u,l.before,l.after,T),T.flg=null}if(L.kind==="region"&&T.bpd==="tb"&&T.enableRollUp&&L.contents.length>0&&L.styleAttrs[h.byName.displayAlign.qname]==="after"){f(T,Mt,u,null);var G=new t(L.id===""?"_":L.id,u);if(T.currentISDState[G.id]=G,T.previousISDState&&G.id in T.previousISDState&&T.previousISDState[G.id].plist.length>0&&G.plist.length>1&&G.plist[G.plist.length-2].text===T.previousISDState[G.id].plist[T.previousISDState[G.id].plist.length-1].text){var A=nt.firstElementChild,F=G.plist[G.plist.length-1].after-G.plist[G.plist.length-1].before;A.style.bottom="-"+F+"px",A.style.transition="transform 0.4s",A.style.position="relative",A.style.transform="translateY(-"+F+"px)"}}}else(function(K,Z){if(K&&K.error&&K.error(Z))throw Z})(T.errorHandler,"Error processing ISD element kind: "+L.kind)}function n(T,I,L){return T.style.backgroundColor?(L&&!I.includes(T)&&I.push(T),T.style.backgroundColor):T.parentElement.nodeName==="SPAN"?n(T.parentElement,I,!0):void 0}function d(T,I){if(T.tagName==="SPAN"&&I.tagName==="SPAN"&&T._isd_element===I._isd_element){T.textContent+=I.textContent;for(var L=0;L<I.style.length;L++){var J=I.style[L];(J.indexOf("border")>=0||J.indexOf("padding")>=0||J.indexOf("margin")>=0)&&(T.style[J]=I.style[J])}return I.parentElement.removeChild(I),!0}return!1}function t(T,I){this.id=T,this.plist=I}function r(T,I){var L={before:null,after:null,start:null,end:null};return I.bpd==="tb"?(L.before=T.top,L.after=T.bottom,I.ipd==="lr"?(L.start=T.left,L.end=T.right):(L.start=T.right,L.end=T.left)):I.bpd==="lr"?(L.before=T.left,L.after=T.right,L.start=T.top,L.end=T.bottom):I.bpd==="rl"&&(L.before=T.right,L.after=T.left,L.start=T.top,L.end=T.bottom),L}function f(T,I,L,J){if(I.localName!=="rt"&&I.localName!=="rtc"){var nt,j,O,at,X=I.style.backgroundColor||J;if(I.childElementCount===0)if(I.localName==="span"||I.localName==="rb"){var z=r(I.getBoundingClientRect(),T);if(L.length!==0&&(nt=z.before,j=z.after,O=L[L.length-1].before,at=L[L.length-1].after,j<at&&nt>O||at<=j&&O>=nt)){var vt=Math.sign(z.after-z.before),Mt=Math.sign(z.end-z.start);vt*(z.before-L[L.length-1].before)<0&&(L[L.length-1].before=z.before),vt*(z.after-L[L.length-1].after)>0&&(L[L.length-1].after=z.after),Mt*(z.start-L[L.length-1].start)<0&&(L[L.length-1].start=z.start,L[L.length-1].start_elem=L[L.length-1].elements.length),Mt*(z.end-L[L.length-1].end)>0&&(L[L.length-1].end=z.end,L[L.length-1].end_elem=L[L.length-1].elements.length)}else L.push({before:z.before,after:z.after,start:z.start,end:z.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});L[L.length-1].text+=I.textContent,L[L.length-1].elements.push({node:I,bgcolor:X,before:z.before,after:z.after})}else I.localName==="br"&&L.length!==0&&(L[L.length-1].br=!0);else for(var Pt=I.firstChild;Pt;)Pt.nodeType===Node.ELEMENT_NODE&&(f(T,Pt,L,X),Pt.localName==="ruby"||Pt.localName==="rtc"?L.length>0&&L[L.length-1].rbc.push(Pt):Pt.localName==="span"&&Pt.style[y]&&Pt.style[y]!=="none"&&L.length>0&&L[L.length-1].te.push(Pt)),Pt=Pt.nextSibling}}function o(T,I,L,J){var nt;J.style!=="none"&&(J.style==="auto"?I.style[y]="filled":I.style[y]=J.style+" "+J.symbol,(J.position==="before"||J.position==="after")&&(nt=T.bpd==="tb"?J.position==="before"?"left over":"left under":T.bpd==="rl"?J.position==="before"?"right under":"left under":J.position==="before"?"left under":"right under",I.style[S]=nt))}function g(T,I){this.qname=T,this.map=I}w.render=function(T,I,L,J,nt,j,O,at,X){var z=J||I.clientHeight,vt=nt||I.clientWidth;if(T.aspectRatio!==null){var Mt=z*T.aspectRatio;Mt>vt?z=Math.round(vt/T.aspectRatio):vt=Mt}var Pt=document.createElement("div");Pt.style.position="relative",Pt.style.width=vt+"px",Pt.style.height=z+"px",Pt.style.margin="auto",Pt.style.top=0,Pt.style.bottom=0,Pt.style.left=0,Pt.style.right=0,Pt.style.zIndex=0;var ge={h:z,w:vt,regionH:null,regionW:null,imgResolver:L,displayForcedOnlyMode:j||!1,isd:T,errorHandler:O,previousISDState:at,enableRollUp:X||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(I.appendChild(Pt),"contents"in T)for(var Q=0;Q<T.contents.length;Q++)c(ge,Pt,T.contents[Q],T);return ge.currentISDState};for(var v=[new g("http://www.w3.org/ns/ttml#styling backgroundColor",function(T,I,L,J){J[3]!==0&&(I.style.backgroundColor="rgba("+J[0].toString()+","+J[1].toString()+","+J[2].toString()+","+(J[3]/255).toString()+")")}),new g("http://www.w3.org/ns/ttml#styling color",function(T,I,L,J){I.style.color="rgba("+J[0].toString()+","+J[1].toString()+","+J[2].toString()+","+(J[3]/255).toString()+")"}),new g("http://www.w3.org/ns/ttml#styling direction",function(T,I,L,J){I.style.direction=J}),new g("http://www.w3.org/ns/ttml#styling display",function(T,I,L,J){}),new g("http://www.w3.org/ns/ttml#styling displayAlign",function(T,I,L,J){I.style.display="flex",I.style.flexDirection="column",J==="before"?I.style.justifyContent="flex-start":J==="center"?I.style.justifyContent="center":J==="after"&&(I.style.justifyContent="flex-end")}),new g("http://www.w3.org/ns/ttml#styling extent",function(T,I,L,J){T.regionH=J.h.toUsedLength(T.w,T.h),T.regionW=J.w.toUsedLength(T.w,T.h);var nt=0,j=0,O=L.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];O&&(nt=O[0].toUsedLength(T.w,T.h)+O[2].toUsedLength(T.w,T.h),j=O[1].toUsedLength(T.w,T.h)+O[3].toUsedLength(T.w,T.h)),I.style.height=T.regionH-nt+"px",I.style.width=T.regionW-j+"px"}),new g("http://www.w3.org/ns/ttml#styling fontFamily",function(T,I,L,J){for(var nt=[],j=0;j<J.length;j++)J[j]==="monospaceSerif"?(nt.push("Courier New"),nt.push('"Liberation Mono"'),nt.push("Courier"),nt.push("monospace")):J[j]==="proportionalSansSerif"?(nt.push("Arial"),nt.push("Helvetica"),nt.push('"Liberation Sans"'),nt.push("sans-serif")):J[j]==="monospace"?nt.push("monospace"):J[j]==="sansSerif"?nt.push("sans-serif"):J[j]==="serif"?nt.push("serif"):J[j]==="monospaceSansSerif"?(nt.push("Consolas"),nt.push("monospace")):J[j]==="proportionalSerif"?nt.push("serif"):nt.push(J[j]);if(nt.length>0){for(var O=[nt[0]],at=1;at<nt.length;at++)O.indexOf(nt[at])==-1&&O.push(nt[at]);nt=O}I.style.fontFamily=nt.join(",")}),new g("http://www.w3.org/ns/ttml#styling shear",function(T,I,L,J){if(J!==0){var nt=-.9*J;T.bpd==="tb"?I.style.transform="skewX("+nt+"deg)":I.style.transform="skewY("+nt+"deg)"}}),new g("http://www.w3.org/ns/ttml#styling fontSize",function(T,I,L,J){I.style.fontSize=J.toUsedLength(T.w,T.h)+"px"}),new g("http://www.w3.org/ns/ttml#styling fontStyle",function(T,I,L,J){I.style.fontStyle=J}),new g("http://www.w3.org/ns/ttml#styling fontWeight",function(T,I,L,J){I.style.fontWeight=J}),new g("http://www.w3.org/ns/ttml#styling lineHeight",function(T,I,L,J){I.style.lineHeight=J==="normal"?"normal":J.toUsedLength(T.w,T.h)+"px"}),new g("http://www.w3.org/ns/ttml#styling opacity",function(T,I,L,J){I.style.opacity=J}),new g("http://www.w3.org/ns/ttml#styling origin",function(T,I,L,J){I.style.top=J.h.toUsedLength(T.w,T.h)+"px",I.style.left=J.w.toUsedLength(T.w,T.h)+"px"}),new g("http://www.w3.org/ns/ttml#styling overflow",function(T,I,L,J){I.style.overflow=J}),new g("http://www.w3.org/ns/ttml#styling padding",function(T,I,L,J){var nt=[];nt[0]=J[0].toUsedLength(T.w,T.h)+"px",nt[1]=J[3].toUsedLength(T.w,T.h)+"px",nt[2]=J[2].toUsedLength(T.w,T.h)+"px",nt[3]=J[1].toUsedLength(T.w,T.h)+"px",I.style.padding=nt.join(" ")}),new g("http://www.w3.org/ns/ttml#styling position",function(T,I,L,J){I.style.top=J.h.toUsedLength(T.w,T.h)+"px",I.style.left=J.w.toUsedLength(T.w,T.h)+"px"}),new g("http://www.w3.org/ns/ttml#styling rubyAlign",function(T,I,L,J){I.style.rubyAlign=J==="spaceAround"?"space-around":"center"}),new g("http://www.w3.org/ns/ttml#styling rubyPosition",function(T,I,L,J){var nt;J!=="before"&&J!=="after"||(nt=H?J:T.bpd==="tb"||T.bpd==="rl"?J==="before"?"over":"under":J==="before"?"under":"over",I.parentElement.style[D]=nt)}),new g("http://www.w3.org/ns/ttml#styling showBackground",null),new g("http://www.w3.org/ns/ttml#styling textAlign",function(T,I,L,J){var nt;nt=J==="start"?T.ipd==="rl"?"right":"left":J==="end"?T.ipd==="rl"?"left":"right":J,I.style.textAlign=nt}),new g("http://www.w3.org/ns/ttml#styling textDecoration",function(T,I,L,J){I.style.textDecoration=J.join(" ").replace("lineThrough","line-through")}),new g("http://www.w3.org/ns/ttml#styling textOutline",function(T,I,L,J){}),new g("http://www.w3.org/ns/ttml#styling textShadow",function(T,I,L,J){var nt=L.styleAttrs[h.byName.textOutline.qname];if(J==="none"&&nt==="none")I.style.textShadow="";else{var j=[];if(nt!=="none"){var O="rgba("+nt.color[0].toString()+","+nt.color[1].toString()+","+nt.color[2].toString()+","+(nt.color[3]/255).toString()+")";j.push("1px 1px 1px "+O),j.push("-1px 1px 1px "+O),j.push("1px -1px 1px "+O),j.push("-1px -1px 1px "+O)}if(J!=="none")for(var at=0;at<J.length;at++)j.push(J[at].x_off.toUsedLength(T.w,T.h)+"px "+J[at].y_off.toUsedLength(T.w,T.h)+"px "+J[at].b_radius.toUsedLength(T.w,T.h)+"px rgba("+J[at].color[0].toString()+","+J[at].color[1].toString()+","+J[at].color[2].toString()+","+(J[at].color[3]/255).toString()+")");I.style.textShadow=j.join(",")}}),new g("http://www.w3.org/ns/ttml#styling textCombine",function(T,I,L,J){I.style.textCombineUpright=J}),new g("http://www.w3.org/ns/ttml#styling textEmphasis",function(T,I,L,J){}),new g("http://www.w3.org/ns/ttml#styling unicodeBidi",function(T,I,L,J){var nt;nt=J==="bidiOverride"?"bidi-override":J,I.style.unicodeBidi=nt}),new g("http://www.w3.org/ns/ttml#styling visibility",function(T,I,L,J){I.style.visibility=J}),new g("http://www.w3.org/ns/ttml#styling wrapOption",function(T,I,L,J){J==="wrap"?L.space==="preserve"?I.style.whiteSpace="pre-wrap":I.style.whiteSpace="normal":L.space==="preserve"?I.style.whiteSpace="pre":I.style.whiteSpace="noWrap"}),new g("http://www.w3.org/ns/ttml#styling writingMode",function(T,I,L,J){J==="lrtb"||J==="lr"||J==="rltb"||J==="rl"?I.style.writingMode="horizontal-tb":J==="tblr"?I.style.writingMode="vertical-lr":J!=="tbrl"&&J!=="tb"||(I.style.writingMode="vertical-rl")}),new g("http://www.w3.org/ns/ttml#styling zIndex",function(T,I,L,J){I.style.zIndex=J}),new g("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(T,I,L,J){T.displayForcedOnlyMode&&J===!1&&(I.style.visibility="hidden")})],P={},B=0;B<v.length;B++)P[v[B].qname]=v[B];var H="webkitRubyPosition"in window.getComputedStyle(document.documentElement),D=H?"webkitRubyPosition":"rubyPosition",y="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",S="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})(At,typeof imscNames>"u"?x(55):imscNames,typeof imscStyles>"u"?x(70):imscStyles,typeof imscUtils>"u"?x(56):imscUtils)},function(Ee,At,x){Ee.exports=x(115).polyfill()},function(Ee,At,x){(function(w,b){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var h;h=function(){function c(It){return typeof It=="function"}var n=Array.isArray?Array.isArray:function(It){return Object.prototype.toString.call(It)==="[object Array]"},d=0,t=void 0,r=void 0,f=function(It,Wt){D[d]=It,D[d+1]=Wt,(d+=2)===2&&(r?r(y):J())},o=typeof window<"u"?window:void 0,g=o||{},v=g.MutationObserver||g.WebKitMutationObserver,P=typeof self>"u"&&w!==void 0&&{}.toString.call(w)==="[object process]",B=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function H(){var It=setTimeout;return function(){return It(y,1)}}var D=new Array(1e3);function y(){for(var It=0;It<d;It+=2)(0,D[It])(D[It+1]),D[It]=void 0,D[It+1]=void 0;d=0}var S,T,I,L,J=void 0;function nt(It,Wt){var Yt=this,e=new this.constructor(at);e[O]===void 0&&_e(e);var u=Yt._state;if(u){var l=arguments[u-1];f(function(){return ft(u,e,l,Yt._result)})}else ge(Yt,e,It,Wt);return e}function j(It){if(It&&typeof It=="object"&&It.constructor===this)return It;var Wt=new this(at);return z(Wt,It),Wt}P?J=function(){return w.nextTick(y)}:v?(T=0,I=new v(y),L=document.createTextNode(""),I.observe(L,{characterData:!0}),J=function(){L.data=T=++T%2}):B?((S=new MessageChannel).port1.onmessage=y,J=function(){return S.port2.postMessage(0)}):J=o===void 0?function(){try{var It=Function("return this")().require("vertx");return(t=It.runOnLoop||It.runOnContext)!==void 0?function(){t(y)}:H()}catch{return H()}}():H();var O=Math.random().toString(36).substring(2);function at(){}function X(It,Wt,Yt){Wt.constructor===It.constructor&&Yt===nt&&Wt.constructor.resolve===j?function(e,u){u._state===1?Mt(e,u._result):u._state===2?Pt(e,u._result):ge(u,void 0,function(l){return z(e,l)},function(l){return Pt(e,l)})}(It,Wt):Yt===void 0?Mt(It,Wt):c(Yt)?function(e,u,l){f(function(G){var A=!1,F=function(K,Z,bt,it){try{K.call(Z,bt,it)}catch(ct){return ct}}(l,u,function(K){A||(A=!0,u!==K?z(G,K):Mt(G,K))},function(K){A||(A=!0,Pt(G,K))},G._label);!A&&F&&(A=!0,Pt(G,F))},e)}(It,Wt,Yt):Mt(It,Wt)}function z(It,Wt){if(It===Wt)Pt(It,new TypeError("You cannot resolve a promise with itself"));else if(u=typeof(e=Wt),e===null||u!=="object"&&u!=="function")Mt(It,Wt);else{var Yt=void 0;try{Yt=Wt.then}catch(l){return void Pt(It,l)}X(It,Wt,Yt)}var e,u}function vt(It){It._onerror&&It._onerror(It._result),Q(It)}function Mt(It,Wt){It._state===void 0&&(It._result=Wt,It._state=1,It._subscribers.length!==0&&f(Q,It))}function Pt(It,Wt){It._state===void 0&&(It._state=2,It._result=Wt,f(vt,It))}function ge(It,Wt,Yt,e){var u=It._subscribers,l=u.length;It._onerror=null,u[l]=Wt,u[l+1]=Yt,u[l+2]=e,l===0&&It._state&&f(Q,It)}function Q(It){var Wt=It._subscribers,Yt=It._state;if(Wt.length!==0){for(var e=void 0,u=void 0,l=It._result,G=0;G<Wt.length;G+=3)e=Wt[G],u=Wt[G+Yt],e?ft(Yt,e,u,l):u(l);It._subscribers.length=0}}function ft(It,Wt,Yt,e){var u=c(Yt),l=void 0,G=void 0,A=!0;if(u){try{l=Yt(e)}catch(F){A=!1,G=F}if(Wt===l)return void Pt(Wt,new TypeError("A promises callback cannot return that same promise."))}else l=e;Wt._state!==void 0||(u&&A?z(Wt,l):A===!1?Pt(Wt,G):It===1?Mt(Wt,l):It===2&&Pt(Wt,l))}var Ht=0;function _e(It){It[O]=Ht++,It._state=void 0,It._result=void 0,It._subscribers=[]}var Jt=function(){function It(Wt,Yt){this._instanceConstructor=Wt,this.promise=new Wt(at),this.promise[O]||_e(this.promise),n(Yt)?(this.length=Yt.length,this._remaining=Yt.length,this._result=new Array(this.length),this.length===0?Mt(this.promise,this._result):(this.length=this.length||0,this._enumerate(Yt),this._remaining===0&&Mt(this.promise,this._result))):Pt(this.promise,new Error("Array Methods must be provided an Array"))}return It.prototype._enumerate=function(Wt){for(var Yt=0;this._state===void 0&&Yt<Wt.length;Yt++)this._eachEntry(Wt[Yt],Yt)},It.prototype._eachEntry=function(Wt,Yt){var e=this._instanceConstructor,u=e.resolve;if(u===j){var l=void 0,G=void 0,A=!1;try{l=Wt.then}catch(K){A=!0,G=K}if(l===nt&&Wt._state!==void 0)this._settledAt(Wt._state,Yt,Wt._result);else if(typeof l!="function")this._remaining--,this._result[Yt]=Wt;else if(e===Te){var F=new e(at);A?Pt(F,G):X(F,Wt,l),this._willSettleAt(F,Yt)}else this._willSettleAt(new e(function(K){return K(Wt)}),Yt)}else this._willSettleAt(u(Wt),Yt)},It.prototype._settledAt=function(Wt,Yt,e){var u=this.promise;u._state===void 0&&(this._remaining--,Wt===2?Pt(u,e):this._result[Yt]=e),this._remaining===0&&Mt(u,this._result)},It.prototype._willSettleAt=function(Wt,Yt){var e=this;ge(Wt,void 0,function(u){return e._settledAt(1,Yt,u)},function(u){return e._settledAt(2,Yt,u)})},It}(),Te=function(){function It(Wt){this[O]=Ht++,this._result=this._state=void 0,this._subscribers=[],at!==Wt&&(typeof Wt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof It?function(Yt,e){try{e(function(u){z(Yt,u)},function(u){Pt(Yt,u)})}catch(u){Pt(Yt,u)}}(this,Wt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return It.prototype.catch=function(Wt){return this.then(null,Wt)},It.prototype.finally=function(Wt){var Yt=this.constructor;return c(Wt)?this.then(function(e){return Yt.resolve(Wt()).then(function(){return e})},function(e){return Yt.resolve(Wt()).then(function(){throw e})}):this.then(Wt,Wt)},It}();return Te.prototype.then=nt,Te.all=function(It){return new Jt(this,It).promise},Te.race=function(It){var Wt=this;return n(It)?new Wt(function(Yt,e){for(var u=It.length,l=0;l<u;l++)Wt.resolve(It[l]).then(Yt,e)}):new Wt(function(Yt,e){return e(new TypeError("You must pass an array to race."))})},Te.resolve=j,Te.reject=function(It){var Wt=new this(at);return Pt(Wt,It),Wt},Te._setScheduler=function(It){r=It},Te._setAsap=function(It){f=It},Te._asap=f,Te.polyfill=function(){var It=void 0;if(b!==void 0)It=b;else if(typeof self<"u")It=self;else try{It=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Wt=It.Promise;if(Wt){var Yt=null;try{Yt=Object.prototype.toString.call(Wt.resolve())}catch{}if(Yt==="[object Promise]"&&!Wt.cast)return}It.Promise=Te},Te.Promise=Te,Te},Ee.exports=h()}).call(this,x(26),x(24))},,,,,,,,,,,,function(Ee,At,x){x.r(At),x.d(At,"MediaPlayer",function(){return w.MediaPlayer}),x.d(At,"Protection",function(){return c.default}),x.d(At,"MetricsReporting",function(){return h.default}),x.d(At,"MediaPlayerFactory",function(){return r}),x.d(At,"Debug",function(){return f.a}),x.d(At,"supportsMediaSource",function(){return b.b});var w=x(94),b=x(53),h=x(93),c=x(92),n=x(59),d,t=function(){var o;function g(P,B,H){if(!P||!/^VIDEO$/i.test(P.nodeName))return null;if(P._dashjs_player)return P._dashjs_player;var D,y=P.id||P.name||"video element";if(!(B=B||[].slice.call(P.querySelectorAll("source")).filter(function(S){return S.type=="application/dash+xml"})[0])&&P.src)(B=document.createElement("source")).src=P.src;else if(!B&&!P.src)return null;return H=H||{},(D=Object(n.a)(H).create()).initialize(P,B.src,P.autoplay),o||(o=D.getDebug().getLogger()),o.debug("Converted "+y+" to dash.js player and added content: "+B.src),P._dashjs_player=D,D}function v(P){return/^VIDEO$/i.test(P.nodeName)?P:v(P.parentNode)}return{create:g,createAll:function(P,B){var H=[];P=P||"[data-dashjs-player]";for(var D=(B=B||document).querySelectorAll(P),y=0;y<D.length;y++){var S=g(D[y],null);H.push(S)}for(var T=B.querySelectorAll('source[type="application/dash+xml"]'),I=0;I<T.length;I++){var L=g(v(T[I]),null);H.push(L)}return H}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?t.createAll():d=window.setInterval(function(){window.dashjs&&(window.clearInterval(d),t.createAll())},500):window.addEventListener("load",function o(){window.removeEventListener("load",o),t.createAll()}));var r=t,f=x(6);dashjs.Protection=c.default,dashjs.MetricsReporting=h.default,dashjs.MediaPlayerFactory=r,dashjs.Debug=f.a,dashjs.supportsMediaSource=b.b,At.default=dashjs}]).default})})(Qo);const Zo=Wo(Bi),Jo=Xo({__proto__:null,default:Zo},[Bi]);export{Jo as d};
